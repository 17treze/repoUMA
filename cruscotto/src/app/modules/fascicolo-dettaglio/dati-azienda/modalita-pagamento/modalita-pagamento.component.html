<div class="container px-0">
 <div style="text-align:left">
   <button
    type="button"
    pButton
    icon="pi pi-plus"
    (click)="showDialogToAdd()"
    [disabled]="!fascicoloEditable()"
    label="Aggiungi"></button>
 </div>
 <p-table
    [columns]="cols"
    [value]="listaModalitaPagamento"
    [autoLayout]="true"
    [responsive]="true"
    [(selection)]="selectedModalitaPagamento">
    <ng-template
      pTemplate="header"
      let-columns>
      <tr>
        <th style="display:none;">ID</th>
        <th
          *ngFor="let col of columns"
          [pSortableColumn]="col.field">
          {{col.header}}
          <p-sortIcon
            *ngIf="col.field"
            [field]="col.field"></p-sortIcon>
        </th>
        <th>Azioni</th>
      </tr>
    </ng-template>
    <ng-template
      pTemplate="body"
      let-rowData
      let-columns="columns">
      <tr [pSelectableRow]="rowData">
        <td style="display:none;">{{rowData.id}}</td>
        <td *ngFor="let col of columns">{{rowData[col.field]}}</td>
        <td>
          <button
            type="button"
            pButton
            title="Rimuovi modalitÃ  di pagamento"
            style="background-color: red"
            icon="pi pi-trash"
            (click)="cancellaIBAN(rowData.id, rowData.iban)"
            [disabled]="!fascicoloEditable()"
            label="{{ 'ELIMINA' | translate }}">
            <!-- [disabled]="!fascicoloEditable()" -->
          </button>
        </td>
      </tr>
    </ng-template>
    <ng-template
      pTemplate="summary"
      let-rowData>
      <div class="p-d-flex p-ai-center p-jc-between">{{footerTabella()}}</div>
    </ng-template>
  </p-table>
  <p-dialog
    class="dialog-modalita-pagamento"
    [(visible)]="displayDialog"
    *ngIf="displayDialog"
    [responsive]="true"
    showEffect="fade"
    [modal]="true">
    <p-header>
      {{ 'MODALITA_PAGAMENTO.INSERISCI_MODALITA_PAGAMENTO' | translate }}
    </p-header>
    <p-toast
      key="tst-dialog"
      [style]="{marginTop: '70px'}"></p-toast>
    <form
      *ngIf="modalitaPagamentoFormGroup"
      class="ui-fluid"
      [formGroup]="modalitaPagamentoFormGroup">
      <div class="p-grid">
        <div class="p-col-4 text-uppercase">
          <label for="iban">
            {{ 'MODALITA_PAGAMENTO.IBAN' | translate }} *
          </label>
        </div>
        <div class="p-col-8">
          <div class="p-grid">
            <div class="p-col">
              <input
                size="40"
                class="ui-inputtext ui-widget"
                pInputText
                id="iban"
                [formControl]="modalitaPagamentoFormGroup.controls.iban">
            </div>
          </div>
          <div class="p-grid">
            <div class="p-col">
              <small
                class="p-invalid"
                *ngIf="modalitaPagamentoFormGroup.controls.iban.invalid">
                {{ 'MODALITA_PAGAMENTO.IBAN_OBBLIGATORIO' | translate }}
              </small>
            </div>
          </div>
        </div>
      </div>
    </form>
    <p-footer>
      <div class="ui-dialog-buttonpane ui-helper-clearfix">
        <button
          pButton
          icon="fa ui-icon-check"
          type="submit"
          label="Aggiungi"
          class="button--success"
          (click)="save()"
          [disabled]="!modalitaPagamentoEditable()"></button>
      </div>
    </p-footer>
  </p-dialog>
</div>

<p-toast
  key="tst"
  [style]="{marginTop: '70px'}"></p-toast>

<p-toast
  position="center"
  key="cancellaModalitaPagamento"
  [modal]="true"
  [baseZIndex]="5000">
  <ng-template
    let-message
    pTemplate="message">
    <div style="text-align: center">
      <i
        class="pi pi-exclamation-triangle"
        style="font-size: 3em"></i>
      <h3>{{message.summary}}</h3>
      <p>{{message.detail}}</p>
    </div>
    <div class="ui-g ui-fluid">
      <div class="ui-g-6">
        <button
          type="button"
          pButton
          (click)="deleteRow()"

          label="Si"
          class="ui-button-success">
          <!-- [disabled]="!fascicoloEditable()" -->
        </button>
      </div>
      <div class="ui-g-6">
        <button
          type="button"
          pButton
          (click)="annulla()"
          label="Annulla"
          class="ui-button-secondary"></button>
      </div>
    </div>
  </ng-template>
</p-toast>

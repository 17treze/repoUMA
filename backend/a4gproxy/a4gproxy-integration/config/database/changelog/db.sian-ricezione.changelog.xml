<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.6.xsd">
    
    <changeSet id="PROXY_RICEZIONE_WRT_1.0" author="Daniele Faieta">
        <sql endDelimiter=";" splitStatements="true">
        	GRANT SELECT, INSERT, UPDATE, DELETE ON ANOM_DU_GRAF_SETT_RIC_PRE TO ${user.writer};
        </sql>			
    </changeSet>
    
    <changeSet id="PROXY_RICEZIONE_WRT_1.1" author="Daniele Faieta">
    	<sql endDelimiter=";" splitStatements="true" dbms="oracle">
			GRANT SELECT, INSERT, UPDATE, DELETE ON DATABASECHANGELOG TO ${user.writer};
			GRANT SELECT, INSERT, UPDATE, DELETE ON DATABASECHANGELOGLOCK TO ${user.writer};
		</sql>
	</changeSet>
	
	<changeSet id="PROXY_RICEZIONE_WRT_22.1" author="Lorenzo Martinelli">
		<sql endDelimiter=";" splitStatements="true" dbms="oracle">
			CREATE TABLE ANTIMAFIA_DESC_ESITI
			 (CODICE NUMBER  
			 ,DESCRIZIONE VARCHAR2(500 CHAR)  
			 ,ZONA NUMBER
			 ,DESCRIZIONE_ZONA VARCHAR2(25 CHAR)
			 ,ESITO_INVIO_AGEA VARCHAR2(2 CHAR)
			 ,ESITO_INVIO_BDNA VARCHAR2(2 CHAR)
			 ,CONSTRAINT ANTIMAFIA_DESC_ESITI_PK PRIMARY KEY (CODICE)
			 );

			CREATE TABLE ANTIMAFIA_ESITI
			 (CUAA VARCHAR2(16 CHAR) 
			 ,DATA_ELABORAZIONE DATE 
			 ,ESITO VARCHAR2(2 CHAR)
			 ,CODICE NUMBER
			 ,DESCRIZIONE VARCHAR2(500 CHAR) 
			 ,CONSTRAINT ANTIMAFIA_ESITI_PK PRIMARY KEY (CUAA, DATA_ELABORAZIONE)
			 );
		</sql>
	</changeSet>
	
	<changeSet id="PROXY_RICEZIONE_WRT_22.2" author="Lorenzo Martinelli">
		<sql endDelimiter=";" splitStatements="true" dbms="oracle">
			CREATE TABLE ZAE0INTE_TAB 
			   (ID_INTE NUMBER NOT NULL 
			, CODI_DIVI NUMBER(2, 0) NOT NULL 
			, CODI_SETT NUMBER(2, 0) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE DEFAULT NULL 
			, DESC_RIFE_NORMA VARCHAR2(128 BYTE) 
			, CODI_INTE VARCHAR2(32 BYTE) 
			, DESC_INTE VARCHAR2(150 BYTE) 
			, FLAG_CALC NUMBER(1, 0) DEFAULT NULL NOT NULL 
			, ID_INTE_SUPER NUMBER , 
			PRIMARY KEY (ID_INTE)
			);
			
			CREATE TABLE ZAE0PRSE_TAB 
			   (ID_PROD_SETT NUMBER NOT NULL 
			, ID_INTE NUMBER 
			, CODI_UNIT_MISU CHAR(4 BYTE) 
			, CODI_PROD CHAR(3 BYTE) 
			, CODI_TQUA CHAR(3 BYTE) 
			, CODI_USO CHAR(3 BYTE) 
			, CODI_DSUT CHAR(3 BYTE) 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE 
			, DECO_STAT NUMBER , 
			PRIMARY KEY (ID_PROD_SETT)
			);
			
			CREATE TABLE AABAFMPR_TAB
			   (	  CODI_FMPR CHAR(3 BYTE) NOT NULL,
					  DESC_FMPR VARCHAR2(100 BYTE) NOT NULL,
					  DATA_INIZ_VALI DATE NOT NULL, 
					  DATA_FINE_VALI DATE NOT NULL, 
					  CODI_VISU CHAR(3 BYTE), 
					  PRIMARY KEY (CODI_FMPR)
			);

			CREATE TABLE AABAGNPR_TAB
			   (	    CODI_GNPR CHAR(3 BYTE) NOT NULL 
			, DESC_GNPR VARCHAR2(100 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL 
			, CODI_VISU CHAR(3 BYTE), 
			PRIMARY KEY (CODI_GNPR)
			);

			CREATE TABLE AABASPPR_TAB
			   (	      CODI_SPPR CHAR(3 BYTE) NOT NULL 
			, DESC_SPPR VARCHAR2(50 BYTE) NOT NULL 
			, CODI_VISU CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL, 
			PRIMARY KEY (CODI_SPPR)
			);

			CREATE TABLE AABAAFGS_TAB
			   (	        CODI_FMPR CHAR(3 BYTE) NOT NULL 
			, CODI_GNPR CHAR(3 BYTE) NOT NULL 
			, CODI_SPPR CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL ,
			PRIMARY KEY (CODI_FMPR,CODI_GNPR,CODI_SPPR,DATA_INIZ_VALI)
			);

			CREATE TABLE AABAPFGS_TAB
			   (	         ID_PFGS NUMBER NOT NULL 
			, CODI_PROD CHAR(3 BYTE) NOT NULL 
			, CODI_DSUT CHAR(3 BYTE) NOT NULL 
			, CODI_USO CHAR(3 BYTE) NOT NULL 
			, CODI_TQUA CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL 
			, CODI_FMPR CHAR(3 BYTE) NOT NULL 
			, CODI_GEN CHAR(3 BYTE) NOT NULL 
			, CODI_SPEC CHAR(3 BYTE) NOT NULL, 
			PRIMARY KEY (    ID_PFGS 
			  , CODI_FMPR 
			  , CODI_GEN 
			  , CODI_SPEC )
			);

			CREATE TABLE AABALVNR_TAB
			   (	         CODI_LIVE VARCHAR2(10 BYTE) NOT NULL 
			, DESC_LIVE VARCHAR2(250 BYTE) NOT NULL 
			, DESC_LIVE_INDE VARCHAR2(10 BYTE) NOT NULL 
			, CODI_LIVE_RIFE VARCHAR2(10 BYTE) 
			, DESC_NORMA_LIVE VARCHAR2(1000 BYTE) 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL ,
			PRIMARY KEY (    CODI_LIVE )
			);
			
			CREATE TABLE AABAPROD_TAB
			   (	         CODI_PROD CHAR(3 BYTE) NOT NULL 
			, DESC_PROD VARCHAR2(200 BYTE) NOT NULL 
			, FATT_CONV NUMBER(4, 2) 
			, FATT_POND NUMBER(4, 2) 
			, FLAG_SEMI CHAR(1 BYTE) 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL 
			, CODI_FMPR CHAR(3 BYTE) 
			, CODI_GNPR CHAR(3 BYTE) 
			, CODI_SPPR CHAR(3 BYTE) 
			, DATA_INIZ_VALI_FGS DATE 
			, CODI_TRPG CHAR(3 BYTE) 
			, DECO_INPR NUMBER(8, 0) ,
			PRIMARY KEY (    CODI_PROD, DATA_INIZ_VALI )
			);

			CREATE TABLE AABAPRCA_TAB
			   (	        ID_CATA NUMBER(12, 0) NOT NULL 
			, CODI_PROD CHAR(3 BYTE) NOT NULL 
			, CODI_TQUA CHAR(3 BYTE) NOT NULL 
			, CODI_USO CHAR(3 BYTE) NOT NULL 
			, CODI_DSUT CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL 
			, PERC_TARA NUMBER(8, 4) 
			, CODI_LIVE VARCHAR2(10 BYTE) NOT NULL 
			, DATA_INIZ_AMMI DATE 
			, DATA_FINE_AMMI DATE 
			, ANNO_INIZ_VALI CHAR(4 BYTE) 
			, ANNO_FINE_VALI CHAR(4 BYTE), 
			PRIMARY KEY (     ID_CATA 
			  , CODI_PROD 
			  , CODI_TQUA 
			  , CODI_USO 
			  , CODI_DSUT 
			  , DATA_INIZ_VALI 
			  , CODI_LIVE  )
			);

			CREATE TABLE AABADSUT_TAB
			   (	        CODI_DSUT CHAR(3 BYTE) NOT NULL 
			, DESC_DSUT VARCHAR2(100 BYTE) NOT NULL 
			, STAT_SEMI CHAR(1 BYTE) 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL , 
			PRIMARY KEY (     CODI_DSUT )
			);
			
			CREATE TABLE AABATUSO_TAB
			   (CODI_USO CHAR(3 BYTE) NOT NULL 
			, DESC_USO VARCHAR2(200 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL 
			, CODIVISU CHAR(3 BYTE)  , 
			PRIMARY KEY (     CODI_USO )
			);

			CREATE TABLE AABATQUA_TAB
			   (CODI_TQUA CHAR(3 BYTE) NOT NULL 
			, DESC_TQUA VARCHAR2(150 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, DATA_FINE_VALI DATE NOT NULL  , 
			PRIMARY KEY (     CODI_TQUA )
			);

			CREATE TABLE AABAVRPR_TAB
			   (CODI_PROD CHAR(3 BYTE) NOT NULL 
			, CODI_VRPR CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE DEFAULT SYSDATE NOT NULL 
			, DATA_FINE_VALI DATE DEFAULT TO_DATE('31/12/9999','DD/MM/YYYY') NOT NULL 
			, DESC_VRPR VARCHAR2(100 BYTE) NOT NULL 
			, CODI_PROD_OLD CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI_OLD DATE NOT NULL , 
			PRIMARY KEY (      CODI_PROD 
			  , CODI_VRPR 
			  , DATA_INIZ_VALI 
			  , CODI_PROD_OLD 
			  , DATA_INIZ_VALI_OLD  )
			);

			CREATE TABLE AABAQUVR_TAB
			   (CODI_PROD CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI DATE NOT NULL 
			, CODI_TQUA CHAR(3 BYTE) NOT NULL 
			, CODI_USO CHAR(3 BYTE) NOT NULL 
			, CODI_DSUT CHAR(3 BYTE) NOT NULL 
			, CODI_VRPR CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_AMMI DATE 
			, DATA_FINE_AMMI DATE 
			, CODI_PROD_OLD CHAR(3 BYTE) NOT NULL 
			, DATA_INIZ_VALI_OLD DATE NOT NULL , 
			PRIMARY KEY (  CODI_PROD 
			  , DATA_INIZ_VALI 
			  , CODI_TQUA 
			  , CODI_USO 
			  , CODI_DSUT 
			  , CODI_VRPR 
			  , CODI_PROD_OLD 
			  , DATA_INIZ_VALI_OLD  )
			);
		</sql>
	</changeSet>
	
	<changeSet id="PROXY_RICEZIONE_WRT_22.3" author="Lorenzo Martinelli" labels="PROD">
		<sql endDelimiter=";" splitStatements="true" dbms="oracle">
			GRANT SELECT ON ANTIMAFIA_DESC_ESITI TO ORACAPTL;
			GRANT SELECT ON ANTIMAFIA_ESITI TO ORACAPTL;
		</sql>
	</changeSet>
	
	<changeSet id="PROXY_RICEZIONE_WRT_22.4" author="Lorenzo Martinelli" labels="PROD">
		<sql endDelimiter=";" splitStatements="true" dbms="oracle">
			GRANT SELECT ON ZAE0INTE_TAB TO ORACAPTL;
			GRANT SELECT ON ZAE0PRSE_TAB TO ORACAPTL;
			GRANT SELECT ON AABAFMPR_TAB TO ORACAPTL;
			GRANT SELECT ON AABAGNPR_TAB TO ORACAPTL;
			GRANT SELECT ON AABASPPR_TAB TO ORACAPTL;
			GRANT SELECT ON AABAAFGS_TAB TO ORACAPTL;
			GRANT SELECT ON AABAPFGS_TAB TO ORACAPTL;
			GRANT SELECT ON AABALVNR_TAB TO ORACAPTL;
			GRANT SELECT ON AABAPROD_TAB TO ORACAPTL;
			GRANT SELECT ON AABAPRCA_TAB TO ORACAPTL;
			GRANT SELECT ON AABADSUT_TAB TO ORACAPTL;
			GRANT SELECT ON AABATUSO_TAB TO ORACAPTL;
			GRANT SELECT ON AABATQUA_TAB TO ORACAPTL;
			GRANT SELECT ON AABAVRPR_TAB TO ORACAPTL;
			GRANT SELECT ON AABAQUVR_TAB TO ORACAPTL;
		</sql>
	</changeSet>
	
	<changeSet id="PROXY_RICEZIONE_WRT_23.1" author="Lorenzo Martinelli" dbms="oracle">
		<sql endDelimiter=";" splitStatements="true">
			GRANT SELECT ON ANTIMAFIA_DESC_ESITI TO ${user.writer};
			GRANT SELECT ON ANTIMAFIA_ESITI TO ${user.writer};
		</sql>
	</changeSet>

</databaseChangeLog>
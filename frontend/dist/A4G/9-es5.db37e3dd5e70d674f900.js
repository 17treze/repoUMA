function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{WPaq:function(e,t,a){"use strict";a.r(t),a.d(t,"RichiesteRevocaMandatoModule",(function(){return ge}));var i=a("XNiG"),c=a("1G5W"),n=a("qXBG"),o=a("fXoL"),s=a("tyNb"),r=a("rgW5"),l=a("ofXK"),b=a("RtSl"),u=a("Tn7N"),d=a("OSEj"),f=a("G6y3"),v=a("arS9"),h=a("A+aF"),m=a("3Pt+"),p=a("A1Yd"),g=a("sYmb");function T(e,t){if(1&e){var a=o.Ub();o.Tb(0,"div",4),o.Tb(1,"p-dialog",5,6),o.bc("visibleChange",(function(e){return o.Ec(a),o.fc().display=e})),o.gc(3,"translate"),o.Tb(4,"div",7),o.Tb(5,"div",8),o.Tb(6,"h6"),o.Oc(7),o.gc(8,"translate"),o.Tb(9,"strong"),o.Oc(10),o.Sb(),o.Oc(11," a "),o.Tb(12,"strong"),o.Oc(13),o.Sb(),o.Sb(),o.Sb(),o.Tb(14,"div",9),o.Tb(15,"h6",10),o.Tb(16,"strong"),o.Oc(17),o.gc(18,"translate"),o.Sb(),o.Sb(),o.Tb(19,"div"),o.Tb(20,"textarea",11),o.bc("ngModelChange",(function(e){return o.Ec(a),o.fc().motivoRifiuto=e})),o.gc(21,"translate"),o.Oc(22,"          "),o.Sb(),o.Sb(),o.Sb(),o.Ob(23,"hr"),o.Tb(24,"div",12),o.Tb(25,"button",13),o.bc("click",(function(){return o.Ec(a),o.fc().rifiutaRevocaImmediata()})),o.gc(26,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&e){var i=o.fc();o.Bb(1),o.nc("header",o.hc(3,14,"REVOCA_MANDATO_DLG.RIFIUTA_REVOCA_MANDATO")),o.mc("visible",i.display)("dismissableMask",!0)("modal",!0)("focusOnShow",!1)("closable",!0)("closeOnEscape",!0),o.Bb(6),o.Qc(" ",o.hc(8,16,"REVOCA_MANDATO_DLG.STAI_PER_RIFIUTARE")," "),o.Bb(3),o.Qc(" ",i.richiestaRevocaImmediata.denominazioneAzienda," "),o.Bb(3),o.Qc(" ",i.richiestaRevocaImmediata.denominazioneSportelloCaa," "),o.Bb(4),o.Qc(" ",o.hc(18,18,"REVOCA_MANDATO_DLG.MOTIVO_RIFIUTO")," "),o.Bb(3),o.nc("placeholder",o.hc(21,20,"REVOCA_MANDATO_DLG.INDICA_MOTIVAZIONI_RIFIUTO")),o.mc("ngModel",i.motivoRifiuto),o.Bb(5),o.nc("label",o.hc(26,22,"REVOCA_MANDATO_DLG.RIFIUTA_REVOCA_IMMEDIATA"))}}function S(e,t){if(1&e){var a=o.Ub();o.Tb(0,"div",14),o.Ob(1,"i",15),o.Tb(2,"h3"),o.Oc(3),o.Sb(),o.Tb(4,"p"),o.Oc(5),o.Sb(),o.Sb(),o.Tb(6,"div",16),o.Tb(7,"div",17),o.Tb(8,"button",18),o.bc("click",(function(){return o.Ec(a),o.fc().confirm()})),o.Sb(),o.Sb(),o.Tb(9,"div",17),o.Tb(10,"button",19),o.bc("click",(function(){return o.Ec(a),o.fc().reject()})),o.Sb(),o.Sb(),o.Sb()}if(2&e){var i=t.$implicit;o.Bb(3),o.Pc(i.summary),o.Bb(2),o.Pc(i.detail)}}var A,R,I=function(){return{marginTop:"70px"}},O=((R=function(){function e(t,a){_classCallCheck(this,e),this.messageService=t,this.mandatoService=a,this.displayChange=new o.n,this.displayRifiutoDialog=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onOpen",value:function(e){this.display=!0,this.motivoRifiuto=null,this.richiestaRevocaImmediata=e}},{key:"onClose",value:function(){this.display=!1,this.displayChange.emit(!1)}},{key:"rifiutaRevocaImmediata",value:function(){d.a.isNotEmpty(this.motivoRifiuto)?this.rifiuta():this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.error,u.a.notFoundMotivazioneRifiuto))}},{key:"rifiuta",value:function(){this.messageService.add(u.a.getToast("checkRifiuto",u.b.warn,u.a.checkRifiutoRichiestaRevocaImmediata))}},{key:"confirm",value:function(){this.putRifiutaRichiestaRevocaImmediata(this.richiestaRevocaImmediata.cuaa,this.motivoRifiuto)}},{key:"reject",value:function(){this.messageService.clear("checkRifiuto")}},{key:"putRifiutaRichiestaRevocaImmediata",value:function(e,t){var a=this;this.mandatoService.putRifiutaRichiestaRevocaImmediata(e,t).subscribe((function(e){"OK"===e.esito&&(a.esitoOk(),a.messageService.clear("checkRifiuto"),a.onClose()),"NON_BLOCCANTE"===e.esito&&(a.esitoNonBloccante(e.responseList),a.messageService.clear("checkRifiuto"),a.onClose()),"KO"===e.esito&&a.esitoBloccante()}),(function(e){a.messageService.clear("checkRifiuto"),a.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.error,u.a.modificaNonSalvata))}))}},{key:"esitoOk",value:function(){this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.success,u.a.OPERAZIONE_OK)),this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.success,u.a.notificaAziendaInviata)),this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.success,u.a.notificaAppagInviata))}},{key:"esitoNonBloccante",value:function(e){this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.success,u.a.OPERAZIONE_OK)),e.includes("NOTIFICA_TITOLARE_FALLITA")?this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.warn,u.a.notificaAziendaFallita)):this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.success,u.a.notificaAziendaInviata)),e.includes("NOTIFICA_APPAG_FALLITA")?this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.warn,u.a.notificaAppagFallita)):this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.success,u.a.notificaAppagInviata))}},{key:"esitoBloccante",value:function(){this.messageService.add(u.a.getToast("tst-rifiutoDialog",u.b.error,u.a.modificaNonSalvata))}}]),e}()).\u0275fac=function(e){return new(e||R)(o.Nb(b.d),o.Nb(f.a))},R.\u0275cmp=o.Hb({type:R,selectors:[["app-richiesta-revoca-mandato-rifiuto-dialog"]],outputs:{displayChange:"displayChange"},decls:4,vars:7,consts:[["id","confirm",4,"ngIf"],["key","tst-rifiutoDialog",3,"baseZIndex"],["position","center","key","checkRifiuto",3,"modal","baseZIndex"],["pTemplate","message"],["id","confirm"],["width","710","appendTo","body",3,"visible","header","dismissableMask","modal","focusOnShow","closable","closeOnEscape","visibleChange"],["rifiutoDialog",""],[1,"popup-approvazione","popup--custom"],[1,"mb-4"],[1,"boxgrey","p-3","mb-3"],[1,"mb-3"],["rows","6","cols","30","pInputTextarea","","id","mail","type","text","autoResize","true","required","",2,"width","-webkit-fill-available",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","justify-content-end"],["pButton","","icon","pi pi-ban","type","submit",1,"button--rifiuta",3,"label","click"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(e,t){1&e&&(o.Mc(0,T,27,24,"div",0),o.Ob(1,"p-toast",1),o.Tb(2,"p-toast",2),o.Mc(3,S,11,2,"ng-template",3),o.Sb()),2&e&&(o.mc("ngIf",t.richiestaRevocaImmediata),o.Bb(1),o.Kc(o.rc(6,I)),o.mc("baseZIndex",5e3),o.Bb(1),o.mc("modal",!0)("baseZIndex",5e3))},directives:[l.t,v.a,b.e,h.a,m.c,m.D,m.s,m.v,p.b],pipes:[g.d],styles:[""]}),R),y=((A=function(){function e(){_classCallCheck(this,e),this.subject=new i.a}return _createClass(e,[{key:"sendEvent",value:function(e){this.subject.next(e)}},{key:"getEventObservable",value:function(){return this.subject.asObservable()}}]),e}()).\u0275fac=function(e){return new(e||A)},A.\u0275prov=o.Jb({token:A,factory:A.\u0275fac}),A),C=["rifiutoDialog"];function E(e,t){if(1&e&&(o.Tb(0,"div",20),o.Tb(1,"span",12),o.Tb(2,"strong"),o.Oc(3),o.gc(4,"translate"),o.Sb(),o.Sb(),o.Tb(5,"span",12),o.Oc(6),o.Sb(),o.Sb()),2&e){var a=o.fc().$implicit;o.Bb(3),o.Pc(o.hc(4,2,"RICHIESTA_REVOCA_IMMEDIATA.CAUSA_REVOCA")),o.Bb(3),o.Pc(a.causaRichiesta)}}function k(e,t){if(1&e){var a=o.Ub();o.Tb(0,"div"),o.Tb(1,"div",7),o.Tb(2,"div",8),o.Tb(3,"h3",9),o.Oc(4),o.Sb(),o.Sb(),o.Tb(5,"div",10),o.Tb(6,"div",11),o.Tb(7,"span",12),o.Tb(8,"strong"),o.Oc(9),o.gc(10,"translate"),o.Sb(),o.Sb(),o.Tb(11,"span",12),o.Oc(12),o.Sb(),o.Sb(),o.Tb(13,"div",11),o.Tb(14,"span",12),o.Tb(15,"strong"),o.Oc(16),o.gc(17,"translate"),o.Sb(),o.Sb(),o.Tb(18,"span",12),o.Oc(19),o.Sb(),o.Sb(),o.Tb(20,"div",11),o.Tb(21,"span",12),o.Tb(22,"strong"),o.Oc(23),o.gc(24,"translate"),o.Sb(),o.Sb(),o.Tb(25,"span",12),o.Oc(26),o.gc(27,"date"),o.Sb(),o.Sb(),o.Tb(28,"div",11),o.Tb(29,"span",12),o.Tb(30,"strong"),o.Oc(31),o.gc(32,"translate"),o.Sb(),o.Sb(),o.Tb(33,"span",12),o.Oc(34),o.Sb(),o.Sb(),o.Mc(35,E,7,4,"div",13),o.Sb(),o.Ob(36,"HR"),o.Tb(37,"div",14),o.Tb(38,"h5"),o.Tb(39,"strong"),o.Tb(40,"img",15),o.bc("click",(function(){o.Ec(a);var e=t.$implicit;return o.fc(2).scaricaRevocaImmediata(e.idProtocollo)})),o.Sb(),o.Tb(41,"a",16),o.bc("click",(function(){o.Ec(a);var e=t.$implicit;return o.fc(2).scaricaRevocaImmediata(e.idProtocollo)})),o.Oc(42),o.gc(43,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(44,"div",17),o.Tb(45,"button",18),o.bc("click",(function(){o.Ec(a);var e=t.$implicit;return o.fc(2).showDialog(e)})),o.gc(46,"translate"),o.Sb(),o.Sb(),o.Tb(47,"div",17),o.Tb(48,"button",19),o.bc("click",(function(){o.Ec(a);var e=t.$implicit;return o.fc(2).accettaRichiesta(e.cuaa)})),o.gc(49,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Ob(50,"br"),o.Sb()}if(2&e){var i=t.$implicit;o.Bb(4),o.Pc(i.denominazioneAzienda),o.Bb(5),o.Pc(o.hc(10,13,"RICHIESTA_REVOCA_IMMEDIATA.CUAA")),o.Bb(3),o.Pc(i.cuaa),o.Bb(4),o.Pc(o.hc(17,15,"RICHIESTA_REVOCA_IMMEDIATA.SEDE_AMMINISTRATIVA")),o.Bb(3),o.Pc(i.denominazioneSedeAmministrativaCaa),o.Bb(4),o.Pc(o.hc(24,17,"RICHIESTA_REVOCA_IMMEDIATA.DATA_RICHIESTA")),o.Bb(3),o.Pc(o.ic(27,19,i.dataSottoscrizione,"dd/MM/yyyy")),o.Bb(5),o.Pc(o.hc(32,22,"RICHIESTA_REVOCA_IMMEDIATA.SEDE_SPORTELLO")),o.Bb(3),o.Pc(i.denominazioneSportelloCaa),o.Bb(1),o.mc("ngIf",i.causaRichiesta),o.Bb(7),o.Qc(" ",o.hc(43,24,"RICHIESTA_REVOCA_IMMEDIATA.DESC_SCARICA_DOC_REVOCA")," "),o.Bb(3),o.nc("label",o.hc(46,26,"RICHIESTA_REVOCA_IMMEDIATA.RIFIUTA")),o.Bb(3),o.nc("label",o.hc(49,28,"RICHIESTA_REVOCA_IMMEDIATA.ACCETTA"))}}function D(e,t){if(1&e&&(o.Tb(0,"div"),o.Mc(1,k,51,30,"div",6),o.Sb()),2&e){var a=o.fc();o.Bb(1),o.mc("ngForOf",a.richiesteDaValutare)}}function _(e,t){1&e&&(o.Tb(0,"div"),o.Tb(1,"div",7),o.Tb(2,"div",8),o.Tb(3,"h3",9),o.Oc(4),o.gc(5,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(4),o.Pc(o.hc(5,1,"RICHIESTA_REVOCA_IMMEDIATA.NESSUNA_REVOCA_DA_VALUTARE")))}function B(e,t){if(1&e){var a=o.Ub();o.Tb(0,"div",21),o.Ob(1,"i",22),o.Tb(2,"h3"),o.Oc(3),o.Sb(),o.Tb(4,"p"),o.Oc(5),o.Sb(),o.Sb(),o.Tb(6,"div",23),o.Tb(7,"div",24),o.Tb(8,"button",25),o.bc("click",(function(){return o.Ec(a),o.fc().confermaRevoca()})),o.Sb(),o.Sb(),o.Tb(9,"div",24),o.Tb(10,"button",26),o.bc("click",(function(){return o.Ec(a),o.fc().annulla()})),o.Sb(),o.Sb(),o.Sb()}if(2&e){var i=t.$implicit;o.Bb(3),o.Pc(i.summary),o.Bb(2),o.Pc(i.detail)}}var M,P=function(){return{marginTop:"70px"}},w=((M=function(){function e(t,a,i,c){_classCallCheck(this,e),this.route=t,this.mandatoService=a,this.messageService=i,this.richiestaValutataEventService=c}return _createClass(e,[{key:"ngOnInit",value:function(){this.getRichiesteDaValutare(!1)}},{key:"getRichiesteDaValutare",value:function(e){var t=this;this.richiestePresenti=!0,this.mandatoService.getRichiesteRevocheImmediate(e).subscribe((function(e){t.richiesteDaValutare=e,t.richiesteDaValutare&&0!==t.richiesteDaValutare.length||(t.richiestePresenti=!1)}),(function(e){t.richiestePresenti=!1,t.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreRecuperoDati))}))}},{key:"showDialog",value:function(e){this.rifiutoDialog.onOpen(e)}},{key:"onDialogClose",value:function(e){this.getRichiesteDaValutare(!1),this.richiestaValutataEventService.sendEvent(!0)}},{key:"accettaRichiesta",value:function(e){this.cuaaDaAccettare=e,this.messageService.add(u.a.getToast("accettaRichiestaRevocaImmediata",u.b.warn,u.a.checkAccettaRichiestaRevocaImmediata))}},{key:"scaricaRevocaImmediata",value:function(e){console.log("scarica revoca immediata"),this.scaricaRevocaImmediataFile(e)}},{key:"scaricaRevocaImmediataFile",value:function(e){var t=this;this.mandatoService.getRevocaImmediataFile(e).subscribe((function(e){t.revocaImmediataFile=new Blob([e],{type:"application/pdf"}),t.visualizzaRevocaImmediata()}),(function(e){t.revocaImmediataFile=null}))}},{key:"visualizzaRevocaImmediata",value:function(){if(null!=this.revocaImmediataFile){var e=URL.createObjectURL(this.revocaImmediataFile);window.open(e)}else this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreVisualizzazioneRevocaImmediata))}},{key:"confermaRevoca",value:function(){console.log("richiesta accettata"),this.messageService.clear("accettaRichiestaRevocaImmediata"),this.putAccettaRichiestaRevocaImmediata()}},{key:"annulla",value:function(){console.log("annulla comando"),this.messageService.clear("accettaRichiestaRevocaImmediata")}},{key:"putAccettaRichiestaRevocaImmediata",value:function(){var e=this;this.mandatoService.putAccettaRichiestaRevocaImmediata(this.cuaaDaAccettare).subscribe((function(t){"OK"===t.esito&&(e.esitoOk(),e.getRichiesteDaValutare(!1),e.richiestaValutataEventService.sendEvent(!0)),"NON_BLOCCANTE"===t.esito&&(e.esitoNonBloccante(t.responseList),e.getRichiesteDaValutare(!1),e.richiestaValutataEventService.sendEvent(!0)),"KO"===t.esito&&e.esitoBloccante()}),(function(t){e.messageService.add(u.a.getToast("tst",u.b.error,u.a.modificaNonSalvata))}))}},{key:"esitoOk",value:function(){this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK)),this.messageService.add(u.a.getToast("tst",u.b.success,u.a.notificaAziendaInviata)),this.messageService.add(u.a.getToast("tst",u.b.success,u.a.notificaAppagInviata))}},{key:"esitoNonBloccante",value:function(e){this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK)),e.includes("NOTIFICA_TITOLARE_FALLITA")?this.messageService.add(u.a.getToast("tst",u.b.warn,u.a.notificaAziendaFallita)):this.messageService.add(u.a.getToast("tst",u.b.success,u.a.notificaAziendaInviata)),e.includes("NOTIFICA_APPAG_FALLITA")?this.messageService.add(u.a.getToast("tst",u.b.warn,u.a.notificaAppagFallita)):this.messageService.add(u.a.getToast("tst",u.b.success,u.a.notificaAppagInviata))}},{key:"esitoBloccante",value:function(){this.messageService.add(u.a.getToast("tst",u.b.error,u.a.modificaNonSalvata))}}]),e}()).\u0275fac=function(e){return new(e||M)(o.Nb(s.a),o.Nb(f.a),o.Nb(b.d),o.Nb(y))},M.\u0275cmp=o.Hb({type:M,selectors:[["app-richiesta-revoca-mandato-da-valutare"]],viewQuery:function(e,t){var a;1&e&&o.Jc(C,!0),2&e&&o.Ac(a=o.cc())&&(t.rifiutoDialog=a.first)},decls:7,vars:7,consts:[["key","tst"],[4,"ngIf"],[3,"displayChange"],["rifiutoDialog",""],["position","center","key","accettaRichiestaRevocaImmediata",3,"modal","baseZIndex"],["pTemplate","message"],[4,"ngFor","ngForOf"],[1,"boxgrey",2,"display","inline-block"],[1,"d-flex","align-items-center","mb-3"],[1,"mr-auto","mb-0","pb-0"],[1,"row","row--edit"],[1,"col-6","d-flex","align-items-center"],[1,"mr-auto","w-75"],["class","col-12  d-flex  align-items-center",4,"ngIf"],[1,"ui-g-8"],["src","assets/img/icons/icon-download.png",1,"box__icon",3,"click"],[2,"text-decoration","none",3,"routerLink","click"],[1,"ui-g-2",2,"text-align","right"],["pButton","","icon","ui-icon-block","pButton","",2,"background-color","red",3,"label","click"],["pButton","","icon","ui-icon-done","type","button","pButton","",3,"label","click"],[1,"col-12","d-flex","align-items-center"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(e,t){1&e&&(o.Ob(0,"p-toast",0),o.Mc(1,D,2,1,"div",1),o.Mc(2,_,6,3,"div",1),o.Tb(3,"app-richiesta-revoca-mandato-rifiuto-dialog",2,3),o.bc("displayChange",(function(e){return t.onDialogClose(e)})),o.Sb(),o.Tb(5,"p-toast",4),o.Mc(6,B,11,2,"ng-template",5),o.Sb()),2&e&&(o.Kc(o.rc(6,P)),o.Bb(1),o.mc("ngIf",t.richiestePresenti),o.Bb(1),o.mc("ngIf",!t.richiestePresenti),o.Bb(3),o.mc("modal",!0)("baseZIndex",5e3))},directives:[v.a,l.t,O,b.e,l.s,s.h,p.b],pipes:[g.d,l.f],styles:[""]}),M),V=a("SCyD"),z=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isAccettata",value:function(e){return e===V.c.ACCETTATA}},{key:"isRifiutata",value:function(e){return e===V.c.RIFIUTATA}}]),e}();a("Rt+w");var N=a("t5SA"),L=a("6b9K"),x=a("69Tm"),F=a("JEAp"),U=a("yWug"),$=["table"];function K(e,t){if(1&e&&o.Ob(0,"p-sortIcon",15),2&e){var a=o.fc().$implicit;o.mc("field",a.field)}}function H(e,t){if(1&e&&(o.Tb(0,"th",13),o.Tb(1,"strong"),o.Oc(2),o.Sb(),o.Mc(3,K,1,1,"p-sortIcon",14),o.Sb()),2&e){var a=t.$implicit;o.mc("pSortableColumn",a.field)("pSortableColumnDisabled",null==a.field),o.Bb(2),o.Pc(a.header),o.Bb(1),o.mc("ngIf",a.field)}}function j(e,t){if(1&e&&(o.Tb(0,"tr"),o.Mc(1,H,4,4,"th",12),o.Sb()),2&e){var a=t.$implicit;o.Bb(1),o.mc("ngForOf",a)}}function G(e,t){1&e&&o.Ob(0,"i",26)}function Q(e,t){1&e&&o.Ob(0,"i",27)}var Z=function(){return{backgroundColor:"white"}};function q(e,t){if(1&e){var a=o.Ub();o.Tb(0,"tr",16),o.Tb(1,"td"),o.Tb(2,"a",17),o.Ob(3,"i",18),o.Sb(),o.Sb(),o.Tb(4,"td"),o.Oc(5),o.Sb(),o.Tb(6,"td"),o.Oc(7),o.Sb(),o.Tb(8,"td"),o.Oc(9),o.Sb(),o.Tb(10,"td"),o.Oc(11),o.Sb(),o.Tb(12,"td"),o.Oc(13),o.gc(14,"date"),o.Sb(),o.Tb(15,"td",19),o.Tb(16,"div",20),o.Tb(17,"div"),o.Mc(18,G,1,0,"i",21),o.Mc(19,Q,1,0,"i",22),o.Sb(),o.Sb(),o.Sb(),o.Tb(20,"td",19),o.Tb(21,"div",23),o.Tb(22,"div"),o.Tb(23,"p-button",24),o.bc("click",(function(){o.Ec(a);var e=t.$implicit;return o.fc().downloadRichiesta(e)})),o.Ob(24,"i",25),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&e){var i=t.$implicit,c=t.expanded,n=o.fc();o.mc("pSelectableRow",i),o.Bb(2),o.mc("pRowToggler",i),o.Bb(1),o.mc("ngClass",c?"pi pi-chevron-down":"pi pi-chevron-right"),o.Bb(2),o.Pc(i.cuaa),o.Bb(2),o.Pc(i.denominazioneAzienda),o.Bb(2),o.Pc(i.denominazioneSportelloCaa),o.Bb(2),o.Pc(i.sedeSportelloCaa),o.Bb(2),o.Qc(" ",o.ic(14,12,i.dataSottoscrizione,"dd-MM-yyyy")," "),o.Bb(5),o.mc("ngIf",n.richiestaRevocaSupport.isAccettata(i.esito)),o.Bb(1),o.mc("ngIf",n.richiestaRevocaSupport.isRifiutata(i.esito)),o.Bb(4),o.Kc(o.rc(15,Z))}}function J(e,t){1&e&&(o.Tb(0,"th"),o.Oc(1," Dati richiesta revoca immediata accettata:"),o.Sb())}function W(e,t){1&e&&(o.Tb(0,"th"),o.Oc(1," Dati richiesta revoca immediata rifiutata:"),o.Sb())}function X(e,t){1&e&&(o.Tb(0,"td"),o.Oc(1," Motivo accettazione:"),o.Sb())}function Y(e,t){1&e&&(o.Tb(0,"td"),o.Oc(1," Motivo rifiuto:"),o.Sb())}function ee(e,t){1&e&&(o.Tb(0,"td"),o.Oc(1," Data accettazione:"),o.Sb())}function te(e,t){1&e&&(o.Tb(0,"td"),o.Oc(1," Data rifiuto:"),o.Sb())}function ae(e,t){if(1&e&&(o.Tb(0,"tr"),o.Tb(1,"td"),o.Tb(2,"tbody"),o.Tb(3,"tr"),o.Mc(4,J,2,0,"th",29),o.Mc(5,W,2,0,"th",29),o.Ob(6,"th"),o.Sb(),o.Tb(7,"tr"),o.Mc(8,X,2,0,"td",29),o.Mc(9,Y,2,0,"td",29),o.Tb(10,"td"),o.Oc(11),o.gc(12,"translate"),o.Sb(),o.Sb(),o.Tb(13,"tr"),o.Mc(14,ee,2,0,"td",29),o.Mc(15,te,2,0,"td",29),o.Tb(16,"td"),o.Oc(17),o.gc(18,"date"),o.gc(19,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e){var a=o.fc(),i=a.columns,c=a.$implicit,n=o.fc();o.Bb(1),o.Cb("colspan",i.length),o.Bb(3),o.mc("ngIf",n.richiestaRevocaSupport.isAccettata(c.esito)),o.Bb(1),o.mc("ngIf",n.richiestaRevocaSupport.isRifiutata(c.esito)),o.Bb(3),o.mc("ngIf",n.richiestaRevocaSupport.isAccettata(c.esito)),o.Bb(1),o.mc("ngIf",n.richiestaRevocaSupport.isRifiutata(c.esito)),o.Bb(2),o.Pc(null!=c&&c.causaRichiesta?c.causaRichiesta:o.hc(12,9,"ND")),o.Bb(3),o.mc("ngIf",n.richiestaRevocaSupport.isAccettata(c.esito)),o.Bb(1),o.mc("ngIf",n.richiestaRevocaSupport.isRifiutata(c.esito)),o.Bb(2),o.Pc(null!=c&&c.dataSottoscrizione?o.ic(18,11,c.dataSottoscrizione,"dd/MM/yyyy"):o.hc(19,14,"ND"))}}function ie(e,t){1&e&&o.Mc(0,ae,20,16,"ng-template",28),2&e&&o.mc("ngIf",t.$implicit)}function ce(e,t){if(1&e&&(o.Tb(0,"tr"),o.Tb(1,"td"),o.Oc(2),o.Sb(),o.Sb()),2&e){var a=t.$implicit,i=o.fc();o.Bb(1),o.Cb("colspan",a.length),o.Bb(1),o.Qc(" ",i.intestazioni.elencoVuotoRichiestaRevocaValutate," ")}}var ne,oe=function(){return{marginTop:"70px"}},se=((ne=function(){function e(t,a,n,s){var r=this;_classCallCheck(this,e),this.paginatorService=t,this.messageService=a,this.mandatoService=n,this.richiestaValutataEventService=s,this.updateCounter=new o.n,this.intestazioni=x.a,this.numeroPagina=0,this.elementiPerPagina=10,this.first=!0,this.richiesteListTable=new V.b,this.richiestaRevocaSupport=z,this.defaultPropertySort="dataSottoscrizione",this.componentDestroyed$=new i.a,this.richiestaValutataEventService.getEventObservable().pipe(Object(c.a)(this.componentDestroyed$)).subscribe((function(e){return r.getRichiesteValutate(r.table)}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.initializeObject(),this.cols=this.defineTableColumns(),this.getRichiesteValutate(this.table)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}},{key:"updateList",value:function(){this.getRichiesteValutate(this.table)}},{key:"initializeObject",value:function(){this.richiesteListTable=new V.b,this.richiesteListTable.risultati=new Array}},{key:"changePage",value:function(e){this.first?this.first=!1:this.getRichiesteValutate(e)}},{key:"defineTableColumns",value:function(){return[{field:"",header:""},{field:null,header:x.a.cuaaSigla},{field:"mandato.fascicolo.denominazione",header:x.a.denominazioneAzienda},{field:"mandato.sportello.denominazione",header:x.a.sedeSportelloCaa},{field:"mandato.sportello.comune",header:x.a.localitaSportelloCaa},{field:"dataSottoscrizione",header:x.a.dataSottoscrizione},{field:"stato",header:x.a.esito},{field:null,header:x.a.downloadDocumentoRevocaImmediata}]}},{key:"getRichiesteValutate",value:function(e){var t=this;this.numeroPagina=Math.floor(e.first/this.elementiPerPagina),this.paginazione=null!=e&&null!=e.sortField?L.a.of(this.numeroPagina,this.elementiPerPagina,e.sortField,L.a.getOrdine(e.sortOrder)):L.a.of(this.numeroPagina,this.elementiPerPagina,this.defaultPropertySort,L.b.ASC),this.mandatoService.richiesteRevocaImmediataValutatePerCaa(this.paginazione).subscribe((function(e){e&&(t.richiesteListTable=e,t.updateCounter.emit(t.richiesteListTable.count))}),(function(e){t.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreRecuperoDati))}))}},{key:"onDialogClose",value:function(e){}},{key:"downloadRichiesta",value:function(e){var t=this;this.mandatoService.getRevocaImmediataFile(e.idProtocollo).subscribe((function(e){F.saveAs(e,"Richiesta_Revoca_Immediata.pdf")}),(function(e){t.messageService.add(u.a.getToast("tst",u.b.error,u.a.ERRORE_STAMPA_REVOCA))}))}}]),e}()).\u0275fac=function(e){return new(e||ne)(o.Nb(N.a),o.Nb(b.d),o.Nb(f.a),o.Nb(y))},ne.\u0275cmp=o.Hb({type:ne,selectors:[["app-richiesta-revoca-mandato-valutate"]],viewQuery:function(e,t){var a;1&e&&o.Jc($,!0),2&e&&o.Ac(a=o.cc())&&(t.table=a.first)},outputs:{updateCounter:"updateCounter"},decls:12,vars:11,consts:[[1,"ui-grid-fixed"],[1,"ui-g-12","boxgrey"],["key","tst"],[1,"ui-g-12"],[1,"layout-actionmenu"],[1,"table-responsive",2,"margin-top","20px","display","block"],["expandableRows","true","dataKey","cuaa",3,"columns","value","autoLayout","totalRecords","paginator","rows","responsive","lazy","onLazyLoad"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],["href","#",3,"pRowToggler"],[3,"ngClass"],[2,"text-align","center"],[1,"ui-g","icon-action","actions--gestione-utenze",2,"display","inline"],["title","Accettata","style","font-size: xx-large; vertical-align: sub;","class","pi pi-check",4,"ngIf"],["title","Rifiutata","style","font-size: xx-large; vertical-align: sub;","class","pi pi-ban",4,"ngIf"],[2,"display","inline"],[3,"click"],["title","Download documento revoca immediata",1,"pi","pi-download",2,"font-size","xx-large","vertical-align","sub","background-color","white","color","black"],["title","Accettata",1,"pi","pi-check",2,"font-size","xx-large","vertical-align","sub"],["title","Rifiutata",1,"pi","pi-ban",2,"font-size","xx-large","vertical-align","sub"],[3,"ngIf"],[4,"ngIf"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Ob(2,"p-toast",2),o.Tb(3,"div",3),o.Tb(4,"div",4),o.Tb(5,"div",5),o.Tb(6,"p-table",6,7),o.bc("onLazyLoad",(function(e){return t.changePage(e)})),o.Mc(8,j,2,1,"ng-template",8),o.Mc(9,q,25,16,"ng-template",9),o.Mc(10,ie,1,1,"ng-template",10),o.Mc(11,ce,3,2,"ng-template",11),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(2),o.Kc(o.rc(10,oe)),o.Bb(4),o.mc("columns",t.cols)("value",t.richiesteListTable.risultati)("autoLayout",!0)("totalRecords",t.richiesteListTable.count)("paginator",!0)("rows",t.elementiPerPagina)("responsive",!0)("lazy",!0))},directives:[v.a,U.q,b.e,l.s,U.p,l.t,U.o,U.m,U.k,l.q,p.a],pipes:[l.f,g.d],styles:[""]}),ne);function re(e,t){1&e&&(o.Tb(0,"span",10),o.Oc(1),o.gc(2,"translate"),o.Sb()),2&e&&(o.Bb(1),o.Qc(" ",o.hc(2,1,"REVOCA_MANDATO_DLG.DA_VALUTARE")," "))}function le(e,t){1&e&&o.Ob(0,"app-richiesta-revoca-mandato-da-valutare")}function be(e,t){if(1&e&&(o.Tb(0,"p-tabPanel",7),o.Mc(1,re,3,3,"ng-template",8),o.Mc(2,le,1,0,"ng-template",9),o.Sb()),2&e){var a=o.fc();o.mc("selected","DA_VALUTARE"==a.selectedTab)}}function ue(e,t){if(1&e&&(o.Tb(0,"span",10),o.Oc(1),o.gc(2,"translate"),o.Tb(3,"span"),o.Oc(4),o.Sb(),o.Sb()),2&e){var a=o.fc();o.Bb(1),o.Qc(" ",o.hc(2,2,"REVOCA_MANDATO_DLG.VALUTATE")," "),o.Bb(3),o.Pc(a.counter)}}function de(e,t){if(1&e){var a=o.Ub();o.Tb(0,"app-richiesta-revoca-mandato-valutate",11),o.bc("updateCounter",(function(e){return o.Ec(a),o.fc().updateCounter(e)})),o.Sb()}}var fe,ve,he=((fe=function(){function e(t,a){_classCallCheck(this,e),this.route=t,this.router=a,this.componentDestroyed$=new i.a,this.roleAppag=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.setupRouting()}},{key:"handleTabChange",value:function(e){switch(e.index){case 0:this.selectedTab="DA_VALUTARE",this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"da-valutare"}});break;case 1:this.selectedTab="VALUTATE",this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"valutate"}})}}},{key:"setupRouting",value:function(){var e=this;localStorage.getItem("selectedRole")==n.a.roleAppag&&(this.roleAppag=!0),this.route.queryParams.pipe(Object(c.a)(this.componentDestroyed$)).subscribe((function(t){switch(t.tabselected){case"da-valutare":e.selectedTab="DA_VALUTARE";break;case"valutate":e.selectedTab="VALUTATE"}}))}},{key:"ngOnDestroy",value:function(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}},{key:"updateCounter",value:function(e){this.counter=e}}]),e}()).\u0275fac=function(e){return new(e||fe)(o.Nb(s.a),o.Nb(s.e))},fe.\u0275cmp=o.Hb({type:fe,selectors:[["app-richieste-revoca-mandato"]],decls:12,vars:5,consts:[[1,"ui-g","ui-fluid"],[1,"ui-g","ui-grid-fixed"],[1,"layout-actionmenu","w-100"],[1,"richiesta-title","no-text-transform"],[1,"funzioni-grid","tab-new",2,"width","100%"],[1,"container--gestione-utenze",3,"onChange"],[3,"selected",4,"ngIf"],[3,"selected"],["pTemplate","header"],["pTemplate","content"],[1,"ui-tabview-title","ng-star-inserted"],[3,"updateCounter"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"h3",3),o.Oc(4),o.gc(5,"translate"),o.Sb(),o.Sb(),o.Tb(6,"div",4),o.Tb(7,"p-tabView",5),o.bc("onChange",(function(e){return t.handleTabChange(e)})),o.Mc(8,be,3,1,"p-tabPanel",6),o.Tb(9,"p-tabPanel",7),o.Mc(10,ue,5,4,"ng-template",8),o.Mc(11,de,1,0,"ng-template",9),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&e&&(o.Bb(4),o.Pc(o.hc(5,3,"REVOCA_MANDATO_DLG.RICHIESTE_REVOCA_MANDATO")),o.Bb(4),o.mc("ngIf",!t.roleAppag),o.Bb(1),o.mc("selected","VALUTATE"==t.selectedTab))},directives:[r.b,l.t,r.a,b.e,w,se],pipes:[g.d],styles:[""]}),fe),me=a("R69K"),pe=[{path:"",component:he,pathMatch:"full"}],ge=((ve=function e(){_classCallCheck(this,e)}).\u0275mod=o.Lb({type:ve}),ve.\u0275inj=o.Kb({factory:function(e){return new(e||ve)},providers:[y],imports:[[me.a,r.c,h.b,s.i.forChild(pe)]]}),ve)}}]);
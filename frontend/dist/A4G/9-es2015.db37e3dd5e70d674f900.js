(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{WPaq:function(t,e,i){"use strict";i.r(e),i.d(e,"RichiesteRevocaMandatoModule",(function(){return ut}));var a=i("XNiG"),c=i("1G5W"),s=i("qXBG"),o=i("fXoL"),n=i("tyNb"),r=i("rgW5"),b=i("ofXK"),l=i("RtSl"),d=i("Tn7N"),u=i("OSEj"),h=i("G6y3"),m=i("arS9"),p=i("A+aF"),g=i("3Pt+"),f=i("A1Yd"),T=i("sYmb");function v(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",4),o.Tb(1,"p-dialog",5,6),o.bc("visibleChange",(function(e){return o.Ec(t),o.fc().display=e})),o.gc(3,"translate"),o.Tb(4,"div",7),o.Tb(5,"div",8),o.Tb(6,"h6"),o.Oc(7),o.gc(8,"translate"),o.Tb(9,"strong"),o.Oc(10),o.Sb(),o.Oc(11," a "),o.Tb(12,"strong"),o.Oc(13),o.Sb(),o.Sb(),o.Sb(),o.Tb(14,"div",9),o.Tb(15,"h6",10),o.Tb(16,"strong"),o.Oc(17),o.gc(18,"translate"),o.Sb(),o.Sb(),o.Tb(19,"div"),o.Tb(20,"textarea",11),o.bc("ngModelChange",(function(e){return o.Ec(t),o.fc().motivoRifiuto=e})),o.gc(21,"translate"),o.Oc(22,"          "),o.Sb(),o.Sb(),o.Sb(),o.Ob(23,"hr"),o.Tb(24,"div",12),o.Tb(25,"button",13),o.bc("click",(function(){return o.Ec(t),o.fc().rifiutaRevocaImmediata()})),o.gc(26,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=o.fc();o.Bb(1),o.nc("header",o.hc(3,14,"REVOCA_MANDATO_DLG.RIFIUTA_REVOCA_MANDATO")),o.mc("visible",t.display)("dismissableMask",!0)("modal",!0)("focusOnShow",!1)("closable",!0)("closeOnEscape",!0),o.Bb(6),o.Qc(" ",o.hc(8,16,"REVOCA_MANDATO_DLG.STAI_PER_RIFIUTARE")," "),o.Bb(3),o.Qc(" ",t.richiestaRevocaImmediata.denominazioneAzienda," "),o.Bb(3),o.Qc(" ",t.richiestaRevocaImmediata.denominazioneSportelloCaa," "),o.Bb(4),o.Qc(" ",o.hc(18,18,"REVOCA_MANDATO_DLG.MOTIVO_RIFIUTO")," "),o.Bb(3),o.nc("placeholder",o.hc(21,20,"REVOCA_MANDATO_DLG.INDICA_MOTIVAZIONI_RIFIUTO")),o.mc("ngModel",t.motivoRifiuto),o.Bb(5),o.nc("label",o.hc(26,22,"REVOCA_MANDATO_DLG.RIFIUTA_REVOCA_IMMEDIATA"))}}function S(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",14),o.Ob(1,"i",15),o.Tb(2,"h3"),o.Oc(3),o.Sb(),o.Tb(4,"p"),o.Oc(5),o.Sb(),o.Sb(),o.Tb(6,"div",16),o.Tb(7,"div",17),o.Tb(8,"button",18),o.bc("click",(function(){return o.Ec(t),o.fc().confirm()})),o.Sb(),o.Sb(),o.Tb(9,"div",17),o.Tb(10,"button",19),o.bc("click",(function(){return o.Ec(t),o.fc().reject()})),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit;o.Bb(3),o.Pc(t.summary),o.Bb(2),o.Pc(t.detail)}}const A=function(){return{marginTop:"70px"}};let R=(()=>{class t{constructor(t,e){this.messageService=t,this.mandatoService=e,this.displayChange=new o.n,this.displayRifiutoDialog=!1}ngOnInit(){}onOpen(t){this.display=!0,this.motivoRifiuto=null,this.richiestaRevocaImmediata=t}onClose(){this.display=!1,this.displayChange.emit(!1)}rifiutaRevocaImmediata(){u.a.isNotEmpty(this.motivoRifiuto)?this.rifiuta():this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.error,d.a.notFoundMotivazioneRifiuto))}rifiuta(){this.messageService.add(d.a.getToast("checkRifiuto",d.b.warn,d.a.checkRifiutoRichiestaRevocaImmediata))}confirm(){this.putRifiutaRichiestaRevocaImmediata(this.richiestaRevocaImmediata.cuaa,this.motivoRifiuto)}reject(){this.messageService.clear("checkRifiuto")}putRifiutaRichiestaRevocaImmediata(t,e){this.mandatoService.putRifiutaRichiestaRevocaImmediata(t,e).subscribe(t=>{"OK"===t.esito&&(this.esitoOk(),this.messageService.clear("checkRifiuto"),this.onClose()),"NON_BLOCCANTE"===t.esito&&(this.esitoNonBloccante(t.responseList),this.messageService.clear("checkRifiuto"),this.onClose()),"KO"===t.esito&&this.esitoBloccante()},t=>{this.messageService.clear("checkRifiuto"),this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.error,d.a.modificaNonSalvata))})}esitoOk(){this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.success,d.a.OPERAZIONE_OK)),this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.success,d.a.notificaAziendaInviata)),this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.success,d.a.notificaAppagInviata))}esitoNonBloccante(t){this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.success,d.a.OPERAZIONE_OK)),t.includes("NOTIFICA_TITOLARE_FALLITA")?this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.warn,d.a.notificaAziendaFallita)):this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.success,d.a.notificaAziendaInviata)),t.includes("NOTIFICA_APPAG_FALLITA")?this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.warn,d.a.notificaAppagFallita)):this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.success,d.a.notificaAppagInviata))}esitoBloccante(){this.messageService.add(d.a.getToast("tst-rifiutoDialog",d.b.error,d.a.modificaNonSalvata))}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(l.d),o.Nb(h.a))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-richiesta-revoca-mandato-rifiuto-dialog"]],outputs:{displayChange:"displayChange"},decls:4,vars:7,consts:[["id","confirm",4,"ngIf"],["key","tst-rifiutoDialog",3,"baseZIndex"],["position","center","key","checkRifiuto",3,"modal","baseZIndex"],["pTemplate","message"],["id","confirm"],["width","710","appendTo","body",3,"visible","header","dismissableMask","modal","focusOnShow","closable","closeOnEscape","visibleChange"],["rifiutoDialog",""],[1,"popup-approvazione","popup--custom"],[1,"mb-4"],[1,"boxgrey","p-3","mb-3"],[1,"mb-3"],["rows","6","cols","30","pInputTextarea","","id","mail","type","text","autoResize","true","required","",2,"width","-webkit-fill-available",3,"ngModel","placeholder","ngModelChange"],[1,"d-flex","justify-content-end"],["pButton","","icon","pi pi-ban","type","submit",1,"button--rifiuta",3,"label","click"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(t,e){1&t&&(o.Mc(0,v,27,24,"div",0),o.Ob(1,"p-toast",1),o.Tb(2,"p-toast",2),o.Mc(3,S,11,2,"ng-template",3),o.Sb()),2&t&&(o.mc("ngIf",e.richiestaRevocaImmediata),o.Bb(1),o.Kc(o.rc(6,A)),o.mc("baseZIndex",5e3),o.Bb(1),o.mc("modal",!0)("baseZIndex",5e3))},directives:[b.t,m.a,l.e,p.a,g.c,g.D,g.s,g.v,f.b],pipes:[T.d],styles:[""]}),t})(),I=(()=>{class t{constructor(){this.subject=new a.a}sendEvent(t){this.subject.next(t)}getEventObservable(){return this.subject.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Jb({token:t,factory:t.\u0275fac}),t})();const O=["rifiutoDialog"];function E(t,e){if(1&t&&(o.Tb(0,"div",20),o.Tb(1,"span",12),o.Tb(2,"strong"),o.Oc(3),o.gc(4,"translate"),o.Sb(),o.Sb(),o.Tb(5,"span",12),o.Oc(6),o.Sb(),o.Sb()),2&t){const t=o.fc().$implicit;o.Bb(3),o.Pc(o.hc(4,2,"RICHIESTA_REVOCA_IMMEDIATA.CAUSA_REVOCA")),o.Bb(3),o.Pc(t.causaRichiesta)}}function C(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div"),o.Tb(1,"div",7),o.Tb(2,"div",8),o.Tb(3,"h3",9),o.Oc(4),o.Sb(),o.Sb(),o.Tb(5,"div",10),o.Tb(6,"div",11),o.Tb(7,"span",12),o.Tb(8,"strong"),o.Oc(9),o.gc(10,"translate"),o.Sb(),o.Sb(),o.Tb(11,"span",12),o.Oc(12),o.Sb(),o.Sb(),o.Tb(13,"div",11),o.Tb(14,"span",12),o.Tb(15,"strong"),o.Oc(16),o.gc(17,"translate"),o.Sb(),o.Sb(),o.Tb(18,"span",12),o.Oc(19),o.Sb(),o.Sb(),o.Tb(20,"div",11),o.Tb(21,"span",12),o.Tb(22,"strong"),o.Oc(23),o.gc(24,"translate"),o.Sb(),o.Sb(),o.Tb(25,"span",12),o.Oc(26),o.gc(27,"date"),o.Sb(),o.Sb(),o.Tb(28,"div",11),o.Tb(29,"span",12),o.Tb(30,"strong"),o.Oc(31),o.gc(32,"translate"),o.Sb(),o.Sb(),o.Tb(33,"span",12),o.Oc(34),o.Sb(),o.Sb(),o.Mc(35,E,7,4,"div",13),o.Sb(),o.Ob(36,"HR"),o.Tb(37,"div",14),o.Tb(38,"h5"),o.Tb(39,"strong"),o.Tb(40,"img",15),o.bc("click",(function(){o.Ec(t);const i=e.$implicit;return o.fc(2).scaricaRevocaImmediata(i.idProtocollo)})),o.Sb(),o.Tb(41,"a",16),o.bc("click",(function(){o.Ec(t);const i=e.$implicit;return o.fc(2).scaricaRevocaImmediata(i.idProtocollo)})),o.Oc(42),o.gc(43,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(44,"div",17),o.Tb(45,"button",18),o.bc("click",(function(){o.Ec(t);const i=e.$implicit;return o.fc(2).showDialog(i)})),o.gc(46,"translate"),o.Sb(),o.Sb(),o.Tb(47,"div",17),o.Tb(48,"button",19),o.bc("click",(function(){o.Ec(t);const i=e.$implicit;return o.fc(2).accettaRichiesta(i.cuaa)})),o.gc(49,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Ob(50,"br"),o.Sb()}if(2&t){const t=e.$implicit;o.Bb(4),o.Pc(t.denominazioneAzienda),o.Bb(5),o.Pc(o.hc(10,13,"RICHIESTA_REVOCA_IMMEDIATA.CUAA")),o.Bb(3),o.Pc(t.cuaa),o.Bb(4),o.Pc(o.hc(17,15,"RICHIESTA_REVOCA_IMMEDIATA.SEDE_AMMINISTRATIVA")),o.Bb(3),o.Pc(t.denominazioneSedeAmministrativaCaa),o.Bb(4),o.Pc(o.hc(24,17,"RICHIESTA_REVOCA_IMMEDIATA.DATA_RICHIESTA")),o.Bb(3),o.Pc(o.ic(27,19,t.dataSottoscrizione,"dd/MM/yyyy")),o.Bb(5),o.Pc(o.hc(32,22,"RICHIESTA_REVOCA_IMMEDIATA.SEDE_SPORTELLO")),o.Bb(3),o.Pc(t.denominazioneSportelloCaa),o.Bb(1),o.mc("ngIf",t.causaRichiesta),o.Bb(7),o.Qc(" ",o.hc(43,24,"RICHIESTA_REVOCA_IMMEDIATA.DESC_SCARICA_DOC_REVOCA")," "),o.Bb(3),o.nc("label",o.hc(46,26,"RICHIESTA_REVOCA_IMMEDIATA.RIFIUTA")),o.Bb(3),o.nc("label",o.hc(49,28,"RICHIESTA_REVOCA_IMMEDIATA.ACCETTA"))}}function D(t,e){if(1&t&&(o.Tb(0,"div"),o.Mc(1,C,51,30,"div",6),o.Sb()),2&t){const t=o.fc();o.Bb(1),o.mc("ngForOf",t.richiesteDaValutare)}}function y(t,e){1&t&&(o.Tb(0,"div"),o.Tb(1,"div",7),o.Tb(2,"div",8),o.Tb(3,"h3",9),o.Oc(4),o.gc(5,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(4),o.Pc(o.hc(5,1,"RICHIESTA_REVOCA_IMMEDIATA.NESSUNA_REVOCA_DA_VALUTARE")))}function B(t,e){if(1&t){const t=o.Ub();o.Tb(0,"div",21),o.Ob(1,"i",22),o.Tb(2,"h3"),o.Oc(3),o.Sb(),o.Tb(4,"p"),o.Oc(5),o.Sb(),o.Sb(),o.Tb(6,"div",23),o.Tb(7,"div",24),o.Tb(8,"button",25),o.bc("click",(function(){return o.Ec(t),o.fc().confermaRevoca()})),o.Sb(),o.Sb(),o.Tb(9,"div",24),o.Tb(10,"button",26),o.bc("click",(function(){return o.Ec(t),o.fc().annulla()})),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit;o.Bb(3),o.Pc(t.summary),o.Bb(2),o.Pc(t.detail)}}const M=function(){return{marginTop:"70px"}};let _=(()=>{class t{constructor(t,e,i,a){this.route=t,this.mandatoService=e,this.messageService=i,this.richiestaValutataEventService=a}ngOnInit(){this.getRichiesteDaValutare(!1)}getRichiesteDaValutare(t){this.richiestePresenti=!0,this.mandatoService.getRichiesteRevocheImmediate(t).subscribe(t=>{this.richiesteDaValutare=t,this.richiesteDaValutare&&0!==this.richiesteDaValutare.length||(this.richiestePresenti=!1)},t=>{this.richiestePresenti=!1,this.messageService.add(d.a.getToast("tst",d.b.error,d.a.erroreRecuperoDati))})}showDialog(t){this.rifiutoDialog.onOpen(t)}onDialogClose(t){this.getRichiesteDaValutare(!1),this.richiestaValutataEventService.sendEvent(!0)}accettaRichiesta(t){this.cuaaDaAccettare=t,this.messageService.add(d.a.getToast("accettaRichiestaRevocaImmediata",d.b.warn,d.a.checkAccettaRichiestaRevocaImmediata))}scaricaRevocaImmediata(t){console.log("scarica revoca immediata"),this.scaricaRevocaImmediataFile(t)}scaricaRevocaImmediataFile(t){this.mandatoService.getRevocaImmediataFile(t).subscribe(t=>{this.revocaImmediataFile=new Blob([t],{type:"application/pdf"}),this.visualizzaRevocaImmediata()},t=>{this.revocaImmediataFile=null})}visualizzaRevocaImmediata(){if(null!=this.revocaImmediataFile){const t=URL.createObjectURL(this.revocaImmediataFile);window.open(t)}else this.messageService.add(d.a.getToast("tst",d.b.error,d.a.erroreVisualizzazioneRevocaImmediata))}confermaRevoca(){console.log("richiesta accettata"),this.messageService.clear("accettaRichiestaRevocaImmediata"),this.putAccettaRichiestaRevocaImmediata()}annulla(){console.log("annulla comando"),this.messageService.clear("accettaRichiestaRevocaImmediata")}putAccettaRichiestaRevocaImmediata(){this.mandatoService.putAccettaRichiestaRevocaImmediata(this.cuaaDaAccettare).subscribe(t=>{"OK"===t.esito&&(this.esitoOk(),this.getRichiesteDaValutare(!1),this.richiestaValutataEventService.sendEvent(!0)),"NON_BLOCCANTE"===t.esito&&(this.esitoNonBloccante(t.responseList),this.getRichiesteDaValutare(!1),this.richiestaValutataEventService.sendEvent(!0)),"KO"===t.esito&&this.esitoBloccante()},t=>{this.messageService.add(d.a.getToast("tst",d.b.error,d.a.modificaNonSalvata))})}esitoOk(){this.messageService.add(d.a.getToast("tst",d.b.success,d.a.OPERAZIONE_OK)),this.messageService.add(d.a.getToast("tst",d.b.success,d.a.notificaAziendaInviata)),this.messageService.add(d.a.getToast("tst",d.b.success,d.a.notificaAppagInviata))}esitoNonBloccante(t){this.messageService.add(d.a.getToast("tst",d.b.success,d.a.OPERAZIONE_OK)),t.includes("NOTIFICA_TITOLARE_FALLITA")?this.messageService.add(d.a.getToast("tst",d.b.warn,d.a.notificaAziendaFallita)):this.messageService.add(d.a.getToast("tst",d.b.success,d.a.notificaAziendaInviata)),t.includes("NOTIFICA_APPAG_FALLITA")?this.messageService.add(d.a.getToast("tst",d.b.warn,d.a.notificaAppagFallita)):this.messageService.add(d.a.getToast("tst",d.b.success,d.a.notificaAppagInviata))}esitoBloccante(){this.messageService.add(d.a.getToast("tst",d.b.error,d.a.modificaNonSalvata))}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(n.a),o.Nb(h.a),o.Nb(l.d),o.Nb(I))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-richiesta-revoca-mandato-da-valutare"]],viewQuery:function(t,e){var i;1&t&&o.Jc(O,!0),2&t&&o.Ac(i=o.cc())&&(e.rifiutoDialog=i.first)},decls:7,vars:7,consts:[["key","tst"],[4,"ngIf"],[3,"displayChange"],["rifiutoDialog",""],["position","center","key","accettaRichiestaRevocaImmediata",3,"modal","baseZIndex"],["pTemplate","message"],[4,"ngFor","ngForOf"],[1,"boxgrey",2,"display","inline-block"],[1,"d-flex","align-items-center","mb-3"],[1,"mr-auto","mb-0","pb-0"],[1,"row","row--edit"],[1,"col-6","d-flex","align-items-center"],[1,"mr-auto","w-75"],["class","col-12  d-flex  align-items-center",4,"ngIf"],[1,"ui-g-8"],["src","assets/img/icons/icon-download.png",1,"box__icon",3,"click"],[2,"text-decoration","none",3,"routerLink","click"],[1,"ui-g-2",2,"text-align","right"],["pButton","","icon","ui-icon-block","pButton","",2,"background-color","red",3,"label","click"],["pButton","","icon","ui-icon-done","type","button","pButton","",3,"label","click"],[1,"col-12","d-flex","align-items-center"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(t,e){1&t&&(o.Ob(0,"p-toast",0),o.Mc(1,D,2,1,"div",1),o.Mc(2,y,6,3,"div",1),o.Tb(3,"app-richiesta-revoca-mandato-rifiuto-dialog",2,3),o.bc("displayChange",(function(t){return e.onDialogClose(t)})),o.Sb(),o.Tb(5,"p-toast",4),o.Mc(6,B,11,2,"ng-template",5),o.Sb()),2&t&&(o.Kc(o.rc(6,M)),o.Bb(1),o.mc("ngIf",e.richiestePresenti),o.Bb(1),o.mc("ngIf",!e.richiestePresenti),o.Bb(3),o.mc("modal",!0)("baseZIndex",5e3))},directives:[m.a,b.t,R,l.e,b.s,n.h,f.b],pipes:[T.d,b.f],styles:[""]}),t})();var P=i("SCyD");class w{static isAccettata(t){return t===P.c.ACCETTATA}static isRifiutata(t){return t===P.c.RIFIUTATA}}i("Rt+w");var V=i("t5SA"),z=i("6b9K"),k=i("69Tm"),N=i("JEAp"),L=i("yWug");const x=["table"];function F(t,e){if(1&t&&o.Ob(0,"p-sortIcon",15),2&t){const t=o.fc().$implicit;o.mc("field",t.field)}}function U(t,e){if(1&t&&(o.Tb(0,"th",13),o.Tb(1,"strong"),o.Oc(2),o.Sb(),o.Mc(3,F,1,1,"p-sortIcon",14),o.Sb()),2&t){const t=e.$implicit;o.mc("pSortableColumn",t.field)("pSortableColumnDisabled",null==t.field),o.Bb(2),o.Pc(t.header),o.Bb(1),o.mc("ngIf",t.field)}}function $(t,e){if(1&t&&(o.Tb(0,"tr"),o.Mc(1,U,4,4,"th",12),o.Sb()),2&t){const t=e.$implicit;o.Bb(1),o.mc("ngForOf",t)}}function K(t,e){1&t&&o.Ob(0,"i",26)}function H(t,e){1&t&&o.Ob(0,"i",27)}const G=function(){return{backgroundColor:"white"}};function j(t,e){if(1&t){const t=o.Ub();o.Tb(0,"tr",16),o.Tb(1,"td"),o.Tb(2,"a",17),o.Ob(3,"i",18),o.Sb(),o.Sb(),o.Tb(4,"td"),o.Oc(5),o.Sb(),o.Tb(6,"td"),o.Oc(7),o.Sb(),o.Tb(8,"td"),o.Oc(9),o.Sb(),o.Tb(10,"td"),o.Oc(11),o.Sb(),o.Tb(12,"td"),o.Oc(13),o.gc(14,"date"),o.Sb(),o.Tb(15,"td",19),o.Tb(16,"div",20),o.Tb(17,"div"),o.Mc(18,K,1,0,"i",21),o.Mc(19,H,1,0,"i",22),o.Sb(),o.Sb(),o.Sb(),o.Tb(20,"td",19),o.Tb(21,"div",23),o.Tb(22,"div"),o.Tb(23,"p-button",24),o.bc("click",(function(){o.Ec(t);const i=e.$implicit;return o.fc().downloadRichiesta(i)})),o.Ob(24,"i",25),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()}if(2&t){const t=e.$implicit,i=e.expanded,a=o.fc();o.mc("pSelectableRow",t),o.Bb(2),o.mc("pRowToggler",t),o.Bb(1),o.mc("ngClass",i?"pi pi-chevron-down":"pi pi-chevron-right"),o.Bb(2),o.Pc(t.cuaa),o.Bb(2),o.Pc(t.denominazioneAzienda),o.Bb(2),o.Pc(t.denominazioneSportelloCaa),o.Bb(2),o.Pc(t.sedeSportelloCaa),o.Bb(2),o.Qc(" ",o.ic(14,12,t.dataSottoscrizione,"dd-MM-yyyy")," "),o.Bb(5),o.mc("ngIf",a.richiestaRevocaSupport.isAccettata(t.esito)),o.Bb(1),o.mc("ngIf",a.richiestaRevocaSupport.isRifiutata(t.esito)),o.Bb(4),o.Kc(o.rc(15,G))}}function Q(t,e){1&t&&(o.Tb(0,"th"),o.Oc(1," Dati richiesta revoca immediata accettata:"),o.Sb())}function Z(t,e){1&t&&(o.Tb(0,"th"),o.Oc(1," Dati richiesta revoca immediata rifiutata:"),o.Sb())}function q(t,e){1&t&&(o.Tb(0,"td"),o.Oc(1," Motivo accettazione:"),o.Sb())}function J(t,e){1&t&&(o.Tb(0,"td"),o.Oc(1," Motivo rifiuto:"),o.Sb())}function W(t,e){1&t&&(o.Tb(0,"td"),o.Oc(1," Data accettazione:"),o.Sb())}function X(t,e){1&t&&(o.Tb(0,"td"),o.Oc(1," Data rifiuto:"),o.Sb())}function Y(t,e){if(1&t&&(o.Tb(0,"tr"),o.Tb(1,"td"),o.Tb(2,"tbody"),o.Tb(3,"tr"),o.Mc(4,Q,2,0,"th",29),o.Mc(5,Z,2,0,"th",29),o.Ob(6,"th"),o.Sb(),o.Tb(7,"tr"),o.Mc(8,q,2,0,"td",29),o.Mc(9,J,2,0,"td",29),o.Tb(10,"td"),o.Oc(11),o.gc(12,"translate"),o.Sb(),o.Sb(),o.Tb(13,"tr"),o.Mc(14,W,2,0,"td",29),o.Mc(15,X,2,0,"td",29),o.Tb(16,"td"),o.Oc(17),o.gc(18,"date"),o.gc(19,"translate"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t){const t=o.fc(),e=t.columns,i=t.$implicit,a=o.fc();o.Bb(1),o.Cb("colspan",e.length),o.Bb(3),o.mc("ngIf",a.richiestaRevocaSupport.isAccettata(i.esito)),o.Bb(1),o.mc("ngIf",a.richiestaRevocaSupport.isRifiutata(i.esito)),o.Bb(3),o.mc("ngIf",a.richiestaRevocaSupport.isAccettata(i.esito)),o.Bb(1),o.mc("ngIf",a.richiestaRevocaSupport.isRifiutata(i.esito)),o.Bb(2),o.Pc(null!=i&&i.causaRichiesta?i.causaRichiesta:o.hc(12,9,"ND")),o.Bb(3),o.mc("ngIf",a.richiestaRevocaSupport.isAccettata(i.esito)),o.Bb(1),o.mc("ngIf",a.richiestaRevocaSupport.isRifiutata(i.esito)),o.Bb(2),o.Pc(null!=i&&i.dataSottoscrizione?o.ic(18,11,i.dataSottoscrizione,"dd/MM/yyyy"):o.hc(19,14,"ND"))}}function tt(t,e){1&t&&o.Mc(0,Y,20,16,"ng-template",28),2&t&&o.mc("ngIf",e.$implicit)}function et(t,e){if(1&t&&(o.Tb(0,"tr"),o.Tb(1,"td"),o.Oc(2),o.Sb(),o.Sb()),2&t){const t=e.$implicit,i=o.fc();o.Bb(1),o.Cb("colspan",t.length),o.Bb(1),o.Qc(" ",i.intestazioni.elencoVuotoRichiestaRevocaValutate," ")}}const it=function(){return{marginTop:"70px"}};let at=(()=>{class t{constructor(t,e,i,s){this.paginatorService=t,this.messageService=e,this.mandatoService=i,this.richiestaValutataEventService=s,this.updateCounter=new o.n,this.intestazioni=k.a,this.numeroPagina=0,this.elementiPerPagina=10,this.first=!0,this.richiesteListTable=new P.b,this.richiestaRevocaSupport=w,this.defaultPropertySort="dataSottoscrizione",this.componentDestroyed$=new a.a,this.richiestaValutataEventService.getEventObservable().pipe(Object(c.a)(this.componentDestroyed$)).subscribe(t=>this.getRichiesteValutate(this.table))}ngOnInit(){this.initializeObject(),this.cols=this.defineTableColumns(),this.getRichiesteValutate(this.table)}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}updateList(){this.getRichiesteValutate(this.table)}initializeObject(){this.richiesteListTable=new P.b,this.richiesteListTable.risultati=new Array}changePage(t){this.first?this.first=!1:this.getRichiesteValutate(t)}defineTableColumns(){return[{field:"",header:""},{field:null,header:k.a.cuaaSigla},{field:"mandato.fascicolo.denominazione",header:k.a.denominazioneAzienda},{field:"mandato.sportello.denominazione",header:k.a.sedeSportelloCaa},{field:"mandato.sportello.comune",header:k.a.localitaSportelloCaa},{field:"dataSottoscrizione",header:k.a.dataSottoscrizione},{field:"stato",header:k.a.esito},{field:null,header:k.a.downloadDocumentoRevocaImmediata}]}getRichiesteValutate(t){this.numeroPagina=Math.floor(t.first/this.elementiPerPagina),this.paginazione=null!=t&&null!=t.sortField?z.a.of(this.numeroPagina,this.elementiPerPagina,t.sortField,z.a.getOrdine(t.sortOrder)):z.a.of(this.numeroPagina,this.elementiPerPagina,this.defaultPropertySort,z.b.ASC),this.mandatoService.richiesteRevocaImmediataValutatePerCaa(this.paginazione).subscribe(t=>{t&&(this.richiesteListTable=t,this.updateCounter.emit(this.richiesteListTable.count))},t=>{this.messageService.add(d.a.getToast("tst",d.b.error,d.a.erroreRecuperoDati))})}onDialogClose(t){}downloadRichiesta(t){this.mandatoService.getRevocaImmediataFile(t.idProtocollo).subscribe(t=>{N.saveAs(t,"Richiesta_Revoca_Immediata.pdf")},t=>{this.messageService.add(d.a.getToast("tst",d.b.error,d.a.ERRORE_STAMPA_REVOCA))})}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(V.a),o.Nb(l.d),o.Nb(h.a),o.Nb(I))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-richiesta-revoca-mandato-valutate"]],viewQuery:function(t,e){var i;1&t&&o.Jc(x,!0),2&t&&o.Ac(i=o.cc())&&(e.table=i.first)},outputs:{updateCounter:"updateCounter"},decls:12,vars:11,consts:[[1,"ui-grid-fixed"],[1,"ui-g-12","boxgrey"],["key","tst"],[1,"ui-g-12"],[1,"layout-actionmenu"],[1,"table-responsive",2,"margin-top","20px","display","block"],["expandableRows","true","dataKey","cuaa",3,"columns","value","autoLayout","totalRecords","paginator","rows","responsive","lazy","onLazyLoad"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],["href","#",3,"pRowToggler"],[3,"ngClass"],[2,"text-align","center"],[1,"ui-g","icon-action","actions--gestione-utenze",2,"display","inline"],["title","Accettata","style","font-size: xx-large; vertical-align: sub;","class","pi pi-check",4,"ngIf"],["title","Rifiutata","style","font-size: xx-large; vertical-align: sub;","class","pi pi-ban",4,"ngIf"],[2,"display","inline"],[3,"click"],["title","Download documento revoca immediata",1,"pi","pi-download",2,"font-size","xx-large","vertical-align","sub","background-color","white","color","black"],["title","Accettata",1,"pi","pi-check",2,"font-size","xx-large","vertical-align","sub"],["title","Rifiutata",1,"pi","pi-ban",2,"font-size","xx-large","vertical-align","sub"],[3,"ngIf"],[4,"ngIf"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Ob(2,"p-toast",2),o.Tb(3,"div",3),o.Tb(4,"div",4),o.Tb(5,"div",5),o.Tb(6,"p-table",6,7),o.bc("onLazyLoad",(function(t){return e.changePage(t)})),o.Mc(8,$,2,1,"ng-template",8),o.Mc(9,j,25,16,"ng-template",9),o.Mc(10,tt,1,1,"ng-template",10),o.Mc(11,et,3,2,"ng-template",11),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(2),o.Kc(o.rc(10,it)),o.Bb(4),o.mc("columns",e.cols)("value",e.richiesteListTable.risultati)("autoLayout",!0)("totalRecords",e.richiesteListTable.count)("paginator",!0)("rows",e.elementiPerPagina)("responsive",!0)("lazy",!0))},directives:[m.a,L.q,l.e,b.s,L.p,b.t,L.o,L.m,L.k,b.q,f.a],pipes:[b.f,T.d],styles:[""]}),t})();function ct(t,e){1&t&&(o.Tb(0,"span",10),o.Oc(1),o.gc(2,"translate"),o.Sb()),2&t&&(o.Bb(1),o.Qc(" ",o.hc(2,1,"REVOCA_MANDATO_DLG.DA_VALUTARE")," "))}function st(t,e){1&t&&o.Ob(0,"app-richiesta-revoca-mandato-da-valutare")}function ot(t,e){if(1&t&&(o.Tb(0,"p-tabPanel",7),o.Mc(1,ct,3,3,"ng-template",8),o.Mc(2,st,1,0,"ng-template",9),o.Sb()),2&t){const t=o.fc();o.mc("selected","DA_VALUTARE"==t.selectedTab)}}function nt(t,e){if(1&t&&(o.Tb(0,"span",10),o.Oc(1),o.gc(2,"translate"),o.Tb(3,"span"),o.Oc(4),o.Sb(),o.Sb()),2&t){const t=o.fc();o.Bb(1),o.Qc(" ",o.hc(2,2,"REVOCA_MANDATO_DLG.VALUTATE")," "),o.Bb(3),o.Pc(t.counter)}}function rt(t,e){if(1&t){const t=o.Ub();o.Tb(0,"app-richiesta-revoca-mandato-valutate",11),o.bc("updateCounter",(function(e){return o.Ec(t),o.fc().updateCounter(e)})),o.Sb()}}let bt=(()=>{class t{constructor(t,e){this.route=t,this.router=e,this.componentDestroyed$=new a.a,this.roleAppag=!1}ngOnInit(){this.setupRouting()}handleTabChange(t){switch(t.index){case 0:this.selectedTab="DA_VALUTARE",this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"da-valutare"}});break;case 1:this.selectedTab="VALUTATE",this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"valutate"}})}}setupRouting(){localStorage.getItem("selectedRole")==s.a.roleAppag&&(this.roleAppag=!0),this.route.queryParams.pipe(Object(c.a)(this.componentDestroyed$)).subscribe(t=>{switch(t.tabselected){case"da-valutare":this.selectedTab="DA_VALUTARE";break;case"valutate":this.selectedTab="VALUTATE"}})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}updateCounter(t){this.counter=t}}return t.\u0275fac=function(e){return new(e||t)(o.Nb(n.a),o.Nb(n.e))},t.\u0275cmp=o.Hb({type:t,selectors:[["app-richieste-revoca-mandato"]],decls:12,vars:5,consts:[[1,"ui-g","ui-fluid"],[1,"ui-g","ui-grid-fixed"],[1,"layout-actionmenu","w-100"],[1,"richiesta-title","no-text-transform"],[1,"funzioni-grid","tab-new",2,"width","100%"],[1,"container--gestione-utenze",3,"onChange"],[3,"selected",4,"ngIf"],[3,"selected"],["pTemplate","header"],["pTemplate","content"],[1,"ui-tabview-title","ng-star-inserted"],[3,"updateCounter"]],template:function(t,e){1&t&&(o.Tb(0,"div",0),o.Tb(1,"div",1),o.Tb(2,"div",2),o.Tb(3,"h3",3),o.Oc(4),o.gc(5,"translate"),o.Sb(),o.Sb(),o.Tb(6,"div",4),o.Tb(7,"p-tabView",5),o.bc("onChange",(function(t){return e.handleTabChange(t)})),o.Mc(8,ot,3,1,"p-tabPanel",6),o.Tb(9,"p-tabPanel",7),o.Mc(10,nt,5,4,"ng-template",8),o.Mc(11,rt,1,0,"ng-template",9),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Sb()),2&t&&(o.Bb(4),o.Pc(o.hc(5,3,"REVOCA_MANDATO_DLG.RICHIESTE_REVOCA_MANDATO")),o.Bb(4),o.mc("ngIf",!e.roleAppag),o.Bb(1),o.mc("selected","VALUTATE"==e.selectedTab))},directives:[r.b,b.t,r.a,l.e,_,at],pipes:[T.d],styles:[""]}),t})();var lt=i("R69K");const dt=[{path:"",component:bt,pathMatch:"full"}];let ut=(()=>{class t{}return t.\u0275mod=o.Lb({type:t}),t.\u0275inj=o.Kb({factory:function(e){return new(e||t)},providers:[I],imports:[[lt.a,r.c,p.b,n.i.forChild(dt)]]}),t})()}}]);
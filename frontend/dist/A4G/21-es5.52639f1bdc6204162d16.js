function _createForOfIteratorHelper(a,i){var t="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=_unsupportedIterableToArray(a))||i&&a&&"number"==typeof a.length){t&&(a=t);var e=0,c=function(){};return{s:c,n:function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}},e:function(a){throw a},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,s=!1;return{s:function(){t=t.call(a)},n:function(){var a=t.next();return o=a.done,a},e:function(a){s=!0,n=a},f:function(){try{o||null==t.return||t.return()}finally{if(s)throw n}}}}function _unsupportedIterableToArray(a,i){if(a){if("string"==typeof a)return _arrayLikeToArray(a,i);var t=Object.prototype.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(a):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(a,i):void 0}}function _arrayLikeToArray(a,i){(null==i||i>a.length)&&(i=a.length);for(var t=0,e=new Array(i);t<i;t++)e[t]=a[t];return e}function _classCallCheck(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,i){for(var t=0;t<i.length;t++){var e=i[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}function _createClass(a,i,t){return i&&_defineProperties(a.prototype,i),t&&_defineProperties(a,t),a}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{YNWQ:function(a,i,t){"use strict";t.r(i),t.d(i,"MandatoModule",(function(){return ta}));var e,c=t("ofXK"),n=t("R69K"),o=t("tyNb"),s=t("69Tm"),r=t("XNiG"),l=t("cp0P"),d=t("EY2u"),b=t("JIr8"),u=t("1G5W"),v=t("eIep"),p=t("Tn7N"),S=t("zLRh"),g=t("0Dnl"),h=t("fXoL"),m=t("JEAp"),T=t("cS1N"),f=(t("+Rc2"),t("GtbX")),A=t("G6y3"),O=t("lJxs"),R=t("dkQB"),F=t("KIbX"),I=t("tk/3"),D=((e=function(){function a(i,t){_classCallCheck(this,a),this.httpClient=i,this.configuration=t,this.anagrafica_server_mandato=this.configuration.anagrafica_server+"/caa"}return _createClass(a,[{key:"getUrlListaCaaConSportelli",value:function(){return this.anagrafica_server_mandato+"/sportelli"}},{key:"getListaCaaConSportelli",value:function(){var a=this.getUrlListaCaaConSportelli();return this.httpClient.get(a).pipe(Object(O.a)((function(a){if(a){var i,t=[],e=_createForOfIteratorHelper(a);try{for(e.s();!(i=e.n()).done;){var c=i.value,n=F.a.toDto(c);t.push(n)}}catch(o){e.e(o)}finally{e.f()}return t}return a})))}}]),a}()).\u0275fac=function(a){return new(a||e)(h.Xb(I.b),h.Xb(R.a))},e.\u0275prov=h.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e),_=t("RtSl"),y=t("sYmb"),N=t("arS9"),M=t("A+aF"),E=t("A1Yd"),C=t("3Pt+"),z=t("1SSY");function B(a,i){if(1&a){var t=h.Ub();h.Tb(0,"div",28),h.Ob(1,"i",29),h.Tb(2,"h3"),h.Oc(3),h.Sb(),h.Tb(4,"p"),h.Oc(5),h.Sb(),h.Sb(),h.Tb(6,"div",30),h.Tb(7,"div",31),h.Tb(8,"button",32),h.bc("click",(function(){return h.Ec(t),h.fc().confirmPresenzaRevocaFile()})),h.Sb(),h.Sb(),h.Tb(9,"div",31),h.Tb(10,"button",33),h.bc("click",(function(){return h.Ec(t),h.fc().rejectPresenzaRevocaFile()})),h.Sb(),h.Sb(),h.Sb()}if(2&a){var e=i.$implicit;h.Bb(3),h.Pc(e.summary),h.Bb(2),h.Pc(e.detail)}}function P(a,i){if(1&a){var t=h.Ub();h.Tb(0,"div",28),h.Ob(1,"i",29),h.Tb(2,"h3"),h.Oc(3),h.Sb(),h.Tb(4,"p"),h.Oc(5),h.Sb(),h.Sb(),h.Tb(6,"div",30),h.Tb(7,"div",31),h.Tb(8,"button",32),h.bc("click",(function(){return h.Ec(t),h.fc().confirmRichiestaRevoca()})),h.Sb(),h.Sb(),h.Tb(9,"div",31),h.Tb(10,"button",33),h.bc("click",(function(){return h.Ec(t),h.fc().rejectRichiestaRevoca()})),h.Sb(),h.Sb(),h.Sb()}if(2&a){var e=i.$implicit;h.Bb(3),h.Pc(e.summary),h.Bb(2),h.Pc(e.detail)}}var k,L=function(){return{marginTop:"70px"}},V=function(){return{width:"65%",minWidth:"65%"}},w=function(){return{minHeight:"700px"}},Q=((k=function(){function a(i,t,e,c,n,o,s){_classCallCheck(this,a),this.mandatoService=i,this.messageService=t,this.router=e,this.anagraficaFascicoloService=c,this.translateService=n,this.fascicoloCorrente=o,this.caaService=s,this.testoMail="",this.fileExt=".p7m, .pdf",this.sportelloList=[],this.maxSize=2,this.displayChange=new h.n,this.displayApprovazioneDialog=!1}return _createClass(a,[{key:"ngOnInit",value:function(){}},{key:"getSportelliList",value:function(){var a=this;this.caaService.getListaCaaConSportelli().subscribe((function(i){i&&a.filtraSportelli(i)}),(function(i){a.messageService.add(p.a.getToast("tst-dialog",p.b.error,p.a.errorGetListSportelli))}))}},{key:"filtraSportelli",value:function(a){var i=this;this.sportelloList=a.filter((function(a){return a.codiceFiscale!=i.mandatoAttuale.codiceFiscale})).map((function(a){return a.sportelli})).reduce((function(a,i){return a.concat(i)}),[])}},{key:"onOpen",value:function(a){this.display=!0,this.displayChange.emit(!0),this.causaRichiesta=null,this.selectedSportello=null,this.mandatoAttuale=a,this.getSportelliList()}},{key:"onClose",value:function(){this.display=!1,this.displayChange.emit(!1)}},{key:"revocaMandato",value:function(){this.messageService.add(p.a.getToast("checkRichiestaRevocaImmediata",p.b.warn,p.a.checkVerificaPresenzaRevocaOrdinariaDetail))}},{key:"confirmRichiestaRevoca",value:function(){if(this.messageService.clear("checkRichiestaRevocaImmediata"),this.selectedSportello)if(this.revocaFile){var a=this.getDatiRevoca();a&&this.postRevoca(a)}else this.messageService.add(p.a.getToast("tst-dialog",p.b.warn,p.a.notFoundRevocaFile));else this.messageService.add(p.a.getToast("tst-dialog",p.b.warn,p.a.sportelloNonSelezionato))}},{key:"rejectRichiestaRevoca",value:function(){this.messageService.clear("checkRichiestaRevocaImmediata")}},{key:"getDatiRevoca",value:function(){return{cuaa:this.fascicoloCorrente.fascicolo.cuaa,codiceFiscaleRappresentante:this.datiFascicolo.datiAnagraficiRappresentante.codiceFiscale,revocaFile:this.revocaFile,causaRichiesta:this.causaRichiesta,sportello:this.selectedSportello}}},{key:"postRevoca",value:function(a){var i=this;this.mandatoService.revocaImmediata(a).subscribe((function(a){a&&(i.display=!1,i.displayChange.emit(!1),i.messageService.add(p.a.getToast("tst-dialog",p.b.success,p.a.successRevocaImmediata)))}),(function(a){a.error.includes("RICHIESTA_REVOCA_IMMEDIATA_PRESENTE_E_DA_VALUTARE")?i.messageService.add(p.a.getToast("tst-dialog",p.b.error,i.translateService.instant("EXC_REVOCA_MANDATO.RICHIESTA_REVOCA_IMMEDIATA_PRESENTE_E_DA_VALUTARE"))):i.messageService.add(p.a.getToast("tst-dialog",p.b.error,p.a.SERVIZIO_NON_DISPONIBILE))}))}},{key:"preparaStampaRevocaImmediata",value:function(){if(this.datiFascicolo.datiAnagraficiRappresentante.dataNascita){var a=new Date(this.datiFascicolo.datiAnagraficiRappresentante.dataNascita);0==isNaN(a.getTime())&&(this.datiFascicolo.datiAnagraficiRappresentante.dataNascita=Object(c.I)(a,"dd/MM/yyyy","it-IT"))}this.datiRevocaImmediata={denominazioneSportello:this.datiMandato.sportello.denominazione,sedeSportello:this.datiMandato.sportello.comune,indirizzoSportello:this.datiMandato.sportello.indirizzo,emailPECSportello:this.datiMandato.sportello.email,datiAnagraficiRappresentante:this.datiFascicolo.datiAnagraficiRappresentante,domicilioFiscaleRappresentante:this.datiFascicolo.domicilioFiscaleRappresentante,comuneDitta:this.datiFascicolo.ubicazioneDitta.comune,provinciaDitta:this.datiFascicolo.ubicazioneDitta.provincia,capDitta:this.datiFascicolo.ubicazioneDitta.cap,indirizzoDitta:this.datiFascicolo.ubicazioneDitta.toponimo,denominazioneAzienda:this.datiFascicolo.denominazione,codiceFiscaleeAzienda:this.datiFascicolo.codiceFiscale,indirizzoPEC:this.datiFascicolo.datiAnagraficiRappresentante.pec}}},{key:"effettuaStampaRevocaImmediata",value:function(){var a=this,i=new T.a(this.fileExt,this.maxSize);this.mandatoService.getTemplateRevocaImmediata().subscribe((function(t){var e=i.blobToFile(t,"templateRevocaImmediata.docx");return a.mandatoService.stampaRevocaImmediata(e,a.datiRevocaImmediata).subscribe((function(a){m.saveAs(a,"RevocaImmediata.pdf")}),(function(i){a.messageService.add(p.a.getToast("tst-dialog",p.b.error,p.a.ERRORE_STAMPA_REVOCA)),console.error("Errore nella stampa del modulo revoca immadiata:",i)}))}))}},{key:"downloadModulo",value:function(){this.preparaStampaRevocaImmediata(),this.effettuaStampaRevocaImmediata(),console.log("Scarica modulo revoca immediata")}},{key:"uploadModulo",value:function(a){this.toLoadRevocaFile=a,this.verificaPresenzaRevocaOrdinaria()}},{key:"openWindowsSelectFile",value:function(){document.getElementById(this.toLoadRevocaFile).click()}},{key:"onFileChange",value:function(a){if(a.target.files&&a.target.files.length>0){var i=a.target.files[0],t=new T.a(this.fileExt,this.maxSize);t.isValidFileExtension(i)?t.isValidFileSize(i)?this.verificaFirmaSingola(i):this.messageService.add(p.a.getToast("tst-dialog",p.b.error,p.a.UPLOAD_FILE_SIZE)):this.messageService.add(p.a.getToast("tst-dialog",p.b.error,p.a.UPLOAD_FILE_EXT))}}},{key:"verificaFirmaSingola",value:function(a){var i=this;this.anagraficaFascicoloService.verificaFirmaSingola(a,this.datiFascicolo.datiAnagraficiRappresentante.codiceFiscale).subscribe((function(t){t&&(i.revocaFile=a,i.messageService.add(p.a.getToast("tst-dialog",p.b.success,p.a.OPERAZIONE_OK)))}),(function(a){i.messageService.add(p.a.getToast("tst-dialog",p.b.error,i.translateService.instant("EXC_VERIFICA_FIRMA."+a.error.message)))}))}},{key:"verificaPresenzaRevocaOrdinaria",value:function(){this.revocaFile?this.messageService.add(p.a.getToast("checkPresenzaRevocaFile",p.b.warn,p.a.FILE_ALREADY_UPLOADED)):this.openWindowsSelectFile()}},{key:"confirmPresenzaRevocaFile",value:function(){this.messageService.clear("checkPresenzaRevocaFile"),this.openWindowsSelectFile()}},{key:"rejectPresenzaRevocaFile",value:function(){this.messageService.clear("checkPresenzaRevocaFile")}}]),a}()).\u0275fac=function(a){return new(a||k)(h.Nb(A.a),h.Nb(_.d),h.Nb(o.e),h.Nb(f.a),h.Nb(y.e),h.Nb(g.a),h.Nb(D))},k.\u0275cmp=h.Hb({type:k,selectors:[["app-revoca-immediata-dialog"]],inputs:{datiFascicolo:"datiFascicolo",datiMandato:"datiMandato"},outputs:{displayChange:"displayChange"},decls:83,vars:64,consts:[["key","tst-dialog",3,"baseZIndex"],["position","center","key","checkPresenzaRevocaFile",3,"modal","baseZIndex"],["pTemplate","message"],["position","center","key","checkRichiestaRevocaImmediata",3,"modal","baseZIndex"],["id","confirm",1,"ui-g","ui-fluid"],[1,"ui-grid-col-12"],["appendTo","body",3,"visible","header","dismissableMask","modal","focusOnShow","closable","contentStyle","closeOnEscape","visibleChange"],[1,"popup-approvazione","popup--custom"],[1,"mb-4"],[1,"p-grid","ui-g-12",2,"text-align","center"],[1,"p-col-12"],[1,"p-col-4"],["src","assets/img/icons/icon-download.png",1,"box__icon"],[3,"innerHtml"],["pButton","",1,"button--success",3,"label","click"],["src","assets/img/icons/icon-signature.svg",1,"box__icon"],["src","assets/img/icons/icon-upload.png",1,"box__icon"],["type","file","id","revocaFile","name","revocaFile","onclick","this.value = null",1,"inputUploadFile",2,"display","none",3,"accept","change"],["revocaFile",""],[1,"boxgrey","p-3","mb-3","ui-g-12"],[1,"ui-g-12"],[1,"mb-3"],["pInputTextarea","","id","causaRichiesta","type","text","autoResize","true",2,"width","-webkit-fill-available",3,"placeholder","ngModel","ngModelChange"],[1,"ui-g-7"],[1,"ui-g-5"],["placeholder","Seleziona..","optionLabel","denominazione",3,"options","ngModel","showClear","required","ngModelChange"],[1,"d-flex","justify-content-end","ui-g-5"],["pButton","","icon","fa ui-icon-check","type","submit",1,"button--success",3,"label","click"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(a,i){1&a&&(h.Ob(0,"p-toast",0),h.Tb(1,"p-toast",1),h.Mc(2,B,11,2,"ng-template",2),h.Sb(),h.Tb(3,"p-toast",3),h.Mc(4,P,11,2,"ng-template",2),h.Sb(),h.Tb(5,"div",4),h.Tb(6,"div",5),h.Tb(7,"p-dialog",6),h.bc("visibleChange",(function(a){return i.display=a})),h.gc(8,"translate"),h.Tb(9,"div",7),h.Tb(10,"div",8),h.Tb(11,"h6"),h.Oc(12),h.gc(13,"translate"),h.Tb(14,"strong"),h.Oc(15),h.gc(16,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(17,"div",9),h.Ob(18,"div",10),h.Tb(19,"div",11),h.Ob(20,"img",12),h.Tb(21,"div"),h.Ob(22,"br"),h.Tb(23,"h4"),h.Tb(24,"b"),h.Ob(25,"p",13),h.gc(26,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Ob(27,"br"),h.Tb(28,"div"),h.Tb(29,"button",14),h.bc("click",(function(){return i.downloadModulo()})),h.gc(30,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(31,"div",11),h.Ob(32,"img",15),h.Tb(33,"div"),h.Ob(34,"br"),h.Tb(35,"h4"),h.Tb(36,"b"),h.Ob(37,"p",13),h.gc(38,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Ob(39,"br"),h.Tb(40,"div"),h.Tb(41,"h6"),h.Oc(42),h.gc(43,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(44,"div",11),h.Ob(45,"img",16),h.Tb(46,"div"),h.Ob(47,"br"),h.Tb(48,"h4"),h.Tb(49,"b"),h.Oc(50),h.gc(51,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Ob(52,"br"),h.Tb(53,"div"),h.Tb(54,"button",14),h.bc("click",(function(){return i.uploadModulo("revocaFile")})),h.gc(55,"translate"),h.Sb(),h.Tb(56,"input",17,18),h.bc("change",(function(a){return i.onFileChange(a)})),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Tb(58,"div",19),h.Tb(59,"div",20),h.Tb(60,"h6",21),h.Tb(61,"strong"),h.Oc(62),h.gc(63,"translate"),h.Sb(),h.Sb(),h.Tb(64,"textarea",22),h.bc("ngModelChange",(function(a){return i.causaRichiesta=a})),h.gc(65,"translate"),h.Oc(66,"              "),h.Sb(),h.Sb(),h.Ob(67,"br"),h.Tb(68,"div",23),h.Tb(69,"h6",21),h.Tb(70,"strong"),h.Oc(71),h.gc(72,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Ob(73,"div",24),h.Tb(74,"div",23),h.Tb(75,"p-dropdown",25),h.bc("ngModelChange",(function(a){return i.selectedSportello=a})),h.Sb(),h.Sb(),h.Tb(76,"div",24),h.Oc(77),h.Sb(),h.Sb(),h.Ob(78,"hr"),h.Ob(79,"div",23),h.Tb(80,"div",26),h.Tb(81,"button",27),h.bc("click",(function(){return i.revocaMandato()})),h.gc(82,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()),2&a&&(h.Kc(h.rc(61,L)),h.mc("baseZIndex",5e3),h.Bb(1),h.mc("modal",!0)("baseZIndex",5e3),h.Bb(2),h.mc("modal",!0)("baseZIndex",5e3),h.Bb(4),h.Kc(h.rc(62,V)),h.nc("header",h.hc(8,35,"REVOCA_MANDATO_DLG.TITLE")),h.mc("visible",i.display)("dismissableMask",!0)("modal",!0)("focusOnShow",!1)("closable",!0)("contentStyle",h.rc(63,w))("closeOnEscape",!0),h.Bb(5),h.Qc("",h.hc(13,37,"REVOCA_MANDATO_DLG.STAI_PER_REVOCARE")," "),h.Bb(3),h.Qc(" ",null!=i.datiMandato&&null!=i.datiMandato.sportello&&i.datiMandato.sportello.denominazione?i.datiMandato.sportello.denominazione:h.hc(16,39,"ND"),""),h.Bb(10),h.mc("innerHtml",h.hc(26,41,"REVOCA_MANDATO_DLG.DESC_SCARICA_MODULO"),h.Fc),h.Bb(4),h.nc("label",h.hc(30,43,"REVOCA_MANDATO_DLG.SCARICA_MODULO")),h.Bb(8),h.mc("innerHtml",h.hc(38,45,"REVOCA_MANDATO_DLG.FIRMA_DIGITALMENTE"),h.Fc),h.Bb(5),h.Pc(h.hc(43,47,"REVOCA_MANDATO_DLG.DESC_APPONI_FIRMA")),h.Bb(8),h.Pc(h.hc(51,49,"REVOCA_MANDATO_DLG.DESC_CARICA_MODULO")),h.Bb(4),h.nc("label",h.hc(55,51,"REVOCA_MANDATO_DLG.CARICA_MODULO")),h.Bb(2),h.nc("accept",i.fileExt),h.Bb(6),h.Pc(h.hc(63,53,"REVOCA_MANDATO_DLG.MOTIVO")),h.Bb(2),h.nc("placeholder",h.hc(65,55,"REVOCA_MANDATO_DLG.DESC_MOTIVAZIONI")),h.mc("ngModel",i.causaRichiesta),h.Bb(7),h.Qc("",h.hc(72,57,"SEDE_NUOVO_SPORTELLO_CAA")," *"),h.Bb(4),h.mc("options",i.sportelloList)("ngModel",i.selectedSportello)("showClear",!0),h.Bb(2),h.Qc(" ",null!=i.selectedSportello&&i.selectedSportello.comune?i.selectedSportello.comune:""," "),h.Bb(4),h.nc("label",h.hc(82,59,"REVOCA_MANDATO_DLG.INVIA_RICHIESTA")))},directives:[N.a,_.e,M.a,E.b,C.c,C.s,C.v,z.a,C.D],pipes:[y.d],styles:[""]}),k),x=t("wd/R"),U=t("AytR"),Z=["revocaImmediataDialog"];function G(a,i){if(1&a&&(h.Tb(0,"div",11),h.Tb(1,"div",12),h.Tb(2,"h3"),h.Tb(3,"span"),h.Oc(4),h.gc(5,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(6,"div",11),h.Tb(7,"strong"),h.Oc(8),h.gc(9,"translate"),h.Sb(),h.Sb(),h.Tb(10,"div",11),h.Oc(11),h.gc(12,"translate"),h.Sb(),h.Tb(13,"div",11),h.Tb(14,"strong"),h.Oc(15),h.gc(16,"translate"),h.Sb(),h.Sb(),h.Tb(17,"div",11),h.Oc(18),h.gc(19,"translate"),h.Sb(),h.Tb(20,"div",11),h.Tb(21,"strong"),h.Oc(22),h.gc(23,"translate"),h.Sb(),h.Sb(),h.Tb(24,"div",11),h.Oc(25),h.gc(26,"translate"),h.Sb(),h.Tb(27,"div",11),h.Tb(28,"strong"),h.Oc(29),h.gc(30,"translate"),h.Sb(),h.Sb(),h.Tb(31,"div",11),h.Oc(32),h.gc(33,"translate"),h.Sb(),h.Tb(34,"div",11),h.Tb(35,"strong"),h.Oc(36),h.gc(37,"translate"),h.Sb(),h.Sb(),h.Tb(38,"div",11),h.Oc(39),h.gc(40,"date"),h.gc(41,"translate"),h.Sb(),h.Tb(42,"div",11),h.Tb(43,"strong"),h.Oc(44),h.gc(45,"translate"),h.Sb(),h.Sb(),h.Tb(46,"div",11),h.Oc(47),h.gc(48,"translate"),h.Sb(),h.Tb(49,"div",11),h.Tb(50,"strong"),h.Oc(51),h.gc(52,"translate"),h.Sb(),h.Sb(),h.Tb(53,"div",11),h.Oc(54),h.gc(55,"translate"),h.Sb(),h.Tb(56,"div",11),h.Tb(57,"strong"),h.Oc(58),h.gc(59,"translate"),h.Sb(),h.Sb(),h.Tb(60,"div",11),h.Oc(61),h.gc(62,"translate"),h.Sb(),h.Tb(63,"div",11),h.Tb(64,"strong"),h.Oc(65),h.gc(66,"translate"),h.Sb(),h.Sb(),h.Tb(67,"div",11),h.Oc(68),h.gc(69,"translate"),h.Sb(),h.Tb(70,"div",11),h.Tb(71,"strong"),h.Oc(72),h.gc(73,"translate"),h.Sb(),h.Sb(),h.Tb(74,"div",11),h.Oc(75),h.gc(76,"translate"),h.Sb(),h.Sb()),2&a){var t=h.fc(2);h.Bb(4),h.Qc(" ",h.hc(5,21,"FAS_ANA.PERSONA")," "),h.Bb(4),h.Pc(h.hc(9,23,"CODICE_FISCALE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.datiAnagraficiRappresentante&&t.datiFascicolo.datiAnagraficiRappresentante.codiceFiscale?t.datiFascicolo.datiAnagraficiRappresentante.codiceFiscale:h.hc(12,25,"ND")," "),h.Bb(4),h.Pc(h.hc(16,27,"NOMINATIVO")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.denominazione?t.datiFascicolo.denominazione:h.hc(19,29,"ND")," "),h.Bb(4),h.Pc(h.hc(23,31,"PROV_NASC")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.datiAnagraficiRappresentante&&t.datiFascicolo.datiAnagraficiRappresentante.provinciaNascita?t.datiFascicolo.datiAnagraficiRappresentante.provinciaNascita:h.hc(26,33,"ND")," "),h.Bb(4),h.Pc(h.hc(30,35,"COM_NASC")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.datiAnagraficiRappresentante&&t.datiFascicolo.datiAnagraficiRappresentante.comuneNascita?t.datiFascicolo.datiAnagraficiRappresentante.comuneNascita:h.hc(33,37,"ND")," "),h.Bb(4),h.Pc(h.hc(37,39,"DATA_NASC")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.datiAnagraficiRappresentante&&t.datiFascicolo.datiAnagraficiRappresentante.dataNascita?h.ic(40,41,t.datiFascicolo.datiAnagraficiRappresentante.dataNascita,"dd/MM/yyyy"):h.hc(41,44,"ND")," "),h.Bb(5),h.Pc(h.hc(45,46,"PROVINCIA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.domicilioFiscaleRappresentante&&t.datiFascicolo.domicilioFiscaleRappresentante.provincia?t.datiFascicolo.domicilioFiscaleRappresentante.provincia:h.hc(48,48,"ND")," "),h.Bb(4),h.Pc(h.hc(52,50,"COMUNE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.domicilioFiscaleRappresentante&&t.datiFascicolo.domicilioFiscaleRappresentante.comune?t.datiFascicolo.domicilioFiscaleRappresentante.comune:h.hc(55,52,"ND")," "),h.Bb(4),h.Pc(h.hc(59,54,"LOCALITA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.domicilioFiscaleRappresentante&&t.datiFascicolo.domicilioFiscaleRappresentante.localita?t.datiFascicolo.domicilioFiscaleRappresentante.localita:h.hc(62,56,"ND")," "),h.Bb(4),h.Pc(h.hc(66,58,"INDIRIZZO")),h.Bb(3),h.Qc(" ",t.indirizzoLR?t.indirizzoLR:h.hc(69,60,"ND")," "),h.Bb(4),h.Pc(h.hc(73,62,"CAP")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.domicilioFiscaleRappresentante&&t.datiFascicolo.domicilioFiscaleRappresentante.cap?t.datiFascicolo.domicilioFiscaleRappresentante.cap:h.hc(76,64,"ND")," ")}}function j(a,i){if(1&a&&(h.Tb(0,"div",11),h.Tb(1,"div",12),h.Tb(2,"h3"),h.Tb(3,"span"),h.Oc(4),h.gc(5,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(6,"div",11),h.Tb(7,"strong"),h.Oc(8),h.gc(9,"translate"),h.Sb(),h.Sb(),h.Tb(10,"div",11),h.Oc(11),h.gc(12,"translate"),h.Sb(),h.Tb(13,"div",11),h.Tb(14,"strong"),h.Oc(15),h.gc(16,"translate"),h.Sb(),h.Sb(),h.Tb(17,"div",11),h.Oc(18),h.gc(19,"translate"),h.Sb(),h.Tb(20,"div",11),h.Tb(21,"strong"),h.Oc(22),h.gc(23,"translate"),h.Sb(),h.Sb(),h.Tb(24,"div",11),h.Oc(25),h.gc(26,"translate"),h.Sb(),h.Tb(27,"div",11),h.Tb(28,"strong"),h.Oc(29),h.gc(30,"translate"),h.Sb(),h.Sb(),h.Tb(31,"div",11),h.Oc(32),h.gc(33,"translate"),h.Sb(),h.Tb(34,"div",11),h.Tb(35,"strong"),h.Oc(36),h.gc(37,"translate"),h.Sb(),h.Sb(),h.Tb(38,"div",11),h.Oc(39),h.gc(40,"translate"),h.Sb(),h.Tb(41,"div",11),h.Tb(42,"strong"),h.Oc(43),h.gc(44,"translate"),h.Sb(),h.Sb(),h.Tb(45,"div",11),h.Oc(46),h.gc(47,"translate"),h.Sb(),h.Tb(48,"div",11),h.Tb(49,"strong"),h.Oc(50),h.gc(51,"translate"),h.Sb(),h.Sb(),h.Tb(52,"div",11),h.Oc(53),h.gc(54,"translate"),h.Sb(),h.Tb(55,"div",11),h.Tb(56,"strong"),h.Oc(57),h.gc(58,"translate"),h.Sb(),h.Sb(),h.Tb(59,"div",11),h.Oc(60),h.gc(61,"translate"),h.Sb(),h.Tb(62,"div",11),h.Tb(63,"strong"),h.Oc(64),h.gc(65,"translate"),h.Sb(),h.Sb(),h.Tb(66,"div",11),h.Oc(67),h.gc(68,"translate"),h.Sb(),h.Sb()),2&a){var t=h.fc(2);h.Bb(4),h.Qc(" ",h.hc(5,19,"FAS_ANA.PERSONA")," "),h.Bb(4),h.Pc(h.hc(9,21,"CODICE_FISCALE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.codiceFiscale?t.datiFascicolo.codiceFiscale:h.hc(12,23,"ND")," "),h.Bb(4),h.Pc(h.hc(16,25,"PARTITA_IVA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.partitaIva?t.datiFascicolo.partitaIva:h.hc(19,27,"ND")," "),h.Bb(4),h.Pc(h.hc(23,29,"DENOMINAZIONE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.denominazione?t.datiFascicolo.denominazione:h.hc(26,31,"ND")," "),h.Bb(4),h.Pc(h.hc(30,33,"NATURA_GIURIDICA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.naturaGiuridica?t.datiFascicolo.naturaGiuridica:h.hc(33,35,"ND")," "),h.Bb(4),h.Pc(h.hc(37,37,"PROVINCIA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.ubicazioneDitta&&t.datiFascicolo.ubicazioneDitta.provincia?t.datiFascicolo.ubicazioneDitta.provincia:h.hc(40,39,"ND")," "),h.Bb(4),h.Pc(h.hc(44,41,"COMUNE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.ubicazioneDitta&&t.datiFascicolo.ubicazioneDitta.comune?t.datiFascicolo.ubicazioneDitta.comune:h.hc(47,43,"ND")," "),h.Bb(4),h.Pc(h.hc(51,45,"LOCALITA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.ubicazioneDitta&&t.datiFascicolo.ubicazioneDitta.localita?t.datiFascicolo.ubicazioneDitta.localita:h.hc(54,47,"ND")," "),h.Bb(4),h.Pc(h.hc(58,49,"INDIRIZZO")),h.Bb(3),h.Qc(" ",t.indirizzoAzienda?t.indirizzoAzienda:h.hc(61,51,"ND")," "),h.Bb(4),h.Pc(h.hc(65,53,"CAP")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.ubicazioneDitta&&t.datiFascicolo.ubicazioneDitta.cap?t.datiFascicolo.ubicazioneDitta.cap:h.hc(68,55,"ND")," ")}}function H(a,i){if(1&a&&(h.Tb(0,"div",11),h.Tb(1,"div",12),h.Tb(2,"h3"),h.Tb(3,"span"),h.Oc(4),h.gc(5,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(6,"div",11),h.Tb(7,"strong"),h.Oc(8),h.gc(9,"translate"),h.Sb(),h.Sb(),h.Tb(10,"div",11),h.Oc(11),h.gc(12,"translate"),h.Sb(),h.Tb(13,"div",11),h.Tb(14,"strong"),h.Oc(15),h.gc(16,"translate"),h.Sb(),h.Sb(),h.Tb(17,"div",11),h.Oc(18),h.gc(19,"translate"),h.Sb(),h.Tb(20,"div",11),h.Tb(21,"strong"),h.Oc(22),h.gc(23,"translate"),h.Sb(),h.Sb(),h.Tb(24,"div",11),h.Oc(25),h.gc(26,"translate"),h.Sb(),h.Tb(27,"div",11),h.Tb(28,"strong"),h.Oc(29),h.gc(30,"translate"),h.Sb(),h.Sb(),h.Tb(31,"div",11),h.Oc(32),h.gc(33,"translate"),h.Sb(),h.Sb()),2&a){var t=h.fc(2);h.Bb(4),h.Qc(" ",h.hc(5,9,"FAS_ANA.IMPRESA_INDIVIDUALE")," "),h.Bb(4),h.Pc(h.hc(9,11,"DENOMINAZIONE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.denominazione?t.datiFascicolo.denominazione:h.hc(12,13,"ND")," "),h.Bb(4),h.Pc(h.hc(16,15,"PARTITA_IVA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.partitaIva?t.datiFascicolo.partitaIva:h.hc(19,17,"ND")," "),h.Bb(4),h.Pc(h.hc(23,19,"NATURA_GIURIDICA")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&t.datiFascicolo.naturaGiuridica?t.datiFascicolo.naturaGiuridica:h.hc(26,21,"ND")," "),h.Bb(4),h.Pc(h.hc(30,23,"INDIRIZZO")),h.Bb(3),h.Qc(" ",t.indirizzoAzienda?t.indirizzoAzienda:h.hc(33,25,"ND")," ")}}function X(a,i){if(1&a&&(h.Tb(0,"div",11),h.Tb(1,"div",12),h.Tb(2,"h3"),h.Tb(3,"span"),h.Oc(4),h.gc(5,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Tb(6,"div",11),h.Tb(7,"strong"),h.Oc(8),h.gc(9,"translate"),h.Sb(),h.Sb(),h.Tb(10,"div",11),h.Oc(11),h.gc(12,"translate"),h.Sb(),h.Tb(13,"div",11),h.Tb(14,"strong"),h.Oc(15),h.gc(16,"translate"),h.Sb(),h.Sb(),h.Tb(17,"div",11),h.Oc(18),h.gc(19,"translate"),h.Sb(),h.Sb()),2&a){var t=h.fc(2);h.Bb(4),h.Qc(" ",h.hc(5,5,"FAS_ANA.TITOLARE_RL")," "),h.Bb(4),h.Pc(h.hc(9,7,"NOMINATIVO")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.datiAnagraficiRappresentante&&t.datiFascicolo.datiAnagraficiRappresentante.nominativo?t.datiFascicolo.datiAnagraficiRappresentante.nominativo:h.hc(12,9,"ND")," "),h.Bb(4),h.Pc(h.hc(16,11,"CODICE_FISCALE")),h.Bb(3),h.Qc(" ",null!=t.datiFascicolo&&null!=t.datiFascicolo.datiAnagraficiRappresentante&&t.datiFascicolo.datiAnagraficiRappresentante.codiceFiscale?t.datiFascicolo.datiAnagraficiRappresentante.codiceFiscale:h.hc(19,13,"ND")," ")}}function K(a,i){if(1&a){var t=h.Ub();h.Tb(0,"div",6),h.Tb(1,"div",7),h.Tb(2,"div",8),h.Tb(3,"div",9),h.Tb(4,"h3"),h.Tb(5,"span"),h.Oc(6),h.gc(7,"translate"),h.Sb(),h.Sb(),h.Mc(8,G,77,66,"div",10),h.Mc(9,j,69,57,"div",10),h.Mc(10,H,34,27,"div",10),h.Mc(11,X,20,15,"div",10),h.Sb(),h.Tb(12,"div",9),h.Tb(13,"h3"),h.Tb(14,"span"),h.Oc(15),h.gc(16,"translate"),h.Sb(),h.Sb(),h.Tb(17,"div",11),h.Tb(18,"div",11),h.Tb(19,"strong"),h.Oc(20),h.gc(21,"translate"),h.Sb(),h.Sb(),h.Tb(22,"div",11),h.Oc(23),h.gc(24,"translate"),h.Sb(),h.Tb(25,"div",11),h.Tb(26,"strong"),h.Oc(27),h.gc(28,"translate"),h.Sb(),h.Sb(),h.Tb(29,"div",11),h.Oc(30),h.gc(31,"translate"),h.Sb(),h.Tb(32,"div",11),h.Tb(33,"strong"),h.Oc(34),h.gc(35,"translate"),h.Sb(),h.Sb(),h.Tb(36,"div",11),h.Oc(37),h.gc(38,"translate"),h.Sb(),h.Tb(39,"div",11),h.Tb(40,"strong"),h.Oc(41),h.gc(42,"translate"),h.Sb(),h.Sb(),h.Tb(43,"div",11),h.Oc(44),h.gc(45,"translate"),h.Sb(),h.Tb(46,"div",11),h.Tb(47,"strong"),h.Oc(48),h.gc(49,"translate"),h.Sb(),h.Sb(),h.Tb(50,"div",11),h.Oc(51),h.gc(52,"date"),h.gc(53,"translate"),h.Sb(),h.Tb(54,"div",11),h.Tb(55,"strong"),h.Oc(56),h.gc(57,"translate"),h.Sb(),h.Sb(),h.Tb(58,"div",11),h.Oc(59),h.gc(60,"date"),h.gc(61,"translate"),h.Sb(),h.Tb(62,"div",11),h.Tb(63,"strong"),h.Oc(64),h.gc(65,"translate"),h.Sb(),h.Sb(),h.Tb(66,"div",11),h.Oc(67),h.gc(68,"date"),h.gc(69,"translate"),h.Sb(),h.Sb(),h.Tb(70,"div",11),h.Tb(71,"div",11),h.Tb(72,"strong"),h.Oc(73),h.gc(74,"translate"),h.Sb(),h.Sb(),h.Tb(75,"div",11),h.Oc(76),h.gc(77,"translate"),h.Sb(),h.Tb(78,"div",11),h.Tb(79,"strong"),h.Oc(80),h.gc(81,"translate"),h.Sb(),h.Sb(),h.Tb(82,"div",11),h.Oc(83),h.gc(84,"translate"),h.Sb(),h.Tb(85,"div",11),h.Tb(86,"strong"),h.Oc(87),h.gc(88,"translate"),h.Sb(),h.Sb(),h.Tb(89,"div",11),h.Oc(90),h.gc(91,"translate"),h.Sb(),h.Tb(92,"div",11),h.Tb(93,"strong"),h.Oc(94),h.gc(95,"translate"),h.Sb(),h.Sb(),h.Tb(96,"div",11),h.Oc(97),h.gc(98,"translate"),h.Sb(),h.Ob(99,"div",12),h.Tb(100,"div",12),h.Oc(101),h.Sb(),h.Tb(102,"div",11),h.Tb(103,"button",13),h.bc("click",(function(){return h.Ec(t),h.fc().revocaImmediata()})),h.gc(104,"translate"),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb(),h.Sb()}if(2&a){var e=h.fc();h.Bb(6),h.Qc(" ",h.hc(7,31,"FAS_ANA.DATI_AZIENDA")," "),h.Bb(2),h.mc("ngIf",e.isPersonaFisica()),h.Bb(1),h.mc("ngIf",!e.isPersonaFisica()),h.Bb(1),h.mc("ngIf",e.isPersonaFisica()),h.Bb(1),h.mc("ngIf",!e.isPersonaFisica()),h.Bb(4),h.Qc(" ",h.hc(16,33,"FAS_ANA.MANDATO")," "),h.Bb(5),h.Pc(h.hc(21,35,"DENOMINAZIONE")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.denominazione?e.datiMandato.denominazione:h.hc(24,37,"ND")," "),h.Bb(4),h.Pc(h.hc(28,39,"CODICE_FISCALE")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.codiceFiscale?e.datiMandato.codiceFiscale:h.hc(31,41,"ND")," "),h.Bb(4),h.Pc(h.hc(35,43,"PARTITA_IVA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.partitaIva?e.datiMandato.partitaIva:h.hc(38,45,"ND")," "),h.Bb(4),h.Pc(h.hc(42,47,"SEDE_AMMINISTRATIVA_CAA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&null!=e.datiMandato.indirizzoSedeAmministrativa&&e.datiMandato.indirizzoSedeAmministrativa.toponimo?e.datiMandato.indirizzoSedeAmministrativa.toponimo:h.hc(45,49,"ND")," "),h.Bb(4),h.Pc(h.hc(49,51,"DATA_SOTTOSCRIZIONE")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.dataSottoscrizione?h.ic(52,53,e.datiMandato.dataSottoscrizione,"dd/MM/yyyy"):h.hc(53,56,"ND")," "),h.Bb(5),h.Pc(h.hc(57,58,"DATA_INIZIO_DECORRENZA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.dataInizio?h.ic(60,60,e.datiMandato.dataInizio,"dd/MM/yyyy"):h.hc(61,63,"ND")," "),h.Bb(5),h.Pc(h.hc(65,65,"DATA_SCADENZA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.dataFine?h.ic(68,67,e.datiMandato.dataFine,"dd/MM/yyyy"):h.hc(69,70,"ND")," "),h.Bb(6),h.Pc(h.hc(74,72,"SEDE_SPORTELLO_CAA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&null!=e.datiMandato.sportello&&e.datiMandato.sportello.denominazione?e.datiMandato.sportello.denominazione:h.hc(77,74,"ND")," "),h.Bb(4),h.Pc(h.hc(81,76,"LOCALITA_SPORTELLO_CAA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&null!=e.datiMandato.sportello&&e.datiMandato.sportello.comune?e.datiMandato.sportello.comune:h.hc(84,78,"ND")," "),h.Bb(4),h.Pc(h.hc(88,80,"ATTO_CAA")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.attoRiconoscimento?e.datiMandato.attoRiconoscimento:h.hc(91,82,"ND")," "),h.Bb(4),h.Pc(h.hc(95,84,"SOCIETA_SERVIZI")),h.Bb(3),h.Qc(" ",null!=e.datiMandato&&e.datiMandato.societaServizi?e.datiMandato.societaServizi:h.hc(98,86,"ND")," "),h.Bb(4),h.Pc(e.labels.inserimentoRevocaImmediata),h.Bb(2),h.nc("label",h.hc(104,88,"FAS_ANA.REVOCA_ORDINARIA")),h.mc("disabled",!e.isRevocabileToday())}}function $(a,i){if(1&a){var t=h.Ub();h.Tb(0,"div",14),h.Ob(1,"i",15),h.Tb(2,"h3"),h.Oc(3),h.Sb(),h.Tb(4,"p"),h.Oc(5),h.Sb(),h.Sb(),h.Tb(6,"div",6),h.Tb(7,"div",11),h.Tb(8,"button",16),h.bc("click",(function(){return h.Ec(t),h.fc().confirm()})),h.Sb(),h.Sb(),h.Tb(9,"div",11),h.Tb(10,"button",17),h.bc("click",(function(){return h.Ec(t),h.fc().reject()})),h.Sb(),h.Sb(),h.Sb()}if(2&a){var e=i.$implicit;h.Bb(3),h.Pc(e.summary),h.Bb(2),h.Pc(e.detail)}}var J,W,Y,q=function(){return{marginTop:"70px"}},aa=[{path:"",component:(J=function(){function a(i,t,e,c,n,o,l){_classCallCheck(this,a),this.router=i,this.route=t,this.messageService=e,this.translateService=c,this.fascicoloService=n,this.mandatoService=o,this.fascicoloCorrente=l,this.dtAperturaRevocaImmediata=U.a.dtAperturaRevocaImmediata,this.dtChiusuraRevocaImmediata=U.a.dtChiusuraRevocaImmediata,this.labels=s.a,this.idValidazione=void 0,this.componentDestroyed$=new r.a}return _createClass(a,[{key:"ngOnInit",value:function(){this.cuaa=this.fascicoloCorrente.fascicolo.cuaa,this.getDatiFascicoloEMandato();var a=this.route.snapshot.queryParams["id-validazione"];this.idValidazione=a?Number.parseInt(a):0}},{key:"getDatiFascicoloEMandato",value:function(){var a=this,i=this.mandatoService.fascicoloPerMandato(this.cuaa,this.idValidazione),t=this.mandatoService.getMandati(this.cuaa,this.idValidazione);Object(l.a)(i,t).pipe(Object(b.a)((function(i){a.messageService.add(p.a.getToast("tst",p.b.error,p.a.erroreRecuperoDatiFascicoloMandato))}))).subscribe((function(i){a.datiFascicolo=Object.assign({},i[0]),a.datiMandato=a.getMandatoAttuale(i[1]),a.setIndirizzoAzienda(),a.setIndirizzoLegaleRappresentante()}))}},{key:"getMandatoAttuale",value:function(a){var i,t=x(x.now()),e=_createForOfIteratorHelper(a);try{for(e.s();!(i=e.n()).done;){var c=i.value,n=x(c.dataInizio),o=x(c.dataFine);if(t.isSameOrAfter(n)&&(!c.dataFine||t.isSameOrBefore(o)))return c}}catch(s){e.e(s)}finally{e.f()}}},{key:"setIndirizzoAzienda",value:function(){this.datiFascicolo.ubicazioneDitta&&this.datiFascicolo.ubicazioneDitta.toponimo&&(this.indirizzoAzienda=this.datiFascicolo.ubicazioneDitta.toponimo)}},{key:"setIndirizzoLegaleRappresentante",value:function(){this.datiFascicolo.domicilioFiscaleRappresentante&&this.datiFascicolo.domicilioFiscaleRappresentante.toponimo&&(this.indirizzoLR=this.datiFascicolo.domicilioFiscaleRappresentante.toponimo)}},{key:"isRevocabileToday",value:function(){var a=x(x.now()),i=x(this.dtAperturaRevocaImmediata),t=x(this.dtChiusuraRevocaImmediata);return!(!a.isSameOrAfter(i)||!a.isSameOrBefore(t))}},{key:"revocaImmediata",value:function(){var a,i=this;this.mandatoService.verificaInserimentoRevocaImmediata(this.cuaa).pipe(Object(u.a)(this.componentDestroyed$),Object(b.a)((function(a){switch(a.error.message){case"DATA_NON_VALIDA":i.messageService.add(p.a.getToast("tst",p.b.error,i.translateService.instant("EXC_REVOCA_MANDATO.FINESTRA_TEMPORALE_NON_VALIDA")));break;case"MANDATO_MANCANTE":i.messageService.add(p.a.getToast("tst",p.b.error,i.translateService.instant("EXC_REVOCA_MANDATO.MANDATO_MANCANTE")));break;case"RICHIESTA_REVOCA_IMMEDIATA_PRESENTE_E_DA_VALUTARE":i.messageService.add(p.a.getToast("tst",p.b.error,i.translateService.instant("EXC_REVOCA_MANDATO.RICHIESTA_REVOCA_IMMEDIATA_PRESENTE_E_DA_VALUTARE")));break;default:i.messageService.add(p.a.getToast("tst",p.b.error,p.a.erroreVerificaInserimentoRevocaImmediata))}return d.a})),Object(v.a)((function(t){return a=t,i.mandatoService.verificaPresenzaRevocaOrdinaria(i.cuaa)}))).subscribe((function(t){a?i.verificaPresenzaRevocaOrdinaria(t):i.messageService.add(p.a.getToast("tst",p.b.error,p.a.erroreVerificaInserimentoRevocaImmediata))}),(function(a){i.messageService.add(p.a.getToast("tst",p.b.error,p.a.erroreVerificaPresenzaRevocaOrdinaria))}))}},{key:"verificaPresenzaRevocaOrdinaria",value:function(a){a?this.messageService.add({key:"checkPresenzaRevocaOrdinaria",sticky:!0,severity:"warn",summary:p.a.checkVerificaPresenzaRevocaOrdinariaSummary,detail:p.a.checkVerificaPresenzaRevocaOrdinariaDetail}):this.revocaImmediataDialog.onOpen(this.datiMandato)}},{key:"confirm",value:function(){this.messageService.clear("checkPresenzaRevocaOrdinaria"),this.revocaImmediataDialog.onOpen(this.datiMandato)}},{key:"reject",value:function(){this.messageService.clear("checkPresenzaRevocaOrdinaria")}},{key:"ngOnDestroy",value:function(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}},{key:"onDialogClose",value:function(a){}},{key:"isPersonaFisica",value:function(){return 16===this.cuaa.length}}]),a}(),J.\u0275fac=function(a){return new(a||J)(h.Nb(o.e),h.Nb(o.a),h.Nb(_.d),h.Nb(y.e),h.Nb(S.a),h.Nb(A.a),h.Nb(g.a))},J.\u0275cmp=h.Hb({type:J,selectors:[["app-mandato"]],viewQuery:function(a,i){var t;1&a&&h.Jc(Z,!0),2&a&&h.Ac(t=h.cc())&&(i.revocaImmediataDialog=t.first)},decls:8,vars:8,consts:[[3,"datiFascicolo","datiMandato","displayChange"],["revocaImmediataDialog",""],["class","ui-g ui-fluid",4,"ngIf"],["key","tst"],["position","center","key","checkPresenzaRevocaOrdinaria",3,"modal","baseZIndex"],["pTemplate","message"],[1,"ui-g","ui-fluid"],[1,"ui-g-12","boxgrey",2,"padding-top","50px","display","inline-block"],[1,"ui-grid-fixed"],[2,"background","#fff","padding","30px","display","inline-block","width","100%","margin-bottom","30px"],["class","ui-g-6",4,"ngIf"],[1,"ui-g-6"],[1,"ui-g-12"],["pButton","","icon","ui-icon-not-interested","type","button",3,"label","disabled","click"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(a,i){1&a&&(h.Tb(0,"app-revoca-immediata-dialog",0,1),h.bc("displayChange",(function(a){return i.onDialogClose(a)})),h.Sb(),h.Ob(2,"br"),h.Ob(3,"br"),h.Mc(4,K,105,90,"div",2),h.Ob(5,"p-toast",3),h.Tb(6,"p-toast",4),h.Mc(7,$,11,2,"ng-template",5),h.Sb()),2&a&&(h.mc("datiFascicolo",i.datiFascicolo)("datiMandato",i.datiMandato),h.Bb(4),h.mc("ngIf",i.datiFascicolo&&i.datiMandato),h.Bb(1),h.Kc(h.rc(7,q)),h.Bb(1),h.mc("modal",!0)("baseZIndex",5e3))},directives:[Q,c.t,N.a,_.e,E.b],pipes:[y.d,c.f],styles:[""]}),J),data:{mybreadcrumb:s.a.revocaMandato}}],ia=((Y=function a(){_classCallCheck(this,a)}).\u0275mod=h.Lb({type:Y}),Y.\u0275inj=h.Kb({factory:function(a){return new(a||Y)},imports:[[o.i.forChild(aa)]]}),Y),ta=((W=function a(){_classCallCheck(this,a)}).\u0275mod=h.Lb({type:W}),W.\u0275inj=h.Kb({factory:function(a){return new(a||W)},imports:[[ia,n.a,c.c,M.b]]}),W)}}]);
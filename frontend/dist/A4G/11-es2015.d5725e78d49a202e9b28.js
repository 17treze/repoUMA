(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"7RJT":function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),a=i("ds6q"),n=i("Mxlh");e.BehaviorSubject=function(t){function e(e){var i=t.call(this)||this;return i._value=e,i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var i=t.prototype._subscribe.call(this,e);return i&&!i.closed&&e.next(this._value),i},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new n.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(a.Subject)},FiyT:function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();e.SubjectSubscription=function(t){function e(e,i){var o=t.call(this)||this;return o.subject=e,o.subscriber=i,o.closed=!1,o}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var i=e.indexOf(this.subscriber);-1!==i&&e.splice(i,1)}}},e}(i("zB/H").Subscription)},GFTO:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));class o{constructor(t,e){this.label=t,this.data=e}static fromEnteSede(t){return new o(t.descrizione,t)}}class a{constructor(t,e,i){this.label=t,this.data=e,this.children=i,this.partialSelected=!1}static getTreeNode(t){let e=[];if(void 0!==t.sedi)for(let i of t.sedi)e.push(o.fromEnteSede(i));return new a(t.descrizione,t.id,e)}static getTreeNodes(t){let e=[];t.sort((t,e)=>t.descrizione>e.descrizione?1:t.descrizione<e.descrizione?-1:0);for(let i of t)i.sedi.sort((t,e)=>t.descrizione>e.descrizione?1:t.descrizione<e.descrizione?-1:0),e.push(a.getTreeNode(i));return e}static selectEntiSedi(t,e){let i=[];return e&&t.forEach((t,o)=>{let a=0;t.children.forEach((t,o)=>{e.find(e=>e==t.data.id.valueOf())&&(i.push(t),a++)}),a>0&&(a===t.children.length?i=i.concat([t],t.children):t.partialSelected=!0)}),i}}},Mxlh:function(t,e,i){"use strict";e.ObjectUnsubscribedError=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}()},"Vh/Q":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var o=i("mrSG"),a=i("HDdC"),n=i("tk/3"),s=i("rNJQ"),r=i("fXoL"),c=i("dkQB");let l=(()=>{class t{constructor(t,e){this.http=t,this.configuration=e}getDatiAnagraficiUtente(t){return this.http.get(this.configuration.UrlGetDomandaRegistrazioneUtente.replace("{id}",t.toString()))}getDatiUtenteByCodiceFiscale(t){return this.http.get(this.configuration.UrlGetUtentiCodiceFiscale.replace("{codiceFiscale}",t))}getDatiUtenteById(t){return this.http.get(this.configuration.UrlGetUtentiById.replace("{id}",t))}getRichiesteAccessoSistemaPerStato(t,e){let i=t.getHttpParams(e);return this.http.get(this.configuration.UrlRicercaDomanda,{params:i})}getOrdine(t){return 1===t?"ASC":"DESC"}putPresaInCarico(t){const e=new n.f({"Content-Type":"application/json"});return this.http.put(this.configuration.UrlPresaInCarico.replace("${id}",t.toString()),{headers:e})}approvaRichiestaAccessoSistema(t,e){const i=new n.f({"Content-Type":"application/json"});return this.http.put(this.configuration.UrlApprovaDomanda.replace("${id}",t.toString()),JSON.stringify(e),{headers:i})}rifiutaRichiestaAccessoSistema(t,e){const i=new n.f({"Content-Type":"application/json"});return this.http.put(this.configuration.UrlRifiutaDomanda.replace("${id}",t.toString()),JSON.stringify(e),{headers:i})}putDatiAnagraficiUtente(t){return this.http.get(this.configuration.UrlGetDomandaRegistrazioneUtente.replace("{id}",t.toString()))}getIstruttoriaProfiloByDomanda(t){return this.http.get(this.configuration.UrlGetIstruttoriaByDomanda.replace("${id}",""+t))}getStorico(t){return this.http.get(this.configuration.UrlGetStoricoIstruttoria.replace("${idUtente}",""+t))}}return t.\u0275fac=function(e){return new(e||t)(r.Xb(n.b),r.Xb(c.a))},t.\u0275prov=r.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),Object(o.b)([Object(s.a)(),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[Number]),Object(o.c)("design:returntype",a.a)],t.prototype,"getDatiAnagraficiUtente",null),Object(o.b)([Object(s.a)(),Object(o.c)("design:type",Function),Object(o.c)("design:paramtypes",[String]),Object(o.c)("design:returntype",a.a)],t.prototype,"getDatiUtenteByCodiceFiscale",null),t})()},bYf8:function(t,e,i){"use strict";i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return n}));class o{}class a extends o{}class n extends o{}},ds6q:function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),a=i("Q1FS"),n=i("FWf1"),s=i("zB/H"),r=i("Mxlh"),c=i("FiyT"),l=i("p//D"),b=function(t){function e(e){var i=t.call(this,e)||this;return i.destination=e,i}return o(e,t),e}(n.Subscriber);e.SubjectSubscriber=b;var d=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[l.rxSubscriber]=function(){return new b(this)},e.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,i=e.length,o=e.slice(),a=0;a<i;a++)o[a].next(t)},e.prototype.error=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,i=e.length,o=e.slice(),a=0;a<i;a++)o[a].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new r.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,i=t.slice(),o=0;o<e;o++)i[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new r.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new c.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new a.Observable;return t.source=this,t},e.create=function(t,e){return new p(t,e)},e}(a.Observable);e.Subject=d;var p=function(t){function e(e,i){var o=t.call(this)||this;return o.destination=e,o.source=i,o}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},e}(d);e.AnonymousSubject=p},"eM/+":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));class o{static itCalendar(){return{firstDayOfWeek:0,dayNames:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",clear:"Cancella"}}}},sqTO:function(t,e,i){"use strict";i.r(e),i.d(e,"GestioneUtenzeModule",(function(){return ri}));var o=i("R69K"),a=i("tyNb"),n=i("ofXK"),s=i("69Tm"),r=i("/vOn"),c=i("Tn7N"),l=i("7RJT"),b=i("fXoL");let d=(()=>{class t{constructor(){this.counters=new l.BehaviorSubject({stato:"",count:0}),this.currentCounters=this.counters.asObservable(),this.timersForChangeCounters=new l.BehaviorSubject(0),this.currentTimersForChangeCounters=this.timersForChangeCounters.asObservable()}changeCounters(t){this.counters.next(t)}changeCountersForApproveOrDanied(){this.timersForChangeCounters.next((new Date).getMilliseconds())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("1G5W"),u=i("vkgz"),h=i("XNiG"),g=i("OSEj"),f=i("eZS7"),m=i("tk/3"),S=i("6b9K");class T{static of(t,e,i,o,a,n,s,r){let c=new T;return c.filtroGenerico=t,c.stato=e,c.codiceFiscale=i,c.nome=o,c.cognome=a,c.idProtocollazione=n,c.dataInizio=s,c.dataFine=r,c}getHttpParams(t){let e=new m.g;return g.a.isNotEmpty(this.stato)&&(e=e.append("stato",this.stato)),g.a.isNotEmpty(this.filtroGenerico)&&(e=e.append("filtroGenerico",this.filtroGenerico)),g.a.isNotEmpty(this.codiceFiscale)&&(e=e.append("codiceFiscaleUpperLike",this.codiceFiscale)),g.a.isNotEmpty(this.cognome)&&(e=e.append("cognome",this.cognome)),g.a.isNotEmpty(this.nome)&&(e=e.append("nome",this.nome)),g.a.isNotEmpty(this.idProtocollazione)&&(e=e.append("idProtocollo",this.idProtocollazione)),g.a.isNotEmpty(this.dataInizio)&&(e=e.append("dataInizio",this.dataInizio)),g.a.isNotEmpty(this.dataFine)&&(e=e.append("dataFine",this.dataFine)),e=S.a.fillHttpParamsWith(e,t),e}}var v=i("eM/+"),O=i("RtSl"),y=i("arS9"),P=i("yhG/"),C=i("3Pt+"),z=i("DYOT"),D=i("GLSp"),A=i("A1Yd"),B=i("rgW5"),M=i("Vh/Q");class R{constructor(){this.count=0}}var I=i("Kj3r"),E=i("/uUt");const w=["table"];let U=(()=>{class t{constructor(t,e,i,o,a){this.gestioneUtenzeService=t,this.messages=e,this.sharedService=i,this.router=o,this.route=a,this.intestazioni=s.a,this.elementiPerPagina=10,this.numeroPagina=0,this.inputFilter="",this.proprieta="",this.ordine="",this.inputFilterUpdate=new h.a,this.componentDestroyed$=new h.a,this.defaultSortingColumn=void 0,this.defaultSortingOrder=void 0,this.inputFilterUpdate.pipe(Object(I.a)(400),Object(E.a)()).subscribe(t=>{this.inputFilter=t,this.updatePageParameter(0,t,this.proprieta,this.ordine)})}viewDetail(t){this.router.navigate(["./gestioneUtenze/:idUtenza/dettaglioUtenza".replace(":idUtenza",t.toString())],{relativeTo:this.route.parent.parent})}updatePageParameter(t,e,i,o){this.router.navigate([],{replaceUrl:!0,queryParams:{inputFilters:e,page:t,sortOrder:o,sortProperty:i},queryParamsHandling:"merge"})}getElencoRichieste(t){null!=t&&null!=t.sortField&&(this.proprieta=t.sortField,this.ordine=this.gestioneUtenzeService.getOrdine(t.sortOrder)),this.numeroPagina=Math.floor(this.table.first/this.elementiPerPagina),this.updatePageParameter(this.numeroPagina,this.inputFilter,this.proprieta,this.ordine)}refreshElencoRichieste(){let t=T.of(this.inputFilter,this.stato,this.codiceFiscale,this.nome,this.cognome,this.idProtocollazione,this.dataInizio,this.dataFine),e=this.proprieta;!e||"dtApprovazione"!==e&&"dtRifiuto"!==e||(e="istruttoriaEntita.dataTermineIstruttoria");let i=S.a.of(this.numeroPagina,this.elementiPerPagina,e,this.ordine);this.sharedService.changeCountersForApproveOrDanied(),this.gestioneUtenzeService.getRichiesteAccessoSistemaPerStato(t,i).subscribe(t=>this.gestisciRispostaRicarcaAccessoSistema(t),t=>this.messages.add(c.a.getToast("tst",c.b.error,c.a.erroreRecuperoDati)))}setupRouting(t){this.route.queryParams.pipe(Object(u.a)(e=>{const i=e.page;i&&(this.numeroPagina=Number.parseInt(i)),this.ordine=e.sortOrder,this.proprieta=e.sortProperty,this.inputFilter=e.inputFilters,e.tabselected===t&&this.valorizzaParametriRicercaFrom(e),this.refreshElencoRichieste()}),Object(p.a)(this.componentDestroyed$)).subscribe(t=>{},t=>{}),this.paginaDomande=new R,this.paginaDomande.risultati=[]}valorizzaParametriRicercaFrom(t){null!=t&&(this.codiceFiscale=t.codiceFiscale,this.cognome=t.cognome,this.nome=t.nome,this.idProtocollazione=t.idProtocollo,this.dataInizio=t.dataInizio,this.dataFine=t.dataFine,this.ordine||(this.ordine=this.defaultSortingOrder),this.proprieta||(this.proprieta=this.defaultSortingColumn))}gestisciRispostaRicarcaAccessoSistema(t){let e=[];t&&(t.risultati.forEach(t=>e.push(t)),this.paginaDomande.count=t.count,this.paginaDomande.risultati=e)}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(M.a),b.Nb(O.d),b.Nb(d),b.Nb(a.e),b.Nb(a.a))},t.\u0275dir=b.Ib({type:t,viewQuery:function(t,e){var i;1&t&&b.Jc(w,!0),2&t&&b.Ac(i=b.cc())&&(e.table=i.first)}}),t})();var F=i("yWug"),x=i("x5p7"),N=i("sYmb");function _(t,e){if(1&t&&b.Ob(0,"p-sortIcon",11),2&t){const t=b.fc().$implicit;b.mc("field",t.header)}}function k(t,e){if(1&t&&(b.Tb(0,"th",9),b.Tb(1,"strong"),b.Oc(2),b.Sb(),b.Mc(3,_,1,1,"p-sortIcon",10),b.Sb()),2&t){const t=e.$implicit;b.mc("pSortableColumn",t.field)("pSortableColumnDisabled",null==t.field),b.Bb(2),b.Pc(t.header),b.Bb(1),b.mc("ngIf",t.field)}}function $(t,e){if(1&t&&(b.Tb(0,"tr"),b.Mc(1,k,4,4,"th",8),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t)}}function j(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",12),b.Tb(1,"td"),b.Oc(2),b.gc(3,"translate"),b.Sb(),b.Tb(4,"td"),b.Oc(5),b.gc(6,"date"),b.Sb(),b.Tb(7,"td"),b.Oc(8),b.Sb(),b.Tb(9,"td"),b.Oc(10),b.Sb(),b.Tb(11,"td"),b.Oc(12),b.Sb(),b.Tb(13,"td",13),b.Ob(14,"img",14),b.Ob(15,"img",15),b.Sb(),b.Tb(16,"td",16),b.Tb(17,"div",17),b.Tb(18,"div",18),b.Tb(19,"p-button",19),b.bc("click",(function(){b.Ec(t);const i=e.$implicit;return b.fc().viewDetail(i.id)})),b.Sb(),b.Sb(),b.Tb(20,"div",18),b.Tb(21,"p-button",20),b.bc("click",(function(){b.Ec(t);const i=e.$implicit;return b.fc().changeStatus(i.id)})),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.fc();b.mc("pSelectableRow",t),b.Bb(2),b.Pc(null!=t.idProtocollo?t.idProtocollo:b.hc(3,10,"gestioneUtenze.IN_PROTOCOLLAZIONE")),b.Bb(3),b.Pc(b.ic(6,12,t.dataProtocollazione,"dd/MM/yyyy")),b.Bb(3),b.Pc(t.datiAnagrafici.nome),b.Bb(2),b.Pc(t.datiAnagrafici.cognome),b.Bb(2),b.Pc(t.datiAnagrafici.codiceFiscale),b.Bb(2),b.nc("pTooltip",t.datiAnagrafici.telefono),b.Bb(1),b.nc("pTooltip",t.datiAnagrafici.email),b.Bb(4),b.nc("title",i.intestazioni.dettaglioDomanda),b.Bb(2),b.nc("title",i.intestazioni.presaInCarico)}}function L(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.fc();b.Bb(1),b.Cb("colspan",t.length+2),b.Bb(1),b.Qc(" ",i.intestazioni.noTableContent," ")}}let G=(()=>{class t extends U{constructor(t,e,i,o,a){super(t,e,i,o,a),this.gestioneUtenzeService=t,this.messages=e,this.sharedService=i,this.router=o,this.route=a,this.setCols(),this.stato=this.intestazioni.protocollata,this.defaultSortingColumn="dtProtocollazione",this.defaultSortingOrder="ASC"}ngOnInit(){this.setupRouting("protocollate")}changeStatus(t){this.gestioneUtenzeService.putPresaInCarico(t).subscribe(t=>{this.messages.add(c.a.getToast("tst",c.b.success,c.a.OPERAZIONE_OK)),this.router.navigate([],{replaceUrl:!1,queryParams:{tabselected:"inlavorazione"},queryParamsHandling:"merge"})},t=>{this.messages.add(c.a.getToast("tst",c.b.error,c.a.changeStatusKo))})}setCols(){this.cols=[{field:"idProtocollo",header:this.intestazioni.nrProtocollo},{field:"dtProtocollazione",header:this.intestazioni.dtProtocollazione},{field:"nome",header:this.intestazioni.nome},{field:"cognome",header:this.intestazioni.cognome},{field:"codiceFiscale",header:this.intestazioni.codiceFiscale},{field:null,header:this.intestazioni.contatti},{field:null,header:this.intestazioni.azioni}]}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(M.a),b.Nb(O.d),b.Nb(d),b.Nb(a.e),b.Nb(a.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-richieste-protocollate"]],features:[b.yb],decls:10,vars:13,consts:[[1,"ui-grid-fixed","boxgrey"],[1,"layout-actionmenu","layout--gestione-utenze"],[1,"mb-3"],[1,"table--gestione-utenze",3,"columns","value","autoLayout","sortField","totalRecords","paginator","first","rows","lazy","responsive","onLazyLoad"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[2,"text-align","center"],["src","assets/img/icons/phone.png","alt","phone","tooltipPosition","left","tooltipStyleClass","tooltip--white",1,"mr-4",3,"pTooltip"],["src","assets/img/icons/mail.png","alt","phone","tooltipPosition","right",3,"pTooltip"],[2,"width","auto"],[1,"ui-g","icon-action"],[1,""],["icon","fa ui-icon-visibility","iconPos","center",3,"title","click"],["icon","fa ui-icon-send","iconPos","center",3,"title","click"]],template:function(t,e){1&t&&(b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"h3",2),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Tb(5,"p-table",3,4),b.bc("onLazyLoad",(function(t){return e.getElencoRichieste(t)})),b.Mc(7,$,2,1,"ng-template",5),b.Mc(8,j,22,15,"ng-template",6),b.Mc(9,L,3,2,"ng-template",7),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,11,"gestioneUtenze.PROTOCOLLATE")),b.Bb(2),b.mc("columns",e.cols)("value",e.paginaDomande.risultati)("autoLayout",!0)("sortField",e.proprieta)("totalRecords",e.paginaDomande.count)("paginator",!0)("first",e.numeroPagina*e.elementiPerPagina)("rows",e.elementiPerPagina)("lazy",!0)("responsive",!0))},directives:[F.q,O.e,n.s,F.p,n.t,F.o,F.m,x.a,A.a],pipes:[N.d,n.f],styles:[""]}),t})();class q{}class H{}var Q=i("A+aF");function V(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",1),b.Tb(1,"p-dialog",2,3),b.bc("visibleChange",(function(e){return b.Ec(t),b.fc().display=e})),b.gc(3,"translate"),b.Tb(4,"div",4),b.Tb(5,"div",5),b.Tb(6,"h6"),b.Oc(7,"Stai per approvare la domanda di "),b.Tb(8,"strong"),b.Oc(9),b.Sb(),b.Oc(10),b.gc(11,"date"),b.Sb(),b.Sb(),b.Tb(12,"div",6),b.Tb(13,"h6",7),b.Tb(14,"strong"),b.Oc(15,"Testo della mail *"),b.Sb(),b.Sb(),b.Tb(16,"textarea",8),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().testoMail=e})),b.Sb(),b.Sb(),b.Tb(17,"div",6),b.Tb(18,"h6",7),b.Tb(19,"strong"),b.Oc(20,"Aggiungi note "),b.Tb(21,"em"),b.Oc(22,"(opzionale)"),b.Sb(),b.Sb(),b.Sb(),b.Tb(23,"textarea",9),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().note=e})),b.Oc(24,"        "),b.Sb(),b.Sb(),b.Tb(25,"div",10),b.Tb(26,"div",11),b.Tb(27,"div",12),b.Tb(28,"h6",13),b.Tb(29,"strong"),b.Oc(30,"Comunica le credenziali di accesso all'utente"),b.Sb(),b.Sb(),b.Sb(),b.Tb(31,"div",12),b.Tb(32,"div",14),b.Ob(33,"img",15),b.Tb(34,"span"),b.Oc(35),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ob(36,"hr"),b.Tb(37,"div",16),b.Tb(38,"button",17),b.bc("click",(function(){b.Ec(t);const e=b.fc();return e.approvaDomanda(e.richiestaAccessoCorrente.id)})),b.gc(39,"translate"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc();b.Bb(1),b.nc("header",b.hc(3,15,"RICHIESTE_ACCESSO.approvaDomanda")),b.mc("visible",t.display)("dismissableMask",!0)("modal",!0)("focusOnShow",!1)("closable",!0)("closeOnEscape",!0),b.Bb(8),b.Rc(" ",t.richiestaAccessoCorrente.datiAnagrafici.nome.toUpperCase()," ",t.richiestaAccessoCorrente.datiAnagrafici.cognome.toUpperCase(),""),b.Bb(1),b.Rc(" (Prot. ",t.richiestaAccessoCorrente.idProtocollo," del ",b.ic(11,17,t.richiestaAccessoCorrente.dataProtocollazione,"dd/MM/yyyy"),") "),b.Bb(6),b.mc("ngModel",t.testoMail),b.Bb(7),b.mc("ngModel",t.note),b.Bb(12),b.Pc(t.richiestaAccessoCorrente.datiAnagrafici.telefono),b.Bb(3),b.nc("label",b.hc(39,20,"RICHIESTE_ACCESSO.approvaDomanda"))}}let Z=(()=>{class t{constructor(t,e,i){this.messages=t,this.gestioneUtenzeSerice=e,this.router=i,this.testoMail="",this.displayChange=new b.n,this.displayApprovazioneDialog=!1}ngOnInit(){}onOpen(t){this.display=!0,this.displayChange.emit(!0),this.note=null,this.testoMail="Gentile "+t.nome+" "+t.cognome+",\ncome da richiesta si \xe8 provveduto ad abilitarla al Sistema Informativo A4G al quale potr\xe0 accedere nei seguenti modi:\n\n- Da smartphone attraverso il seguente link: https://myappag.it accedendo con CPS/CNS o con SPID\n\n- Da personal computer o tablet attraverso il seguente link: https://a4g.provincia.tn.it\n\nAccedendo \u201ccome cittadino\u201d potr\xe0 scegliere di autenticarsi con CPS/CNS o con SPID.\nSe possiede un'utenza della Provincia Autonoma di Trento, potr\xe0 accedere \u201ccome dipendente\u201d.\nDopo l\u2019autenticazione, nella sezione A4G - Nuovo Sistema Informativo Agricoltura, dovr\xe0 selezionare il profilo interessato per poter operare.\nCordiali saluti."}onClose(){this.display=!1,this.displayChange.emit(!1)}approvaDomanda(t){if(this.testoMail.trim().length>0){const e=new H;e.idDomanda=t,e.testoMail=this.testoMail,e.note=this.note,console.log(e),this.gestioneUtenzeSerice.approvaRichiestaAccessoSistema(t,e).subscribe(t=>{this.messages.add(c.a.getToast("tst",c.b.success,c.a.OPERAZIONE_OK)),this.onClose(),this.router.navigate([],{replaceUrl:!1,queryParams:{tabselected:"approvate"},queryParamsHandling:"merge"})},t=>{this.messages.add(c.a.getToast("tst",c.b.error,c.a.salvataggioDatiKo))})}else this.messages.add(c.a.getToast("tst",c.b.warn,c.a.inputRequiredInvalid))}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(O.d),b.Nb(M.a),b.Nb(a.e))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-approvazione-dialog"]],inputs:{richiestaAccessoCorrente:"richiestaAccessoCorrente"},outputs:{displayChange:"displayChange"},decls:1,vars:1,consts:[["id","confirm",4,"ngIf"],["id","confirm"],["width","710","appendTo","body",3,"visible","header","dismissableMask","modal","focusOnShow","closable","closeOnEscape","visibleChange"],["dialog",""],[1,"popup-approvazione","popup--custom"],[1,"mb-4"],[1,"boxgrey","p-3","mb-3"],[1,"mb-3"],["rows","10","cols","30","pInputTextarea","","id","mail","type","text","autoResize","true","required","",2,"width","-webkit-fill-available",3,"ngModel","ngModelChange"],["pInputTextarea","","id","note","type","text","autoResize","true",2,"width","-webkit-fill-available",3,"ngModel","ngModelChange"],[1,"boxgrey","p-3"],[1,"row","align-items-center"],[1,"col-6"],[1,"mb-0"],[1,"d-flex","align-items-center"],["src","assets/img/icons/phone-outgoing.svg","alt","phone",1,"mr-2"],[1,"d-flex","justify-content-end"],["pButton","","icon","fa ui-icon-check","type","submit",1,"button--success",3,"label","click"]],template:function(t,e){1&t&&b.Mc(0,V,40,22,"div",0),2&t&&b.mc("ngIf",e.richiestaAccessoCorrente)},directives:[n.t,Q.a,C.c,C.D,C.s,C.v,A.b],pipes:[N.d,n.f],styles:[""]}),t})();class K{}var J=i("1SSY");function Y(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",1),b.Tb(1,"p-dialog",2,3),b.bc("visibleChange",(function(e){return b.Ec(t),b.fc().display=e})),b.gc(3,"translate"),b.Tb(4,"div",4),b.Tb(5,"div",5),b.Tb(6,"h6"),b.Oc(7,"Stai per rifiutare la domanda di "),b.Tb(8,"strong"),b.Oc(9),b.Sb(),b.Oc(10),b.gc(11,"date"),b.Sb(),b.Sb(),b.Tb(12,"div",6),b.Tb(13,"h6",7),b.Tb(14,"strong"),b.Oc(15,"Per quale motivo la domanda \xe8 stata rifiutata? *"),b.Sb(),b.Sb(),b.Tb(16,"div"),b.Tb(17,"p-dropdown",8),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().motivazioneRifiuto=e})),b.Sb(),b.Sb(),b.Sb(),b.Tb(18,"div",6),b.Tb(19,"h6",7),b.Tb(20,"strong"),b.Oc(21,"Testo della mail *"),b.Sb(),b.Sb(),b.Tb(22,"textarea",9),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().testoMail=e})),b.Sb(),b.Sb(),b.Tb(23,"div",6),b.Tb(24,"h6",7),b.Tb(25,"strong"),b.Oc(26,"Aggiungi note "),b.Tb(27,"em"),b.Oc(28,"(opzionale)"),b.Sb(),b.Sb(),b.Sb(),b.Tb(29,"textarea",10),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().note=e})),b.Oc(30,"            "),b.Sb(),b.Sb(),b.Ob(31,"hr"),b.Tb(32,"div",11),b.Tb(33,"button",12),b.bc("click",(function(){return b.Ec(t),b.fc().rifiutaDomanda()})),b.gc(34,"translate"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc();b.Bb(1),b.nc("header",b.hc(3,16,"RICHIESTE_ACCESSO.rifiutaDomanda")),b.mc("visible",t.display)("dismissableMask",!0)("modal",!0)("focusOnShow",!1)("closable",!0)("closeOnEscape",!0),b.Bb(8),b.Rc(" ",t.richiestaAccessoCorrente.datiAnagrafici.nome.toUpperCase()," ",t.richiestaAccessoCorrente.datiAnagrafici.cognome.toUpperCase(),""),b.Bb(1),b.Rc(" (Prot. ",t.richiestaAccessoCorrente.idProtocollo," del ",b.ic(11,18,t.richiestaAccessoCorrente.dataProtocollazione,"dd/MM/yyyy"),") "),b.Bb(7),b.mc("options",t.possibiliMorivazioni)("ngModel",t.motivazioneRifiuto),b.Bb(5),b.mc("ngModel",t.testoMail),b.Bb(7),b.mc("ngModel",t.note),b.Bb(4),b.nc("label",b.hc(34,21,"RICHIESTE_ACCESSO.rifiutaDomanda"))}}let W=(()=>{class t{constructor(t,e,i){this.gestioneUtenzeSerice=t,this.messages=e,this.router=i,this.displayChange=new b.n,this.possibiliMorivazioni=[],this.displayRifiutoDialog=!1}ngOnInit(){this.initPossibiliMotivazioni()}onOpen(t){this.display=!0,this.displayChange.emit(!0),this.testoMail="Gentile "+t.nome+" "+t.cognome+",\ncon la presente si comunica che la Sua richiesta per accedere al Sistema Informativo A4G non pu\xf2 essere accolta per la seguente motivazione:\n\nCordiali saluti.",this.motivazioneRifiuto=null,this.note=null}onClose(){this.display=!1,this.displayChange.emit(!1)}rifiutaDomanda(){this.validaRifiutoDomanda()?this.messages.add(c.a.getToast("tst",c.b.warn,c.a.inputRequiredInvalid)):this.callService(this.richiestaAccessoCorrente.id,this.creaRichiestaAccessoSistemaRifiuto())}validaRifiutoDomanda(){return g.a.isNullOrEmpty(this.testoMail)||g.a.isNullOrEmpty(this.motivazioneRifiuto)}callService(t,e){this.gestioneUtenzeSerice.rifiutaRichiestaAccessoSistema(t,e).subscribe(t=>{this.messages.add(c.a.getToast("tst",c.b.success,c.a.OPERAZIONE_OK)),this.onClose(),this.router.navigate(["./funzioniPat/gestioneUtenze/"],{replaceUrl:!1,queryParams:{tabselected:"rifiutate"},queryParamsHandling:"merge"})},t=>{this.messages.add(c.a.getToast("tst",c.b.error,c.a.salvataggioDatiKo))})}creaRichiestaAccessoSistemaRifiuto(){let t=new K;return t.id=this.richiestaAccessoCorrente.id,t.motivazioneRifiuto=this.motivazioneRifiuto,t.note=this.note,t.testoMail=this.testoMail,t}initPossibiliMotivazioni(){this.possibiliMorivazioni.push({label:"Seleziona",value:null}),this.possibiliMorivazioni.push({label:"Rifiuto domanda di accesso al sistema",value:"Rifiuto domanda di accesso al sistema"})}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(M.a),b.Nb(O.d),b.Nb(a.e))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-rifiuto-dialog"]],inputs:{richiestaAccessoCorrente:"richiestaAccessoCorrente"},outputs:{displayChange:"displayChange"},decls:1,vars:1,consts:[["id","confirm",4,"ngIf"],["id","confirm"],["width","710","appendTo","body",3,"visible","header","dismissableMask","modal","focusOnShow","closable","closeOnEscape","visibleChange"],["dialog",""],[1,"popup-approvazione","popup--custom"],[1,"mb-4"],[1,"boxgrey","p-3","mb-3"],[1,"mb-3"],["name","possibiliMorivazioni",3,"options","ngModel","ngModelChange"],["rows","6","cols","30","pInputTextarea","","id","mail","type","text","autoResize","true","required","",2,"width","-webkit-fill-available",3,"ngModel","ngModelChange"],["pInputTextarea","","id","note","type","text","autoResize","true",2,"width","-webkit-fill-available",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["pButton","","icon","pi pi-ban","type","submit",1,"button--rifiuta",3,"label","click"]],template:function(t,e){1&t&&b.Mc(0,Y,35,23,"div",0),2&t&&b.mc("ngIf",e.richiestaAccessoCorrente)},directives:[n.t,Q.a,J.a,C.s,C.v,C.c,C.D,A.b],pipes:[N.d,n.f],styles:[""]}),t})();const X=["approvazioneDialog"],tt=["rifiutoDialog"];function et(t,e){if(1&t&&b.Ob(0,"p-sortIcon",14),2&t){const t=b.fc().$implicit;b.mc("field",t.header)}}function it(t,e){if(1&t&&(b.Tb(0,"th",12),b.Tb(1,"strong"),b.Oc(2),b.Sb(),b.Mc(3,et,1,1,"p-sortIcon",13),b.Sb()),2&t){const t=e.$implicit;b.mc("pSortableColumn",t.field)("pSortableColumnDisabled",null==t.field),b.Bb(2),b.Pc(t.header),b.Bb(1),b.mc("ngIf",t.field)}}function ot(t,e){if(1&t&&(b.Tb(0,"tr"),b.Mc(1,it,4,4,"th",11),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t)}}function at(t,e){if(1&t){const t=b.Ub();b.Tb(0,"span"),b.Tb(1,"p-button",29),b.bc("onClick",(function(){b.Ec(t);const e=b.fc().$implicit;return b.fc().goToDetailWithDialog(e.id)})),b.Ob(2,"img",30),b.Sb(),b.Sb()}}function nt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"span"),b.Tb(1,"p-button",29),b.bc("onClick",(function(){b.Ec(t);const e=b.fc().$implicit;return b.fc().goToDetailWithDialog(e.id)})),b.Ob(2,"img",31),b.Sb(),b.Sb()}}function st(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",15),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.gc(5,"date"),b.Sb(),b.Tb(6,"td"),b.Oc(7),b.Sb(),b.Tb(8,"td"),b.Oc(9),b.Sb(),b.Tb(10,"td"),b.Oc(11),b.Sb(),b.Tb(12,"td",16),b.Ob(13,"img",17),b.Ob(14,"img",18),b.Sb(),b.Tb(15,"td",16),b.Mc(16,at,3,0,"span",19),b.Mc(17,nt,3,0,"ng-template",null,20,b.Nc),b.Sb(),b.Tb(19,"td",21),b.Tb(20,"div",22),b.Tb(21,"div"),b.Tb(22,"p-button",23),b.bc("onClick",(function(){b.Ec(t);const i=e.$implicit;return b.fc().viewDetail(i.id)})),b.Ob(23,"img",24),b.Sb(),b.Sb(),b.Tb(24,"div"),b.Tb(25,"p-button",25),b.bc("onClick",(function(){b.Ec(t);const i=e.$implicit;return b.fc().showDialog(i)})),b.Ob(26,"img",26),b.Sb(),b.Sb(),b.Tb(27,"div"),b.Tb(28,"p-button",27),b.bc("onClick",(function(){b.Ec(t);const i=e.$implicit;return b.fc().showDialogRifiutoDomandaRichiestaUtente(i)})),b.Ob(29,"i",28),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.Bc(18),o=b.fc();b.mc("pSelectableRow",t),b.Bb(2),b.Pc(t.idProtocollo),b.Bb(2),b.Pc(b.ic(5,15,t.dataProtocollazione,"dd/MM/yyyy")),b.Bb(3),b.Pc(t.datiAnagrafici.nome),b.Bb(2),b.Pc(t.datiAnagrafici.cognome),b.Bb(2),b.Pc(t.datiAnagrafici.codiceFiscale),b.Bb(2),b.nc("pTooltip",t.datiAnagrafici.telefono),b.Bb(1),b.nc("pTooltip",t.datiAnagrafici.email),b.Bb(2),b.mc("ngIf",t.configurato)("ngIfElse",i),b.Bb(6),b.nc("title",o.intestazioni.dettaglioDomanda),b.Bb(3),b.nc("title",o.intestazioni.approvaDomanda),b.mc("disabled",!t.configurato),b.Bb(3),b.nc("title",o.intestazioni.rifiutaDomanda),b.mc("disabled",!t.configurato)}}function rt(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.fc();b.Bb(1),b.Cb("colspan",t.length+2),b.Bb(1),b.Qc(" ",i.intestazioni.noTableContent," ")}}let ct=(()=>{class t extends U{constructor(t,e,i,o,a){super(t,e,i,o,a),this.gestioneUtenzeService=t,this.messages=e,this.sharedService=i,this.router=o,this.route=a,this.setCols(),this.stato=this.intestazioni.in_lavorazione,this.defaultSortingColumn="dtProtocollazione",this.defaultSortingOrder="ASC"}ngOnInit(){this.setupRouting("inlavorazione")}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}showDialog(t){this.approvazioneDialog.onOpen(t.datiAnagrafici),this.richiestaAccessoCorrente=t}showDialogRifiutoDomandaRichiestaUtente(t){this.rifiutoDialog.onOpen(t.datiAnagrafici),this.richiestaAccessoCorrente=t}onDialogClose(t){t||this.refreshElencoRichieste()}goToDetailWithDialog(t){this.router.navigate(["./gestioneUtenze/:idUtenza/dettaglioUtenza".replace(":idUtenza",t.toString())],{relativeTo:this.route.parent.parent,queryParams:{dialog:1}})}setCols(){this.cols=[{field:"idProtocollo",header:this.intestazioni.nrProtocollo},{field:"dtProtocollazione",header:this.intestazioni.dtProtocollazione},{field:"nome",header:this.intestazioni.nome},{field:"cognome",header:this.intestazioni.cognome},{field:"codiceFiscale",header:this.intestazioni.codiceFiscale},{field:null,header:this.intestazioni.contatti},{field:"configurato",header:this.intestazioni.configurato},{field:null,header:this.intestazioni.azioni}]}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(M.a),b.Nb(O.d),b.Nb(d),b.Nb(a.e),b.Nb(a.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-richieste-in-lavorazione"]],viewQuery:function(t,e){var i;1&t&&(b.Jc(X,!0),b.Jc(tt,!0)),2&t&&(b.Ac(i=b.cc())&&(e.approvazioneDialog=i.first),b.Ac(i=b.cc())&&(e.rifiutoDialog=i.first))},features:[b.yb],decls:14,vars:15,consts:[[3,"richiestaAccessoCorrente","displayChange"],["approvazioneDialog",""],["rifiutoDialog",""],[1,"ui-grid-fixed","boxgrey"],[1,"layout-actionmenu","layout--gestione-utenze"],[1,"mb-3"],[1,"table--gestione-utenze",3,"columns","value","autoLayout","sortField","totalRecords","paginator","first","rows","lazy","responsive","onLazyLoad"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[2,"text-align","center"],["src","assets/img/icons/phone.png","alt","phone","tooltipPosition","left","tooltipStyleClass","tooltip--white",1,"mr-4",3,"pTooltip"],["src","assets/img/icons/mail.png","alt","phone","tooltipStyleClass","tooltip--white","tooltipPosition","right",3,"pTooltip"],[4,"ngIf","ngIfElse"],["notConfigured",""],[2,"width","auto"],[1,"ui-g","icon-action","actions--gestione-utenze"],[3,"title","onClick"],["src","assets/img/icons/eye.png","alt","eye"],["bg-green","",3,"title","disabled","onClick"],["src","assets/img/icons/arrow-right.png","alt","arrow-right"],["bg-red","",3,"title","disabled","onClick"],[1,"pi","pi-ban"],[3,"onClick"],["src","assets/img/icons/user-enabled.svg","alt","user-enabled","pTooltip","Configurato","tooltipPosition","top"],["src","assets/img/icons/user-disabled.svg","alt","user-disabled","pTooltip","Non configurato","tooltipPosition","top"]],template:function(t,e){1&t&&(b.Tb(0,"app-approvazione-dialog",0,1),b.bc("displayChange",(function(t){return e.onDialogClose(t)})),b.Sb(),b.Tb(2,"app-rifiuto-dialog",0,2),b.bc("displayChange",(function(t){return e.onDialogClose(t)})),b.Sb(),b.Tb(4,"div",3),b.Tb(5,"div",4),b.Tb(6,"h3",5),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Tb(9,"p-table",6,7),b.bc("onLazyLoad",(function(t){return e.getElencoRichieste(t)})),b.Mc(11,ot,2,1,"ng-template",8),b.Mc(12,st,30,18,"ng-template",9),b.Mc(13,rt,3,2,"ng-template",10),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.mc("richiestaAccessoCorrente",e.richiestaAccessoCorrente),b.Bb(2),b.mc("richiestaAccessoCorrente",e.richiestaAccessoCorrente),b.Bb(5),b.Pc(b.hc(8,13,"gestioneUtenze.IN_LAVORAZIONE")),b.Bb(2),b.mc("columns",e.cols)("value",e.paginaDomande.risultati)("autoLayout",!0)("sortField",e.proprieta)("totalRecords",e.paginaDomande.count)("paginator",!0)("first",e.numeroPagina*e.elementiPerPagina)("rows",e.elementiPerPagina)("lazy",!0)("responsive",!0))},directives:[Z,W,F.q,O.e,n.s,F.p,n.t,F.o,F.m,x.a,A.a],pipes:[N.d,n.f],styles:[".color-dark-gray[_ngcontent-%COMP%]{color:#a9a9a9}div[_ngcontent-%COMP%]   .pi-ban[_ngcontent-%COMP%]{font-size:1.2em}"]}),t})();const lt=function(){return{overflow:"auto","max-height":"750px"}};function bt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",1),b.Tb(1,"p-dialog",2,3),b.bc("visibleChange",(function(e){return b.Ec(t),b.fc().display=e})),b.Tb(3,"form",4),b.Tb(4,"div",5),b.Tb(5,"h3"),b.Oc(6),b.gc(7,"translate"),b.Sb(),b.Sb(),b.Tb(8,"div",5),b.Tb(9,"h6"),b.Oc(10,"Domanda di "),b.Tb(11,"strong"),b.Oc(12),b.Sb(),b.Oc(13),b.gc(14,"date"),b.Tb(15,"strong"),b.Oc(16," approvata "),b.Sb(),b.Oc(17),b.gc(18,"date"),b.Sb(),b.Tb(19,"div",6),b.Tb(20,"h6",7),b.Tb(21,"strong"),b.Oc(22),b.gc(23,"translate"),b.Sb(),b.Sb(),b.Tb(24,"textarea",8),b.Oc(25,"             "),b.Sb(),b.Sb(),b.Tb(26,"div",6),b.Tb(27,"h6",7),b.Tb(28,"strong"),b.Oc(29,"Note"),b.Sb(),b.Sb(),b.Tb(30,"textarea",9),b.Oc(31,"             "),b.Sb(),b.Sb(),b.Sb(),b.Tb(32,"div",10),b.Tb(33,"b"),b.Oc(34),b.gc(35,"translate"),b.Sb(),b.Sb(),b.Tb(36,"div",11),b.Ob(37,"img",12),b.Oc(38),b.Sb(),b.Tb(39,"div",5),b.Tb(40,"div",13),b.Tb(41,"button",14),b.bc("click",(function(){return b.Ec(t),b.fc().onClose()})),b.gc(42,"translate"),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc();b.Bb(1),b.mc("visible",t.display)("contentStyle",b.rc(27,lt)),b.Bb(2),b.mc("formGroup",t.domandaApprovataGroup),b.Bb(3),b.Pc(b.hc(7,13,"RICHIESTE_ACCESSO.DOMANDA_APPROVATA")),b.Bb(6),b.Rc(" ",t.richiestaAccessoCorrente.datiAnagrafici.nome.toUpperCase()," ",t.richiestaAccessoCorrente.datiAnagrafici.cognome.toUpperCase()," "),b.Bb(1),b.Rc(" (Prot. ",t.richiestaAccessoCorrente.idProtocollo," del ",b.ic(14,15,t.richiestaAccessoCorrente.dataProtocollazione,"dd/MM/yyyy")," "),b.Bb(4),b.Qc(" in data ",b.ic(18,18,t.richiestaAccessoCorrente.dataApprovazione,"dd/MM/yyyy"),") "),b.Bb(5),b.Pc(b.hc(23,21,"RICHIESTE_ACCESSO.LABEL_MAIL")),b.Bb(12),b.Pc(b.hc(35,23,"RICHIESTE_ACCESSO.COMUNICA_CREDENZIALI")),b.Bb(4),b.Qc(" ",t.richiestaAccessoCorrente.datiAnagrafici.telefono," "),b.Bb(3),b.nc("label",b.hc(42,25,"chiudi"))}}let dt=(()=>{class t{constructor(t,e,i){this.router=t,this.route=e,this.messageService=i,this.display=!1,this.displayChange=new b.n,this.componentDestroyed$=new h.a,this.domandaApprovataGroup=new C.j({testoMail:new C.g,note:new C.g})}ngOnInit(){}onClose(){this.display=!1,this.displayChange.emit(!1)}onOpen(t){this.setCampiDialog(t),this.displayChange.emit(!0),this.display=!0}setCampiDialog(t){this.domandaApprovataGroup.controls.testoMail.setValue(t.testoMail),this.domandaApprovataGroup.controls.note.setValue(t.note),console.log(t)}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(a.e),b.Nb(a.a),b.Nb(O.d))},t.\u0275cmp=b.Hb({type:t,selectors:[["motivazione-approvazione-dialog"]],inputs:{richiestaAccessoCorrente:"richiestaAccessoCorrente",istruttoriaDomandaCorrente:"istruttoriaDomandaCorrente"},outputs:{displayChange:"displayChange"},decls:1,vars:1,consts:[["id","confirm",4,"ngIf"],["id","confirm"],["width","710","modal","true","appendTo","body","closable","true","closeOnEscape","true",3,"visible","contentStyle","visibleChange"],["dialog",""],[3,"formGroup"],[1,"ui-g-12"],[1,"boxgrey","p-3","mb-3"],[1,"mb-3"],["rows","10","cols","30","pInputTextarea","","id","mail","type","text","formControlName","testoMail","autoResize","true","readonly","",2,"width","-webkit-fill-available"],["pInputTextarea","","id","note","type","text","formControlName","note","autoResize","true","readonly","",2,"width","-webkit-fill-available"],[1,"ui-g-7"],[1,"ui-g-5"],["src","assets/img/icons/phone.png","alt","phone","tooltipPosition","left","tooltipStyleClass","tooltip--white",1,"mx-2"],[1,"next-button"],["pButton","","type","button",1,"annulla",3,"label","click"]],template:function(t,e){1&t&&b.Mc(0,bt,43,28,"div",0),2&t&&b.mc("ngIf",e.richiestaAccessoCorrente)},directives:[n.t,Q.a,C.I,C.t,C.k,C.c,C.s,C.i,A.b],pipes:[N.d,n.f],styles:[""]}),t})();const pt=["motivazioneApprovazioneDialogComponent"];function ut(t,e){if(1&t&&b.Ob(0,"p-sortIcon",13),2&t){const t=b.fc().$implicit;b.mc("field",t.header)}}function ht(t,e){if(1&t&&(b.Tb(0,"th",11),b.Tb(1,"strong"),b.Oc(2),b.Sb(),b.Mc(3,ut,1,1,"p-sortIcon",12),b.Sb()),2&t){const t=e.$implicit;b.mc("pSortableColumn",t.field)("pSortableColumnDisabled",null==t.field),b.Bb(2),b.Pc(t.header),b.Bb(1),b.mc("ngIf",t.field)}}function gt(t,e){if(1&t&&(b.Tb(0,"tr"),b.Mc(1,ht,4,4,"th",10),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t)}}function ft(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",14),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.gc(5,"date"),b.Sb(),b.Tb(6,"td"),b.Oc(7),b.gc(8,"date"),b.Sb(),b.Tb(9,"td"),b.Oc(10),b.Sb(),b.Tb(11,"td"),b.Oc(12),b.Sb(),b.Tb(13,"td"),b.Oc(14),b.Sb(),b.Tb(15,"td",15),b.Ob(16,"img",16),b.Ob(17,"img",17),b.Sb(),b.Tb(18,"td",18),b.Tb(19,"div",19),b.Tb(20,"div"),b.Tb(21,"p-button",20),b.bc("click",(function(){b.Ec(t);const i=e.$implicit;return b.fc().viewDetail(i.id)})),b.Ob(22,"img",21),b.Sb(),b.Sb(),b.Tb(23,"div"),b.Tb(24,"p-button",20),b.bc("click",(function(){b.Ec(t);const i=e.$implicit;return b.fc().showDialog(i)})),b.Ob(25,"img",22),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.fc();b.mc("pSelectableRow",t),b.Bb(2),b.Pc(t.idProtocollo),b.Bb(2),b.Pc(b.ic(5,11,t.dataProtocollazione,"dd/MM/yyyy")),b.Bb(3),b.Pc(b.ic(8,14,t.dataApprovazione,"dd/MM/yyyy")),b.Bb(3),b.Pc(t.datiAnagrafici.nome),b.Bb(2),b.Pc(t.datiAnagrafici.cognome),b.Bb(2),b.Pc(t.datiAnagrafici.codiceFiscale),b.Bb(2),b.nc("pTooltip",t.datiAnagrafici.telefono),b.Bb(1),b.nc("pTooltip",t.datiAnagrafici.email),b.Bb(4),b.nc("title",i.intestazioni.dettaglioDomanda),b.Bb(3),b.nc("title",i.intestazioni.dettaglioApprovazione)}}function mt(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.fc();b.Bb(1),b.Cb("colspan",t.length+2),b.Bb(1),b.Qc(" ",i.intestazioni.noTableContent," ")}}let St=(()=>{class t extends U{constructor(t,e,i,o,a){super(t,e,i,o,a),this.gestioneUtenzeService=t,this.messages=e,this.sharedService=i,this.router=o,this.route=a,this.setCols(),this.proprieta="dtApprovazione",this.ordine="DESC",this.textTitle=s.a.APPROVATE,this.stato=this.intestazioni.approvata,this.defaultSortingColumn="dtApprovazione",this.defaultSortingOrder="ASC"}ngOnInit(){this.setupRouting("approvate")}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}showDialog(t){this.getIstruttoria(t),this.richiestaAccessoCorrente=t}onDialogClose(t){}getIstruttoria(t){this.gestioneUtenzeService.getIstruttoriaProfiloByDomanda(t.id).subscribe(t=>{this.istruttoriaDomandaCorrente=new H,this.istruttoriaDomandaCorrente.idDomanda=t.idDomanda,this.istruttoriaDomandaCorrente.testoMail=t.testoMail,this.istruttoriaDomandaCorrente.note=t.note,this.motivazioneApprovazioneDialogComponent.onOpen(this.istruttoriaDomandaCorrente)},t=>{this.messages.add(c.a.getToast("tst",c.b.error,c.a.erroreRecuperoDati))})}setCols(){this.cols=[{field:"idProtocollo",header:this.intestazioni.nrProtocollo},{field:"dtProtocollazione",header:this.intestazioni.dtProtocollazione},{field:"dtApprovazione",header:this.intestazioni.dtApprovazione},{field:"nome",header:this.intestazioni.nome},{field:"cognome",header:this.intestazioni.cognome},{field:"codiceFiscale",header:this.intestazioni.codiceFiscale},{field:null,header:this.intestazioni.contatti},{field:null,header:this.intestazioni.azioni}]}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(M.a),b.Nb(O.d),b.Nb(d),b.Nb(a.e),b.Nb(a.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-richieste-approvate"]],viewQuery:function(t,e){var i;1&t&&b.Jc(pt,!0),2&t&&b.Ac(i=b.cc())&&(e.motivazioneApprovazioneDialogComponent=i.first)},features:[b.yb],decls:11,vars:12,consts:[[3,"richiestaAccessoCorrente","displayChange"],["motivazioneApprovazioneDialogComponent",""],[1,"ui-grid-fixed","boxgrey"],[1,"layout-actionmenu","layout--gestione-utenze"],[1,"mb-3"],[1,"table--gestione-utenze",3,"columns","value","autoLayout","sortField","totalRecords","paginator","first","rows","lazy","responsive","onLazyLoad"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[2,"text-align","center"],["src","assets/img/icons/phone.png","alt","phone","tooltipPosition","left","tooltipStyleClass","tooltip--white",1,"mr-4",3,"pTooltip"],["src","assets/img/icons/mail.png","alt","phone","tooltipStyleClass","tooltip--white","tooltipPosition","right",3,"pTooltip"],[2,"width","auto"],[1,"ui-g","icon-action","actions--gestione-utenze"],[3,"title","click"],["src","assets/img/icons/eye.png","alt","eye"],["src","assets/img/icons/align-left.png","alt","align-left"]],template:function(t,e){1&t&&(b.Tb(0,"motivazione-approvazione-dialog",0,1),b.bc("displayChange",(function(t){return e.onDialogClose(t)})),b.Sb(),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"h3",4),b.Oc(5),b.Sb(),b.Tb(6,"p-table",5,6),b.bc("onLazyLoad",(function(t){return e.getElencoRichieste(t)})),b.Mc(8,gt,2,1,"ng-template",7),b.Mc(9,ft,26,17,"ng-template",8),b.Mc(10,mt,3,2,"ng-template",9),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.mc("richiestaAccessoCorrente",e.richiestaAccessoCorrente),b.Bb(5),b.Pc(e.textTitle),b.Bb(1),b.mc("columns",e.cols)("value",e.paginaDomande.risultati)("autoLayout",!0)("sortField",e.proprieta)("totalRecords",e.paginaDomande.count)("paginator",!0)("first",e.numeroPagina*e.elementiPerPagina)("rows",e.elementiPerPagina)("lazy",!0)("responsive",!0))},directives:[dt,F.q,O.e,n.s,F.p,n.t,F.o,F.m,x.a,A.a],pipes:[n.f],styles:[""]}),t})();function Tt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",1),b.Tb(1,"p-dialog",2,3),b.bc("visibleChange",(function(e){return b.Ec(t),b.fc().display=e})),b.Tb(3,"div",4),b.Tb(4,"div",5),b.Tb(5,"h6"),b.Oc(6,"Domanda di "),b.Tb(7,"strong"),b.Oc(8),b.Sb(),b.Oc(9),b.Tb(10,"strong"),b.Oc(11," rifiutata "),b.Sb(),b.Oc(12),b.gc(13,"date"),b.Sb(),b.Sb(),b.Tb(14,"div",6),b.Tb(15,"h6",7),b.Tb(16,"strong"),b.Oc(17,"Per quale motivo la domanda \xe8 stata rifiutata?"),b.Sb(),b.Sb(),b.Tb(18,"input",8),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().motivazioneRifiuto=e})),b.Sb(),b.Sb(),b.Tb(19,"div",6),b.Tb(20,"h6",7),b.Tb(21,"strong"),b.Oc(22,"Testo della mail"),b.Sb(),b.Sb(),b.Tb(23,"textarea",9),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().testoMail=e})),b.Oc(24,"        "),b.Sb(),b.Sb(),b.Tb(25,"div",6),b.Tb(26,"h6",7),b.Tb(27,"strong"),b.Oc(28,"Note"),b.Sb(),b.Sb(),b.Tb(29,"textarea",10),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc().note=e})),b.Oc(30,"        "),b.Sb(),b.Sb(),b.Ob(31,"hr"),b.Tb(32,"div",11),b.Tb(33,"button",12),b.bc("click",(function(){return b.Ec(t),b.fc().onClose()})),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc();b.Bb(1),b.mc("visible",t.display)("dismissableMask",!0)("modal",!0)("closable",!0)("closeOnEscape",!0),b.Bb(7),b.Rc(" ",t.richiestaAccessoCorrente.datiAnagrafici.nome.toUpperCase()," ",t.richiestaAccessoCorrente.datiAnagrafici.cognome.toUpperCase()," "),b.Bb(1),b.Qc(" (Prot. ",t.richiestaAccessoCorrente.idProtocollo," "),b.Bb(3),b.Qc(" in data ",b.ic(13,13,t.richiestaAccessoCorrente.dataProtocollazione,"dd/MM/yyyy"),") "),b.Bb(6),b.mc("ngModel",t.motivazioneRifiuto),b.Bb(5),b.mc("ngModel",t.testoMail),b.Bb(6),b.mc("ngModel",t.note),b.Bb(4),b.mc("label",t.labels.CHIUDI)}}let vt=(()=>{class t{constructor(){this.labels=s.a,this.displayChange=new b.n}ngOnInit(){}onOpen(t){this.display=!0,this.displayChange.emit(!0),this.setCampiDialog(t)}setCampiDialog(t){this.motivazioneRifiuto=t.motivazioneRifiuto,this.testoMail=t.testoMail,this.note=t.note,console.log(t)}onClose(){this.display=!1,this.displayChange.emit(!1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Hb({type:t,selectors:[["app-motivazione-rifiuto-dialog"]],inputs:{richiestaAccessoCorrente:"richiestaAccessoCorrente",istruttoriaDomandaCorrente:"istruttoriaDomandaCorrente"},outputs:{displayChange:"displayChange"},decls:1,vars:1,consts:[["id","confirm",4,"ngIf"],["id","confirm"],["header","DOMANDA RIFIUTATA","width","710","appendTo","body",3,"visible","dismissableMask","modal","closable","closeOnEscape","visibleChange"],["dialog",""],[1,"popup-approvazione","popup--custom"],[1,"mb-4"],[1,"boxgrey","p-3","mb-3"],[1,"mb-3"],["id","motivazione","type","text","pInputText","","autoResize","true","readonly","",2,"width","-webkit-fill-available","background-color","white",3,"ngModel","ngModelChange"],["rows","6","cols","30","pInputTextarea","","id","testoMail","type","text","autoResize","true","readonly","",2,"width","-webkit-fill-available",3,"ngModel","ngModelChange"],["pInputTextarea","","id","note","type","text","autoResize","true","readonly","",2,"width","-webkit-fill-available",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-end"],["pButton","","icon","fa ui-icon-close","type","submit",1,"button--success",3,"label","click"]],template:function(t,e){1&t&&b.Mc(0,Tt,34,16,"div",0),2&t&&b.mc("ngIf",e.richiestaAccessoCorrente&&e.istruttoriaDomandaCorrente)},directives:[n.t,Q.a,C.c,D.a,C.s,C.v,A.b],pipes:[n.f],styles:[""]}),t})();const Ot=["motivazioneRifiutoDialog"];function yt(t,e){if(1&t&&b.Ob(0,"p-sortIcon",13),2&t){const t=b.fc().$implicit;b.mc("field",t.header)}}function Pt(t,e){if(1&t&&(b.Tb(0,"th",11),b.Tb(1,"strong"),b.Oc(2),b.Sb(),b.Mc(3,yt,1,1,"p-sortIcon",12),b.Sb()),2&t){const t=e.$implicit;b.mc("pSortableColumn",t.field)("pSortableColumnDisabled",null==t.field),b.Bb(2),b.Pc(t.header),b.Bb(1),b.mc("ngIf",t.field)}}function Ct(t,e){if(1&t&&(b.Tb(0,"tr"),b.Mc(1,Pt,4,4,"th",10),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t)}}function zt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"tr",14),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.gc(5,"date"),b.Sb(),b.Tb(6,"td"),b.Oc(7),b.gc(8,"date"),b.Sb(),b.Tb(9,"td"),b.Oc(10),b.Sb(),b.Tb(11,"td"),b.Oc(12),b.Sb(),b.Tb(13,"td"),b.Oc(14),b.Sb(),b.Tb(15,"td",15),b.Ob(16,"img",16),b.Ob(17,"img",17),b.Sb(),b.Tb(18,"td",18),b.Tb(19,"div",19),b.Tb(20,"div"),b.Tb(21,"p-button",20),b.bc("click",(function(){b.Ec(t);const i=e.$implicit;return b.fc().viewDetail(i.id)})),b.Ob(22,"img",21),b.Sb(),b.Sb(),b.Tb(23,"div"),b.Tb(24,"p-button",20),b.bc("click",(function(){b.Ec(t);const i=e.$implicit;return b.fc().showMotivazioneRifiutoDialog(i)})),b.Ob(25,"img",22),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=e.$implicit,i=b.fc();b.mc("pSelectableRow",t),b.Bb(2),b.Pc(t.idProtocollo),b.Bb(2),b.Pc(b.ic(5,11,t.dataProtocollazione,"dd/MM/yyyy")),b.Bb(3),b.Pc(b.ic(8,14,t.dataRifiuto,"dd/MM/yyyy")),b.Bb(3),b.Pc(t.datiAnagrafici.nome),b.Bb(2),b.Pc(t.datiAnagrafici.cognome),b.Bb(2),b.Pc(t.datiAnagrafici.codiceFiscale),b.Bb(2),b.nc("pTooltip",t.datiAnagrafici.telefono),b.Bb(1),b.nc("pTooltip",t.datiAnagrafici.email),b.Bb(4),b.nc("title",i.intestazioni.dettaglioDomanda),b.Bb(3),b.nc("title",i.intestazioni.DETTAGLIO_RIFIUTO)}}function Dt(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.fc();b.Bb(1),b.Cb("colspan",t.length+2),b.Bb(1),b.Qc(" ",i.intestazioni.noTableContent," ")}}let At=(()=>{class t extends U{constructor(t,e,i,o,a){super(t,e,i,o,a),this.gestioneUtenzeService=t,this.messages=e,this.sharedService=i,this.router=o,this.route=a,this.setCols(),this.proprieta="dtRifiuto",this.ordine="DESC",this.stato=this.intestazioni.rifiutata,this.defaultSortingColumn="dtRifiuto",this.defaultSortingOrder="ASC"}ngOnInit(){this.setupRouting("rifiutate")}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}showMotivazioneRifiutoDialog(t){this.getIstruttoria(t),this.richiestaAccessoCorrente=t}onDialogClose(t){t||this.refreshElencoRichieste()}getIstruttoria(t){this.gestioneUtenzeService.getIstruttoriaProfiloByDomanda(t.id).subscribe(t=>{this.istruttoriaDomandaCorrente=new K,this.istruttoriaDomandaCorrente.motivazioneRifiuto=t.motivazioneRifiuto,this.istruttoriaDomandaCorrente.note=t.note,this.istruttoriaDomandaCorrente.testoMail=t.testoMail,this.motivazioneRifiutoDialog.onOpen(this.istruttoriaDomandaCorrente)},t=>{this.messages.add(c.a.getToast("tst",c.b.error,c.a.erroreRecuperoDati))})}setCols(){this.cols=[{field:"idProtocollo",header:this.intestazioni.nrProtocollo},{field:"dtProtocollazione",header:this.intestazioni.dtProtocollazione},{field:"dtRifiuto",header:this.intestazioni.dtRifiuto},{field:"nome",header:this.intestazioni.nome},{field:"cognome",header:this.intestazioni.cognome},{field:"codiceFiscale",header:this.intestazioni.codiceFiscale},{field:null,header:this.intestazioni.contatti},{field:null,header:this.intestazioni.azioni}]}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(M.a),b.Nb(O.d),b.Nb(d),b.Nb(a.e),b.Nb(a.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-richieste-rifiutate"]],viewQuery:function(t,e){var i;1&t&&b.Jc(Ot,!0),2&t&&b.Ac(i=b.cc())&&(e.motivazioneRifiutoDialog=i.first)},features:[b.yb],decls:12,vars:15,consts:[[3,"richiestaAccessoCorrente","istruttoriaDomandaCorrente","displayChange"],["motivazioneRifiutoDialog",""],[1,"ui-grid-fixed","boxgrey"],[1,"layout-actionmenu","layout--gestione-utenze"],[1,"mb-3"],[1,"table--gestione-utenze",3,"columns","value","autoLayout","sortField","totalRecords","paginator","first","rows","lazy","responsive","onLazyLoad"],["table",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[2,"text-align","center"],["src","assets/img/icons/phone.png","alt","phone","tooltipPosition","left","tooltipStyleClass","tooltip--white",1,"mr-4",3,"pTooltip"],["src","assets/img/icons/mail.png","alt","phone","tooltipStyleClass","tooltip--white","tooltipPosition","right",3,"pTooltip"],[2,"width","auto"],[1,"ui-g","icon-action","actions--gestione-utenze"],[3,"title","click"],["src","assets/img/icons/eye.png","alt","eye"],["src","assets/img/icons/align-left.png","alt","align-left"]],template:function(t,e){1&t&&(b.Tb(0,"app-motivazione-rifiuto-dialog",0,1),b.bc("displayChange",(function(t){return e.onDialogClose(t)})),b.Sb(),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"h3",4),b.Oc(5),b.gc(6,"translate"),b.Sb(),b.Tb(7,"p-table",5,6),b.bc("onLazyLoad",(function(t){return e.getElencoRichieste(t)})),b.Mc(9,Ct,2,1,"ng-template",7),b.Mc(10,zt,26,17,"ng-template",8),b.Mc(11,Dt,3,2,"ng-template",9),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.mc("richiestaAccessoCorrente",e.richiestaAccessoCorrente)("istruttoriaDomandaCorrente",e.istruttoriaDomandaCorrente),b.Bb(5),b.Pc(b.hc(6,13,"gestioneUtenze.RIFIUTATE")),b.Bb(2),b.mc("columns",e.cols)("value",e.paginaDomande.risultati)("autoLayout",!0)("sortField",e.proprieta)("totalRecords",e.paginaDomande.count)("paginator",!0)("first",e.numeroPagina*e.elementiPerPagina)("rows",e.elementiPerPagina)("lazy",!0)("responsive",!0))},directives:[vt,F.q,O.e,n.s,F.p,n.t,F.o,F.m,x.a,A.a],pipes:[N.d,n.f],styles:[""]}),t})();function Bt(t,e){if(1&t&&(b.Tb(0,"span",27),b.Oc(1),b.gc(2,"translate"),b.Tb(3,"span"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=b.fc();b.Bb(1),b.Qc("",b.hc(2,2,"gestioneUtenze.PROTOCOLLATE")," "),b.Bb(3),b.Pc(t.reformattedItemBadges.PROTOCOLLATA)}}function Mt(t,e){1&t&&b.Ob(0,"app-richieste-protocollate")}function Rt(t,e){if(1&t&&(b.Tb(0,"span",27),b.Oc(1),b.gc(2,"translate"),b.Tb(3,"span"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=b.fc();b.Bb(1),b.Qc(" ",b.hc(2,2,"gestioneUtenze.IN_LAVORAZIONE")," "),b.Bb(3),b.Pc(t.reformattedItemBadges.IN_LAVORAZIONE)}}function It(t,e){1&t&&b.Ob(0,"app-richieste-in-lavorazione")}function Et(t,e){if(1&t&&(b.Tb(0,"span",27),b.Oc(1),b.gc(2,"translate"),b.Tb(3,"span"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=b.fc();b.Bb(1),b.Qc("",b.hc(2,2,"gestioneUtenze.APPROVATE")," "),b.Bb(3),b.Pc(t.reformattedItemBadges.APPROVATA)}}function wt(t,e){1&t&&b.Ob(0,"app-richieste-approvate")}function Ut(t,e){if(1&t&&(b.Tb(0,"span",27),b.Oc(1),b.gc(2,"translate"),b.Tb(3,"span"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=b.fc();b.Bb(1),b.Qc(" ",b.hc(2,2,"gestioneUtenze.RIFIUTATE")," "),b.Bb(3),b.Pc(t.reformattedItemBadges.RIFIUTATA)}}function Ft(t,e){1&t&&b.Ob(0,"app-richieste-rifiutate")}let xt=(()=>{class t{constructor(t,e,i,o,a){this.utentiService=t,this.messages=e,this.sharedService=i,this.route=o,this.router=a,this.labels=s.a,this.reformattedItemBadges={},this.componentDestroyed$=new h.a,this.language=v.a.itCalendar(),this.openSearchTab=0}ngOnInit(){this.route.queryParams.pipe(Object(p.a)(this.componentDestroyed$),Object(u.a)(t=>this.aggiornaParametri(t))).subscribe(t=>{console.log(t)},t=>{console.log(t)}),this.loadCounters(),this.sharedService.currentTimersForChangeCounters.subscribe(t=>{console.log("Approvazione/Rifiuto domanda",t),this.loadCounters()})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}handleTabChange(t){switch(t.index){case 0:this.tabSelected="protocollate";break;case 1:this.tabSelected="inlavorazione";break;case 2:this.tabSelected="approvate";break;case 3:this.tabSelected="rifiutate"}this.router.navigate([],{queryParams:{tabselected:this.tabSelected,page:0,sortOrder:null,sortProperty:null},queryParamsHandling:"merge"})}eseguiRicercaSuTuttiTab(){this.loadCounters();const t=this.creaTabDaPassare();this.router.navigate([],{queryParams:this.creaQueryParams(t),queryParamsHandling:"merge"})}calcolaMinMaxDateOfRangeDataProtocollazioneFilter(){this.rangeDates&&0!=this.rangeDates.length?2!=this.rangeDates.length||this.rangeDates[1]?(this.minDateProtocollazioneFilter=f.a.convertToPatternDate(this.rangeDates[0]),this.maxDateProtocollazioneFilter=f.a.convertToPatternDate(this.rangeDates[1])):(this.minDateProtocollazioneFilter=f.a.convertToPatternDate(this.rangeDates[0]),this.maxDateProtocollazioneFilter=f.a.convertToPatternDate(this.rangeDates[0])):(this.minDateProtocollazioneFilter=null,this.maxDateProtocollazioneFilter=null)}aggiornaParametri(t){this.nome=t.nome,this.cognome=t.cognome,this.codiceFiscale=t.codiceFiscale,this.idProtocollo=t.idProtocollo,this.openSearchTab=t.openSearchTab;let e=f.a.convertStringToOnlyDate(t.dataInizio),i=f.a.convertStringToOnlyDate(t.dataFine);switch(this.rangeDates=e?[e,i]:null,t.tabselected){case"protocollate":this.selectedTab="PROTOCOLLATE";break;case"inlavorazione":this.selectedTab="IN_LAVORAZIONE";break;case"approvate":this.selectedTab="APPROVATE";break;case"rifiutate":this.selectedTab="RIFIUTATE"}}creaQueryParams(t){const e={tabselected:t,page:0,filter:0};return e.nome=g.a.isNotEmpty(this.nome)?this.nome:null,e.cognome=g.a.isNotEmpty(this.cognome)?this.cognome:null,e.codiceFiscale=g.a.isNotEmpty(this.codiceFiscale)?this.codiceFiscale:null,e.idProtocollo=g.a.isNotEmpty(this.idProtocollo)?this.idProtocollo:null,e.dataInizio=g.a.isNotEmpty(this.minDateProtocollazioneFilter)?this.minDateProtocollazioneFilter:null,e.dataFine=g.a.isNotEmpty(this.maxDateProtocollazioneFilter)?this.maxDateProtocollazioneFilter:null,e.openSearchTab=1,e}creaTabDaPassare(){let t;switch(this.selectedTab){case"PROTOCOLLATE":t="protocollate";break;case"IN_LAVORAZIONE":t="inlavorazione";break;case"APPROVATE":t="approvate";break;case"RIFIUTATE":t="rifiutate";break;default:t="protocollate"}return t}loadCounters(){this.calcolaMinMaxDateOfRangeDataProtocollazioneFilter(),this.itemBadges=new Array;let t=this.calcolaFiltroPerRicercaContatori();this.utentiService.getStatoRichiesteCount(t).subscribe(t=>{t.forEach(t=>{this.itemBadges.push(t)}),this.reformattedItemBadges=this.itemBadges.reduce((function(t,e){return t[e.stato]=e.count,t}),{})},t=>{this.messages.add(c.a.getToast("tst",c.b.error,c.a.erroreRecuperoDati))})}calcolaFiltroPerRicercaContatori(){return T.of(null,null,this.codiceFiscale,this.nome,this.cognome,this.idProtocollo,this.minDateProtocollazioneFilter,this.maxDateProtocollazioneFilter)}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(r.a),b.Nb(O.d),b.Nb(d),b.Nb(a.a),b.Nb(a.e))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-richieste-accesso-sistema"]],decls:64,vars:22,consts:[["key","tst",3,"baseZIndex"],[1,"ui-g","ui-fluid"],[1,"tophome"],[1,"ui-grid-fixed"],[1,"accordion-wrapper"],["header","Cerca",3,"selected"],[3,"ngSubmit"],["tooltipPosition","top",3,"disabled"],[1,"boxgrey-user"],[1,"ui-g-12"],[1,"ui-g-2"],[1,"ui-g-4"],["name","rangeDates","selectionMode","range","showButtonBar","true","dateFormat","dd/mm/yy",1,"a4g-calendar",3,"ngModel","readonlyInput","locale","ngModelChange"],["type","text","name","nrProtocollo","pInputText","","maxlength","50",3,"ngModel","ngModelChange"],["type","text","name","cognome","pInputText","","maxlength","30",3,"ngModel","ngModelChange"],["type","text","name","nome","pInputText","","maxlength","30",3,"ngModel","ngModelChange"],["type","text","name","codiceFiscale","pInputText","","maxlength","16",3,"ngModel","ngModelChange"],[1,"ui-g-6"],[1,"ui-g-9"],[1,"ui-g-3"],[1,"next-button"],["pButton","","icon","ui-icon-check","type","submit","label","RICERCA"],[1,"funzioni-grid","tab-new","boxgrey"],[1,"container--gestione-utenze",3,"onChange"],[3,"selected"],["pTemplate","header"],["pTemplate","content"],[1,"ui-tabview-title","ng-star-inserted"]],template:function(t,e){1&t&&(b.Ob(0,"p-toast",0),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Tb(3,"div",3),b.Tb(4,"h4"),b.Oc(5),b.gc(6,"translate"),b.Sb(),b.Sb(),b.Sb(),b.Tb(7,"div",3),b.Tb(8,"div",4),b.Tb(9,"p-accordion"),b.Tb(10,"p-accordionTab",5),b.Tb(11,"form",6),b.bc("ngSubmit",(function(){return e.eseguiRicercaSuTuttiTab()})),b.Tb(12,"fieldset",7),b.Tb(13,"div",8),b.Tb(14,"div",9),b.Tb(15,"div",10),b.Tb(16,"label"),b.Oc(17),b.Sb(),b.Sb(),b.Tb(18,"div",11),b.Tb(19,"p-calendar",12),b.bc("ngModelChange",(function(t){return e.rangeDates=t})),b.Sb(),b.Sb(),b.Tb(20,"div",10),b.Tb(21,"label"),b.Oc(22),b.Sb(),b.Sb(),b.Tb(23,"div",11),b.Tb(24,"input",13),b.bc("ngModelChange",(function(t){return e.idProtocollo=t})),b.Sb(),b.Sb(),b.Sb(),b.Tb(25,"div",9),b.Tb(26,"div",10),b.Tb(27,"label"),b.Oc(28),b.Sb(),b.Sb(),b.Tb(29,"div",11),b.Tb(30,"input",14),b.bc("ngModelChange",(function(t){return e.cognome=t})),b.Sb(),b.Sb(),b.Tb(31,"div",10),b.Tb(32,"label"),b.Oc(33),b.Sb(),b.Sb(),b.Tb(34,"div",11),b.Tb(35,"input",15),b.bc("ngModelChange",(function(t){return e.nome=t})),b.Sb(),b.Sb(),b.Sb(),b.Tb(36,"div",9),b.Tb(37,"div",10),b.Tb(38,"label"),b.Oc(39),b.Sb(),b.Sb(),b.Tb(40,"div",11),b.Tb(41,"input",16),b.bc("ngModelChange",(function(t){return e.codiceFiscale=t})),b.Sb(),b.Sb(),b.Ob(42,"div",17),b.Sb(),b.Tb(43,"div",9),b.Ob(44,"div",18),b.Tb(45,"div",19),b.Tb(46,"div",20),b.Ob(47,"button",21),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(48,"div",9),b.Tb(49,"div",3),b.Tb(50,"div",22),b.Tb(51,"p-tabView",23),b.bc("onChange",(function(t){return e.handleTabChange(t)})),b.Tb(52,"p-tabPanel",24),b.Mc(53,Bt,5,4,"ng-template",25),b.Mc(54,Mt,1,0,"ng-template",26),b.Sb(),b.Tb(55,"p-tabPanel",24),b.Mc(56,Rt,5,4,"ng-template",25),b.Mc(57,It,1,0,"ng-template",26),b.Sb(),b.Tb(58,"p-tabPanel",24),b.Mc(59,Et,5,4,"ng-template",25),b.Mc(60,wt,1,0,"ng-template",26),b.Sb(),b.Tb(61,"p-tabPanel",24),b.Mc(62,Ut,5,4,"ng-template",25),b.Mc(63,Ft,1,0,"ng-template",26),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.mc("baseZIndex",5e4),b.Bb(5),b.Pc(b.hc(6,20,"RICHIESTE_ACCESSO.TITLE")),b.Bb(5),b.mc("selected",1==e.openSearchTab),b.Bb(2),b.mc("disabled",!1),b.Bb(5),b.Pc(e.labels.dataProtocollazione),b.Bb(2),b.mc("ngModel",e.rangeDates)("readonlyInput",!0)("locale",e.language),b.Bb(3),b.Pc(e.labels.nrProtocollo),b.Bb(2),b.mc("ngModel",e.idProtocollo),b.Bb(4),b.Pc(e.labels.cognome),b.Bb(2),b.mc("ngModel",e.cognome),b.Bb(3),b.Pc(e.labels.nome),b.Bb(2),b.mc("ngModel",e.nome),b.Bb(4),b.Pc(e.labels.codiceFiscale),b.Bb(2),b.mc("ngModel",e.codiceFiscale),b.Bb(11),b.mc("selected","PROTOCOLLATE"==e.selectedTab),b.Bb(3),b.mc("selected","IN_LAVORAZIONE"==e.selectedTab),b.Bb(3),b.mc("selected","APPROVATE"==e.selectedTab),b.Bb(3),b.mc("selected","RIFIUTATE"==e.selectedTab))},directives:[y.a,P.a,P.c,C.I,C.t,C.u,z.a,C.s,C.v,C.c,D.a,C.n,A.b,B.b,B.a,O.e,G,ct,St,At],pipes:[N.d],styles:[""]}),t})();var Nt=i("JIr8"),_t=i("eIep"),kt=i("cp0P"),$t=i("EY2u"),jt=i("LRne"),Lt=i("bYf8"),Gt=i("GFTO"),qt=i("kPZZ"),Ht=i("R5y+"),Qt=i("AD9J");const Vt=function(){return{width:"100%",height:"300px",overflow:"auto",display:"block"}};function Zt(t,e){if(1&t){const t=b.Ub();b.Tb(0,"p-tree",39),b.bc("selectionChange",(function(e){return b.Ec(t),b.fc(6).selectedNodes=e})),b.Sb()}if(2&t){const t=b.fc(6);b.Kc(b.rc(4,Vt)),b.mc("value",t.entiCaaTreeNode)("selection",t.selectedNodes)}}function Kt(t,e){if(1&t&&(b.Tb(0,"div"),b.Mc(1,Zt,1,5,"p-tree",38),b.Sb()),2&t){const t=b.fc(5);b.Bb(1),b.mc("ngIf",t.entiCaaTreeNode)}}function Jt(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"div",36),b.Ob(2,"p-checkbox",37),b.Sb(),b.Mc(3,Kt,2,1,"div",24),b.Sb()),2&t){const t=b.fc().$implicit,e=b.fc(3);b.Bb(2),b.mc("formControl",e.profiloUtenteFormGroup.controls[t.id])("label",t.descrizione),b.Bb(1),b.mc("ngIf",e.profiloUtenteFormGroup.controls[t.id].value)}}function Yt(t,e){if(1&t&&(b.Tb(0,"span"),b.Oc(1,", "),b.Tb(2,"b"),b.Oc(3,"denominazione"),b.Sb(),b.Oc(4),b.Sb()),2&t){const t=b.fc().$implicit;b.Bb(4),b.Qc(" ",t.denominazione,"")}}function Wt(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"span"),b.Tb(2,"b"),b.Oc(3),b.Sb(),b.Oc(4),b.Sb(),b.Mc(5,Yt,5,1,"span",24),b.Sb()),2&t){const t=e.$implicit,i=b.fc(6);b.Bb(3),b.Pc(i.labels.cuaaSigla),b.Bb(1),b.Qc(" ",t.cuaa,""),b.Bb(1),b.mc("ngIf",t.denominazione)}}function Xt(t,e){if(1&t&&(b.Tb(0,"span"),b.Oc(1,", "),b.Tb(2,"b"),b.Oc(3,"denominazione"),b.Sb(),b.Oc(4),b.Sb()),2&t){const t=b.fc().$implicit;b.Bb(4),b.Qc(" ",t.denominazione,"")}}function te(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"span"),b.Tb(2,"b"),b.Oc(3),b.Sb(),b.Oc(4),b.Sb(),b.Mc(5,Xt,5,1,"span",24),b.Sb()),2&t){const t=e.$implicit,i=b.fc(6);b.Bb(3),b.Pc(i.labels.cuaaSigla),b.Bb(1),b.Qc(" ",t.cuaa,""),b.Bb(1),b.mc("ngIf",t.denominazione)}}function ee(t,e){if(1&t&&(b.Tb(0,"div"),b.Mc(1,Wt,6,3,"div",19),b.Mc(2,te,6,3,"div",19),b.Sb()),2&t){const t=b.fc(5);b.Bb(1),b.mc("ngForOf",t.datiDomanda.responsabilitaRichieste.responsabilitaTitolare),b.Bb(1),b.mc("ngForOf",t.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante)}}function ie(t,e){if(1&t&&(b.Rb(0),b.Oc(1),b.Qb()),2&t){const t=e.$implicit;b.Bb(1),b.Rc(" ",t.denominazioneAzienda," - ",t.comune,", ")}}function oe(t,e){if(1&t&&(b.Rb(0),b.Mc(1,ie,2,2,"ng-container",19),b.Qb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t.distributori)}}function ae(t,e){if(1&t&&(b.Tb(0,"div",42),b.Tb(1,"strong"),b.Oc(2),b.gc(3,"translate"),b.Sb(),b.Ob(4,"br"),b.Mc(5,oe,2,1,"ng-container",19),b.Sb()),2&t){const t=b.fc(5);b.Bb(2),b.Qc("",b.hc(3,2,"gestioneUtenze.distributori")," "),b.Bb(3),b.mc("ngForOf",t.datiDomanda.responsabilitaRichieste.responsabilitaDistributore)}}function ne(t,e){if(1&t&&(b.Ob(0,"p-checkbox",40),b.Mc(1,ee,3,2,"div",24),b.Mc(2,ae,6,4,"div",41)),2&t){const t=b.fc().$implicit,e=b.fc(3);b.mc("formControl",e.profiloUtenteFormGroup.controls[t.id])("label",t.descrizione),b.Bb(1),b.mc("ngIf",e.profiloUtenteFormGroup.controls[t.id].value&&"azienda"==t.identificativo),b.Bb(1),b.mc("ngIf",e.profiloUtenteFormGroup.controls[t.id].value&&"operatore_distributore"==t.identificativo)}}function se(t,e){if(1&t&&(b.Tb(0,"div"),b.Mc(1,Jt,4,3,"div",34),b.Mc(2,ne,3,4,"ng-template",null,35,b.Nc),b.Sb()),2&t){const t=e.$implicit,i=b.Bc(3);b.Bb(1),b.mc("ngIf","caa"==t.identificativo)("ngIfElse",i)}}function re(t,e){if(1&t&&(b.Tb(0,"div"),b.Mc(1,se,4,2,"div",19),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t.profili)}}function ce(t,e){if(1&t&&(b.Tb(0,"div"),b.Ob(1,"p-checkbox",37),b.Sb()),2&t){const t=e.$implicit,i=b.fc(3);b.Bb(1),b.mc("formControl",i.profiloUtenteFormGroup.controls[t.id])("label",t.descrizione)}}function le(t,e){if(1&t&&(b.Tb(0,"p-accordion"),b.Tb(1,"p-accordionTab",43),b.Mc(2,ce,2,2,"div",19),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.fc(2);b.Bb(1),b.mc("header",i.labels[t.responsabilita])("selected",!1),b.Bb(1),b.mc("ngForOf",t.profili)}}function be(t,e){if(1&t&&b.Ob(0,"p-accordionTab",45),2&t){const t=b.fc().$implicit;b.mc("header",t.profili[0].descrizione)("selected",!1)("disabled",!0)}}function de(t,e){if(1&t&&(b.Tb(0,"p-accordion"),b.Mc(1,be,1,3,"p-accordionTab",44),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.mc("ngForOf",t.profili)}}function pe(t,e){if(1&t&&(b.Tb(0,"div",47),b.Oc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Qc(" ",t,"")}}function ue(t,e){if(1&t&&(b.Tb(0,"div"),b.Mc(1,pe,2,1,"div",46),b.Sb()),2&t){const t=b.fc(2);b.Bb(1),b.mc("ngForOf",t.profiliSrt)}}function he(t,e){1&t&&(b.Tb(0,"div"),b.Tb(1,"div",47),b.Oc(2," Non sono presenti profili per questo utente in SRTrento!"),b.Sb(),b.Sb())}function ge(t,e){if(1&t&&(b.Tb(0,"div",47),b.Oc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Qc(" ",t,"")}}function fe(t,e){if(1&t&&(b.Tb(0,"div"),b.Mc(1,ge,2,1,"div",46),b.Sb()),2&t){const t=b.fc(2);b.Bb(1),b.mc("ngForOf",t.profiliAgs)}}function me(t,e){1&t&&(b.Tb(0,"div"),b.Tb(1,"div",47),b.Oc(2," Non sono presenti profili per questo utente in AGS!"),b.Sb(),b.Sb())}const Se=function(){return{overflow:"auto","max-height":"750px"}},Te=function(){return{float:"right"}};function ve(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",1),b.Tb(1,"p-dialog",2,3),b.bc("visibleChange",(function(e){return b.Ec(t),b.fc().display=e}))("onShow",(function(){return b.Ec(t),b.fc().onShow()}))("onHide",(function(){return b.Ec(t),b.fc().onHide()})),b.Tb(3,"form",4),b.Tb(4,"div",5),b.Tb(5,"div",6),b.Tb(6,"strong",7),b.Oc(7),b.Sb(),b.Tb(8,"span",8),b.Oc(9),b.Sb(),b.Tb(10,"span"),b.Oc(11),b.Sb(),b.Tb(12,"div",9),b.Ob(13,"img",10),b.Ob(14,"img",11),b.Sb(),b.Sb(),b.Tb(15,"div",12),b.Tb(16,"h4",13),b.Ob(17,"i",14),b.Tb(18,"span"),b.Oc(19),b.Sb(),b.Sb(),b.Tb(20,"div",15),b.Tb(21,"p-panel"),b.Tb(22,"p-header",16),b.Ob(23,"img",17),b.Tb(24,"span",18),b.Oc(25),b.Sb(),b.Sb(),b.Mc(26,re,2,1,"div",19),b.Mc(27,le,3,3,"p-accordion",19),b.Mc(28,de,2,1,"p-accordion",19),b.Sb(),b.Tb(29,"p-panel"),b.Tb(30,"p-header",16),b.Ob(31,"img",20),b.Tb(32,"span",18),b.Oc(33),b.Sb(),b.Tb(34,"p-button",21),b.bc("onClick",(function(){b.Ec(t);const e=b.fc();return e.updateProfiliSrt(e.datiDomanda.datiAnagrafici)})),b.gc(35,"translate"),b.Sb(),b.Sb(),b.Tb(36,"div",22),b.Tb(37,"div",23),b.Mc(38,ue,2,1,"div",24),b.Mc(39,he,3,0,"div",24),b.Sb(),b.Sb(),b.Sb(),b.Tb(40,"p-panel"),b.Tb(41,"p-header",16),b.Ob(42,"img",25),b.Tb(43,"span",18),b.Oc(44),b.Sb(),b.Tb(45,"p-button",21),b.bc("onClick",(function(){b.Ec(t);const e=b.fc();return e.updateProfiliAgs(e.datiDomanda.datiAnagrafici)})),b.gc(46,"translate"),b.Sb(),b.Sb(),b.Tb(47,"div",22),b.Tb(48,"div",23),b.Mc(49,fe,2,1,"div",24),b.Mc(50,me,3,0,"div",24),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Tb(51,"div",12),b.Tb(52,"h4",13),b.Ob(53,"i",26),b.Tb(54,"span"),b.Oc(55),b.gc(56,"translate"),b.Sb(),b.Sb(),b.Tb(57,"div",15),b.Ob(58,"textarea",27),b.Sb(),b.Sb(),b.Sb(),b.Ob(59,"hr",28),b.Tb(60,"div",29),b.Tb(61,"div",30),b.Tb(62,"button",31),b.bc("click",(function(){return b.Ec(t),b.fc().hide()})),b.Sb(),b.Sb(),b.Tb(63,"div",30),b.Tb(64,"div",32),b.Tb(65,"button",33),b.bc("click",(function(){return b.Ec(t),b.fc().onSave()})),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc();b.Bb(1),b.mc("visible",t.display)("focusOnShow",!1)("contentStyle",b.rc(37,Se)),b.Bb(2),b.mc("formGroup",t.profiloUtenteFormGroup),b.Bb(4),b.Pc(t.datiDomanda.datiAnagrafici.nome+" "+t.datiDomanda.datiAnagrafici.cognome),b.Bb(2),b.Pc(t.labels.codiceFiscale.toLowerCase()),b.Bb(2),b.Pc(t.datiDomanda.datiAnagrafici.codiceFiscale),b.Bb(2),b.nc("pTooltip",t.datiDomanda.datiAnagrafici.telefono),b.Bb(1),b.nc("pTooltip",t.datiDomanda.datiAnagrafici.email),b.Bb(5),b.Pc(t.labels.configurazioneProfili),b.Bb(6),b.Pc(t.labels.nuovoSistemaInformativoAgricoltura),b.Bb(1),b.mc("ngForOf",t.responsabilitaPresentationSingleProfile),b.Bb(1),b.mc("ngForOf",t.responsabilitaPresentationMultiProfile),b.Bb(1),b.mc("ngForOf",t.responsabilitaPresentationSingleProfileNoRuoli),b.Bb(5),b.Pc(t.labels.misureStrutturali),b.Bb(1),b.Kc(b.rc(38,Te)),b.nc("label",b.hc(35,31,"RICHIESTE_ACCESSO.refresh")),b.Bb(4),b.mc("ngIf",t.profiliSrt&&t.profiliSrt.length>0),b.Bb(1),b.mc("ngIf",!(t.profiliSrt&&t.profiliSrt.length>0)),b.Bb(5),b.Pc(t.labels.sistemaInformativoAgricoltura),b.Bb(1),b.Kc(b.rc(39,Te)),b.nc("label",b.hc(46,33,"RICHIESTE_ACCESSO.refresh")),b.Bb(4),b.mc("ngIf",t.profiliAgs&&t.profiliAgs.length>0),b.Bb(1),b.mc("ngIf",!(t.profiliAgs&&t.profiliAgs.length>0)),b.Bb(5),b.Pc(b.hc(56,35,"RICERCA_UTENTE.variazioniRichiesta")),b.Bb(3),b.mc("rows",3)("formControl",t.profiloUtenteFormGroup.controls.variazioniRichiesta),b.Bb(4),b.mc("label",t.labels.ANNULLA),b.Bb(3),b.mc("label",t.labels.salva)}}class Oe{}let ye=(()=>{class t{constructor(t,e,i,o,a,n){this.router=t,this.route=e,this.gestioneUtenzeService=i,this.utentiService=o,this.messageService=a,this.translateService=n,this.display=!1,this.displayChange=new b.n,this.componentDestroyed$=new h.a,this.istruttoriaProfiloUtente=new Lt.a,this.labels=s.a,this.displayAssegnazioneConfigurazioneDialog=!1,this.profiloUtenteFormGroup=new C.j({}),this.profiloUtenteFormGroup.controls.variazioniRichiesta=new C.g("",C.G.required)}handleUfficiCaaOB(t){this.entiCaaTreeNode=Gt.a.getTreeNodes(t)}handleProfiliOB(t){let e=new Map;for(let i of t)e.has(i.responsabilita)?e.get(i.responsabilita).push(i):e.set(i.responsabilita,[i]);this.responsabilitaPresentationSingleProfileNoRuoli=[],this.responsabilitaPresentationSingleProfile=[],this.responsabilitaPresentationMultiProfile=[];for(let i of Array.from(e.keys()).sort()){let t=new Oe,o=e.get(i).sort();t.responsabilita=i,t.profili=o,1===o.length?o[0].haRuoli?this.responsabilitaPresentationSingleProfile.push(t):this.responsabilitaPresentationSingleProfileNoRuoli.push(t):this.responsabilitaPresentationMultiProfile.push(t)}this.responsabilitaPresentationSingleProfileNoRuoli.sort((t,e)=>t.responsabilita>e.responsabilita?1:-1),this.responsabilitaPresentationSingleProfile.sort((t,e)=>t.profili[0]>e.profili[0]?1:-1),this.responsabilitaPresentationMultiProfile.sort((t,e)=>t.responsabilita>e.responsabilita?1:-1);for(let i of this.responsabilitaPresentationSingleProfile){let t=i.profili[0],e=new C.g(!1);"azienda"!==t.identificativo||this.hasCuaa(this.datiDomanda)||e.disable(),this.profiloUtenteFormGroup.controls[t.id]=e}for(let i of this.responsabilitaPresentationMultiProfile)i.profili.forEach(t=>this.profiloUtenteFormGroup.controls[t.id]=new C.g(!1))}handleIstruttoriaOB(t){Object.assign(this.istruttoriaProfiloUtente,t),this.selectedNodes=Gt.a.selectEntiSedi(this.entiCaaTreeNode,this.istruttoriaProfiloUtente.sedi),this.profiloUtenteFormGroup.controls.variazioniRichiesta.setValue(this.istruttoriaProfiloUtente.variazioneRichiesta);for(let e of this.istruttoriaProfiloUtente.profili)this.profiloUtenteFormGroup.controls[e].setValue(!0)}hasCuaa(t){return!!(t.responsabilitaRichieste.responsabilitaLegaleRappresentante&&t.responsabilitaRichieste.responsabilitaLegaleRappresentante.some(t=>!!t.cuaa)||t.responsabilitaRichieste.responsabilitaTitolare&&t.responsabilitaRichieste.responsabilitaTitolare.some(t=>!!t.cuaa))}popolaDatiDomanda(){let t=this.datiDomanda.responsabilitaRichieste,e=this.hasCuaa(this.datiDomanda);const i=this.hasDistributors(this.datiDomanda);for(let o of this.responsabilitaPresentationSingleProfile)this.profiloUtenteFormGroup.controls[o.profili[0].id].setValue(!("azienda"!==o.profili[0].identificativo||!e)),"operatore_distributore"===o.profili[0].identificativo&&i&&this.profiloUtenteFormGroup.controls[o.profili[0].id].setValue(!0);if(t.responsabilitaCaa)for(let o of t.responsabilitaCaa){this.selectedNodes=Gt.a.selectEntiSedi(this.entiCaaTreeNode,o.sedi.map(t=>t.id));let t=this.getProfiloCaaFormControl();t&&this.profiloUtenteFormGroup.controls[t.id].setValue(this.selectedNodes.length>0)}}hasDistributors(t){try{return t.responsabilitaRichieste.responsabilitaDistributore[0].distributori.length>0}catch(e){return!1}}updateProfiliSrt(t){Object(kt.a)([this.utentiService.getProfiliSrt(t).pipe(Object(Nt.a)(t=>(this.messageService.add(c.a.getToast("tst",c.b.error,c.a.erroreRecuperoDatiSrt)),Object($t.b)())))]).pipe(Object(p.a)(this.componentDestroyed$)).subscribe(t=>{this.getProfiliSrt(t[0])},t=>{console.log(t)})}getProfiliSrt(t){this.profiliSrt=[],t&&(t.forEach(t=>{this.profiliSrt.push(t.ruolo)}),console.log("Profili SRT:"),console.log(this.profiliSrt))}updateProfiliAgs(t){Object(kt.a)([this.utentiService.getProfiliAgs(t).pipe(Object(Nt.a)(t=>(this.messageService.add(c.a.getToast("tst",c.b.error,c.a.erroreRecuperoDatiAgs)),Object($t.b)())))]).pipe(Object(p.a)(this.componentDestroyed$)).subscribe(t=>{this.getProfiliAgs(t[0])},t=>{console.log(t)})}getProfiliAgs(t){this.profiliAgs=[],t&&t.forEach(t=>{this.profiliAgs.push(t.utenza)})}ngOnInit(){this.selectedNodes=[],this.route.params.pipe(Object(_t.a)(t=>this.gestioneUtenzeService.getDatiAnagraficiUtente(t.idUtenza)),Object(_t.a)(t=>(this.datiDomanda=t,console.log("loading from services"),Object(kt.a)([this.utentiService.getUfficiCaa().pipe(Object(Nt.a)(t=>{c.a.handleError(this.messageService,t,c.a.erroreRecuperoDati)})),this.utentiService.getProfiliUtente().pipe(Object(Nt.a)(t=>{c.a.handleError(this.messageService,t,c.a.erroreRecuperoDati)})),this.gestioneUtenzeService.getIstruttoriaProfiloByDomanda(t.id).pipe(Object(Nt.a)(t=>(this.istruttoriaProfiloUtente.idDomanda=this.datiDomanda.id,this.selectedNodes=[],Object(jt.a)(null))))]))),Object(_t.a)(t=>(this.handleUfficiCaaOB(t[0]),this.handleProfiliOB(t[1]),t[2]?this.handleIstruttoriaOB(t[2]):this.popolaDatiDomanda(),this.route.queryParams)),Object(p.a)(this.componentDestroyed$)).subscribe(t=>{"1"===t.dialog&&this.open()},t=>(c.a.handleError(this.messageService,t,c.a.erroreRecuperoDati),this.route.queryParams))}hide(){this.display=!1}onHide(){this.displayChange.emit(!1)}onShow(){this.displayChange.emit(!0)}open(){this.display=!0,this.updateProfiliSrt(this.datiDomanda.datiAnagrafici),this.updateProfiliAgs(this.datiDomanda.datiAnagrafici)}getProfiloCaaFormControl(){let t=this.responsabilitaPresentationSingleProfile.map(t=>t.profili).find(t=>!!t.find(t=>"caa"===t.identificativo));return t&&t.length>0?t[0]:null}onSave(){if(this.profiloUtenteFormGroup.updateValueAndValidity(),!this.profiloUtenteFormGroup.valid)return void this.messageService.add(c.a.getToast("tst",c.b.warn,c.a.inputRequiredInvalid));let t=this.getProfiloCaaFormControl();if(t&&this.profiloUtenteFormGroup.controls[t.id]&&this.profiloUtenteFormGroup.controls[t.id].value&&0===this.selectedNodes.length)this.messageService.add(c.a.getToast("tst",c.b.warn,this.translateService.instant("RICHIESTE_ACCESSO.seProfiloCaaAlmeno1Sede")));else{this.istruttoriaProfiloUtente.sedi=[],this.selectedNodes.forEach((t,e)=>{t.data&&this.istruttoriaProfiloUtente.sedi.push(t.data.id)}),this.istruttoriaProfiloUtente.profili=[];for(let t of this.responsabilitaPresentationMultiProfile.concat(this.responsabilitaPresentationSingleProfile))t.profili.forEach(t=>{let e=t.id;this.profiloUtenteFormGroup.controls[e].value&&this.istruttoriaProfiloUtente.profili.push(e)});this.istruttoriaProfiloUtente.variazioneRichiesta=this.profiloUtenteFormGroup.controls.variazioniRichiesta.value,this.istruttoriaProfiloUtente.id?this.utentiService.putIstruttoriaProfilo(this.istruttoriaProfiloUtente).subscribe(t=>{this.messageService.add(c.a.getToast("tst",c.b.success,c.a.OPERAZIONE_OK)),this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"inlavorazione"}})},t=>{this.messageService.add(c.a.getToast("tst",c.b.error,c.a.changeStatusKo))}):(this.istruttoriaProfiloUtente.idDomanda=this.datiDomanda.id,this.utentiService.postIstruttoriaProfilo(this.istruttoriaProfiloUtente).subscribe(t=>{this.messageService.add(c.a.getToast("tst",c.b.success,c.a.OPERAZIONE_OK)),this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"inlavorazione"}})},t=>{this.messageService.add(c.a.getToast("tst",c.b.error,c.a.changeStatusKo))}))}}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(a.e),b.Nb(a.a),b.Nb(M.a),b.Nb(r.a),b.Nb(O.d),b.Nb(N.e))},t.\u0275cmp=b.Hb({type:t,selectors:[["assegnazione-configurazioni-dialog"]],outputs:{displayChange:"displayChange"},decls:1,vars:1,consts:[["id","confirm",4,"ngIf"],["id","confirm"],["width","900","modal","true","appendTo","body","closable","true","closeOnEscape","true",3,"visible","focusOnShow","contentStyle","visibleChange","onShow","onHide"],["dialog",""],[3,"formGroup"],[1,"popup-istruttoria","clearfix","p-0"],[1,"d-flex","align-items-center","p-3","bg-success","text-white"],[1,"mr-3"],[1,"mr-1"],[1,"ml-auto"],["src","assets/img/icons/phone.png","alt","phone","tooltipPosition","left","tooltipStyleClass","tooltip--white",1,"mr-4","img--force-white",3,"pTooltip"],["src","assets/img/icons/mail.png","alt","phone","tooltipStyleClass","tooltip--white","tooltipPosition","right",1,"img--force-white",3,"pTooltip"],[1,"popup-box"],[1,"popup-box__head"],[1,"pi","pi-cog"],[1,"popup-box__body"],[1,"d-flex","align-items-center"],["src","assets/layout/images/misure_strutturali.png","alt","x"],[1,"ui-panel-title"],[4,"ngFor","ngForOf"],["src","assets/layout/images/nuovo_sistema.png","alt","x"],["icon","pi pi-refresh","iconPos","left",1,"ml-auto",3,"label","onClick"],[1,"row","mb-5"],[1,"col-12"],[4,"ngIf"],["src","assets/layout/images/sistema_informativo.png","alt","x"],[1,"pi","pi-plus-circle"],["autoResize","autoResize","required","",2,"width","100%",3,"rows","formControl"],[1,"my-3"],[1,"row"],[1,"col-6"],["pButton","","type","button",1,"annulla","btn--text",3,"label","click"],[1,"next-button"],["pButton","","type","button",1,"salva",3,"label","click"],[4,"ngIf","ngIfElse"],["selezionaProfilo",""],[1,"row","checkbox--top-level"],["binary","false",3,"formControl","label"],["selectionMode","checkbox",3,"style","value","selection","selectionChange",4,"ngIf"],["selectionMode","checkbox",3,"value","selection","selectionChange"],["binary","false",1,"checkbox--top-level",3,"formControl","label"],["class","pl-2",4,"ngIf"],[1,"pl-2"],[3,"header","selected"],[3,"header","selected","disabled",4,"ngFor","ngForOf"],[3,"header","selected","disabled"],["class","box-user-role dialog-config",4,"ngFor","ngForOf"],[1,"box-user-role","dialog-config"]],template:function(t,e){1&t&&b.Mc(0,ve,66,40,"div",0),2&t&&b.mc("ngIf",e.datiDomanda)},directives:[n.t,Q.a,C.I,C.t,C.k,x.a,qt.a,O.c,n.s,A.a,C.c,C.D,C.s,C.h,A.b,Ht.a,Qt.a,P.a,P.c],pipes:[N.d],styles:[".dialog-config[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #dedede;border-top:0}.ng-dirty.ng-invalid[_ngcontent-%COMP%]{border-color:red}"]}),t})();const Pe=["assegnazioneConfigurazioneDialog"],Ce=["rifiutoDialog"];function ze(t,e){if(1&t&&(b.Tb(0,"h4"),b.Oc(1),b.gc(2,"translate"),b.gc(3,"date"),b.Sb()),2&t){const t=b.fc();b.Bb(1),b.Sc(" ",b.hc(2,3,"gestioneUtenze.richiesta")," ",t.datiDomanda.idProtocollo," | ",b.ic(3,5,t.datiDomanda.dataProtocollazione,t.DATE_FORMAT)," ")}}function De(t,e){if(1&t){const t=b.Ub();b.Tb(0,"div",12),b.Tb(1,"p-accordion"),b.Tb(2,"p-accordionTab",20),b.Tb(3,"fieldset",21),b.Tb(4,"div",22),b.Tb(5,"div",23),b.Tb(6,"label"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Tb(9,"div",24),b.Tb(10,"input",25),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc(2).datiDomanda.datiAnagrafici.cognome=e})),b.Sb(),b.Sb(),b.Tb(11,"div",23),b.Tb(12,"label"),b.Oc(13),b.gc(14,"translate"),b.Sb(),b.Sb(),b.Tb(15,"div",24),b.Tb(16,"input",26),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc(2).datiDomanda.datiAnagrafici.nome=e})),b.Sb(),b.Sb(),b.Tb(17,"div",23),b.Tb(18,"label"),b.Oc(19),b.gc(20,"translate"),b.Sb(),b.Sb(),b.Tb(21,"div",24),b.Tb(22,"input",27),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc(2).datiDomanda.datiAnagrafici.codiceFiscale=e})),b.Sb(),b.Sb(),b.Tb(23,"div",23),b.Tb(24,"label"),b.Oc(25),b.gc(26,"translate"),b.Sb(),b.Sb(),b.Tb(27,"div",24),b.Tb(28,"input",28),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc(2).datiDomanda.datiAnagrafici.email=e})),b.Sb(),b.Sb(),b.Ob(29,"div",9),b.Tb(30,"div",23),b.Tb(31,"label"),b.Oc(32),b.gc(33,"translate"),b.Sb(),b.Sb(),b.Tb(34,"div",24),b.Tb(35,"input",29),b.bc("ngModelChange",(function(e){return b.Ec(t),b.fc(2).datiDomanda.datiAnagrafici.telefono=e})),b.Sb(),b.Sb(),b.Ob(36,"div",15),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc(2);b.Bb(2),b.mc("selected",!0),b.Bb(1),b.mc("disabled",!1),b.Bb(4),b.Pc(b.hc(8,17,"cognome")),b.Bb(3),b.mc("ngModel",t.datiDomanda.datiAnagrafici.cognome)("readonly",!0),b.Bb(3),b.Pc(b.hc(14,19,"nome")),b.Bb(3),b.mc("ngModel",t.datiDomanda.datiAnagrafici.nome)("readonly",!0),b.Bb(3),b.Pc(b.hc(20,21,"cf")),b.Bb(3),b.mc("ngModel",t.datiDomanda.datiAnagrafici.codiceFiscale)("readonly",!0),b.Bb(3),b.Pc(b.hc(26,23,"INDIRIZZO_PEC")),b.Bb(3),b.mc("ngModel",t.datiDomanda.datiAnagrafici.email)("readonly",!0),b.Bb(4),b.Pc(b.hc(33,25,"RECAPITO_TELEFONICO")),b.Bb(3),b.mc("ngModel",t.datiDomanda.datiAnagrafici.telefono)("readonly",!0)}}function Ae(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,2,"cuaa")),b.Bb(4),b.Pc(b.hc(8,4,"gestioneUtenze.descrizioneImpresa")))}function Be(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Pc(t.cuaa),b.Bb(2),b.Pc(t.denominazione)}}function Me(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"p-table",31),b.Mc(6,Ae,9,6,"ng-template",32),b.Mc(7,Be,5,2,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(b.hc(4,2,"titolare")),b.Bb(2),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaTitolare)}}function Re(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,2,"cuaa")),b.Bb(4),b.Pc(b.hc(8,4,"gestioneUtenze.descrizioneImpresa")))}function Ie(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Pc(t.cuaa),b.Bb(2),b.Pc(t.denominazione)}}function Ee(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5",34),b.Tb(2,"strong"),b.Oc(3),b.Sb(),b.Sb(),b.Tb(4,"p-table",31),b.Mc(5,Re,9,6,"ng-template",32),b.Mc(6,Ie,5,2,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(t.labels.legaleRappresentante),b.Bb(1),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante)}}function we(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Tb(9,"th"),b.Tb(10,"strong"),b.Oc(11),b.gc(12,"translate"),b.Sb(),b.Sb(),b.Tb(13,"th"),b.Tb(14,"strong"),b.Oc(15),b.gc(16,"translate"),b.Sb(),b.Sb(),b.Tb(17,"th"),b.Tb(18,"strong"),b.Oc(19),b.gc(20,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,5,"gestioneUtenze.ordineDiAppartenenza")),b.Bb(4),b.Pc(b.hc(8,7,"NUMERO_RI")),b.Bb(4),b.Pc(b.hc(12,9,"cuaa")),b.Bb(4),b.Pc(b.hc(16,11,"gestioneUtenze.descrizioneImpresa")),b.Bb(4),b.Pc(b.hc(20,13,"RAPPR")))}function Ue(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Tb(5,"td"),b.Oc(6),b.Sb(),b.Tb(7,"td"),b.Oc(8),b.Sb(),b.Tb(9,"td"),b.Oc(10),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Pc(t.ordine),b.Bb(2),b.Pc(t.iscrizione),b.Bb(2),b.Pc(t.cuaa),b.Bb(2),b.Pc(t.denominazione),b.Bb(2),b.Pc(t.rappresentante)}}function Fe(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5",34),b.Tb(2,"strong"),b.Oc(3),b.Sb(),b.Sb(),b.Tb(4,"p-table",31),b.Mc(5,we,21,15,"ng-template",32),b.Mc(6,Ue,11,5,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(t.labels.liberoProfessionistaConsulente),b.Bb(1),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaConsulente)}}function xe(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Tb(9,"th"),b.Tb(10,"strong"),b.Oc(11),b.gc(12,"translate"),b.Sb(),b.Sb(),b.Tb(13,"th"),b.Tb(14,"strong"),b.Oc(15),b.gc(16,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,4,"gestioneUtenze.matricola")),b.Bb(4),b.Pc(b.hc(8,6,"gestioneUtenze.struttura")),b.Bb(4),b.Pc(b.hc(12,8,"gestioneUtenze.dirigente")),b.Bb(4),b.Pc(b.hc(16,10,"RICHIESTE_ACCESSO.motivazioneRichiesta")))}function Ne(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Tb(5,"td"),b.Oc(6),b.Sb(),b.Tb(7,"td"),b.Oc(8),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Pc(t.matricola),b.Bb(2),b.Pc(t.dipartimento),b.Bb(2),b.Pc(t.dirigente),b.Bb(2),b.Pc(t.note)}}function _e(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5",34),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"p-table",31),b.Mc(6,xe,17,12,"ng-template",32),b.Mc(7,Ne,9,4,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(b.hc(4,2,"gestioneUtenze.dipendenteCollaboratorePat")),b.Bb(2),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaPat)}}function ke(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,2,"gestioneUtenze.caaSedi")),b.Bb(4),b.Pc(b.hc(8,4,"gestioneUtenze.responsabile")))}function $e(t,e){if(1&t&&(b.Tb(0,"div"),b.Oc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Qc(" ",t.descrizione," ")}}function je(t,e){if(1&t&&(b.Rb(0),b.Mc(1,$e,2,1,"div",35),b.Qb()),2&t){const t=b.fc().$implicit;b.Bb(1),b.mc("ngForOf",t.sedi)}}function Le(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Mc(2,je,2,1,"ng-container",8),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.mc("ngIf",(null==t.sedi?null:t.sedi.length)>0),b.Bb(2),b.Pc(t.responsabile)}}function Ge(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5",34),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"p-table",31),b.Mc(6,ke,9,6,"ng-template",32),b.Mc(7,Le,5,2,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(b.hc(4,2,"gestioneUtenze.dipendenteCollaboratoreCaa")),b.Bb(2),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaCaa)}}function qe(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Tb(9,"th"),b.Tb(10,"strong"),b.Oc(11),b.gc(12,"translate"),b.Sb(),b.Sb(),b.Tb(13,"th"),b.Tb(14,"strong"),b.Oc(15),b.gc(16,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,4,"denominazioneEnte")),b.Bb(4),b.Pc(b.hc(8,6,"PARTITA_IVA")),b.Bb(4),b.Pc(b.hc(12,8,"gestioneUtenze.responsabile")),b.Bb(4),b.Pc(b.hc(16,10,"RICHIESTE_ACCESSO.motivazioneRichiesta")))}function He(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Oc(2),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Tb(5,"td"),b.Oc(6),b.Sb(),b.Tb(7,"td"),b.Oc(8),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.Pc(t.denominazione),b.Bb(2),b.Pc(t.piva),b.Bb(2),b.Pc(t.dirigente),b.Bb(2),b.Pc(t.note)}}function Qe(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5",34),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"p-table",31),b.Mc(6,qe,17,12,"ng-template",32),b.Mc(7,He,9,4,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(b.hc(4,2,"gestioneUtenze.collaboratoreAltriEnti")),b.Bb(2),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti)}}function Ve(t,e){1&t&&(b.Tb(0,"tr"),b.Tb(1,"th"),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"th"),b.Tb(6,"strong"),b.Oc(7),b.gc(8,"translate"),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Bb(3),b.Pc(b.hc(4,2,"gestioneUtenze.distributori")),b.Bb(4),b.Pc(b.hc(8,4,"gestioneUtenze.responsabile")))}function Ze(t,e){if(1&t&&(b.Tb(0,"div"),b.Oc(1),b.Sb()),2&t){const t=e.$implicit;b.Bb(1),b.Rc(" ",t.denominazioneAzienda," - ",t.comune," ")}}function Ke(t,e){if(1&t&&(b.Rb(0),b.Mc(1,Ze,2,2,"div",35),b.Qb()),2&t){const t=b.fc().$implicit;b.Bb(1),b.mc("ngForOf",t.distributori)}}function Je(t,e){if(1&t&&(b.Tb(0,"tr"),b.Tb(1,"td"),b.Mc(2,Ke,2,1,"ng-container",8),b.Sb(),b.Tb(3,"td"),b.Oc(4),b.Sb(),b.Sb()),2&t){const t=e.$implicit;b.Bb(2),b.mc("ngIf",null==t.distributori?null:t.distributori.length),b.Bb(2),b.Pc(t.responsabile)}}function Ye(t,e){if(1&t&&(b.Rb(0),b.Tb(1,"h5",34),b.Tb(2,"strong"),b.Oc(3),b.gc(4,"translate"),b.Sb(),b.Sb(),b.Tb(5,"p-table",31),b.Mc(6,Ve,9,6,"ng-template",32),b.Mc(7,Je,5,2,"ng-template",33),b.Sb(),b.Qb()),2&t){const t=b.fc(3);b.Bb(3),b.Pc(b.hc(4,2,"gestioneUtenze.dipendenteCollaboratoreDistributore")),b.Bb(2),b.mc("value",t.datiDomanda.responsabilitaRichieste.responsabilitaDistributore)}}function We(t,e){if(1&t&&(b.Tb(0,"div",12),b.Tb(1,"p-accordion"),b.Tb(2,"p-accordionTab",30),b.Tb(3,"div",14),b.Mc(4,Me,8,4,"ng-container",8),b.Mc(5,Ee,7,2,"ng-container",8),b.Mc(6,Fe,7,2,"ng-container",8),b.Mc(7,_e,8,4,"ng-container",8),b.Mc(8,Ge,8,4,"ng-container",8),b.Mc(9,Qe,8,4,"ng-container",8),b.Mc(10,Ye,8,4,"ng-container",8),b.Sb(),b.Sb(),b.Sb(),b.Sb()),2&t){const t=b.fc(2);b.Bb(2),b.mc("selected",!0),b.Bb(2),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaTitolare?null:t.datiDomanda.responsabilitaRichieste.responsabilitaTitolare.length)>0),b.Bb(1),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante?null:t.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante.length)>0),b.Bb(1),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaConsulente?null:t.datiDomanda.responsabilitaRichieste.responsabilitaConsulente.length)>0),b.Bb(1),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaPat?null:t.datiDomanda.responsabilitaRichieste.responsabilitaPat.length)>0),b.Bb(1),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaCaa?null:t.datiDomanda.responsabilitaRichieste.responsabilitaCaa.length)>0),b.Bb(1),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti?null:t.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti.length)>0),b.Bb(1),b.mc("ngIf",(null==t.datiDomanda.responsabilitaRichieste.responsabilitaDistributore?null:t.datiDomanda.responsabilitaRichieste.responsabilitaDistributore.length)>0)}}function Xe(t,e){if(1&t&&(b.Tb(0,"div"),b.Tb(1,"strong"),b.Oc(2),b.Sb(),b.Sb()),2&t){const t=e.$implicit,i=b.fc(3);b.Bb(2),b.Pc(i.applicativi[t])}}function ti(t,e){if(1&t&&(b.Rb(0),b.Mc(1,Xe,3,1,"div",35),b.Qb()),2&t){const t=b.fc(2);b.Bb(1),b.mc("ngForOf",t.datiDomanda.servizi)}}function ei(t,e){if(1&t){const t=b.Ub();b.Tb(0,"form",null,10),b.Mc(2,De,37,27,"div",11),b.Mc(3,We,11,8,"div",11),b.Tb(4,"div",12),b.Tb(5,"p-accordion"),b.Tb(6,"p-accordionTab",13),b.Tb(7,"div",14),b.Mc(8,ti,2,1,"ng-container",8),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ob(9,"div",15),b.Tb(10,"div",16),b.Tb(11,"div",17),b.Tb(12,"button",18),b.bc("click",(function(){b.Ec(t);const e=b.fc();return e.showDialogRifiutoDomandaRichiestaUtente(e.datiDomanda)})),b.Sb(),b.Sb(),b.Sb(),b.Tb(13,"div",16),b.Tb(14,"div",17),b.Tb(15,"button",19),b.bc("click",(function(){return b.Ec(t),b.fc().showDialogConfigurazioneUtente()})),b.gc(16,"translate"),b.Sb(),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=b.fc();b.Bb(2),b.mc("ngIf",t.datiDomanda.datiAnagrafici),b.Bb(1),b.mc("ngIf",t.datiDomanda.responsabilitaRichieste),b.Bb(3),b.mc("selected",!0),b.Bb(2),b.mc("ngIf",(null==t.datiDomanda.servizi?null:t.datiDomanda.servizi.length)>0),b.Bb(4),b.mc("disabled","IN_LAVORAZIONE"!=t.datiDomanda.stato),b.Bb(3),b.nc("label",b.hc(16,7,"RICHIESTE_ACCESSO.dettaglioUtente")),b.mc("disabled","IN_LAVORAZIONE"!=t.datiDomanda.stato)}}const ii=function(){return{marginTop:"70px"}},oi=[{path:"",component:xt,pathMatch:"full"},{path:":idUtenza/dettaglioUtenza",component:(()=>{class t{constructor(t,e,i){this.route=t,this.gestioneUtenzeService=e,this.router=i,this.applicativi={},this.componentDestroyed$=new h.a,this.DATE_FORMAT=f.a.PATTERN_DATE_2,this.labels=s.a}ngOnInit(){this.fillApplicativi(),this.route.params.pipe(Object(_t.a)(t=>{let e=t.idUtenza;return e?this.gestioneUtenzeService.getDatiAnagraficiUtente(e):Object($t.b)()}),Object(p.a)(this.componentDestroyed$)).subscribe(t=>{console.log("Dati della domanda di registrazione utente",t),this.datiDomanda=t})}fillApplicativi(){this.applicativi.SRT="SRTrento - Misure strutturali",this.applicativi.A4G="A4G - Nuovo Sistema Informativo Agricoltura",this.applicativi.AGS="SIAP - Sistema Informativo Agricoltura"}showDialogConfigurazioneUtente(){this.router.navigate(["./"],{relativeTo:this.route,queryParams:{dialog:"1"},queryParamsHandling:"merge",replaceUrl:!0})}onDialogConfigurazioneToggle(t){t||this.router.navigate(["./"],{relativeTo:this.route,queryParams:{dialog:"0"},queryParamsHandling:"merge",replaceUrl:!0})}onDialogRifiutoClose(t){}backToUtenze(){switch(this.datiDomanda.stato){case"PROTOCOLLATA":this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"protocollate"}});break;case"IN_LAVORAZIONE":this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"inlavorazione"}});break;case"APPROVATA":this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"approvate"}});break;case"RIFIUTATA":this.router.navigate(["./"],{relativeTo:this.route.parent,queryParams:{tabselected:"rifiutate"}})}}showDialogRifiutoDomandaRichiestaUtente(t){if(this.rifiutoDialog.onOpen(t.datiAnagrafici),this.richiestaAccessoCorrente=new q,this.richiestaAccessoCorrente.id=t.id,this.richiestaAccessoCorrente.datiAnagrafici=t.datiAnagrafici,t.dataProtocollazione){const e=t.dataProtocollazione.toString();this.richiestaAccessoCorrente.dataProtocollazione=e}this.richiestaAccessoCorrente.idProtocollo=t.idProtocollo}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Nb(a.a),b.Nb(M.a),b.Nb(a.e))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-dettaglio-utenza"]],viewQuery:function(t,e){var i;1&t&&(b.Jc(Pe,!0),b.Jc(Ce,!0)),2&t&&(b.Ac(i=b.cc())&&(e.assegnazioneConfigurazioneDialog=i.first),b.Ac(i=b.cc())&&(e.rifiutoDialog=i.first))},decls:12,vars:7,consts:[["key","tst",3,"baseZIndex"],[3,"displayChange"],["assegnazioneConfigurazioneDialog",""],[3,"richiestaAccessoCorrente"],["rifiutoDialog",""],[1,"ui-g","ui-fluid"],[1,"tophome"],[1,"ui-grid-fixed"],[4,"ngIf"],[1,"ui-g-12"],["f","ngForm"],["class","accordion-wrapper",4,"ngIf"],[1,"accordion-wrapper"],["header","Applicativi",3,"selected"],[1,"boxgrey"],[1,"ui-g-6"],[1,"ui-g-3"],[1,"next-button"],["pButton","","icon","ui-icon-clear","type","button","label","RIFIUTA DOMANDA","pButton","",3,"disabled","click"],["pButton","","icon","ui-icon-check","type","button","pButton","",3,"label","disabled","click"],["header","Anagrafica",3,"selected"],["tooltipPosition","top",3,"disabled"],[1,"boxgrey-user"],[1,"ui-g-2"],[1,"ui-g-4"],["type","text","name","cognome","pInputText","",3,"ngModel","readonly","ngModelChange"],["type","text","name","nome","pInputText","",3,"ngModel","readonly","ngModelChange"],["type","text","name","codiceFiscale","pInputText","",3,"ngModel","readonly","ngModelChange"],["type","text","name","email","pInputText","",3,"ngModel","readonly","ngModelChange"],["type","text","name","telefono","pInputText","",3,"ngModel","readonly","ngModelChange"],["header","Responsabilit\xe0",3,"selected"],[3,"value"],["pTemplate","header"],["pTemplate","body"],[1,"sezione-responsabili"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(b.Ob(0,"p-toast",0),b.Tb(1,"assegnazione-configurazioni-dialog",1,2),b.bc("displayChange",(function(t){return e.onDialogConfigurazioneToggle(t)})),b.Sb(),b.Ob(3,"app-rifiuto-dialog",3,4),b.Tb(5,"div",5),b.Tb(6,"div",6),b.Tb(7,"div",7),b.Mc(8,ze,4,8,"h4",8),b.Sb(),b.Sb(),b.Tb(9,"div",7),b.Tb(10,"div",9),b.Mc(11,ei,17,9,"form",8),b.Sb(),b.Sb(),b.Sb()),2&t&&(b.Kc(b.rc(6,ii)),b.mc("baseZIndex",5e4),b.Bb(3),b.mc("richiestaAccessoCorrente",e.richiestaAccessoCorrente),b.Bb(5),b.mc("ngIf",e.datiDomanda&&e.datiDomanda.idProtocollo&&e.datiDomanda.dataProtocollazione),b.Bb(3),b.mc("ngIf",e.datiDomanda))},directives:[y.a,ye,W,n.t,C.I,C.t,C.u,P.a,P.c,A.b,C.c,D.a,C.s,C.v,F.q,O.e,n.s],pipes:[N.d,n.f],styles:[".boxgrey[_ngcontent-%COMP%]   .sezione-responsabili[_ngcontent-%COMP%]{margin-top:10px}"]}),t})(),data:{mybreadcrumb:s.a.DETTAGLIO_UTENZE}}];let ai=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},imports:[[n.c,a.i.forChild(oi)]]}),t})();var ni=i("SnyB"),si=i("BGwN");let ri=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(e){return new(e||t)},providers:[M.a],imports:[[o.a,ai,B.c,Q.b,ni.b,z.b,si.b]]}),t})()}}]);
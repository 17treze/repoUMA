(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{GFTO:function(e,i,t){"use strict";t.d(i,"a",(function(){return n}));class a{constructor(e,i){this.label=e,this.data=i}static fromEnteSede(e){return new a(e.descrizione,e)}}class n{constructor(e,i,t){this.label=e,this.data=i,this.children=t,this.partialSelected=!1}static getTreeNode(e){let i=[];if(void 0!==e.sedi)for(let t of e.sedi)i.push(a.fromEnteSede(t));return new n(e.descrizione,e.id,i)}static getTreeNodes(e){let i=[];e.sort((e,i)=>e.descrizione>i.descrizione?1:e.descrizione<i.descrizione?-1:0);for(let t of e)t.sedi.sort((e,i)=>e.descrizione>i.descrizione?1:e.descrizione<i.descrizione?-1:0),i.push(n.getTreeNode(t));return i}static selectEntiSedi(e,i){let t=[];return i&&e.forEach((e,a)=>{let n=0;e.children.forEach((e,a)=>{i.find(i=>i==e.data.id.valueOf())&&(t.push(e),n++)}),n>0&&(n===e.children.length?t=t.concat([e],e.children):e.partialSelected=!0)}),t}}},rL0V:function(e,i,t){"use strict";t.r(i),t.d(i,"UtentiModule",(function(){return Je}));var a=t("tyNb"),n=t("fXoL"),s=t("JEAp"),o=t("bOdf"),r=t("Tn7N"),l=t("1vA5"),c=t("q6l6"),d=t("dkQB"),b=t("5gIc"),u=function(e){return e[e.TI=0]="TI",e[e.LR=1]="LR",e[e.LPC=2]="LPC",e[e.PAT=3]="PAT",e[e.CAA=4]="CAA",e[e.ALTRI=5]="ALTRI",e[e.DIPENDENTE_DISTRIBUTORE=6]="DIPENDENTE_DISTRIBUTORE",e}({}),p=function(e){return e.RIDOTTA_AZIENDA="RIDOTTA_AZIENDA",e.COMPLETA="COMPLETA",e}({});class h{constructor(){this.data=new Date}}class g{constructor(e,i,t,a,n,s){this.idResponsabilita=e,this.codResponsabilita=u[u.ALTRI],this.denominazione=i,this.dirigente=a,this.piva=t,this.allegato=n,this.note=s}}class m{constructor(e,i,t,a){this.idResponsabilita=e,this.responsabile=i,this.sedi=t,this.codResponsabilita=u[u.CAA],this.allegato=a}}class S{constructor(e,i,t,a,n,s,o){this.idResponsabilita=e,this.codResponsabilita=u[u.LPC],this.ordine=i,this.iscrizione=t,this.cuaa=a,this.denominazione=n,this.rappresentante=s,this.allegato=o}}class f{constructor(e,i,t,a,n,s){this.idResponsabilita=e,this.codResponsabilita=u[u.PAT],this.matricola=i,this.dirigente=t,this.dipartimento=a,this.allegato=n,this.note=s}}class E{}class T{constructor(e,i){this.cuaa=e,this.denominazione=i}}var v=t("/vOn"),A=t("cS1N"),C=t("69Tm"),R=t("RtSl"),I=t("arS9"),O=t("kPZZ"),z=t("A1Yd"),y=t("3Pt+"),D=t("+7Pr"),P=t("GLSp"),F=t("KDHY");const L=["upFileDistributor"];function B(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",21),n.Ob(1,"i",22),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",0),n.Tb(7,"div",23),n.Tb(8,"button",24),n.bc("click",(function(){return n.Ec(e),n.fc().onConfirmHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Tb(9,"div",23),n.Tb(10,"button",25),n.bc("click",(function(){return n.Ec(e),n.fc().onRejectHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=i.$implicit,t=n.fc();n.Bb(3),n.Pc(e.summary),n.Bb(2),n.Pc(e.detail),n.Bb(3),n.mc("label",t.labels.si),n.Bb(2),n.mc("label",t.labels.no)}}function M(e,i){if(1&e&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&e){const e=i.$implicit;n.Bb(1),n.Rc(" ",e.denominazioneAzienda," - ",e.comune," ")}}let k=(()=>{class e{constructor(e,i){this.utentiService=e,this.messageService=i,this.labels=C.a,this.submitted=!1,this.availableDistributors=[],this.selectedDistributors=[],this.selectedIds=[],this.canUpload=!1,this.icon="ui-icon-file-upload",this.fileExt=".PDF",this.maxSize=2,this.uploadOk=!1}get isValid(){return this.selectedDistributors.length&&this.responsabile&&this.uploadValid}get orderedAvailableDistributors(){return this.availableDistributors?this.availableDistributors.sort((e,i)=>(e.denominazioneAzienda+e.comune).localeCompare(i.denominazioneAzienda+i.comune)):[]}get orderedSelectedDistributors(){return this.selectedDistributors?this.selectedDistributors.sort((e,i)=>(e.denominazioneAzienda+e.comune).localeCompare(i.denominazioneAzienda+i.comune)):[]}ngOnInit(){this.utentiService.getDistributori().subscribe(e=>{e&&e.length&&(e=e.sort((e,i)=>(e.denominazioneAzienda+e.comune).localeCompare(i.denominazioneAzienda+i.comune)),this.availableDistributors=e,this.syncDistributors(this.selectedIds))})}syncDistributors(e){e&&(this.selectedDistributors=this.availableDistributors.filter(i=>e.includes(i.id)),this.availableDistributors=this.availableDistributors.filter(i=>!e.includes(i.id)))}removeMe(){this.compInteraction.remove(this.index)}downloadFile(){this.utentiService.getPdfAutorizzazioneAltriEnti().subscribe(e=>{const i=new Blob([e],{}),t="AutorizzazioneDistributore_"+Date.now()+".pdf";s.saveAs(i,t),this.canUpload=!0},e=>{alert("Errore in scarico Pdf")},()=>{})}uploadFile(e){if(e.target.files&&e.target.files.length>0){const i=e.target.files[0],t=new A.a(this.fileExt,this.maxSize);t.isValidFile(i)?(this.fileAutorizzazione=i,this.utentiService.readByteFile(i).then(e=>{this.fileAutorizzazione=e,this.uploadValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))},e=>{this.handleError(e),this.uploadValid=!1}),this.uploadOk=!0):t.errors.forEach((e,i)=>{this.messageService.add({key:"tst",severity:"error",summary:"Errore!",detail:e,life:r.a.TOAST_LIFE})}),this.icon="ui-icon-done",this.fileInput.nativeElement.value=""}}verifyUploadFile(){this.uploadOk?this.showWarnAlreadyUploadedFile():document.getElementById("upFileDistributor").click()}showWarnAlreadyUploadedFile(){this.messageService.add(r.a.getToast("warn-already-uploadedFile-distributor",r.b.warn,r.a.FILE_ALREADY_UPLOADED))}onRejectHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-distributor")}onConfirmHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-distributor"),document.getElementById("upFileDistributor").click()}handleError(e){this.messageService.add(e&&e.error&&500===e.status?{key:"tst",severity:"error",summary:"Errore!",detail:e.error,life:r.a.TOAST_LIFE}:{key:"tst",severity:"error",summary:"Errore!",detail:"Errore generico",life:r.a.TOAST_LIFE})}onSubmit(e){this.submitted=!0,this.messageService.add(e.invalid?r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI):r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))}setDisabled(e){this.disabled=e}setSelectedIds(e){this.selectedIds=e}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a),n.Nb(R.d))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-distributore"]],viewQuery:function(e,i){var t;1&e&&n.Uc(L,!0),2&e&&n.Ac(t=n.cc())&&(i.fileInput=t.first)},decls:38,vars:23,consts:[[1,"ui-g","ui-fluid"],["position","center","key","warn-already-uploadedFile-distributor",3,"modal","baseZIndex"],["pTemplate","messageService"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close",1,"remove-btn",3,"title","click"],[3,"ngSubmit"],["f","ngForm"],[3,"disabled"],[1,"ui-g","form-group"],[1,"ui-g-12","ui-md-12","ui-lg-12"],[3,"source","target","dragdrop","responsive"],["pTemplate","item"],[1,"ui-g-12","ui-md-6","ui-lg-6"],["type","text","name","responsabile","pInputText","","required","",3,"ngModel","ngModelChange"],[1,"ui-g-12","ui-md-12"],["pButton","","type","button","icon","ui-icon-file-download",3,"label","click"],["pButton","","type","button",3,"icon","label","disabled","click"],["type","file","id","upFileDistributor","name","upFileDistributor","multiple","false",2,"display","none",3,"accept","change"],["upFileDistributor",""],["align","justify"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g-6"],["type","button","pButton","",1,"ui-button-success",3,"label","click"],["type","button","pButton","",1,"ui-button-secondary",3,"label","click"]],template:function(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",0),n.Tb(1,"p-toast",1),n.Mc(2,B,11,4,"ng-template",2),n.Sb(),n.Tb(3,"div",3),n.Tb(4,"p-panel",4),n.Tb(5,"p-header"),n.Oc(6),n.Tb(7,"button",5),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(8,"form",6,7),n.bc("ngSubmit",(function(){n.Ec(e);const t=n.Bc(9);return i.onSubmit(t)})),n.Tb(10,"fieldset",8),n.Tb(11,"div",9),n.Tb(12,"div",10),n.Tb(13,"label"),n.Oc(14),n.Sb(),n.Tb(15,"p-pickList",11),n.Mc(16,M,2,2,"ng-template",12),n.Sb(),n.Sb(),n.Tb(17,"div",13),n.Tb(18,"label"),n.Oc(19),n.Sb(),n.Tb(20,"input",14),n.bc("ngModelChange",(function(e){return i.responsabile=e})),n.Sb(),n.Sb(),n.Tb(21,"div",13),n.Tb(22,"div",15),n.Tb(23,"label"),n.Oc(24),n.Sb(),n.Tb(25,"button",16),n.bc("click",(function(){return i.downloadFile()})),n.Sb(),n.Tb(26,"button",17),n.bc("click",(function(){return i.verifyUploadFile()})),n.Sb(),n.Tb(27,"input",18,19),n.bc("change",(function(e){return i.uploadFile(e)})),n.Sb(),n.Sb(),n.Sb(),n.Tb(29,"div"),n.Tb(30,"p-fieldset",20),n.Tb(31,"p-header"),n.Oc(32),n.Sb(),n.Oc(33),n.Ob(34,"br"),n.Oc(35),n.Ob(36,"br"),n.Oc(37),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}2&e&&(n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3),n.Bb(3),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(1),n.mc("title",i.labels.delete),n.Bb(3),n.mc("disabled",i.disabled),n.Bb(4),n.Qc("",i.labels.distributorTitle," *"),n.Bb(1),n.mc("source",i.orderedAvailableDistributors)("target",i.orderedSelectedDistributors)("dragdrop",!i.disabled)("responsive",!0),n.Bb(4),n.Qc("",i.labels.responsabile," *"),n.Bb(1),n.mc("ngModel",i.responsabile),n.Bb(4),n.Pc(i.labels.authorization),n.Bb(1),n.mc("label",i.labels.downloadAuthorization),n.Bb(1),n.nc("icon",i.icon),n.mc("label",i.labels.uploadAuthorization)("disabled",!i.responsabile),n.Bb(1),n.nc("accept",i.fileExt),n.Bb(5),n.Pc(i.labels.warning),n.Bb(1),n.Qc(" ",i.labels.distributorFirstWarning," "),n.Bb(2),n.Qc(" ",i.labels.distributorSecondWarning," "),n.Bb(2),n.Qc(" ",i.labels.distributorThirdWarning," "))},directives:[I.a,R.e,O.a,R.c,z.b,y.I,y.t,y.u,D.a,y.c,P.a,y.D,y.s,y.v,F.a],styles:["[_nghost-%COMP%]     .ui-picklist li.ui-picklist-item{padding:0 .5rem}[_nghost-%COMP%]     .ui-picklist-source-controls.ui-picklist-buttons, [_nghost-%COMP%]     .ui-picklist-target-controls.ui-picklist-buttons{display:none}[_nghost-%COMP%]     .ui-picklist{display:block}"]}),e})();var U=t("sYmb");const _=["upFileALTRI"];function N(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",22),n.Ob(1,"i",23),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",0),n.Tb(7,"div",24),n.Tb(8,"button",25),n.bc("click",(function(){return n.Ec(e),n.fc().onConfirmHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Tb(9,"div",24),n.Tb(10,"button",26),n.bc("click",(function(){return n.Ec(e),n.fc().onRejectHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=i.$implicit;n.Bb(3),n.Pc(e.summary),n.Bb(2),n.Pc(e.detail)}}let w=(()=>{class e{constructor(e,i){this.utentiService=e,this.messageService=i,this.fileExt=".PDF",this.maxSize=2,this.uploadOk=!1,this.icon="ui-icon-file-upload"}ngOnInit(){this.isValid=!1,this.canUpload=!1,this.submitted=!1}downloadFile(){this.utentiService.getPdfAutorizzazioneAltriEnti().subscribe(e=>{const i=new Blob([e],{}),t="AutorizzazioneAltriEnti_"+Date.now()+".pdf";s.saveAs(i,t),this.canUpload=!0},e=>{alert("Errore in scarico Pdf")},()=>{})}uploadFile(e){if(console.log("ChangeFile"),e.target.files&&e.target.files.length>0){const i=e.target.files[0];console.log("FileName "+i.name),console.log(i);const t=new A.a(this.fileExt,this.maxSize);console.log("FileSize "+t.getFileSize(i)),t.isValidFile(i)?(console.log("SubmitFile"),this.fileAutorizzazione=i,this.utentiService.readByteFile(i).then(e=>{this.fileAutorizzazione=e,console.log("Upload ok "+e),this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))},e=>{this.handleError(e),this.isValid=!1}),this.uploadOk=!0):(console.log("File non valido"),t.errors.forEach((e,i)=>{this.messageService.add({key:"tst",severity:"error",summary:"Errore!",detail:e,life:r.a.TOAST_LIFE})})),this.icon="ui-icon-done",this.fileInput.nativeElement.value=""}}verifyUploadFile(){this.uploadOk?this.showWarnAlreadyUploadedFile():document.getElementById("upFileALTRI").click()}showWarnAlreadyUploadedFile(){this.messageService.add(r.a.getToast("warn-already-uploadedFile-altriEnti",r.b.warn,r.a.FILE_ALREADY_UPLOADED))}onRejectHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-altriEnti")}onConfirmHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-altriEnti"),document.getElementById("upFileALTRI").click()}handleError(e){console.log("Error "+e+" msg "+e.error+" error.code "+e.status),this.messageService.add(e&&e.error&&500===e.status?{key:"tst",severity:"error",summary:"Errore!",detail:e.error,life:r.a.TOAST_LIFE}:{key:"tst",severity:"error",summary:"Errore!",detail:"Errore generico",life:r.a.TOAST_LIFE})}onSubmit(e){console.log("this.onSubmit"),this.submitted=!0,e.invalid?this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI)):(this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)))}removeMe(){this.compInteraction.remove(this.index)}setDisabled(e){this.disabled=e}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a),n.Nb(R.d))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-altri-enti"]],viewQuery:function(e,i){var t;1&e&&n.Jc(_,!0),2&e&&n.Ac(t=n.cc())&&(i.fileInput=t.first)},decls:52,vars:14,consts:[[1,"ui-g","ui-fluid"],["position","center","key","warn-already-uploadedFile-altriEnti",3,"modal","baseZIndex"],["pTemplate","messageService"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close","title","Elimina",1,"remove-btn",3,"click"],[3,"ngSubmit"],["f","ngForm"],[1,"ui-g-2"],[1,"ui-g-4"],["type","text","name","denominazione","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","piva","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","dirigente","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","note","required","","pInputText","",3,"ngModel","ngModelChange"],[1,"ui-g-12","ui-md-6","ui-lg-6"],[1,"ui-g-12","ui-md-12"],["pButton","","type","button","icon","ui-icon-file-download","label","Scarica Modello Autorizzazione",3,"click"],["pButton","","type","button","label","Carica Autorizzazione Firmata",3,"icon","disabled","click"],["type","file","id","upFileALTRI","name","upFileALTRI","multiple","false",2,"display","none",3,"accept","change"],["upFileALTRI",""],[1,"ui-g-12"],["align","justify"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","No",1,"ui-button-secondary",3,"click"]],template:function(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",0),n.Tb(1,"p-toast",1),n.Mc(2,N,11,2,"ng-template",2),n.Sb(),n.Tb(3,"div",3),n.Tb(4,"p-panel",4),n.Tb(5,"p-header"),n.Oc(6),n.Tb(7,"button",5),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(8,"form",6,7),n.bc("ngSubmit",(function(){n.Ec(e);const t=n.Bc(9);return i.onSubmit(t)})),n.Tb(10,"fieldset"),n.Tb(11,"div"),n.Tb(12,"div",8),n.Tb(13,"label"),n.Oc(14,"Denominazione Ente *"),n.Sb(),n.Sb(),n.Tb(15,"div",9),n.Tb(16,"input",10),n.bc("ngModelChange",(function(e){return i.denominazione=e})),n.Sb(),n.Sb(),n.Tb(17,"div",8),n.Tb(18,"label"),n.Oc(19,"Partita IVA *"),n.Sb(),n.Sb(),n.Tb(20,"div",9),n.Tb(21,"input",11),n.bc("ngModelChange",(function(e){return i.piva=e})),n.Sb(),n.Sb(),n.Tb(22,"div",8),n.Tb(23,"label"),n.Oc(24,"Responsabile *"),n.Sb(),n.Sb(),n.Tb(25,"div",9),n.Tb(26,"input",12),n.bc("ngModelChange",(function(e){return i.dirigente=e})),n.Sb(),n.Sb(),n.Tb(27,"div",8),n.Tb(28,"label"),n.Oc(29),n.gc(30,"translate"),n.Sb(),n.Sb(),n.Tb(31,"div",9),n.Tb(32,"input",13),n.bc("ngModelChange",(function(e){return i.note=e})),n.Sb(),n.Sb(),n.Tb(33,"div",14),n.Tb(34,"div",15),n.Tb(35,"label"),n.Oc(36,"Autorizzazione"),n.Sb(),n.Tb(37,"button",16),n.bc("click",(function(){return i.downloadFile()})),n.Sb(),n.Tb(38,"button",17),n.bc("click",(function(){return i.verifyUploadFile()})),n.Sb(),n.Tb(39,"input",18,19),n.bc("change",(function(e){return i.uploadFile(e)})),n.Sb(),n.Sb(),n.Sb(),n.Tb(41,"div",20),n.Tb(42,"p-fieldset",21),n.Tb(43,"p-header"),n.Oc(44,"Attenzione"),n.Sb(),n.Oc(45," Digitare la denominazione dell'Ente di appartenenza, la partita IVA e il nominativo del Responsabile che autorizza la richiesta. "),n.Ob(46,"br"),n.Oc(47," Scaricare e compilare il modulo per l'autorizzazione (premere il pulsante Scarica Modello Autorizzazione). "),n.Ob(48,"br"),n.Oc(49," Importare tale documento firmato dal Responsabile con allegato, in formato PDF, il documento d'identit\xe0 dello stesso (premere il pulsante Carica Autorizzazione Firmata). "),n.Ob(50,"br"),n.Oc(51," Digitare il campo Motivazione della richiesta. "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}2&e&&(n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3),n.Bb(3),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(10),n.mc("ngModel",i.denominazione),n.Bb(5),n.mc("ngModel",i.piva),n.Bb(5),n.mc("ngModel",i.dirigente),n.Bb(3),n.Qc(" ",n.hc(30,12,"RICHIESTE_ACCESSO.motivazioneRichiesta")," * "),n.Bb(3),n.mc("ngModel",i.note),n.Bb(6),n.nc("icon",i.icon),n.mc("disabled",!(i.denominazione&&i.piva&&i.dirigente)),n.Bb(1),n.nc("accept",i.fileExt))},directives:[I.a,R.e,O.a,R.c,z.b,y.I,y.t,y.u,y.c,y.D,P.a,y.s,y.v,F.a],pipes:[U.d],styles:[""]}),e})();var x=t("GFTO"),V=t("ofXK"),H=t("AD9J");const Z=["upFileCAA"];function G(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",20),n.Ob(1,"i",21),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",0),n.Tb(7,"div",22),n.Tb(8,"button",23),n.bc("click",(function(){return n.Ec(e),n.fc().onConfirmHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Tb(9,"div",22),n.Tb(10,"button",24),n.bc("click",(function(){return n.Ec(e),n.fc().onRejectHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=i.$implicit;n.Bb(3),n.Pc(e.summary),n.Bb(2),n.Pc(e.detail)}}const q=function(){return{width:"100%",height:"300px",overflow:"auto",display:"block"}};function Q(e,i){if(1&e){const e=n.Ub();n.Tb(0,"p-tree",25),n.bc("selectionChange",(function(i){return n.Ec(e),n.fc().selectedNodes=i})),n.Sb()}if(2&e){const e=n.fc();n.Kc(n.rc(4,q)),n.mc("value",e.entiCaaTreeNode)("selection",e.selectedNodes)}}let K=(()=>{class e{constructor(e,i){this.utentiService=e,this.messageService=i,this.icon="ui-icon-file-upload",this.fileExt=".PDF",this.maxSize=2,this.uploadOk=!1}ngOnInit(){this.isValid=!1,this.submitted=!1,this.canUpload=!1,this.utentiService.getUfficiCaa().subscribe(e=>{this.entiCaaTreeNode=x.a.getTreeNodes(e),this.parentNodes=this.selectEntiParent(this.entiCaaTreeNode),this.disableParent(),this.selectedNodes=x.a.selectEntiSedi(this.entiCaaTreeNode,this.entiSediSelectedIds)})}selectEntiParent(e){let i=[];return e.forEach((e,t)=>{i.push(e)}),i}disableParent(){this.parentNodes&&this.parentNodes.forEach(e=>{e.parent||(e.selectable=!1)})}removeMe(){this.compInteraction.remove(this.index)}downloadFile(){this.utentiService.getPdfAutorizzazioneAltriEnti().subscribe(e=>{const i=new Blob([e],{}),t="AutorizzazioneCaa_"+Date.now()+".pdf";s.saveAs(i,t),this.canUpload=!0},e=>{alert("Errore in scarico Pdf")},()=>{})}uploadFile(e){if(console.log("ChangeFile"),e.target.files&&e.target.files.length>0){const i=e.target.files[0];console.log("FileName "+i.name),console.log(i);const t=new A.a(this.fileExt,this.maxSize);console.log("FileSize "+t.getFileSize(i)),t.isValidFile(i)?(console.log("SubmitFile"),this.fileAutorizzazione=i,this.utentiService.readByteFile(i).then(e=>{this.fileAutorizzazione=e,console.log("Upload ok "+e),this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))},e=>{this.handleError(e),this.isValid=!1}),this.uploadOk=!0):(console.log("File non valido"),t.errors.forEach((e,i)=>{this.messageService.add({key:"tst",severity:"error",summary:"Errore!",detail:e,life:r.a.TOAST_LIFE})})),this.icon="ui-icon-done",this.fileInput.nativeElement.value=""}}verifyUploadFile(){this.uploadOk?this.showWarnAlreadyUploadedFile():document.getElementById("upFileCAA").click()}showWarnAlreadyUploadedFile(){this.messageService.add(r.a.getToast("warn-already-uploadedFile-caa",r.b.warn,r.a.FILE_ALREADY_UPLOADED))}onRejectHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-caa")}onConfirmHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-caa"),document.getElementById("upFileCAA").click()}handleError(e){console.log("Error "+e+" msg "+e.error+" error.code "+e.status),this.messageService.add(e&&e.error&&500===e.status?{key:"tst",severity:"error",summary:"Errore!",detail:e.error,life:r.a.TOAST_LIFE}:{key:"tst",severity:"error",summary:"Errore!",detail:"Errore generico",life:r.a.TOAST_LIFE})}onSubmit(e){console.log("this.onSubmit"),this.submitted=!0,e.invalid?this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI)):(this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)))}enableAll(e){console.log("enableAll: "+e),this.entiCaaTreeNode&&this.entiCaaTreeNode.forEach(i=>{this.enableRecursive(i,e)})}enableRecursive(e,i){e.selectable=i,e.children&&e.children.forEach(e=>{this.enableRecursive(e,i)})}setDisabled(e){this.disabled=e,this.enableAll(!e)}setSelectedIds(e){this.entiSediSelectedIds=e}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a),n.Nb(R.d))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-caa"]],viewQuery:function(e,i){var t;1&e&&n.Jc(Z,!0),2&e&&n.Ac(t=n.cc())&&(i.fileInput=t.first)},decls:38,vars:10,consts:[[1,"ui-g","ui-fluid"],["position","center","key","warn-already-uploadedFile-caa",3,"modal","baseZIndex"],["pTemplate","messageService"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close","title","Elimina",1,"remove-btn",3,"click"],[3,"ngSubmit"],["f","ngForm"],[3,"disabled"],[1,"ui-g","form-group"],[1,"ui-g-12","ui-md-6","ui-lg-6"],["for","enti"],["selectionMode","checkbox",3,"style","value","selection","selectionChange",4,"ngIf"],["type","text","name","responsabile","pInputText","","required","",3,"ngModel","ngModelChange"],[1,"ui-g-12","ui-md-12"],["pButton","","type","button","icon","ui-icon-file-download","label","Scarica Modello Autorizzazione",3,"click"],["pButton","","type","button","label","Carica Autorizzazione Firmata",3,"icon","disabled","click"],["type","file","id","upFileCAA","name","upFileCAA","multiple","false",2,"display","none",3,"accept","change"],["upFileCAA",""],["align","justify"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","No",1,"ui-button-secondary",3,"click"],["selectionMode","checkbox",3,"value","selection","selectionChange"]],template:function(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",0),n.Tb(1,"p-toast",1),n.Mc(2,G,11,2,"ng-template",2),n.Sb(),n.Tb(3,"div",3),n.Tb(4,"p-panel",4),n.Tb(5,"p-header"),n.Oc(6),n.Tb(7,"button",5),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(8,"form",6,7),n.bc("ngSubmit",(function(){n.Ec(e);const t=n.Bc(9);return i.onSubmit(t)})),n.Tb(10,"fieldset",8),n.Tb(11,"div",9),n.Tb(12,"div",10),n.Tb(13,"label",11),n.Oc(14,"Caa/Sedi *"),n.Sb(),n.Mc(15,Q,1,5,"p-tree",12),n.Sb(),n.Tb(16,"div",10),n.Tb(17,"label"),n.Oc(18,"Responsabile *"),n.Sb(),n.Tb(19,"input",13),n.bc("ngModelChange",(function(e){return i.responsabile=e})),n.Sb(),n.Tb(20,"div",14),n.Tb(21,"label"),n.Oc(22,"Autorizzazione"),n.Sb(),n.Tb(23,"button",15),n.bc("click",(function(){return i.downloadFile()})),n.Sb(),n.Tb(24,"button",16),n.bc("click",(function(){return i.verifyUploadFile()})),n.Sb(),n.Tb(25,"input",17,18),n.bc("change",(function(e){return i.uploadFile(e)})),n.Sb(),n.Sb(),n.Sb(),n.Tb(27,"div"),n.Tb(28,"p-fieldset",19),n.Tb(29,"p-header"),n.Oc(30,"Attenzione"),n.Sb(),n.Oc(31," Selezionare > per visualizzare l'elenco delle sedi del CAA e scegliere la voce desiderata. "),n.Ob(32,"br"),n.Oc(33," Digitare il nominativo del Responsabile della struttura. "),n.Ob(34,"br"),n.Oc(35," Scaricare e compilare il modulo per l'autorizzazione (premere il pulsante Scarica Modello Autorizzazione). "),n.Ob(36,"br"),n.Oc(37," Importare tale documento firmato dal Responsabile con allegato, in formato PDF, il documento d'identit\xe0 dello stesso (premere il pulsante Carica Autorizzazione Firmata) "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}2&e&&(n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3),n.Bb(3),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(4),n.mc("disabled",i.disabled),n.Bb(5),n.mc("ngIf",i.entiCaaTreeNode),n.Bb(4),n.mc("ngModel",i.responsabile),n.Bb(5),n.nc("icon",i.icon),n.mc("disabled",!(i.responsabile&&i.selectedNodes)),n.Bb(1),n.nc("accept",i.fileExt))},directives:[I.a,R.e,O.a,R.c,z.b,y.I,y.t,y.u,V.t,y.c,P.a,y.D,y.s,y.v,F.a,H.a],styles:[""]}),e})();var j=t("jLKh"),W=t("wH++"),J=t("tk/3"),Y=t("c8LR");const $=["upFileLPC"];function X(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",31),n.Ob(1,"i",32),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",0),n.Tb(7,"div",33),n.Tb(8,"button",34),n.bc("click",(function(){return n.Ec(e),n.fc().onConfirmHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Tb(9,"div",33),n.Tb(10,"button",35),n.bc("click",(function(){return n.Ec(e),n.fc().onRejectHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=i.$implicit;n.Bb(3),n.Pc(e.summary),n.Bb(2),n.Pc(e.detail)}}function ee(e,i){if(1&e&&(n.Tb(0,"p",37),n.Oc(1),n.Sb()),2&e){n.fc(2);const e=n.Bc(27);n.Bb(1),n.Qc(" ",e.errors.cuaaErratoCompleto," ")}}function ie(e,i){if(1&e&&(n.Tb(0,"div"),n.Mc(1,ee,2,1,"p",36),n.Sb()),2&e){n.fc();const e=n.Bc(27);n.Bb(1),n.mc("ngIf",null==e.errors?null:e.errors.cuaaErratoCompleto)}}function te(e,i){if(1&e&&(n.Tb(0,"option",38),n.Oc(1),n.Sb()),2&e){const e=i.$implicit;n.mc("value",e.dati),n.Bb(1),n.Qc(" ",e.dati," ")}}const ae=function(e){return{"is-invalid":e}};let ne=(()=>{class e{constructor(e,i,t,a,n){this.utentiService=e,this.messageService=i,this._configuration=t,this.http=a,this.antimafiaService=n,this.fileExt=".PDF",this.maxSize=2,this.uploadOk=!1,this.icon="ui-icon-file-upload",this.codiciCaricheRappresentanteLegale=["ACR","ADP","AMD","AMG","AMM","AMP","AMS","APR","ART","ATI","AUN","AUP","CDP","CDT","CLR","CM","CMS","COA","COD","COG","COL","COM","COP","COV","COZ","CRT","CST","CUE","CUF","CUM","IN","LER","LGR","LGT","LI","LIG","LR2","LRF","LRT","LSA","MPP","OAS","OPN","PAD","PCA","PCD","PCE","PCG","PCO","PDC","PDI","PED","PEO","PG","PGD","PGE","PGS","PM","PPP","PRE","PRP","PRQ","PSE","PSS","PTE","RAF","RAP","RAS","RES","RFM","RIN","RIT","RSS","SAO","SAP","SCR","SFC","SLR","SOA","SOL","SOR","SOT","SOU","SPR","TI","TI2","TIT","TTE","TU","UM1","VPC"]}ngOnInit(){this.isValid=!1,this.canUpload=!1,this.submitted=!1}cuaachange(e){this.isValid&&(this.isValid=!1),this.submitted=!1,this.denominazione="",this.rappresentantiLegali=[]}caricaRappresentantiLegali(e){if(this.submitted=!0,e.invalid)this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI));else if(c.a.campoNonValorizzato(this.cuaa))this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI));else{c.a.validaCuaaIntero(this.cuaa,!0);{let e=this._configuration.UrlGetAnagraficaImpresa.replace("${cuaa}",String(this.cuaa)),i=this.http.get(e).subscribe(t=>{if("OK"===t.header.esito){const a=encodeURIComponent(JSON.stringify({numeroREASede:t.dati.listaimprese.estremiimpresa[0].datiiscrizionerea[0].nrea,provinciaSede:t.dati.listaimprese.estremiimpresa[0].datiiscrizionerea[0].cciaa}));e=this._configuration.UrlGetDettaglioCompletoImpresa+a,i=this.antimafiaService.rappresentatiLegali(e).subscribe(e=>{if(this.rappresentantiLegali=[],e.dati.datiimpresa.personesede.persona.forEach(e=>{e.personafisica&&e.cariche.carica.forEach(i=>{-1!==this.codiciCaricheRappresentanteLegale.indexOf(i.ccarica)&&this.rappresentantiLegali.push(new j.a(e.personafisica.codicefiscale,e.personafisica.nome+" "+e.personafisica.cognome+" - "+i.descrizione))})}),this.rappresentantiLegali&&this.rappresentantiLegali[0]){const e=this.rappresentantiLegali.find(e=>e.codiceFiscale===this.cuaa);this.selectedCUAADD=e?e.dati:this.rappresentantiLegali[0].dati}this.denominazione=e.dati.datiimpresa.estremiimpresa.denominazione},e=>{console.log("Error",e),this.messageService.add(r.a.getToast("tst",r.b.error,"Errore in recupero rappresentanti: "+e.error.message))})}else this.messageService.add(r.a.getToast("tst",r.b.error,"Errore in recupero rappresentanti: "+t.dati.errore.msgerr))},e=>{console.log("Error",e),this.messageService.add(r.a.getToast("tst",r.b.error,"Errore in recupero rappresentanti: "+e.error.message))})}}}downloadFile(){this.utentiService.getPdfAutorizzazioneConsulente().subscribe(e=>{const i=new Blob([e],{}),t="AutorizzazioneConsulente_"+Date.now()+".pdf";s.saveAs(i,t),this.canUpload=!0},e=>{alert("Errore in scarico Pdf")},()=>{})}uploadFile(e){if(this.rappresentante=this.selectedCUAADD,console.log("Rappresentante: "+this.rappresentante),console.log("ChangeFile"),e.target.files&&e.target.files.length>0){const i=e.target.files[0];console.log("FileName "+i.name),console.log(i);const t=new A.a(this.fileExt,this.maxSize);console.log("FileSize "+t.getFileSize(i)),t.isValidFile(i)?(console.log("SubmitFile"),this.fileAutorizzazione=i,this.utentiService.readByteFile(i).then(e=>{this.fileAutorizzazione=e,console.log("Upload ok "+e),this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))},e=>{this.handleError(e),this.isValid=!1}),this.uploadOk=!0):(console.log("File non valido"),t.errors.forEach((e,i)=>{this.messageService.add({key:"tst",severity:"error",summary:"Errore!",detail:e,life:r.a.TOAST_LIFE})})),this.icon="ui-icon-done",this.fileInput.nativeElement.value=""}}verifyUploadFile(){this.uploadOk?this.showWarnAlreadyUploadedFile():document.getElementById("upFileLPC").click()}showWarnAlreadyUploadedFile(){this.messageService.add(r.a.getToast("warn-already-uploadedFile-consulente",r.b.warn,r.a.FILE_ALREADY_UPLOADED))}onRejectHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-consulente")}onConfirmHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-consulente"),document.getElementById("upFileLPC").click()}handleError(e){console.log("Error "+e+" msg "+e.error+" error.code "+e.status),this.messageService.add(e&&e.error&&500===e.status?{key:"tst",severity:"error",summary:"Errore!",detail:e.error,life:r.a.TOAST_LIFE}:{key:"tst",severity:"error",summary:"Errore!",detail:"Errore generico",life:r.a.TOAST_LIFE})}onSubmit(e){console.log("this.onSubmit"),this.submitted=!0,e.invalid?this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI)):(this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)))}removeMe(){this.compInteraction.remove(this.index)}setDisabled(e){this.disabled=e}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a),n.Nb(R.d),n.Nb(d.a),n.Nb(J.b),n.Nb(W.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-consulente"]],viewQuery:function(e,i){var t;1&e&&n.Jc($,!0),2&e&&n.Ac(t=n.cc())&&(i.fileInput=t.first)},decls:65,vars:23,consts:[[1,"ui-g","ui-fluid"],["position","center","key","warn-already-uploadedFile-consulente",3,"modal","baseZIndex"],["pTemplate","messageService"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close","title","Elimina",1,"remove-btn",3,"click"],[3,"ngSubmit"],["f","ngForm"],[1,"ui-g-2"],[1,"ui-g-4"],["type","text","name","ordine","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","iscrizione","required","","pInputText","",3,"ngModel","ngModelChange"],[1,"ui-g-12","ui-md-6","ui-lg-5"],[1,""],["type","text","name","cuaa","pInputText","","appValidaCuaaCompleto","",3,"ngModel","ngClass","readonly","ngModelChange","input"],["cuaaInput","ngModel"],[4,"ngIf"],[1,"ui-g-12","ui-md-6","ui-lg-2"],["pButton","","type","submit","label","Cerca",3,"disabled","click"],["type","text","name","denominazione","pInputText","","appValidadenominazione","",3,"ngModel","ngClass","readonly","ngModelChange"],["denominazioneInput","ngModel"],[1,"ui-g-12","ui-md-8"],["name","rappresentante",1,"custom-select",2,"height","47px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"ui-g-12","ui-md-6","ui-lg-6"],[1,"ui-g-12","ui-md-12"],["pButton","","type","button","icon","ui-icon-file-download","label","Scarica Modello Autorizzazione",3,"click"],["pButton","","type","button","label","Carica Autorizzazione Firmata",3,"icon","disabled","click"],["type","file","id","upFileLPC","name","upFileLPC","multiple","false",2,"display","none",3,"accept","change"],["upFileLPC",""],["align","justify"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","No",1,"ui-button-secondary",3,"click"],["class","ui-message ui-messages-error ui-corner-all",4,"ngIf"],[1,"ui-message","ui-messages-error","ui-corner-all"],[3,"value"]],template:function(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",0),n.Tb(1,"p-toast",1),n.Mc(2,X,11,2,"ng-template",2),n.Sb(),n.Tb(3,"div",3),n.Tb(4,"p-panel",4),n.Tb(5,"p-header"),n.Oc(6),n.Tb(7,"button",5),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(8,"form",6,7),n.bc("ngSubmit",(function(){n.Ec(e);const t=n.Bc(9);return i.onSubmit(t)})),n.Tb(10,"fieldset"),n.Tb(11,"div"),n.Tb(12,"div",8),n.Tb(13,"label"),n.Oc(14,"Ordine di appartenenza *"),n.Sb(),n.Sb(),n.Tb(15,"div",9),n.Tb(16,"input",10),n.bc("ngModelChange",(function(e){return i.ordine=e})),n.Sb(),n.Sb(),n.Tb(17,"div",8),n.Tb(18,"label"),n.Oc(19,"Numero di Iscrizione *"),n.Sb(),n.Sb(),n.Tb(20,"div",9),n.Tb(21,"input",11),n.bc("ngModelChange",(function(e){return i.iscrizione=e})),n.Sb(),n.Sb(),n.Tb(22,"div",12),n.Tb(23,"span",13),n.Tb(24,"label"),n.Oc(25,"CUAA *"),n.Sb(),n.Tb(26,"input",14,15),n.bc("ngModelChange",(function(e){return i.cuaa=e}))("input",(function(e){return i.cuaachange(e)})),n.Sb(),n.Mc(28,ie,2,1,"div",16),n.Sb(),n.Sb(),n.Tb(29,"div",17),n.Ob(30,"br"),n.Tb(31,"button",18),n.bc("click",(function(){n.Ec(e);const t=n.Bc(9);return i.caricaRappresentantiLegali(t)})),n.Sb(),n.Sb(),n.Tb(32,"div",12),n.Tb(33,"span",13),n.Tb(34,"label"),n.Oc(35,"Descrizione Impresa"),n.Sb(),n.Tb(36,"input",19,20),n.bc("ngModelChange",(function(e){return i.denominazione=e})),n.Sb(),n.Sb(),n.Sb(),n.Tb(38,"div",8),n.Tb(39,"label"),n.Oc(40,"Rappresentante Legale *"),n.Sb(),n.Sb(),n.Tb(41,"div",21),n.Tb(42,"select",22),n.bc("ngModelChange",(function(e){return i.selectedCUAADD=e})),n.Mc(43,te,2,2,"option",23),n.Sb(),n.Sb(),n.Tb(44,"div",24),n.Tb(45,"div",25),n.Tb(46,"label"),n.Oc(47,"Autorizzazione"),n.Sb(),n.Tb(48,"button",26),n.bc("click",(function(){return i.downloadFile()})),n.Sb(),n.Tb(49,"button",27),n.bc("click",(function(){return i.verifyUploadFile()})),n.Sb(),n.Tb(50,"input",28,29),n.bc("change",(function(e){return i.uploadFile(e)})),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(52,"div"),n.Tb(53,"p-fieldset",30),n.Tb(54,"p-header"),n.Oc(55,"Attenzione"),n.Sb(),n.Oc(56," Digitare l'ordine di appartenenza e il numero di iscrizione. "),n.Ob(57,"br"),n.Oc(58," Digitare il CUAA relativo all'impresa per la quale si chiede il mandato (l'autorizzazione ad operare per conto dell\u2019azienda) e premere il pulsante Cerca. "),n.Ob(59,"br"),n.Oc(60," Digitare il Rappresentante Legale selezionandolo dalla lista. "),n.Ob(61,"br"),n.Oc(62," Scaricare e compilare il modulo per l'autorizzazione (premere il pulsante Scarica Modello Autorizzazione). "),n.Ob(63,"br"),n.Oc(64," Importare tale documento firmato dal Responsabile con allegato, in formato PDF, il documento d'identit\xe0 dello stesso (premere il pulsante Carica Autorizzazione Firmata) "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.Bc(9),t=n.Bc(27),a=n.Bc(37);n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3),n.Bb(3),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(10),n.mc("ngModel",i.ordine),n.Bb(5),n.mc("ngModel",i.iscrizione),n.Bb(5),n.mc("ngModel",i.cuaa)("ngClass",n.sc(19,ae,t.invalid&&(t.touched||e.submitted)))("readonly",!(i.ordine&&i.iscrizione)),n.Bb(2),n.mc("ngIf",t.errors),n.Bb(3),n.mc("disabled",!e.valid||i.submitted||!i.cuaa),n.Bb(5),n.mc("ngModel",i.denominazione)("ngClass",n.sc(21,ae,a.invalid))("readonly",!0),n.Bb(6),n.mc("ngModel",i.selectedCUAADD),n.Bb(1),n.mc("ngForOf",i.rappresentantiLegali),n.Bb(6),n.nc("icon",i.icon),n.mc("disabled",!(i.ordine&&i.iscrizione&&i.cuaa&&i.denominazione)),n.Bb(1),n.nc("accept",i.fileExt)}},directives:[I.a,R.e,O.a,R.c,z.b,y.I,y.t,y.u,y.c,y.D,P.a,y.s,y.v,Y.a,V.q,V.t,y.E,V.s,F.a,y.x,y.H],styles:[""]}),e})();var se=t("yWug");function oe(e,i){1&e&&(n.Tb(0,"tr"),n.Tb(1,"th"),n.Tb(2,"strong"),n.Oc(3),n.gc(4,"translate"),n.Sb(),n.Sb(),n.Tb(5,"th"),n.Tb(6,"strong"),n.Oc(7),n.gc(8,"translate"),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.Bb(3),n.Pc(n.hc(4,2,"cuaa")),n.Bb(4),n.Pc(n.hc(8,4,"gestioneUtenze.descrizioneImpresa")))}function re(e,i){if(1&e&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.Sb(),n.Tb(3,"td"),n.Oc(4),n.Sb(),n.Sb()),2&e){const e=i.$implicit;n.Bb(2),n.Pc(e.cuaa),n.Bb(2),n.Pc(e.denominazione)}}function le(e,i){if(1&e&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.gc(3,"translate"),n.Sb(),n.Sb()),2&e){const e=n.fc();n.Bb(1),n.Cb("colspan",2),n.Bb(1),n.Rc(" ",n.hc(3,3,"NO_RESPONSABILITA")," ",e.cfPersona," ")}}let ce=(()=>{class e{constructor(e){this.utentiService=e,this.isValid=!1,this.submitted=!1}ngOnInit(){console.log("LegaleComponent cfPersona "+this.cfPersona),this.elencoCariche||this.utentiService.getListaCariche(this.cfPersona).subscribe(e=>{this.elencoCariche=e,this.elencoCariche&&(this.isValid=!0)})}removeMe(){this.compInteraction.remove(this.index)}setDisabled(e){this.disabled=e}addElencoResponsabilita(e){this.elencoCariche||(this.elencoCariche=[]),this.elencoCariche.push({codiceFiscale:null,cuaa:e.cuaa,denominazione:e.denominazione,carica:null})}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-legale"]],decls:17,vars:7,consts:[[1,"ui-g","ui-fluid"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close","title","Elimina",1,"remove-btn",3,"click"],[3,"disabled"],[1,"ui-g","form-group"],[3,"value"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"]],template:function(e,i){1&e&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"p-panel",2),n.Tb(3,"p-header"),n.Oc(4),n.Tb(5,"button",3),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(6,"fieldset",4),n.Tb(7,"div",5),n.Tb(8,"strong"),n.Oc(9),n.gc(10,"translate"),n.Sb(),n.Ob(11,"br"),n.Ob(12,"br"),n.Tb(13,"p-table",6),n.Mc(14,oe,9,6,"ng-template",7),n.Mc(15,re,5,2,"ng-template",8),n.Mc(16,le,4,5,"ng-template",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.Bb(2),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(2),n.mc("disabled",i.disabled),n.Bb(3),n.Pc(n.hc(10,5,"DATI_FASCICOLO_AZIENDALE")),n.Bb(4),n.mc("value",i.elencoCariche))},directives:[O.a,R.c,z.b,se.q,R.e],pipes:[U.d],styles:[""]}),e})();var de=t("3Kf3");const be=["upFilePAT"];function ue(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",22),n.Ob(1,"i",23),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",0),n.Tb(7,"div",24),n.Tb(8,"button",25),n.bc("click",(function(){return n.Ec(e),n.fc().onConfirmHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Tb(9,"div",24),n.Tb(10,"button",26),n.bc("click",(function(){return n.Ec(e),n.fc().onRejectHasAlreadyUploadedFile()})),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=i.$implicit;n.Bb(3),n.Pc(e.summary),n.Bb(2),n.Pc(e.detail)}}let pe=(()=>{class e{constructor(e,i){this.utentiService=e,this.messageService=i,this.icon="ui-icon-file-upload",this.uploadOk=!1,this.fileExt=".PDF",this.maxSize=2}ngOnInit(){this.isValid=!1,this.canUpload=!1,this.submitted=!1,this.dipartimentiPat=[],this.utentiService.getDipartimentiPat().subscribe(e=>{for(const i of e)this.dipartimentiPat.push(i)},e=>{r.a.handleError(this.messageService,e,r.a.ERRORE_RESPONSABILITA),this.isValid=!1})}filterDipartimentoSingle(e){const i=e.query;console.log(e.query),this.filteredDipartimentiSingle=this.filterDipartimento(i,this.dipartimentiPat)}filterDipartimento(e,i){const t=[];for(let a=0;a<i.length;a++){const n=i[a];n.toLowerCase().indexOf(e.toLowerCase())>=0&&t.push(n)}return t}downloadFile(){this.utentiService.getPdfAutorizzazioneUtentePAT().subscribe(e=>{const i=new Blob([e],{}),t="AutorizzazioneUtentePAT_"+Date.now()+".pdf";s.saveAs(i,t),this.canUpload=!0},e=>{alert("Errore in scarico Pdf")},()=>{})}uploadFile(e){if(console.log("ChangeFile"),e.target.files&&e.target.files.length>0){const i=e.target.files[0];console.log("FileName "+i.name),console.log(i);const t=new A.a(this.fileExt,this.maxSize);console.log("FileSize "+t.getFileSize(i)),t.isValidFile(i)?(console.log("SubmitFile"),this.fileAutorizzazione=i,this.utentiService.readByteFile(i).then(e=>{this.fileAutorizzazione=e,console.log("Upload ok "+e),this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))},e=>{this.handleError(e),this.isValid=!1}),this.uploadOk=!0):(console.log("File non valido"),t.errors.forEach((e,i)=>{this.messageService.add({key:"tst",severity:"error",summary:"Errore!",detail:e,life:r.a.TOAST_LIFE})})),this.icon="ui-icon-done",this.fileInput.nativeElement.value=""}}verifyUploadFile(){this.uploadOk?this.showWarnAlreadyUploadedFile():document.getElementById("upFilePAT").click()}showWarnAlreadyUploadedFile(){this.messageService.add(r.a.getToast("warn-already-uploadedFile-pat",r.b.warn,r.a.FILE_ALREADY_UPLOADED))}onRejectHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-pat")}onConfirmHasAlreadyUploadedFile(){this.messageService.clear("warn-already-uploadedFile-pat"),document.getElementById("upFilePAT").click()}handleError(e){console.log("Error "+e+" msg "+e.error+" error.code "+e.status),this.messageService.add(e&&e.error&&500===e.status?{key:"tst",severity:"error",summary:"Errore!",detail:e.error,life:r.a.TOAST_LIFE}:{key:"tst",severity:"error",summary:"Errore!",detail:"Errore generico",life:r.a.TOAST_LIFE})}onSubmit(e){console.log("this.onSubmit"),this.submitted=!0,e.invalid?this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI)):(this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)))}removeMe(){this.compInteraction.remove(this.index)}setDisabled(e){this.disabled=e}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a),n.Nb(R.d))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-pat"]],viewQuery:function(e,i){var t;1&e&&n.Jc(be,!0),2&e&&n.Ac(t=n.cc())&&(i.fileInput=t.first)},decls:52,vars:19,consts:[[1,"ui-g","ui-fluid"],["position","center","key","warn-already-uploadedFile-pat",3,"modal","baseZIndex"],["pTemplate","messageService"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close","title","Elimina",1,"remove-btn",3,"click"],[3,"ngSubmit"],["f","ngForm"],[1,"ui-g-2"],[1,"ui-g-4"],["type","text","name","matricola","required","","pInputText","",3,"ngModel","ngModelChange"],["name","dipartimento","emptyMessage","--Nessun Dipartimento trovato--",3,"ngModel","suggestions","size","minLength","forceSelection","required","ngModelChange","completeMethod"],["type","text","name","dirigente","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","note","required","","pInputText","",3,"ngModel","ngModelChange"],[1,"ui-g-12","ui-md-6","ui-lg-6"],[1,"ui-g-12","ui-md-12"],["pButton","","type","button","icon","ui-icon-file-download","label","Scarica Modello Autorizzazione",3,"click"],["pButton","","type","button","label","Carica Autorizzazione Firmata",3,"icon","disabled","click"],["type","file","id","upFilePAT","name","upFilePAT",2,"display","none",3,"accept","change"],["upFilePAT",""],[1,"ui-g-12"],["align","justify"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","No",1,"ui-button-secondary",3,"click"]],template:function(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",0),n.Tb(1,"p-toast",1),n.Mc(2,ue,11,2,"ng-template",2),n.Sb(),n.Tb(3,"div",3),n.Tb(4,"p-panel",4),n.Tb(5,"p-header"),n.Oc(6),n.Tb(7,"button",5),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(8,"form",6,7),n.bc("ngSubmit",(function(){n.Ec(e);const t=n.Bc(9);return i.onSubmit(t)})),n.Tb(10,"fieldset"),n.Tb(11,"div"),n.Tb(12,"div",8),n.Tb(13,"label"),n.Oc(14,"Matricola *"),n.Sb(),n.Sb(),n.Tb(15,"div",9),n.Tb(16,"input",10),n.bc("ngModelChange",(function(e){return i.matricola=e})),n.Sb(),n.Sb(),n.Tb(17,"div",8),n.Tb(18,"label"),n.Oc(19,"Struttura *"),n.Sb(),n.Sb(),n.Tb(20,"div",9),n.Tb(21,"p-autoComplete",11),n.bc("ngModelChange",(function(e){return i.dipartimento=e}))("completeMethod",(function(e){return i.filterDipartimentoSingle(e)})),n.Sb(),n.Sb(),n.Tb(22,"div",8),n.Tb(23,"label"),n.Oc(24,"Dirigente *"),n.Sb(),n.Sb(),n.Tb(25,"div",9),n.Tb(26,"input",12),n.bc("ngModelChange",(function(e){return i.dirigente=e})),n.Sb(),n.Sb(),n.Tb(27,"div",8),n.Tb(28,"label"),n.Oc(29),n.gc(30,"translate"),n.Sb(),n.Sb(),n.Tb(31,"div",9),n.Tb(32,"input",13),n.bc("ngModelChange",(function(e){return i.note=e})),n.Sb(),n.Sb(),n.Tb(33,"div",14),n.Tb(34,"div",15),n.Tb(35,"label"),n.Oc(36,"Autorizzazione"),n.Sb(),n.Tb(37,"button",16),n.bc("click",(function(){return i.downloadFile()})),n.Sb(),n.Tb(38,"button",17),n.bc("click",(function(){return i.verifyUploadFile()})),n.Sb(),n.Tb(39,"input",18,19),n.bc("change",(function(e){return i.uploadFile(e)})),n.Sb(),n.Sb(),n.Sb(),n.Tb(41,"div",20),n.Tb(42,"p-fieldset",21),n.Tb(43,"p-header"),n.Oc(44,"Attenzione"),n.Sb(),n.Oc(45," Digitare la struttura di appartenenza selezionandola dalla lista e il nominativo del Responsabile della stessa. "),n.Ob(46,"br"),n.Oc(47," Scaricare e compilare il modulo per l'autorizzazione (premere il pulsante Scarica Modello Autorizzazione). "),n.Ob(48,"br"),n.Oc(49," Importare tale documento firmato dal Responsabile con allegato, in formato PDF, il documento d'identit\xe0 dello stesso (premere il pulsante Carica Autorizzazione Firmata). "),n.Ob(50,"br"),n.Oc(51," Digitare il campo Motivazione della richiesta. "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}2&e&&(n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3),n.Bb(3),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(10),n.mc("ngModel",i.matricola),n.Bb(5),n.mc("ngModel",i.dipartimento)("suggestions",i.filteredDipartimentiSingle)("size",30)("minLength",1)("forceSelection",!0)("required",!0),n.Bb(5),n.mc("ngModel",i.dirigente),n.Bb(3),n.Qc(" ",n.hc(30,17,"RICHIESTE_ACCESSO.motivazioneRichiesta")," * "),n.Bb(3),n.mc("ngModel",i.note),n.Bb(6),n.nc("icon",i.icon),n.mc("disabled",!(i.matricola&&i.dirigente)),n.Bb(1),n.nc("accept",i.fileExt))},directives:[I.a,R.e,O.a,R.c,z.b,y.I,y.t,y.u,y.c,y.D,P.a,y.s,y.v,de.a,F.a],pipes:[U.d],styles:[""]}),e})();function he(e,i){if(1&e&&(n.Tb(0,"p",18),n.Oc(1),n.Sb()),2&e){n.fc(2);const e=n.Bc(15);n.Bb(1),n.Qc(" ",e.errors.cuaaErratoCompleto," ")}}function ge(e,i){if(1&e&&(n.Tb(0,"div"),n.Mc(1,he,2,1,"p",17),n.Sb()),2&e){n.fc();const e=n.Bc(15);n.Bb(1),n.mc("ngIf",null==e.errors?null:e.errors.cuaaErratoCompleto)}}const me=function(e){return{"is-invalid":e}};let Se=(()=>{class e{constructor(e,i){this.utentiService=e,this.messageService=i}ngOnInit(){console.log("TitolareComponent cfPersona "+this.cfPersona),this.isValid=!1,this.submitted=!1}cuaachange(e){this.denominazione="",this.isValid&&(this.isValid=!1),this.submitted=!1}onSubmit(e){this.submitted=!0,e.invalid||c.a.campoNonValorizzato(this.cuaa)?this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI)):(c.a.validaCuaaIntero(this.cuaa,!0),this.utentiService.checkFascicoloValido(this.cuaa).subscribe(e=>{console.log("Fascicolo valido "+e),this.checkRappresentante()},e=>{r.a.handleError(this.messageService,e,r.a.ERRORE_GENERICO),this.isValid=!1}))}checkRappresentante(){this.utentiService.getAziendaRappresentata(this.cuaa,this.cfPersona).subscribe(e=>{console.log("Rappresentante ok "+e),this.isValid=!0,this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)),this.denominazione=e.mvalue},e=>{r.a.handleError(this.messageService,e,r.a.ERRORE_GENERICO),this.isValid=!1})}removeMe(){this.compInteraction.remove(this.index)}setDisabled(e){this.disabled=e}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(v.a),n.Nb(R.d))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-titolare"]],decls:26,vars:14,consts:[[1,"ui-g","ui-fluid"],[1,"ui-g-12","ui-lg-12"],[3,"toggleable"],["pButton","","type","button","icon","ui-icon-close","title","Elimina",1,"remove-btn",3,"click"],[3,"ngSubmit"],["f","ngForm"],[3,"disabled"],[1,"ui-g","form-group"],[1,"ui-g-12","ui-md-6","ui-lg-5"],[1,""],["type","text","name","cuaa","pInputText","","appValidaCuaaCompleto","",3,"ngModel","ngClass","ngModelChange","input"],["cuaaInput","ngModel"],[4,"ngIf"],[1,"ui-g-12","ui-md-6","ui-lg-2"],["pButton","","type","submit","label","Cerca",3,"disabled"],["type","text","name","denominazione","pInputText","","appValidadenominazione","",3,"ngModel","ngClass","readonly","ngModelChange"],["denominazioneInput","ngModel"],["class","ui-message ui-messages-error ui-corner-all",4,"ngIf"],[1,"ui-message","ui-messages-error","ui-corner-all"]],template:function(e,i){if(1&e){const e=n.Ub();n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"p-panel",2),n.Tb(3,"p-header"),n.Oc(4),n.Tb(5,"button",3),n.bc("click",(function(){return i.removeMe()})),n.Sb(),n.Sb(),n.Tb(6,"form",4,5),n.bc("ngSubmit",(function(){n.Ec(e);const t=n.Bc(7);return i.onSubmit(t)})),n.Tb(8,"fieldset",6),n.Tb(9,"div",7),n.Tb(10,"div",8),n.Tb(11,"span",9),n.Tb(12,"label"),n.Oc(13,"CUAA *"),n.Sb(),n.Tb(14,"input",10,11),n.bc("ngModelChange",(function(e){return i.cuaa=e}))("input",(function(e){return i.cuaachange(e)})),n.Sb(),n.Mc(16,ge,2,1,"div",12),n.Sb(),n.Sb(),n.Tb(17,"div",13),n.Ob(18,"br"),n.Ob(19,"button",14),n.Sb(),n.Tb(20,"div",8),n.Tb(21,"span",9),n.Tb(22,"label"),n.Oc(23,"Descrizione Impresa"),n.Sb(),n.Tb(24,"input",15,16),n.bc("ngModelChange",(function(e){return i.denominazione=e})),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.Bc(7),t=n.Bc(15),a=n.Bc(25);n.Bb(2),n.mc("toggleable",!0),n.Bb(2),n.Qc(" ",i.title," "),n.Bb(4),n.mc("disabled",i.disabled),n.Bb(6),n.mc("ngModel",i.cuaa)("ngClass",n.sc(10,me,t.invalid&&(t.touched||e.submitted))),n.Bb(2),n.mc("ngIf",t.errors),n.Bb(3),n.mc("disabled",!e.valid||i.submitted),n.Bb(5),n.mc("ngModel",i.denominazione)("ngClass",n.sc(12,me,a.invalid))("readonly",!0)}},directives:[O.a,R.c,z.b,y.I,y.t,y.u,y.c,P.a,Y.a,y.s,y.v,V.q,V.t],styles:[""]}),e})();class fe{constructor(e,i,t,a){this.idResponsabilita=e,this.responsabile=i,this.distributori=t,this.codResponsabilita=u[u.DIPENDENTE_DISTRIBUTORE],this.allegato=a}}var Ee=t("yhG/"),Te=t("x5p7"),ve=t("+WeO"),Ae=t("IWUw"),Ce=t("dS4e"),Re=t("1SSY"),Ie=t("T8KO"),Oe=t("KwdP");const ze=["viewContainerRef"];function ye(e,i){if(1&e&&(n.Tb(0,"p",51),n.Oc(1),n.Sb()),2&e){n.fc(2);const e=n.Bc(22);n.Bb(1),n.Qc(" ",e.errors.cfErrato," ")}}function De(e,i){if(1&e&&(n.Tb(0,"div"),n.Mc(1,ye,2,1,"p",50),n.Sb()),2&e){n.fc();const e=n.Bc(22);n.Bb(1),n.mc("ngIf",null==e.errors?null:e.errors.cfErrato)}}function Pe(e,i){if(1&e&&(n.Tb(0,"p",51),n.Oc(1),n.Sb()),2&e){n.fc(2);const e=n.Bc(29);n.Bb(1),n.Qc(" ",e.errors.emailErrata," ")}}function Fe(e,i){if(1&e&&(n.Tb(0,"div"),n.Mc(1,Pe,2,1,"p",50),n.Sb()),2&e){n.fc();const e=n.Bc(29);n.Bb(1),n.mc("ngIf",null==e.errors?null:e.errors.emailErrata)}}function Le(e,i){if(1&e&&(n.Tb(0,"p",51),n.Oc(1),n.Sb()),2&e){n.fc(2);const e=n.Bc(37);n.Bb(1),n.Qc(" ",e.errors.telefonoErrato," ")}}function Be(e,i){if(1&e&&(n.Tb(0,"div"),n.Mc(1,Le,2,1,"p",50),n.Sb()),2&e){n.fc();const e=n.Bc(37);n.Bb(1),n.mc("ngIf",null==e.errors?null:e.errors.telefonoErrato)}}function Me(e,i){}const ke=function(e){return{"is-invalid":e}};function Ue(e,i){if(1&e){const e=n.Ub();n.Tb(0,"form",18,19),n.bc("ngSubmit",(function(){n.Ec(e);const i=n.Bc(1);return n.fc().onSubmit(i)})),n.Tb(2,"div",9),n.Tb(3,"p-accordion"),n.Tb(4,"p-accordionTab",20),n.Tb(5,"fieldset",21),n.Tb(6,"div",22),n.Tb(7,"div",23),n.Tb(8,"label"),n.Oc(9,"Cognome *"),n.Sb(),n.Sb(),n.Tb(10,"div",24),n.Tb(11,"input",25),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().datiAnagraficiUtente.cognome=i})),n.Sb(),n.Sb(),n.Tb(12,"div",23),n.Tb(13,"label"),n.Oc(14,"Nome *"),n.Sb(),n.Sb(),n.Tb(15,"div",24),n.Tb(16,"input",26),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().datiAnagraficiUtente.nome=i})),n.Sb(),n.Sb(),n.Tb(17,"div",23),n.Tb(18,"label"),n.Oc(19,"C.F. *"),n.Sb(),n.Sb(),n.Tb(20,"div",24),n.Tb(21,"input",27,28),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().datiAnagraficiUtente.codiceFiscale=i})),n.Sb(),n.Mc(23,De,2,1,"div",29),n.Sb(),n.Tb(24,"div",23),n.Tb(25,"label"),n.Oc(26,"Email/PEC *"),n.Sb(),n.Sb(),n.Tb(27,"div",24),n.Tb(28,"input",30,31),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().datiAnagraficiUtente.email=i})),n.Sb(),n.Mc(30,Fe,2,1,"div",29),n.Sb(),n.Ob(31,"div",5),n.Tb(32,"div",23),n.Tb(33,"label"),n.Oc(34,"Telefono *"),n.Sb(),n.Sb(),n.Tb(35,"div",24),n.Tb(36,"input",32,33),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().datiAnagraficiUtente.telefono=i})),n.Sb(),n.Mc(38,Be,2,1,"div",29),n.Sb(),n.Ob(39,"div",34),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(40,"div",9),n.Tb(41,"p-accordion"),n.Tb(42,"p-accordionTab",35),n.Tb(43,"div",36),n.Tb(44,"fieldset",8),n.Tb(45,"div",37),n.Tb(46,"p-dropdown",38),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().selectedResponsabilita=i})),n.Sb(),n.Sb(),n.Tb(47,"div",39),n.Tb(48,"button",40),n.bc("click",(function(){return n.Ec(e),n.fc().addComponent()})),n.Sb(),n.Sb(),n.Tb(49,"div",5),n.Mc(50,Me,0,0,"ng-template",null,41,n.Nc),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(52,"div",9),n.Tb(53,"p-accordion"),n.Tb(54,"p-accordionTab",42),n.Tb(55,"div",43),n.Tb(56,"p-multiSelect",44),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().selectedApplicativi=i})),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(57,"div",45),n.Tb(58,"div",23),n.Tb(59,"div",46),n.Tb(60,"button",47),n.bc("click",(function(){return n.Ec(e),n.fc().modificaStatoRichiesta()})),n.Sb(),n.Sb(),n.Sb(),n.Tb(61,"div",23),n.Tb(62,"div",48),n.Ob(63,"button",49),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.Bc(1),i=n.Bc(22),t=n.Bc(29),a=n.Bc(37),s=n.fc();n.Bb(4),n.mc("selected",!0),n.Bb(1),n.mc("disabled",s.inserimentoDisabled),n.Bb(6),n.mc("ngModel",s.datiAnagraficiUtente.cognome),n.Bb(5),n.mc("ngModel",s.datiAnagraficiUtente.nome),n.Bb(5),n.mc("ngModel",s.datiAnagraficiUtente.codiceFiscale)("readonly",s.cfReadonly||!s.canChangeCf)("ngClass",n.sc(26,ke,i.invalid)),n.Bb(2),n.mc("ngIf",i.errors),n.Bb(5),n.mc("ngModel",s.datiAnagraficiUtente.email),n.Bb(2),n.mc("ngIf",t.errors),n.Bb(6),n.mc("ngModel",s.datiAnagraficiUtente.telefono),n.Bb(2),n.mc("ngIf",a.errors),n.Bb(4),n.mc("selected",!0),n.Bb(2),n.mc("disabled",s.inserimentoDisabled),n.Bb(2),n.mc("options",s.responsabilitaList)("ngModel",s.selectedResponsabilita)("disabled",s.inserimentoDisabled),n.Bb(2),n.nc("title",s.datiAnagraficiUtente.codiceFiscale?"Aggiungi Responsabilit\xe0":"Inserire un C.F. per continuare"),n.mc("disabled",!s.datiAnagraficiUtente.codiceFiscale),n.Bb(6),n.mc("selected",!0),n.Bb(2),n.mc("filter",!1)("options",s.applicativi)("ngModel",s.selectedApplicativi)("disabled",s.inserimentoDisabled),n.Bb(4),n.mc("disabled",!s.inserimentoDisabled),n.Bb(3),n.mc("disabled",!e.valid||s.responsabilitaNonValide||s.inserimentoDisabled)}}function _e(e,i){if(1&e){const e=n.Ub();n.Tb(0,"a",52),n.bc("click",(function(){return n.Ec(e),n.fc(2).downloadModuloRichiestaAccesso()})),n.Oc(1," Modulo richiesta accesso "),n.Sb()}}function Ne(e,i){1&e&&(n.Tb(0,"span"),n.Oc(1,"Modulo richiesta accesso"),n.Sb())}function we(e,i){if(1&e){const e=n.Ub();n.Tb(0,"tr"),n.Tb(1,"th"),n.Tb(2,"b"),n.Oc(3,"VISUALIZZAZIONE"),n.Sb(),n.Sb(),n.Tb(4,"th"),n.Tb(5,"b"),n.Oc(6,"FIRMA ACCETTAZIONE"),n.Sb(),n.Sb(),n.Sb(),n.Tb(7,"tr"),n.Tb(8,"th"),n.Tb(9,"a",52),n.bc("click",(function(){return n.Ec(e),n.fc().downloadInformativaPrivacy()})),n.Oc(10," Informativa Privacy "),n.Sb(),n.Sb(),n.Tb(11,"th"),n.Tb(12,"p-inputSwitch",53),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().checked1=i}))("onChange",(function(i){return n.Ec(e),n.fc().sottoScriviPrivacyCheck(i)})),n.Sb(),n.Sb(),n.Sb(),n.Tb(13,"tr"),n.Tb(14,"th"),n.Mc(15,_e,2,0,"a",54),n.Mc(16,Ne,2,0,"span",29),n.Sb(),n.Tb(17,"th"),n.Tb(18,"p-inputSwitch",55),n.bc("ngModelChange",(function(i){return n.Ec(e),n.fc().checked2=i}))("onChange",(function(i){return n.Ec(e),n.fc().sottoScriviDomandaCheck(i)})),n.Sb(),n.Sb(),n.Sb()}if(2&e){const e=n.fc();n.Bb(12),n.mc("ngModel",e.checked1)("disabled",!e.informativaPrivacyFile)("disabled",!(e.datiDomanda.autorizzazioni&&e.datiDomanda.autorizzazioni.length>0)&&!e.viewPrivacy||e.datiDomanda.autorizzazioni&&e.datiDomanda.autorizzazioni.length>0||!e.inserimentoDisabled||e.blockCheckPrivacyOk),n.Bb(3),n.mc("ngIf",e.saveOk),n.Bb(1),n.mc("ngIf",!e.saveOk),n.Bb(2),n.mc("ngModel",e.checked2)("disabled",e.checked2||!e.viewModuloDomanda)}}const xe=function(){return{marginTop:"70px"}};let Ve=(()=>{class e{constructor(e,i,t,a,n,s,o,r,l){this.loader=e,this.utentiService=i,this.CFR=t,this.messageService=a,this._configuration=n,this.http=s,this.messages=o,this.configuration=r,this.translateService=l,this.cfReadonly=!1,this.inserimentoDisabled=!1,this.viewPrivacy=!1,this.viewModuloDomanda=!1,this.checked1=!1,this.checked2=!1,this.saveOk=!1,this.blockCheckPrivacyOk=!1,this.canProtocol=!0,this.hasPrivacyProtocollata=!1,this.index=0,this.componentsReferences=[],this.controlliDatiAnagrafici=[],this.legaleRappresentanteErrorList=[],this.caaErrorList=[],this.patErrorList=[],this.altriEntiErrorList=[],this.consulenteErrorList=[],this.distributoreErrorList=[],this.blobToFile=(e,i)=>{const t=e;return t.lastModifiedDate=new Date,t.name=i,e}}ngOnInit(){this.datiDomanda=new h,this.loader.setTimeout(48e4),this.setServizi(),this.setResponsabilitaList(),this.setControlliDatiAnagrafici(),this.canAdd=!1,this.canChangeCf=!0,this.responsabilitaNonValide=!0,this.idRichiesta||this.caricaDatiAnagrafici()}getProfiliUtenteConnesso(){this.utentiService.getProfiliUtenteConnesso().subscribe(e=>{e&&e.some(e=>"TITOLARE_AZIENDA_AGRICOLA"===e.responsabilita)&&this.aggiungiResponsabilitaTitolareLegaleRappresentante()})}aggiungiResponsabilitaTitolareLegaleRappresentante(){let e;if(!this.datiAnagraficiUtente||!c.a.validaCuaaIntero(this.datiAnagraficiUtente.codiceFiscale,!1))return;e=this.datiAnagraficiUtente.codiceFiscale;const i=this.CFR.resolveComponentFactory(ce);this.createComponent(i).cfPersona=e}setControlliDatiAnagrafici(){this.controlliDatiAnagrafici=[],this.controlliDatiAnagrafici.push("cognome"),this.controlliDatiAnagrafici.push("nome"),this.controlliDatiAnagrafici.push("codiceFiscale"),this.controlliDatiAnagrafici.push("email"),this.controlliDatiAnagrafici.push("telefono")}setServizi(){this.applicativi=[{label:"SRT",title:"SRTrento - Misure strutturali"},{label:"A4G",title:"A4G - Nuovo Sistema Informativo Agricoltura"},{label:"AGS",title:"SIAP - Sistema Informativo Agricoltura"}]}setResponsabilitaList(){this.responsabilitaList=[],this.responsabilitaList.push({label:this.translateService.instant("gestioneUtenze.TI_LR"),value:{id:2,name:this.translateService.instant("gestioneUtenze.TI_LR"),code:u.LR}}),this.responsabilitaList.push({label:"Libero professionista/Consulente",value:{id:3,name:"Libero professionista/Consulente",code:u.LPC}}),this.responsabilitaList.push({label:"Dipendente/Collaboratore PAT",value:{id:4,name:"Dipendente/Collaboratore PAT",code:u.PAT}}),this.responsabilitaList.push({label:"Dipendente/Collaboratore CAA",value:{id:5,name:"Dipendente/Collaboratore CAA",code:u.CAA}}),this.responsabilitaList.push({label:"Dipendente/Collaboratore Altri Enti",value:{id:6,name:"Dipendente/Collaboratore Altri Enti",code:u.ALTRI}}),this.responsabilitaList.push({label:"Dipendente/Collaboratore Distributore",value:{id:7,name:"Dipendente/Collaboratore Distributore",code:u.DIPENDENTE_DISTRIBUTORE}}),this.selectedResponsabilita=this.responsabilitaList[0].value}ngOnDestroy(){this.loader.resetTimeout()}caricaDatiAnagrafici(){this.utentiService.getDatiAnagraficiUtente().subscribe(e=>{this.datiAnagraficiUtente=e,this.cfReadonly=null!=this.datiAnagraficiUtente.codiceFiscale&&this.datiAnagraficiUtente.codiceFiscale.length>0,this.datiAnagraficiUtente&&c.a.validaCuaaIntero(this.datiAnagraficiUtente.codiceFiscale,!1)&&(this.canAdd=!0),this.verificaPrivacy(this.datiAnagraficiUtente.codiceFiscale),this.getProfiliUtenteConnesso(),this.recuperaDomandaApprovata(this.datiAnagraficiUtente.codiceFiscale)})}recuperaDomandaApprovata(e){this.utentiService.getUltimaDomandaUtenteCorrente("APPROVATA",p.COMPLETA).subscribe(e=>{e&&(console.log("Result recuperaDomandaApprovata: ",e),this.datiAnagraficiUtente=e.datiAnagrafici,this.selectedApplicativi=[],e.servizi.forEach(e=>{const i=this.applicativi.find(i=>i.label===e);this.selectedApplicativi.push(i)}),e.responsabilitaRichieste.responsabilitaAltriEnti&&e.responsabilitaRichieste.responsabilitaAltriEnti.forEach(e=>this.aggiungiResponsabilitaAltriEnti(e)),e.responsabilitaRichieste.responsabilitaCaa&&e.responsabilitaRichieste.responsabilitaCaa.forEach(e=>this.aggiungiResponsabilitaCAA(e)),e.responsabilitaRichieste.responsabilitaConsulente&&e.responsabilitaRichieste.responsabilitaConsulente.forEach(e=>this.aggiungiResponsabilitaConsulente(e)),e.responsabilitaRichieste.responsabilitaPat&&e.responsabilitaRichieste.responsabilitaPat.forEach(e=>this.aggiungiResponsabilitaPat(e)),e.responsabilitaRichieste.responsabilitaDistributore&&e.responsabilitaRichieste.responsabilitaDistributore.forEach(e=>this.aggiungiResponsabilitaDistributore(e)))})}aggiungiResponsabilitaAltriEnti(e){const i=this.CFR.resolveComponentFactory(w),t=this.createComponent(i);t.title="Dipendente/Collaboratore Altri Enti",t.codeResponsabilita=u.ALTRI,t.denominazione=e.denominazione,t.piva=e.piva,t.dirigente=e.dirigente,t.note=e.note,this.responsabilitaNonValide=!1}aggiungiResponsabilitaCAA(e){const i=this.CFR.resolveComponentFactory(K),t=this.createComponent(i);t.title="Dipendente / Collaboratore CAA",t.codeResponsabilita=u.CAA,t.responsabile=e.responsabile;const a=[];e.sedi.forEach(e=>a.push(e.identificativo)),t.setSelectedIds(a),this.responsabilitaNonValide=!1}aggiungiResponsabilitaConsulente(e){const i=this.CFR.resolveComponentFactory(ne),t=this.createComponent(i);t.title="Libero professionista/Consulente",t.codeResponsabilita=u.LPC,t.ordine=e.ordine,t.iscrizione=e.iscrizione,t.cuaa=e.cuaa,this.responsabilitaNonValide=!1}aggiungiResponsabilitaLegaleRappresentante(e){const i=this.datiAnagraficiUtente.codiceFiscale,t=this.CFR.resolveComponentFactory(ce),a=this.createComponent(t);a.cfPersona=i,a.title=this.translateService.instant("gestioneUtenze.TI_LR"),a.codeResponsabilita=u.LR,e.forEach(e=>a.addElencoResponsabilita(e)),this.responsabilitaNonValide=!1}aggiungiResponsabilitaTitolare(e){const i=this.datiAnagraficiUtente.codiceFiscale,t=this.CFR.resolveComponentFactory(ce),a=this.createComponent(t);a.cfPersona=i,a.title=this.translateService.instant("gestioneUtenze.TI_LR"),a.codeResponsabilita=u.TI,a.addElencoResponsabilita(e),this.responsabilitaNonValide=!1}aggiungiResponsabilitaPat(e){const i=this.CFR.resolveComponentFactory(pe),t=this.createComponent(i);t.title="Dipendente/Collaboratore PAT",t.codeResponsabilita=u.PAT,t.matricola=e.matricola,t.dipartimento=e.dipartimento,t.dirigente=e.dirigente,t.note=e.note,this.responsabilitaNonValide=!1}aggiungiResponsabilitaDistributore(e){const i=this.CFR.resolveComponentFactory(k),t=this.createComponent(i);t.title="Dipendente / Collaboratore Distributore",t.codeResponsabilita=u.DIPENDENTE_DISTRIBUTORE,t.responsabile=e.responsabile;const a=[];e.distributori.forEach(e=>a.push(e.id)),t.setSelectedIds(a),this.responsabilitaNonValide=!1}verificaPrivacy(e){this.utentiService.ricercaPersone({codiceFiscale:e}).subscribe(e=>{e&&e.length>0&&e[0]&&(console.log(e[0]),this.persona=e[0],this.datiDomanda.autorizzazioni=e[0].nrProtocolloPrivacyGenerale,this.datiDomanda.autorizzazioni&&this.datiDomanda.autorizzazioni.length>0&&(this.viewPrivacy=!0,this.checked1=!0,this.hasPrivacyProtocollata=!0))},e=>{console.error("Errore in ricercaPersone: "+e),this.messages.add(r.a.getToast("generic",r.b.error,"Errore in recupero Persona: "+e.error.message))})}addComponent(){if(this.componentsReferences&&this.componentsReferences.length>0&&this.componentsReferences.filter(e=>!e.instance.isValid).length>0)return this.messageService.add(r.a.getToast("tst",r.b.error,"Per aggiungere un\u2019altra responsabilit\xe0 \xe8 necessario completare la responsabilit\xe0 precedentemente aggiunta o eliminarla"));let e;if(this.datiAnagraficiUtente&&c.a.validaCuaaIntero(this.datiAnagraficiUtente.codiceFiscale,!1)){switch(e=this.datiAnagraficiUtente.codiceFiscale,this.selectedResponsabilita.code){case u.TI:{const i=this.CFR.resolveComponentFactory(Se),t=this.createComponent(i);t.cfPersona=e,t.cuaa=e,t.isValid||(t.removeMe(!0),this.messageService.add(r.a.getToast("tst",r.b.error,this.translateService.instant("NO_RESPONSABILITA")+e)));break}case u.LR:{if(this.componentsReferences.filter(e=>e.instance.codeResponsabilita==u.LR).length>0){this.messageService.add(r.a.getToast("tst",r.b.error,r.a.responsabilitaPresente));break}const i=this.CFR.resolveComponentFactory(ce);this.createComponent(i).cfPersona=e;break}case u.LPC:{const e=this.CFR.resolveComponentFactory(ne);this.createComponent(e);break}case u.PAT:{const e=this.CFR.resolveComponentFactory(pe);this.createComponent(e);break}case u.CAA:{const e=this.CFR.resolveComponentFactory(K);this.createComponent(e);break}case u.ALTRI:{const e=this.CFR.resolveComponentFactory(w);this.createComponent(e);break}case u.DIPENDENTE_DISTRIBUTORE:{const e=this.CFR.resolveComponentFactory(k);this.createComponent(e);break}}this.canChangeCf=!1,this.checkEsisteResponsbilita()}}createComponent(e){const i=this.VCR.createComponent(e,0),t=i.instance;return t.selfRef=t,t.index=++this.index,t.title=this.selectedResponsabilita.name,t.codeResponsabilita=this.selectedResponsabilita.code,t.setDisabled(this.inserimentoDisabled),t.compInteraction=this,this.componentsReferences.unshift(i),t}remove(e){if(this.VCR.length<=0)return;const i=this.componentsReferences.filter(i=>i.instance.index===e)[0];i&&(i.destroy(),this.componentsReferences=this.componentsReferences.filter(i=>i.instance.index!==e),this.VCR.length<=0&&(this.canChangeCf=!0),this.checkEsisteResponsbilita())}checkEsisteResponsbilita(){this.responsabilitaNonValide=!this.componentsReferences||0===this.componentsReferences.length,console.log("responsabilitaNonValide "+this.responsabilitaNonValide)}modificaStatoRichiesta(){this.inserimentoDisabled=!this.inserimentoDisabled,this.saveOk=!1,this.viewModuloDomanda=!1,this.checked2=!1,this.checked1&&(this.blockCheckPrivacyOk=!0),this.componentsReferences.forEach((e,i)=>{e.instance.setDisabled(this.inserimentoDisabled)})}enableRecursive(e,i){e.selectable=i,e.children&&e.children.forEach(e=>{this.enableRecursive(e,i)})}onSubmit(e){if(console.log("Salva"),this.messageService.clear(),e.invalid){if(console.log(e),!this.checkDatiAnagrafici(e)||!this.checkProfiliRichiesti(e))return;this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI))}else this.checkResponsabilita()&&(this.datiDomanda.datiAnagrafici=this.datiAnagraficiUtente,this.datiDomanda.servizi=this.popolaApplicativi(),this.datiDomanda.responsabilitaRichieste=this.popolaResponsabilita(),this.datiDomanda.tipoDomandaRegistrazione=p.COMPLETA,console.log(this.datiDomanda.responsabilitaRichieste),this.legaleRappresentanteErrorList=[],this.caaErrorList=[],this.patErrorList=[],this.altriEntiErrorList=[],this.consulenteErrorList=[],this.distributoreErrorList=[],this.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante&&this.verificaValiditaLegaleRappresentante(),this.datiDomanda.responsabilitaRichieste.responsabilitaCaa&&this.verificaValiditaCaa(),this.datiDomanda.responsabilitaRichieste.responsabilitaPat&&this.verificaValiditaPat(),this.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti&&this.verificaValiditaAltriEnti(),this.datiDomanda.responsabilitaRichieste.responsabilitaConsulente&&this.verificaValiditaConsulente(),this.datiDomanda.responsabilitaRichieste.responsabilitaDistributore&&this.verificaValiditaDistributore(),this.verificaAssenzaErrorListResponsabilita()&&(this.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti&&this.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti.length>0||this.datiDomanda.responsabilitaRichieste.responsabilitaCaa&&this.datiDomanda.responsabilitaRichieste.responsabilitaCaa.length>0||this.datiDomanda.responsabilitaRichieste.responsabilitaConsulente&&this.datiDomanda.responsabilitaRichieste.responsabilitaConsulente.length>0||this.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante&&this.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante.length>0||this.datiDomanda.responsabilitaRichieste.responsabilitaPat&&this.datiDomanda.responsabilitaRichieste.responsabilitaPat.length>0||this.datiDomanda.responsabilitaRichieste.responsabilitaTitolare&&this.datiDomanda.responsabilitaRichieste.responsabilitaTitolare.length>0||this.datiDomanda.responsabilitaRichieste.responsabilitaDistributore&&this.datiDomanda.responsabilitaRichieste.responsabilitaDistributore.length>0)?(null==this.datiDomanda.id?this.inserisci():this.aggiorna(),this.rimuoviAllegati()):this.messageService.add(r.a.getToast("tst",r.b.error,"La sezione Responsabilit\xe0 non \xe8 compilata correttamente")))}verificaAssenzaErrorListResponsabilita(){return 0===this.caaErrorList.length&&0===this.patErrorList.length&&0===this.altriEntiErrorList.length&&0===this.consulenteErrorList.length&&0===this.legaleRappresentanteErrorList.length&&0===this.distributoreErrorList.length}verificaValiditaConsulente(){this.datiDomanda.responsabilitaRichieste.responsabilitaConsulente.forEach(e=>{e.ordine||this.consulenteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.ORDINE_APPARTENENZA"))||this.consulenteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.ORDINE_APPARTENENZA")),e.iscrizione||this.consulenteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.NUMERO_ISCRIZIONE"))||this.consulenteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.NUMERO_ISCRIZIONE")),e.cuaa||this.consulenteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.CUAA"))||this.consulenteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.CUAA")),e.denominazione||this.consulenteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.DESC_IMPRESA"))||this.consulenteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.DESC_IMPRESA")),e.rappresentante||this.consulenteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.RAPP_LEGALE"))||this.consulenteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.RAPP_LEGALE")),e.allegato||this.consulenteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))||this.consulenteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))}),this.consulenteErrorList.length>0&&this.messageService.add(r.a.getToast("tst",r.b.error,'Per la responabilit\xe0 "Libero professionista/Consulente" non sono stati compilati i campi: '+this.consulenteErrorList.toString()))}verificaValiditaAltriEnti(){this.datiDomanda.responsabilitaRichieste.responsabilitaAltriEnti.forEach(e=>{e.denominazione||this.altriEntiErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.DENOMINAZIONE_ENTE"))||this.altriEntiErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.DENOMINAZIONE_ENTE")),e.piva||this.altriEntiErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.PARTITA_IVA"))||this.altriEntiErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.PARTITA_IVA")),e.dirigente||this.altriEntiErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.RESPONSABILE"))||this.altriEntiErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.RESPONSABILE")),e.note||this.altriEntiErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.motivazioneRichiesta"))||this.altriEntiErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.motivazioneRichiesta")),e.allegato||this.altriEntiErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))||this.altriEntiErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))}),this.altriEntiErrorList.length>0&&this.messageService.add(r.a.getToast("tst",r.b.error,'Per la responabilit\xe0 "Dipendente/Collaboratore Altri Enti" non sono stati compilati i campi: '+this.altriEntiErrorList.toString()))}verificaValiditaPat(){this.datiDomanda.responsabilitaRichieste.responsabilitaPat.forEach(e=>{e.matricola||this.patErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.MATRICOLA"))||this.patErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.MATRICOLA")),e.dirigente||this.patErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.DIRIGENTE"))||this.patErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.DIRIGENTE")),e.dipartimento||this.patErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.STRUTTURA"))||this.patErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.STRUTTURA")),e.note||this.patErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.motivazioneRichiesta"))||this.patErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.motivazioneRichiesta")),this.datiDomanda.responsabilitaRichieste.responsabilitaPat[0].allegato||this.patErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))||this.patErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))}),this.patErrorList.length>0&&this.messageService.add(r.a.getToast("tst",r.b.error,'Per la responabilit\xe0 "Dipendente/Collaboratore PAT" non sono stati compilati i campi: '+this.patErrorList.toString()))}verificaValiditaCaa(){this.datiDomanda.responsabilitaRichieste.responsabilitaCaa.forEach(e=>{0!==e.sedi.length||this.caaErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.CAA_SEDI"))||this.caaErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.CAA_SEDI")),e.responsabile||this.caaErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.RESPONSABILE"))||this.caaErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.RESPONSABILE")),e.allegato||this.caaErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))||this.caaErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE")),this.caaErrorList.length>0&&this.messageService.add(r.a.getToast("tst",r.b.error,'Per la responabilit\xe0 "Dipendente/Collaboratore CAA" non sono stati compilati i campi: '+this.caaErrorList.toString()))})}verificaValiditaLegaleRappresentante(){this.datiDomanda.responsabilitaRichieste.responsabilitaLegaleRappresentante.forEach(e=>{e.cuaa||this.legaleRappresentanteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.CAA_SEDI"))||this.legaleRappresentanteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.CAA_SEDI")),e.denominazione||this.legaleRappresentanteErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.DESC_IMPRESA"))||this.legaleRappresentanteErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.DESC_IMPRESA"))}),this.legaleRappresentanteErrorList.length>0&&this.messageService.add(r.a.getToast("tst",r.b.error,'Per la responabilit\xe0 "Titolare Impresa / Legale Rappresentante" non sono stati compilati i campi: '+this.legaleRappresentanteErrorList.toString()))}verificaValiditaDistributore(){this.datiDomanda.responsabilitaRichieste.responsabilitaDistributore.forEach(e=>{e.distributori.length||this.distributoreErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.DISTRIBUTORI")),e.responsabile||this.distributoreErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.RESPONSABILE"))||this.distributoreErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.RESPONSABILE")),e.allegato||this.distributoreErrorList.includes(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE"))||this.distributoreErrorList.push(this.translateService.instant("RICHIESTE_ACCESSO.AUTORIZZAZIONE")),this.distributoreErrorList.length>0&&this.messageService.add(r.a.getToast("tst",r.b.error,'Per la responabilit\xe0 "Dipendente/Collaboratore Distributore" non sono stati compilati i campi: '+this.distributoreErrorList.toString()))})}checkDatiAnagrafici(e){let i=!0,t="";return this.controlliDatiAnagrafici.forEach(a=>{e.form.controls[a]&&e.form.controls[a].valid||(i=!1,t=t+a+", ")}),i?(console.log(JSON.stringify(this.datiAnagraficiUtente)),!0):(this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_DATI_ANAGRAFICI(t.slice(0,-2)))),!1)}checkProfiliRichiesti(e){return console.log("checkProfiliRichiesti"),console.log(this.selectedApplicativi),!(!this.selectedApplicativi||0===this.selectedApplicativi.length)||(this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_SERVIZI)),!1)}checkResponsabilita(){return!(!this.componentsReferences||0===this.componentsReferences.length)||(this.messageService.add(r.a.getToast("tst",r.b.error,r.a.ERRORE_RESPONSABILITA)),!1)}popolaResponsabilita(){const e=new E;return this.componentsReferences.filter(e=>e.instance.codeResponsabilita==u.TI&&e.instance.isValid).forEach((i,t)=>{e.responsabilitaTitolare||(e.responsabilitaTitolare=new Array),e.responsabilitaTitolare.push(new T(i.instance.cuaa,i.instance.denominazione))}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.LR&&e.instance.isValid).forEach((i,t)=>{e.responsabilitaLegaleRappresentante||(e.responsabilitaLegaleRappresentante=new Array),i.instance.elencoCariche.forEach(i=>{e.responsabilitaLegaleRappresentante.push(new T(i.cuaa,i.denominazione))})}),console.log("Selected"),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.CAA).forEach((i,t)=>{const a=i.instance;e.responsabilitaCaa||(e.responsabilitaCaa=new Array),console.log(a),e.responsabilitaCaa.push(new m(a.index,a.responsabile,this.popolaSedi(a.selectedNodes),a.fileAutorizzazione))}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.PAT).forEach((i,t)=>{const a=i.instance;e.responsabilitaPat||(e.responsabilitaPat=new Array),console.log(a),e.responsabilitaPat.push(new f(a.index,a.matricola,a.dirigente,a.dipartimento,a.fileAutorizzazione,a.note))}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.ALTRI).forEach((i,t)=>{const a=i.instance;e.responsabilitaAltriEnti||(e.responsabilitaAltriEnti=new Array),console.log(a),e.responsabilitaAltriEnti.push(new g(a.index,a.denominazione,a.piva,a.dirigente,a.fileAutorizzazione,a.note))}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.LPC).forEach((i,t)=>{const a=i.instance;e.responsabilitaConsulente||(e.responsabilitaConsulente=new Array),console.log(a),e.responsabilitaConsulente.push(new S(a.index,a.ordine,a.iscrizione,a.cuaa,a.denominazione,a.rappresentante,a.fileAutorizzazione))}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.DIPENDENTE_DISTRIBUTORE).forEach((i,t)=>{const a=i.instance;e.responsabilitaDistributore||(e.responsabilitaDistributore=new Array),e.responsabilitaDistributore.push(new fe(a.index,a.responsabile,a.selectedDistributors,a.fileAutorizzazione))}),e}rimuoviAllegati(){console.log("Selected"),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.CAA).forEach((e,i)=>{const t=e.instance;t.fileAutorizzazione=null,t.icon="ui-icon-file-upload",t.isValid=!1,t.uploadOk=!1}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.PAT).forEach((e,i)=>{const t=e.instance;t.fileAutorizzazione=null,t.icon="ui-icon-file-upload",t.isValid=!1,t.uploadOk=!1}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.ALTRI).forEach((e,i)=>{const t=e.instance;t.fileAutorizzazione=null,t.icon="ui-icon-file-upload",t.isValid=!1,t.uploadOk=!1}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.LPC).forEach((e,i)=>{const t=e.instance;t.fileAutorizzazione=null,t.icon="ui-icon-file-upload",t.isValid=!1,t.uploadOk=!1}),this.componentsReferences.filter(e=>e.instance.codeResponsabilita===u.DIPENDENTE_DISTRIBUTORE).forEach((e,i)=>{const t=e.instance;t.fileAutorizzazione=null,t.icon="ui-icon-file-upload",t.uploadOk=!1})}popolaApplicativi(){const e=[];return console.log(this.selectedApplicativi),this.selectedApplicativi.forEach(i=>{e.push(i.label)}),e}popolaSedi(e){const i=new Array;return e&&e.forEach((e,t)=>{e.data&&i.push(e.data)}),i}inserisci(){console.log("Inzio POST"),this.utentiService.inserisciDomanda(this.datiDomanda).subscribe(e=>{console.log("Inserimento della domanda "+e+" avvenuta con successo"),this.modificaStatoRichiesta(),this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)),this.datiDomanda.id=e,this.ricaricaDati(),this.saveOk=!0},e=>{console.error("Errore in inserisciDomanda: "+e),r.a.handleError(this.messageService,e,r.a.SALVATAGGIO_RICHIESTA_UTENTE)})}aggiorna(){console.log("Inzio PUT"),this.utentiService.aggiornaDomanda(this.datiDomanda).subscribe(e=>{console.log("Aggiornamento della domanda "+e+" avvenuta con successo"),this.modificaStatoRichiesta(),this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK)),this.datiDomanda.id=e,this.ricaricaDati(),this.saveOk=!0},e=>{console.error("Errore in aggiornaDomanda: "+e),r.a.handleError(this.messageService,e,r.a.SALVATAGGIO_RICHIESTA_UTENTE)})}ricaricaDati(){}downloadInformativaPrivacy(){this.http.get(this._configuration.UrlGetInfoPrivacy,{responseType:"blob"}).subscribe(e=>{s.saveAs(e,"informativa_privacy.pdf"),this.viewPrivacy=!0,this.informativaPrivacyFile=this.blobToFile(e,"informativa_privacy.pdf")})}sottoScriviPrivacyCheck(e){console.log("Evento sottoscrivi privacy",e.checked),e.checked&&this.sottoScriviPrivacy()}sottoScriviPrivacy(){this.utentiService.sottoScriviPrivacy(this.informativaPrivacyFile).subscribe(e=>{this.firmaPrivacy=e,console.log("Firmata privacy con xml",this.firmaPrivacy.xml),this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK));const i=atob(this.firmaPrivacy.pdf),t=new Array(i.length);for(let s=0;s<i.length;s++)t[s]=i.charCodeAt(s);const a=new Uint8Array(t),n=new Blob([a],{type:"application/pdf"});console.log(n),this.informativaPrivacyFirmataPDF=this.blobToFile(n,"informativa_privacy_firmata.pdf"),s.saveAs(n,"informativa_privacy_firmata.pdf"),this.blockCheckPrivacyOk=!0},e=>{console.error("Errore in aggiornaDomanda: "+e),r.a.handleError(this.messageService,e,r.a.FIRMA_PRIVACY),this.checked1=!1})}downloadModuloRichiestaAccesso(){console.log(this.datiDomanda),this.saveOk&&this.domandaPDF().subscribe(e=>{this.viewModuloDomanda=!0},e=>{console.log("Errore stampando il modulo",e),r.a.handleError(this.messageService,e,r.a.STAMPA_RICHIESTA_UTENTE)})}sottoScriviDomandaCheck(e){console.log("Evento sottoscrivi domanda",e.checked),e.checked&&this.sottoScriviDomanda()}sottoScriviDomanda(){this.utentiService.sottoScriviDomanda(this.datiDomanda.id).subscribe(e=>{this.messageService.add(r.a.getToast("tst",r.b.success,r.a.OPERAZIONE_OK))},e=>{console.error("Errore in aggiornaDomanda: "+e),r.a.handleError(this.messageService,e,r.a.FIRMA_RICHIESTA_UTENTE),this.checked2=!1})}domandaPDF(){return this.utentiService.getDomanda(this.datiDomanda.id,this.datiDomanda.datiAnagrafici.codiceFiscale)}startProtocollazioneAsincrona(){if(this.canProtocol=!1,this.hasPrivacyProtocollata)this.utentiService.protocollaDomanda(this.datiDomanda.id).subscribe(()=>{this.messages.add(r.a.getToast("tst-protocolla",r.b.success,this.translateService.instant("RICHIESTE_ACCESSO.protocollazioneInCarico")))},e=>{this.messages.add(r.a.getToast("tst",r.b.error,r.a.PROTOCOLLA_INFORMATIVA_ANTIMAFIA_ERROR)),this.canProtocol=!0});else{const e=this.getDocumentazioneInformativaPrivacy(),i=new Array;i.push(this.informativaPrivacyFirmataPDF),i.push(this.getInfoPrivacyFirmataXML()),(r.a.isUndefinedOrNull(this.persona)||r.a.isUndefinedOrNull(this.persona.id))&&(console.log("Persona non esistente; fornisco i dati per la creazione"),this.persona=new l.a,this.persona.codiceFiscale=this.datiAnagraficiUtente.codiceFiscale,this.persona.nome=this.datiAnagraficiUtente.nome,this.persona.cognome=this.datiAnagraficiUtente.cognome),this.utentiService.protocollaDomanda(this.datiDomanda.id).pipe(Object(o.a)(t=>this.utentiService.protocollaInformativaPrivacyDichiarazioneAntimafia(this.persona.nome,this.persona.cognome,this.persona.codiceFiscale,e,this.informativaPrivacyFile,i))).subscribe(e=>{this.messages.add(r.a.getToast("tst-protocolla",r.b.success,this.translateService.instant("RICHIESTE_ACCESSO.protocollazioneInCarico")))},e=>{this.messages.add(r.a.getToast("tst",r.b.error,r.a.PROTOCOLLA_DOMANDA_ACCESSO_ERROR))})}}getDocumentazioneInformativaPrivacy(){const e=this._configuration.ProtocollaPrivacyOggetto+" - "+this.datiAnagraficiUtente.nome+" "+this.datiAnagraficiUtente.cognome+" - "+this.datiAnagraficiUtente.codiceFiscale,i=this._configuration.tipologiaDocumentoProtocolloPrivacy,t={name:this.datiAnagraficiUtente.nome,surname:this.datiAnagraficiUtente.cognome,email:r.a.isUndefinedOrNull(this.datiAnagraficiUtente.email)?null:this.datiAnagraficiUtente.email,nationalIdentificationNumber:this.datiAnagraficiUtente.codiceFiscale,description:this.datiAnagraficiUtente.nome+" "+this.datiAnagraficiUtente.cognome+" - "+this.datiAnagraficiUtente.codiceFiscale};return JSON.stringify({mittente:t,oggetto:e,tipologiaDocumentoPrincipale:i})}onCloseMessageProtocolla(){window.location.href=this.configuration.IndexPage}getInfoPrivacyFirmataXML(){const e=atob(btoa(encodeURIComponent(this.firmaPrivacy.xml).replace(/%([0-9A-F]{2})/g,(e,i)=>String.fromCharCode(parseInt(i,16))))),i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);const t=new Uint8Array(i),a=new Blob([t],{type:"application/xml"});return console.log(a),this.blobToFile(a,"informativa_privacy_firmata.xml")}}return e.\u0275fac=function(i){return new(i||e)(n.Nb(b.a),n.Nb(v.a),n.Nb(n.j),n.Nb(R.d),n.Nb(d.a),n.Nb(J.b),n.Nb(R.d),n.Nb(d.a),n.Nb(U.e))},e.\u0275cmp=n.Hb({type:e,selectors:[["app-utente"]],viewQuery:function(e,i){var t;1&e&&n.Uc(ze,!0,n.O),2&e&&n.Ac(t=n.cc())&&(i.VCR=t.first)},decls:26,vars:8,consts:[[1,"ui-g","ui-fluid"],[1,"tophome"],[1,"ui-grid-fixed"],["key","tst"],["position","top-center","key","tst-protocolla","modal","true",3,"baseZIndex","onClose"],[1,"ui-g-12"],[3,"ngSubmit",4,"ngIf"],["fAutorizzazioni","ngForm"],[3,"disabled"],[1,"accordion-wrapper"],["header","Autorizzazioni",3,"selected"],["pTooltip","Dopo aver visualizzato i documenti Informativa privacy e Modulo richiesta accesso sar\xe0 possibile attivare la relativa Firma Accettazione e procedere con la protocollazione della richiesta","tooltipPosition","top",1,"boxgrey-user"],[1,"ui-g"],["pTemplate","header"],[1,"ui-g-9"],[1,"ui-g-3"],[1,"next-button"],["pButton","","icon","ui-icon-check","type","button","label","PROTOCOLLA RICHIESTA","pButton","",3,"disabled","click"],[3,"ngSubmit"],["f","ngForm"],["header","Anagrafica",3,"selected"],["pTooltip","I campi contrassegnati con l'asterisco sono obbligatori!","tooltipPosition","top",3,"disabled"],[1,"boxgrey-user"],[1,"ui-g-2"],[1,"ui-g-4"],["type","text","name","cognome","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","nome","required","","pInputText","",3,"ngModel","ngModelChange"],["type","text","name","codiceFiscale","pInputText","","required","","appValidaCf","",3,"ngModel","readonly","ngClass","ngModelChange"],["cfInput","ngModel"],[4,"ngIf"],["type","text","name","email","required","","appValidaEmail","","pInputText","",3,"ngModel","ngModelChange"],["emailinput","ngModel"],["type","text","name","telefono","required","","appValidaTelefono","","pInputText","",3,"ngModel","ngModelChange"],["telefonoinput","ngModel"],[1,"ui-g-6"],["header","Responsabilit\xe0",3,"selected"],["pTooltip","Selezionare la Responsabilit\xe0 e premere il pulsante Aggiungi (+)","tooltipPosition","top",1,"boxgrey-user"],[1,"ui-g-11"],["name","selectedResponsabilita",3,"options","ngModel","disabled","ngModelChange"],[1,"ui-g-1"],["pButton","","type","button","icon","ui-icon-add",3,"title","disabled","click"],["viewContainerRef",""],["header","Applicativi",3,"selected"],["pTooltip","Selezionare l'applicativo, o gli applicativi, desiderati. Se sono stati compilati tutti i dati, sar\xe0 possibile premere il pulsante Salva","tooltipPosition","top","escape","false",1,"boxgrey-user"],["name","applicativi","multiple","multiple","checkbox","checkbox","optionLabel","title","defaultLabel","Seleziona applicativo/i","required","",3,"filter","options","ngModel","disabled","ngModelChange"],[1,"ui-g-8"],[1,"back-button","sm"],["pButton","","icon","ui-icon-edit","type","button","label","Modifica","pButton","",1,"blue-grey-btn",3,"disabled","click"],[1,"next-button","sm"],["pButton","","icon","ui-icon-save","type","submit","label","Salva","pButton","",3,"disabled"],["class","ui-message ui-messages-error ui-corner-all",4,"ngIf"],[1,"ui-message","ui-messages-error","ui-corner-all"],[3,"routerLink","click"],["name","checked1",3,"ngModel","disabled","ngModelChange","onChange"],[3,"routerLink","click",4,"ngIf"],["name","checked2",3,"ngModel","disabled","ngModelChange","onChange"]],template:function(e,i){1&e&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"h4"),n.Oc(4,"CREAZIONE/MODIFICA PROFILO SISTEMA INFORMATIVO AGRICOLTURA"),n.Sb(),n.Sb(),n.Sb(),n.Ob(5,"p-toast",3),n.Tb(6,"p-toast",4),n.bc("onClose",(function(){return i.onCloseMessageProtocolla()})),n.Sb(),n.Tb(7,"div",2),n.Tb(8,"div",5),n.Mc(9,Ue,64,28,"form",6),n.Sb(),n.Tb(10,"div",5),n.Tb(11,"form",null,7),n.Tb(13,"fieldset",8),n.Tb(14,"div",9),n.Tb(15,"p-accordion"),n.Tb(16,"p-accordionTab",10),n.Tb(17,"div",11),n.Tb(18,"div",12),n.Tb(19,"div",5),n.Tb(20,"p-table"),n.Mc(21,we,19,7,"ng-template",13),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(22,"div",14),n.Tb(23,"div",15),n.Tb(24,"div",16),n.Tb(25,"button",17),n.bc("click",(function(){return i.startProtocollazioneAsincrona()})),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&e&&(n.Bb(5),n.Kc(n.rc(7,xe)),n.Bb(1),n.mc("baseZIndex",5e4),n.Bb(3),n.mc("ngIf",i.datiAnagraficiUtente),n.Bb(4),n.mc("disabled",!i.inserimentoDisabled),n.Bb(3),n.mc("selected",!0),n.Bb(9),n.mc("disabled",!(i.checked1&&i.checked2&&i.inserimentoDisabled&&i.canProtocol)))},directives:[I.a,V.t,y.I,y.t,y.u,Ee.a,Ee.c,Te.a,se.q,R.e,z.b,y.c,y.D,P.a,y.s,y.v,ve.a,V.q,Ae.a,Ce.a,Re.a,Ie.a,a.h,Oe.a],styles:[""]}),e})();var He=t("PcGO"),Ze=t("39Yt");const Ge=[{path:"",component:Ve,canActivate:[He.a]},{path:"modificaUtente",component:Ve,canActivate:[Ze.a]}];let qe=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(i){return new(i||e)},imports:[[a.i.forChild(Ge)]]}),e})();var Qe=t("R69K"),Ke=t("SLJP"),je=t("P028"),We=t("R5y+");let Je=(()=>{class e{}return e.\u0275mod=n.Lb({type:e}),e.\u0275inj=n.Kb({factory:function(i){return new(i||e)},providers:[v.a],imports:[[qe,Qe.a,Re.b,Ee.b,je.a,Ke.b,H.b,We.b]]}),e})()}}]);
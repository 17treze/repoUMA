(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{Fs4F:function(i,t,e){"use strict";e.r(t),e.d(t,"FascicoloDettaglioModule",(function(){return Tn}));class o{}var a=e("tk/3"),c=e("dkQB"),r=e("ofXK"),n=e("fXoL");let s=(()=>{class i{constructor(i,t){this.http=i,this.configuration=t,this.urlTerritorio=""+this.configuration.territorio_server,this.urlConduzioneTerreno=this.urlTerritorio+"/conduzione-terreno"}urlTipoConduzione(){return this.urlConduzioneTerreno+"/elenco-tipi-conduzione"}urlTitoloConduzione(i){return`${this.urlConduzioneTerreno}/salva/${i}`}getTipoConduzione(){return this.http.get(this.urlTipoConduzione())}putTitoloConduzione(i,t){t.documentiConduzione.forEach(i=>{i.dataInizioValidita=i.dataInizioValidita?Object(r.I)(i.dataInizioValidita,"yyyy-MM-dd","it-IT"):"",i.dataFineValidita=i.dataFineValidita?Object(r.I)(i.dataFineValidita,"yyyy-MM-dd","it-IT"):""});const e=new a.f({"Content-Type":"application/json"});return this.http.put(this.urlTitoloConduzione(i),JSON.stringify(t),{headers:e})}}return i.\u0275fac=function(t){return new(t||i)(n.Xb(a.b),n.Xb(c.a))},i.\u0275prov=n.Jb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var l=e("WpDp"),b=e("3Pt+"),d=e("cS1N"),u=e("Tn7N"),p=e("RtSl"),m=e("sYmb"),g=e("arS9"),h=e("A+aF"),f=e("yhG/"),T=e("A1Yd"),S=e("1SSY"),v=e("DYOT");function O(i,t){1&i&&n.Ob(0,"i",16)}function C(i,t){if(1&i){const i=n.Ub();n.Tb(0,"form",17),n.bc("ngSubmit",(function(){return n.Ec(i),n.fc().onSubmit()})),n.Tb(1,"div",18),n.Tb(2,"div",19),n.Tb(3,"label",20),n.Oc(4,"Tipologia"),n.Sb(),n.Tb(5,"p-dropdown",21),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectTipologia(t)})),n.Sb(),n.Sb(),n.Tb(6,"div",19),n.Tb(7,"label",22),n.Oc(8,"Sotto Tipologia"),n.Sb(),n.Tb(9,"p-dropdown",23),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectSottoTipologia(t)})),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.mc("formGroup",i.titoloConduzioneForm),n.Bb(5),n.mc("options",i.ambitoConduzioneList),n.Bb(4),n.mc("options",i.sottotipoConduzioneList)}}function I(i,t){1&i&&n.Ob(0,"i",16)}const A=function(){return{width:"50%"}};function F(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr",28),n.Tb(1,"td",29),n.Oc(2),n.Sb(),n.Tb(3,"td",30),n.Ob(4,"br"),n.Tb(5,"button",31),n.bc("click",(function(){n.Ec(i);const e=t.index;return n.fc(2).uploadFile("contratto",e)})),n.Sb(),n.Tb(6,"input",32),n.bc("change",(function(e){n.Ec(i);const o=t.index;return n.fc(2).onFileChange(e,o)})),n.Sb(),n.Tb(7,"button",33),n.bc("click",(function(){n.Ec(i);const e=t.index;return n.fc(2).downloadFile(e)})),n.Sb(),n.Sb(),n.Tb(8,"td",30),n.Oc(9," Data inizio validit\xe0: "),n.Ob(10,"p-calendar",34),n.Sb(),n.Tb(11,"td",30),n.Oc(12," Data fine validit\xe0: "),n.Ob(13,"p-calendar",35),n.Sb(),n.Sb()}if(2&i){const i=t.index,e=n.fc(2);n.mc("formGroupName",i),n.Bb(2),n.Qc(" ",e.documenti().at(i).get("descrizione").value," "),n.Bb(3),n.Kc(n.rc(15,A)),n.Db("button-custom-bar-dark"),n.Bb(1),n.nc("id","contratto"+i),n.nc("accept",e.fileExt),n.Bb(1),n.Kc(n.rc(16,A)),n.Db("button-custom-bar-dark"),n.mc("disabled",!e.disabledDownloadFile(i)),n.Bb(3),n.mc("locale",e.calendarService.localeITA),n.Bb(3),n.mc("locale",e.calendarService.localeITA)}}function M(i,t){if(1&i){const i=n.Ub();n.Tb(0,"form",24),n.bc("ngSubmit",(function(){return n.Ec(i),n.fc().onSubmit()})),n.Tb(1,"table",25),n.Tb(2,"tbody"),n.Tb(3,"tr"),n.Tb(4,"th",26),n.Oc(5,"Documenti necessari:"),n.Sb(),n.Sb(),n.Mc(6,F,14,17,"tr",27),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.mc("formGroup",i.documentiForm),n.Bb(6),n.mc("ngForOf",i.documenti().controls)}}function z(i,t){1&i&&n.Ob(0,"i",16)}function E(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr",28),n.Tb(1,"td"),n.Oc(2," Particella: "),n.Ob(3,"input",39),n.Sb(),n.Tb(4,"td"),n.Oc(5," Foglio: "),n.Ob(6,"input",40),n.Sb(),n.Tb(7,"td"),n.Oc(8," Sub: "),n.Ob(9,"input",41),n.Sb(),n.Tb(10,"td"),n.Oc(11," Sezione: "),n.Ob(12,"input",42),n.Sb(),n.Tb(13,"td"),n.Oc(14," Comune: "),n.Ob(15,"input",43),n.Sb(),n.Tb(16,"td"),n.Oc(17," Superficie: "),n.Ob(18,"input",44),n.Sb(),n.Tb(19,"td"),n.Ob(20,"br"),n.Tb(21,"button",45),n.bc("click",(function(){n.Ec(i);const e=t.index;return n.fc(2).removeParticella(e)})),n.Oc(22," Rimuovi "),n.Sb(),n.Sb(),n.Sb()}2&i&&n.mc("formGroupName",t.index)}function D(i,t){if(1&i){const i=n.Ub();n.Tb(0,"form",24),n.bc("ngSubmit",(function(){return n.Ec(i),n.fc().onSubmit()})),n.Tb(1,"table",36),n.Tb(2,"tbody"),n.Tb(3,"tr"),n.Tb(4,"th",37),n.Tb(5,"button",38),n.bc("click",(function(){return n.Ec(i),n.fc().addParticella()})),n.Oc(6," Aggiungi "),n.Sb(),n.Sb(),n.Sb(),n.Mc(7,E,23,1,"tr",27),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.mc("formGroup",i.particelleForm),n.Bb(7),n.mc("ngForOf",i.particelle().controls)}}const B=function(){return{marginTop:"70px"}},N=function(){return{width:"80vw",height:"90vh"}},y=function(){return{"overflow-y":"auto","overflow-x":"hidden"}};let P=(()=>{class i{constructor(i,t,e,o){this.calendarService=i,this.fb=t,this.messageService=e,this.translateService=o,this.chiudiPopup=new n.n,this.saveConduzione=new n.n,this.ambitoConduzioneList=[],this.sottotipoConduzioneList=[],this.listaModalitaPagamento=[],this.fileExt=".pdf"}ngOnInit(){this.setAmbitoOptions(),this.initForm(),this.READONLY_MODE=!1,this.calendarService.configITA()}setAmbitoOptions(){this.tipoConduzione.forEach(i=>{this.ambitoConduzioneList.push({label:""+i.ambito,value:i.ambito})})}initForm(i=null,t=!1){this.initTitoloConduzioneForm(i),this.initDocumentiForm(),this.initParticelleForm()}initTitoloConduzioneForm(i){this.titoloConduzioneForm=new b.j({ambito:new b.g({value:(null==i?void 0:i.ambito)?i.ambito:null,disabled:this.READONLY_MODE},[b.G.required]),sottotipo:new b.g({value:(null==i?void 0:i.idSottotipo)?i.idSottotipo:null,disabled:this.READONLY_MODE},[b.G.required])})}initParticelleForm(){this.particelleForm=this.fb.group({particelle:this.fb.array([])})}initDocumentiForm(){this.documentiForm=this.fb.group({documenti:this.fb.array([])})}particelle(){return this.particelleForm.get("particelle")}documenti(){return this.documentiForm.get("documenti")}newParticella(){return this.fb.group({particella:new b.g("",[b.G.required]),foglio:new b.g("",[b.G.required]),sub:new b.g("",[b.G.required]),sezione:new b.g("",[b.G.required]),comune:new b.g("",[b.G.required]),superficieCondotta:new b.g("",[b.G.required])})}newDocumento(i,t){return this.fb.group({idTipoDocumento:new b.g(i,[b.G.required]),descrizione:new b.g(t,[b.G.required]),contratto:new b.g("",[b.G.required]),dataInizioValidita:new b.g(""),dataFineValidita:new b.g("")})}addParticella(){this.particelle().push(this.newParticella())}addDocumento(i,t){this.documenti().push(this.newDocumento(i,t))}removeParticella(i){this.particelle().removeAt(i)}removeDocumento(i){this.documenti().removeAt(i)}closePopup(){this.chiudiPopup.emit(!1)}onSelectTipologia(i){this.sottotipoConduzioneList=[],this.titoloConduzioneForm.controls.sottotipo.setValue(null),this.tipoConduzione.filter(t=>t.ambito===i.value)[0].sottotipo.forEach(i=>{this.sottotipoConduzioneList.push({label:""+i.descrizione,value:i.id})})}onSelectSottoTipologia(i){this.initDocumentiForm(),this.tipoConduzione.filter(i=>i.ambito===this.titoloConduzioneForm.controls.ambito.value).map(t=>t.sottotipo.forEach(t=>{t.id===i.value&&t.documenti&&t.documenti.forEach(i=>{this.addDocumento(i.id,i.descrizione)})}))}uploadFile(i,t){this.openWindowsSelectFile(i,t)}openWindowsSelectFile(i,t){document.getElementById(i+t).click()}onFileChange(i,t){if(i.target.files&&i.target.files.length>0){const e=i.target.files[0],o=new d.a(this.fileExt,2);o.isValidFileExtension(e)?o.isValidFileSize(e)?(this.readByteFile(e).then(i=>{this.documenti().at(t).get("contratto").setValue(i)}),this.messageService.add(u.a.getToast("tst-dlg",u.b.success,u.a.UPLOAD_FILE_OK))):this.messageService.add(u.a.getToast("tst-dlg",u.b.error,u.a.UPLOAD_FILE_SIZE)):this.messageService.add(u.a.getToast("tst-dlg",u.b.error,u.a.UPLOAD_FILE_EXT))}}downloadFile(i){const t=this.base64ToBlob(this.documenti().at(i).get("contratto").value),e=URL.createObjectURL(t);window.open(e)}base64ToBlob(i){const t=atob(i),e=new Array(t.length);for(let a=0;a<t.length;a++)e[a]=t.charCodeAt(a);const o=new Uint8Array(e);return new Blob([o],{type:"application/pdf"})}disabledDownloadFile(i){return this.documenti().at(i).get("contratto").value}disabledDocumenti(){return this.titoloConduzioneForm.value.sottotipo&&this.documenti().controls.length>0}onSubmit(){if(this.titoloConduzioneForm.invalid)this.messageService.add(u.a.getToast("tst-dlg",u.b.warn,this.translateService.instant("TERRITORIO.TIPO_CONDUZIONE_MANDATORY")));else if(this.documentiForm.invalid)this.messageService.add(u.a.getToast("tst-dlg",u.b.warn,this.translateService.instant("TERRITORIO.DOCUMENTO_MANDATORY")));else if(0===this.particelleForm.get("particelle").value.length||this.particelleForm.invalid)this.messageService.add(u.a.getToast("tst-dlg",u.b.warn,this.translateService.instant("TERRITORIO.PARTICELLE_MANDATORY")));else{const i=new o;i.ambito=this.titoloConduzioneForm.controls.ambito.value,i.idSottotipo=this.titoloConduzioneForm.controls.sottotipo.value,i.documentiConduzione=this.documentiForm.get("documenti").value,i.particelleFondiarie=this.particelleForm.get("particelle").value,this.saveConduzione.emit(i)}}readByteFile(i){return new Promise((t,e)=>{const o=new FileReader;u.a.isUndefinedOrNull(i)&&e("Errore nell estrapolare i byte dal file");const a="Errore nell estrapolare i byte dal file "+i.name;let c;u.a.isUndefinedOrNull(i)?e(a):(o.readAsDataURL(i),o.onloadend=i=>{c=o.result,null==c?e(a):t(c.toString().split(",")[1])})})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(l.a),n.Nb(b.f),n.Nb(p.d),n.Nb(m.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-popup-nuovo-titolo-conduzione"]],inputs:{popupOpen:"popupOpen",cuaa:"cuaa",idValidazione:"idValidazione",tipoConduzione:"tipoConduzione"},outputs:{chiudiPopup:"chiudiPopup",saveConduzione:"saveConduzione"},decls:31,vars:30,consts:[["key","tst-dlg"],["id","popup-nuovo-titolo-conduzione","header","Titolo conduzione","position","center","styleClass","large-dialog",3,"visible","focusOnShow","modal","closable","closeOnEscape","blockScroll","contentStyle","dismissableMask","visibleChange","onHide"],["dialogNuovoTitoloConduzione",""],[1,"p-col-12","p-col-align-start","ui-fluid"],[1,"p-grid"],[1,"w-100",3,"multiple"],["accordion",""],["cache","false",3,"selected"],["class","accordion-icon pi pi-check",4,"ngIf"],["pTemplate","content"],["cache","false",3,"selected","disabled"],[1,"p-col-12","p-col-align-end","ui-fluid"],[1,"p-col-12"],[1,"ui-g-9","text-left"],[1,"ui-g-3","text-right"],["pButton","","type","submit","label","Salva titolo di conduzione",1,"ui-button-text-only","p-1","text-uppercase","font-weight-normal","shadow-none","w-10m",3,"disabled","click"],[1,"accordion-icon","pi","pi-check"],["novalidate","",3,"formGroup","ngSubmit"],[1,"p-grid","align-self-center"],[1,"p-col-6"],["for","tipologia-conduzione"],["id","tipologia-conduzione","formControlName","ambito","placeholder","Seleziona",3,"options","onChange"],["for","sotto-tipologia-conduzione"],["id","sotto-tipologia-conduzione","formControlName","sottotipo","placeholder","Seleziona",3,"options","onChange"],[3,"formGroup","ngSubmit"],["formArrayName","documenti",1,"table","table-bordered"],["colspan","4"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"formGroupName"],[2,"width","40%","vertical-align","middle"],[2,"width","20%"],["pButton","","type","button","label","Carica",3,"click"],["type","file",1,"form-control",2,"display","none",3,"id","accept","change"],["pButton","","type","button","label","Visualizza",3,"disabled","click"],["id","data-inizio-validita","formControlName","dataInizioValidita","dateFormat","dd/mm/yy",3,"locale"],["id","data-inizio-validita","formControlName","dataFineValidita","dateFormat","dd/mm/yy",3,"locale"],["formArrayName","particelle",1,"table","table-bordered"],["colspan","7",2,"border-top","hidden","border-left","hidden","border-right","hidden"],["type","button",1,"btn","btn-primary",3,"click"],["type","text","formControlName","particella",1,"form-control"],["type","text","formControlName","foglio",1,"form-control"],["type","text","formControlName","sub",1,"form-control"],["type","text","formControlName","sezione",1,"form-control"],["type","text","formControlName","comune",1,"form-control"],["type","text","formControlName","superficieCondotta",1,"form-control"],[1,"btn","btn-danger",3,"click"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"p-dialog",1,2),n.bc("visibleChange",(function(i){return t.popupOpen=i}))("onHide",(function(){return t.closePopup()})),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"p-accordion",5,6),n.Tb(7,"p-accordionTab",7),n.Tb(8,"p-header"),n.Oc(9," Tipo conduzione "),n.Mc(10,O,1,0,"i",8),n.Sb(),n.Mc(11,C,10,3,"ng-template",9),n.Sb(),n.Ob(12,"br"),n.Tb(13,"p-accordionTab",10),n.Tb(14,"p-header"),n.Oc(15," Documenti "),n.Mc(16,I,1,0,"i",8),n.Sb(),n.Mc(17,M,7,2,"ng-template",9),n.Sb(),n.Ob(18,"br"),n.Tb(19,"p-accordionTab",7),n.Tb(20,"p-header"),n.Oc(21," Particelle "),n.Mc(22,z,1,0,"i",8),n.Sb(),n.Mc(23,D,8,2,"ng-template",9),n.Sb(),n.Sb(),n.Ob(24,"br"),n.Sb(),n.Sb(),n.Tb(25,"div",11),n.Tb(26,"p-footer"),n.Tb(27,"div",12),n.Ob(28,"div",13),n.Tb(29,"div",14),n.Tb(30,"button",15),n.bc("click",(function(){return t.onSubmit()})),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(27,B)),n.Bb(1),n.Kc(n.rc(28,N)),n.Db(t.idValidazione?"title-grey":""),n.mc("visible",t.popupOpen)("focusOnShow",!1)("modal",!0)("closable",!0)("closeOnEscape",!0)("blockScroll",!0)("contentStyle",n.rc(29,y))("dismissableMask",!0),n.Bb(4),n.Db(t.idValidazione?"accordion-grey":""),n.mc("multiple",!0),n.Bb(2),n.mc("selected",!0),n.Bb(3),n.mc("ngIf",!1),n.Bb(3),n.mc("selected",t.disabledDocumenti())("disabled",!t.disabledDocumenti()),n.Bb(3),n.mc("ngIf",!1),n.Bb(3),n.mc("selected",!0),n.Bb(3),n.mc("ngIf",!1),n.Bb(8),n.Db(t.idValidazione?"button-custom-grey":""),n.mc("disabled",t.READONLY_MODE))},directives:[g.a,h.a,f.a,f.c,p.c,r.t,p.e,p.b,T.b,b.I,b.t,b.k,S.a,b.s,b.i,b.e,r.s,b.l,v.a,b.c],styles:[""]}),i})();var L=e("JdJL"),_=e("L66S"),R=e("+Rc2"),x=e("tyNb");const w=["popupNuovoTitoloConduzione"];function G(i,t){if(1&i){const i=n.Ub();n.Tb(0,"app-popup-nuovo-titolo-conduzione",16),n.bc("chiudiPopup",(function(t){return n.Ec(i),n.fc().popupConduzioneClose(t)}))("saveConduzione",(function(t){return n.Ec(i),n.fc().saveConduzione(t)}))("onHideDialog",(function(t){return n.Ec(i),n.fc().popupConduzioneClose(t)})),n.Sb()}if(2&i){const i=n.fc();n.mc("popupOpen",i.popupOpen)("cuaa",i.cuaa)("idValidazione",i.idValidazione)("tipoConduzione",i.tipoConduzione)}}const k=function(){return{marginTop:"70px"}};let V=(()=>{class i{constructor(i,t,e,o){this.fascicoloDettaglioService=i,this.territorioService=t,this.messageService=e,this.translateService=o,this.popupOpen=!1}ngOnInit(){const i=this.fascicoloDettaglioService.fascicoloCorrente.value.stato;this.readonly=i!==R.c.VALIDATO&&i!==R.c.IN_AGGIORNAMENTO||null!=this.idValidazione}goBack(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}isFascicoloAttuale(){return this.fascicoloDettaglioService.fascicoloCorrente&&null==this.idValidazione}popupConduzioneOpen(){this.territorioService.getTipoConduzione().subscribe(i=>{this.tipoConduzione=i,this.popupOpen=!0},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,this.translateService.instant("TERRITORIO.GET_ELENCO_TIPO_CONDUZIONE_MSG_ERROR")))})}popupConduzioneClose(){this.popupOpen=!1}getCuaa(){var i,t;return null===(t=null===(i=this.fascicoloDettaglioService.fascicoloCorrente)||void 0===i?void 0:i.value)||void 0===t?void 0:t.cuaa}saveConduzione(i){this.territorioService.putTitoloConduzione(this.getCuaa(),i).subscribe(i=>{this.popupConduzioneClose(),this.messageService.add(u.a.getToast("tst",u.b.success,this.translateService.instant("TERRITORIO.PUT_TITOLO_CONDUZIONE_SUCCESS")))},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,this.translateService.instant("TERRITORIO.PUT_TITOLO_CONDUZIONE_ERROR")))})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(L.a),n.Nb(s),n.Nb(p.d),n.Nb(m.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-titoli-conduzione"]],viewQuery:function(i,t){var e;1&i&&n.Uc(w,!0),2&i&&n.Ac(e=n.cc())&&(t.popupNuovoTitoloConduzione=e.first)},decls:20,vars:15,consts:[[3,"popupOpen","cuaa","idValidazione","tipoConduzione","chiudiPopup","saveConduzione","onHideDialog",4,"ngIf"],["key","tst"],[1,"ui-grid-fixed","boxgrey"],[1,"funzioni-grid","boxgrey"],[1,"p-grid","m-0"],[1,"p-col","p-0"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-dotazione.jpg"],[1,"ml-2"],[1,"p-col","w-100","p-0"],[1,"p-col-fixed","p-0"],["pButton","","icon","pi pi-plus-circle","iconPos","right","type","button","label","AGGIUNGI",1,"w-10m","button-large-icon",3,"disabled","click"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["expandIcon","","collapseIcon",""],["header","TITOLI CONDUZIONE",3,"selected"],[3,"popupOpen","cuaa","idValidazione","tipoConduzione","chiudiPopup","saveConduzione","onHideDialog"]],template:function(i,t){1&i&&(n.Mc(0,G,1,4,"app-popup-nuovo-titolo-conduzione",0),n.Ob(1,"p-toast",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"a",6),n.bc("click",(function(){return t.goBack()})),n.Ob(7,"i",7),n.Ob(8,"img",8),n.Tb(9,"span",9),n.Oc(10),n.gc(11,"translate"),n.Sb(),n.Sb(),n.Sb(),n.Ob(12,"div",10),n.Tb(13,"div",11),n.Tb(14,"button",12),n.bc("click",(function(){return t.popupConduzioneOpen()})),n.Sb(),n.Sb(),n.Sb(),n.Ob(15,"br"),n.Tb(16,"div",13),n.Tb(17,"p-accordion",14),n.Tb(18,"p-accordionTab",15),n.Oc(19," TODO: lista titoli di conduzione "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.mc("ngIf",t.popupOpen),n.Bb(1),n.Kc(n.rc(14,k)),n.Bb(8),n.Db(t.isFascicoloAttuale()?"":"back-grey"),n.Bb(1),n.Qc(" ",n.hc(11,12,"FascicoloAziendale.TERRITORIO")," "),n.Bb(4),n.Db(t.isFascicoloAttuale()?"":"button-custom-grey"),n.mc("disabled",t.readonly),n.Bb(4),n.Db(t.isFascicoloAttuale()?"":"title-grey"),n.mc("selected",!0))},directives:[r.t,g.a,x.h,T.b,f.a,f.c,P],pipes:[m.d],styles:[""]}),i})();var U=e("XNiG"),q=e("EY2u"),Q=e("1G5W"),Z=e("JIr8"),$=e("zLRh"),j=e("yWug");function Y(i,t){if(1&i&&n.Ob(0,"p-sortIcon",15),2&i){const i=n.fc().$implicit;n.mc("field",i.field)}}function H(i,t){if(1&i&&(n.Tb(0,"th",13),n.Oc(1),n.Mc(2,Y,1,1,"p-sortIcon",14),n.Sb()),2&i){const i=t.$implicit;n.mc("pSortableColumn",i.field),n.Bb(1),n.Qc(" ",i.header," "),n.Bb(1),n.mc("ngIf",i.field)}}function K(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"th",11),n.Oc(2,"ID"),n.Sb(),n.Mc(3,H,3,3,"th",12),n.Sb()),2&i){const i=t.$implicit;n.Bb(3),n.mc("ngForOf",i)}}function W(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.gc(3,"date"),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.Sb(),n.Tb(6,"td"),n.Oc(7),n.gc(8,"date"),n.Sb(),n.Tb(9,"td"),n.Oc(10),n.Sb(),n.Tb(11,"td"),n.Oc(12),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.Qc(" ",n.ic(3,5,i.dataInizio,"dd/MM/yyyy")," "),n.Bb(3),n.Pc(i.motivazioneInizio),n.Bb(2),n.Qc(" ",n.ic(8,8,i.dataFine,"dd/MM/yyyy")," "),n.Bb(3),n.Pc(i.motivazioneFine),n.Bb(2),n.Pc(i.utente)}}function X(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.gc(3,"translate"),n.Sb(),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Cb("colspan",i.cols.length),n.Bb(1),n.Qc(" ",n.hc(3,2,"FascicoloAziendale.LISTA_NO_ELEMENTI")," ")}}const J=function(){return{marginTop:"70px"}};let ii=(()=>{class i{constructor(i,t,e,o,a,c){this.route=i,this.fascicoloService=t,this.fascicoloDettaglioService=e,this.messageService=o,this.router=a,this.translateService=c,this.sospensioniList=[],this.cuaa="",this.componentDestroyed$=new U.a}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}ngOnInit(){this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.getDatiSospensione(this.cuaa),this.setCols()}setCols(){this.cols=[{field:"dataInizio",header:this.translateService.instant("SOSPENSIONE.DATA_INIZIO"),date:!0},{field:"motivazioneInizio",header:this.translateService.instant("SOSPENSIONE.MOTIVAZIONE_INIZIO")},{field:"dataFine",header:this.translateService.instant("SOSPENSIONE.DATA_FINE"),date:!0},{field:"motivazioneFine",header:this.translateService.instant("SOSPENSIONE.MOTIVAZIONE_FINE")},{field:"utente",header:"Utente"}]}getDatiSospensione(i){this.fascicoloService.getDatiSospensioneFascicolo(i).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.sospensioniList=[],this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreRecuperoDati)),q.a))).subscribe(i=>{this.sospensioniList=i,this.sospensioniList.sort((i,t)=>i.dataInizio<t.dataInizio?1:-1)})}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(x.a),n.Nb($.a),n.Nb(L.a),n.Nb(p.d),n.Nb(x.e),n.Nb(m.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-dati-sospensione"]],decls:16,vars:12,consts:[["key","tst"],[1,"ui-grid-fixed","boxgrey"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-anagraf.jpg"],[1,"ml-2"],[1,"mb-3"],[3,"columns","value","autoLayout"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"display","none"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"a",2),n.bc("click",(function(){return t.handleClick()})),n.Ob(3,"em",3),n.Ob(4,"img",4),n.Tb(5,"span",5),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Sb(),n.Ob(8,"br"),n.Tb(9,"h3",6),n.Oc(10),n.gc(11,"translate"),n.Sb(),n.Tb(12,"p-table",7),n.Mc(13,K,4,1,"ng-template",8),n.Mc(14,W,13,11,"ng-template",9),n.Mc(15,X,4,4,"ng-template",10),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(11,J)),n.Bb(6),n.Qc(" ",n.hc(7,7,"FascicoloAziendale.DATI_ANAGRAFICI_E_FISCALI")," "),n.Bb(4),n.Pc(n.hc(11,9,"FascicoloAziendale.DATI_SOSPENSIONE")),n.Bb(2),n.mc("columns",t.cols)("value",t.sospensioniList)("autoLayout",!0))},directives:[g.a,x.h,j.q,p.e,r.s,j.p,r.t,j.o],pipes:[m.d,r.f],styles:[""]}),i})();var ti=e("R69K"),ei=e("69Tm"),oi=e("t5SA"),ai=e("6b9K"),ci=e("eM/+"),ri=e("GLSp"),ni=e("P028");function si(i,t){1&i&&n.Ob(0,"p-message",18)}class li{}let bi=(()=>{class i{constructor(i){this.fascicoloDettaglioService=i,this.search=new n.n,this.language=ci.a.itCalendar()}ngOnInit(){this.filtersFormGroup=new b.j({annoValidazione:new b.g})}onSubmit(){const i=new li,t=this.filtersFormGroup.get("annoValidazione").value;t&&(i.annoValidazione=t),this.search.emit(i)}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(L.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-filtro-fascicoli-validati"]],inputs:{resultsNumber:"resultsNumber"},outputs:{search:"search"},decls:27,vars:21,consts:[[1,"ui-grid-fixed","boxwhite"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-home.jpg"],[1,"ml-2"],[1,"text-uppercase","fw-700","fs-20"],[1,"boxgrey","mb-0","pb-0"],[1,"h5","text-uppercase","font-weight-bold","my-4"],[3,"formGroup","ngSubmit","keydown.enter"],[1,"ui-grid-fixed"],[1,"p-grid"],[1,"p-col-2"],["formControlName","annoValidazione","pattern","^([0-9])+$","type","text","pInputText","",1,"form-control",2,"background","white","text-align","center",3,"placeholder","maxlength","minlength"],[1,"searchbutton","h-100"],["pButton","","type","button","type","submit",1,"ui-button","bg-primary","no-shadow","text-uppercase","w-100","h-100",3,"disabled","label"],["submitBtn",""],["class","font-12","severity","error","text","Formato non valido",4,"ngIf"],[1,"labelricerca","my-3"],["severity","error","text","Formato non valido",1,"font-12"]],template:function(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",0),n.Tb(1,"a",1),n.bc("click",(function(){return t.handleClick()})),n.Ob(2,"em",2),n.Ob(3,"img",3),n.Tb(4,"span",4),n.Tb(5,"strong",5),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(8,"div",6),n.Tb(9,"h1",7),n.Oc(10),n.gc(11,"translate"),n.Sb(),n.Tb(12,"form",8),n.bc("ngSubmit",(function(){return t.onSubmit()}))("keydown.enter",(function(){return n.Ec(i),n.Bc(21).click()})),n.Tb(13,"div",9),n.Tb(14,"div",10),n.Tb(15,"div",11),n.Ob(16,"input",12),n.gc(17,"translate"),n.Sb(),n.Tb(18,"div",11),n.Tb(19,"div",13),n.Ob(20,"button",14,15),n.gc(22,"translate"),n.Sb(),n.Sb(),n.Sb(),n.Mc(23,si,1,0,"p-message",16),n.Sb(),n.Tb(24,"label",17),n.Oc(25),n.gc(26,"translate"),n.Sb(),n.Sb(),n.Sb()}2&i&&(n.Bb(6),n.Pc(n.hc(7,11,"FascicoloAziendale.STORICO_VALIDAZIONI")),n.Bb(4),n.Qc(" ",n.hc(11,13,"FascicoloAziendale.RICERCA_FASCICOLI_VALIDATI")," "),n.Bb(2),n.mc("formGroup",t.filtersFormGroup),n.Bb(4),n.nc("placeholder",n.hc(17,15,"FascicoloAziendale.ANNO_VALIDAZIONE")),n.mc("maxlength",4)("minlength",4),n.Bb(4),n.nc("label",n.hc(22,17,"DOMANDA_UNICA_FILTRI.filter")),n.mc("disabled",!t.filtersFormGroup.valid),n.Bb(3),n.mc("ngIf",null==t.filtersFormGroup.get("annoValidazione").errors?null:t.filtersFormGroup.get("annoValidazione").errors.pattern),n.Bb(2),n.Rc(" ",t.resultsNumber," ",n.hc(26,19,"FascicoloAziendale.FASCICOLI_VALIDATI")," "))},directives:[x.h,b.I,b.t,b.k,b.c,b.s,b.i,b.z,ri.a,b.n,b.o,T.b,r.t,ni.b],pipes:[m.d],styles:[""]}),i})();var di=e("Rt+w");function ui(i,t){1&i&&(n.Tb(0,"tr"),n.Tb(1,"th",10),n.Oc(2),n.gc(3,"translate"),n.Ob(4,"p-sortIcon-wrapper",11),n.Sb(),n.Tb(5,"th",12),n.Oc(6),n.gc(7,"translate"),n.Ob(8,"p-sortIcon-wrapper",13),n.Sb(),n.Tb(9,"th",14),n.Oc(10),n.gc(11,"translate"),n.Ob(12,"p-sortIcon-wrapper",15),n.Sb(),n.Tb(13,"th",16),n.Oc(14),n.gc(15,"translate"),n.Sb(),n.Tb(16,"th",16),n.Oc(17),n.gc(18,"translate"),n.Sb(),n.Sb()),2&i&&(n.Bb(2),n.Qc(" ",n.hc(3,5,"FascicoloAziendale.DATA_VALIDAZIONE")," "),n.Bb(4),n.Qc(" ",n.hc(7,7,"FascicoloAziendale.DATA_MODIFICA")," "),n.Bb(4),n.Qc(" ",n.hc(11,9,"FascicoloAziendale.UTENTE_VALIDAZIONE")," "),n.Bb(4),n.Pc(n.hc(15,11,"SEDE_SPORTELLO_CAA")),n.Bb(3),n.Pc(n.hc(18,13,"VEDI")))}function pi(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.gc(3,"date"),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.gc(6,"date"),n.Sb(),n.Tb(7,"td"),n.Oc(8),n.Sb(),n.Tb(9,"td"),n.Oc(10),n.Sb(),n.Tb(11,"td"),n.Tb(12,"button",17),n.bc("click",(function(){n.Ec(i);const e=t.$implicit;return n.fc().goToValidazione(e.cuaa,e.idValidazione)})),n.gc(13,"translate"),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit;n.Bb(2),n.Pc(n.ic(3,5,i.dataValidazione,"dd/MM/yyyy")),n.Bb(3),n.Pc(n.ic(6,8,i.dataModifica,"dd/MM/yyyy")),n.Bb(3),n.Qc(" ",i.utenteValidazione," "),n.Bb(2),n.Pc(i.denominazioneSportello),n.Bb(2),n.nc("title",n.hc(13,11,"VEDI"))}}function mi(i,t){1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.gc(3,"translate"),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.Cb("colspan",5),n.Bb(1),n.Qc(" ",n.hc(3,2,"FascicoloAziendale.LISTA_NO_ELEMENTI")," "))}let gi=(()=>{class i{constructor(i,t,e,o,a){this.route=i,this.fascicoloService=t,this.paginatorService=e,this.messageService=o,this.router=a,this.validazioniFascicoloList=[],this.elementiPerPagina=0,this.elementiTotali=0,this.componentDestroyed$=new U.a,this.lastEvent=void 0}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}ngOnInit(){this.elementiPerPagina=ei.a.defaultStartIndexPaginator}goToValidazione(i,t){this.router.navigate(["../dettaglio"],{relativeTo:this.route.parent,replaceUrl:!1,queryParams:{"id-validazione":t},queryParamsHandling:"merge"})}loadList(i){let t;const e=i.sortField||"dataValidazione";i.sortField&&(t=1===i.sortOrder?ai.b.ASC:ai.b.DESC);const o=this.paginatorService.getPagination(Math.round(i.first/this.elementiPerPagina),this.elementiPerPagina,e,t||ai.b.DESC),a=this.route.snapshot.paramMap.get("cuaa");this.fascicoloService.getFascicoliValidati(a,i.filters,o).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreRecuperoDati)),this.validazioniFascicoloList=[],q.a))).subscribe(i=>{this.validazioniFascicoloList=i.risultati,this.elementiTotali=i.count})}lazyLoadData(i){this.lastEvent&&(i.filters=this.lastEvent.filters),this.lastEvent=i,i.rows&&(this.elementiPerPagina=i.rows),this.loadList(i)}onSearch(i){const t=this.lastEvent;t.filters=i,this.loadList(t)}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(x.a),n.Nb($.a),n.Nb(oi.a),n.Nb(p.d),n.Nb(x.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-fascicoli-validati"]],decls:10,vars:4,consts:[[1,"ui-grid-fixed","boxgrey"],[3,"resultsNumber","search"],[1,"boxgrey","pt-0"],[1,"layout-actionmenu"],["margin-top","30px",1,"table-responsive"],[3,"value","totalRecords","lazy","onLazyLoadPage"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["scope","col","pSortableColumnWrapper","dataValidazione"],["field","dataValidazione"],["scope","col","pSortableColumnWrapper","dataModifica"],["field","dataModifica"],["id","nominativo_validatore","pSortableColumnWrapper","utenteValidazione"],["field","utenteValidazione"],["scope","col"],["pButton","","icon","pi pi-arrow-right","iconPos","left",1,"command-button","no-border-radius","p-button-lg","py-1","px-4","d-block","bg-primary",3,"title","click"]],template:function(i,t){1&i&&(n.Tb(0,"div",0),n.Tb(1,"app-filtro-fascicoli-validati",1),n.bc("search",(function(i){return t.onSearch(i)})),n.Sb(),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"app-a4g-paged-table",5,6),n.bc("onLazyLoadPage",(function(i){return t.lazyLoadData(i)})),n.Mc(7,ui,19,15,"ng-template",7),n.Mc(8,pi,14,13,"ng-template",8),n.Mc(9,mi,4,4,"ng-template",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.mc("resultsNumber",t.elementiTotali),n.Bb(4),n.mc("value",t.validazioniFascicoloList)("totalRecords",t.elementiTotali)("lazy",!0))},directives:[bi,di.b,p.e,di.f,di.e,T.b],pipes:[m.d,r.f],styles:[".command-button.command-button.command-button[_ngcontent-%COMP%]{font-size:22px!important;height:auto!important;width:auto!important;background-color:#4caf50!important}"]}),i})();var hi=e("Lsrs");class fi extends hi.a{}var Ti=e("GtbX"),Si=function(i){return i[i.PRIMARIO_IMPRESA=0]="PRIMARIO_IMPRESA",i[i.PRIMARIO=1]="PRIMARIO",i[i.SECONDARIO=2]="SECONDARIO",i}({}),vi=function(i){return i.ANAGRAFE_TRIBUTARIA="ANAGRAFE_TRIBUTARIA",i.CAMERA_COMMERCIO="CAMERA_COMMERCIO",i}({}),Oi=function(i){return i.CORRETTO="CORRETTO",i.NON_TROVATO_IN_AT="NON_TROVATO_IN_AT",i.PARIX_DIVERSO_DA_AT="PARIX_DIVERSO_DA_AT",i}({}),Ci=e("LvDl"),Ii=e("LRne"),Ai=e("eIep"),Fi=e("vkgz"),Mi=e("d4kU"),zi=e("b7oP"),Ei=e("wcdC");const Di=["tableFisiche"],Bi=["tableGiuridiche"];function Ni(i,t){if(1&i&&(n.Tb(0,"th"),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.Pc(i.header)}}function yi(i,t){if(1&i&&(n.Tb(0,"tr"),n.Mc(1,Ni,3,1,"th",17),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.mc("ngForOf",i)}}function Pi(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.gc(2,"date"),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Qc(" ",i.dataInizio?i.descrizione+" dal "+n.ic(2,1,i.dataInizio,"dd/MM/yyyy"):i.descrizione," ")}}function Li(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"a",18),n.Ob(3,"i",19),n.Sb(),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.Sb(),n.Tb(6,"td"),n.Oc(7),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.Sb(),n.Tb(10,"td"),n.Mc(11,Pi,3,4,"div",17),n.Sb(),n.Tb(12,"td"),n.Oc(13),n.gc(14,"translate"),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=t.expanded,o=n.fc();n.Bb(2),n.mc("pRowToggler",i),n.Bb(1),n.mc("ngClass",e?"pi pi-chevron-down":"pi pi-chevron-right"),n.Bb(2),n.Pc(i.cognome),n.Bb(2),n.Pc(i.nome),n.Bb(2),n.Pc(i.codiceFiscale),n.Bb(2),n.mc("ngForOf",i.cariche),n.Bb(2),n.Qc(" ",n.hc(14,7,i.verificaCodiceFiscale&&i.verificaCodiceFiscale!=o.verificaCodiceFiscaleEnum.CORRETTO?"FascicoloAziendale."+i.verificaCodiceFiscale:"")," ")}}function _i(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"tbody"),n.Tb(3,"tr"),n.Tb(4,"th"),n.Oc(5,"Dati persona fisica"),n.Sb(),n.Ob(6,"th"),n.Sb(),n.Tb(7,"tr"),n.Tb(8,"td"),n.Oc(9,"Cognome:"),n.Sb(),n.Tb(10,"td"),n.Oc(11),n.Sb(),n.Sb(),n.Tb(12,"tr"),n.Tb(13,"td"),n.Oc(14,"Nome:"),n.Sb(),n.Tb(15,"td"),n.Oc(16),n.Sb(),n.Sb(),n.Tb(17,"tr"),n.Tb(18,"td"),n.Oc(19,"Codice Fiscale:"),n.Sb(),n.Tb(20,"td"),n.Oc(21),n.Sb(),n.Sb(),n.Tb(22,"tr"),n.Tb(23,"td"),n.Oc(24,"Sesso:"),n.Sb(),n.Tb(25,"td"),n.Oc(26),n.Sb(),n.Sb(),n.Tb(27,"tr"),n.Tb(28,"td"),n.Oc(29,"Luogo di nascita:"),n.Sb(),n.Tb(30,"td"),n.Oc(31),n.Sb(),n.Sb(),n.Tb(32,"tr"),n.Tb(33,"td"),n.Oc(34,"Data di nascita:"),n.Sb(),n.Tb(35,"td"),n.Oc(36),n.gc(37,"date"),n.Sb(),n.Sb(),n.Ob(38,"br"),n.Tb(39,"tr"),n.Tb(40,"th"),n.Oc(41,"Domicilio fiscale"),n.Sb(),n.Ob(42,"th"),n.Sb(),n.Tb(43,"tr"),n.Tb(44,"td"),n.Oc(45,"Indirizzo:"),n.Sb(),n.Tb(46,"td"),n.Oc(47),n.Sb(),n.Sb(),n.Tb(48,"tr"),n.Tb(49,"td"),n.Oc(50,"Comune:"),n.Sb(),n.Tb(51,"td"),n.Oc(52),n.Sb(),n.Sb(),n.Tb(53,"tr"),n.Tb(54,"td"),n.Oc(55,"CAP:"),n.Sb(),n.Tb(56,"td"),n.Oc(57),n.Sb(),n.Sb(),n.Tb(58,"tr"),n.Tb(59,"td"),n.Oc(60,"Provincia:"),n.Sb(),n.Tb(61,"td"),n.Oc(62),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i){const i=n.fc(),t=i.columns,e=i.$implicit,o=n.fc();n.Bb(1),n.Cb("colspan",t.length),n.Bb(10),n.Pc(e.cognome),n.Bb(5),n.Pc(e.nome),n.Bb(5),n.Pc(e.codiceFiscale),n.Bb(5),n.Qc(" ",e.sesso?e.sesso:"ND"," "),n.Bb(5),n.Rc(" ",e.comuneNascita?e.comuneNascita:"ND"," (",e.siglaProvinciaNascita?e.siglaProvinciaNascita:"ND",") "),n.Bb(5),n.Qc(" ",e.dataNascita&&e.dataNascita?n.ic(37,12,e.dataNascita,"dd/MM/yyyy"):"ND"," "),n.Bb(11),n.Qc(" ",e.domicilioFiscale?o.costruisciIndirizzo(e.domicilioFiscale):"ND"," "),n.Bb(5),n.Qc(" ",e.domicilioFiscale.comune?e.domicilioFiscale.comune:"ND"," "),n.Bb(5),n.Qc(" ",e.domicilioFiscale.cap?e.domicilioFiscale.cap:"ND"," "),n.Bb(5),n.Qc(" ",e.domicilioFiscale.provincia?e.domicilioFiscale.provincia:"ND"," ")}}function Ri(i,t){1&i&&n.Mc(0,_i,63,15,"ng-template",20),2&i&&n.mc("ngIf",t.$implicit)}function xi(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length)}}function wi(i,t){if(1&i&&(n.Tb(0,"th"),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.Pc(i.header)}}function Gi(i,t){if(1&i&&(n.Tb(0,"tr"),n.Mc(1,wi,3,1,"th",17),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.mc("ngForOf",i)}}function ki(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.gc(2,"date"),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Qc(" ",i.dataInizio?i.descrizione+" dal "+n.ic(2,1,i.dataInizio,"dd/MM/yyyy"):i.descrizione," ")}}function Vi(i,t){if(1&i&&(n.Tb(0,"tr",21),n.Tb(1,"td"),n.Tb(2,"a",18),n.Ob(3,"i",19),n.Sb(),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.Sb(),n.Tb(6,"td"),n.Oc(7),n.Sb(),n.Tb(8,"td"),n.Mc(9,ki,3,4,"div",17),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=t.expanded;n.mc("pSelectableRow",i),n.Bb(2),n.mc("pRowToggler",i),n.Bb(1),n.mc("ngClass",e?"pi pi-chevron-down":"pi pi-chevron-right"),n.Bb(2),n.Qc(" ",i.denominazione," "),n.Bb(2),n.Qc(" ",i.codiceFiscale," "),n.Bb(2),n.mc("ngForOf",i.cariche)}}function Ui(i,t){1&i&&n.Ob(0,"tr")}function qi(i,t){1&i&&n.Mc(0,Ui,1,0,"ng-template",20),2&i&&n.mc("ngIf",t.$implicit)}function Qi(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length)}}const Zi=function(){return{marginTop:"70px"}},$i=function(i,t,e){return[i,t,e,"descrizione","dataInizio"]},ji=function(i,t){return[i,t,"descrizione","dataInizio"]};let Yi=(()=>{class i{constructor(i,t){this.anagraficaFascicoloService=i,this.route=t,this.verificaCodiceFiscaleEnum=Oi,this.cuaa="",this.idValidazione=void 0,this.componentDestroyed$=new U.a}ngOnInit(){this.setCols(),this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.route.queryParams.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{const t=i["id-validazione"];this.idValidazione=t?Number.parseInt(t):0,this.getPersoneFisicheConCarica(this.cuaa,this.idValidazione),this.getPersoneGiuridicheConCarica(this.cuaa,this.idValidazione)})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}setCols(){this.cols=[{field:"",header:""},{field:"cognome",header:"Cognome"},{field:"nome",header:"Nome"},{field:"codiceFiscale",header:"Codice Fiscale"},{field:"cariche",header:"Carica"},{field:"verificaCodiceFiscale",header:"Anomalie"}],this.cols2=[{field:"",header:""},{field:"denominazione",header:"Denominazione"},{field:"codiceFiscale",header:"Codice Fiscale"},{field:"cariche",header:"Carica"}]}getPersoneFisicheConCarica(i,t){this.anagraficaFascicoloService.getPersoneFisicheConCarica(i,t).subscribe(i=>{this.personaFisicaConCarica=i,this.personaFisicaConCarica||(this.personaFisicaConCarica=[]),this.personaFisicaConCarica&&this.personaFisicaConCarica.length>0&&this.personaFisicaConCarica.sort((i,t)=>i.cognome>t.cognome?1:i.cognome<t.cognome?-1:0),this.ordinaPersoneFisicheDataCariche()},i=>{this.personaFisicaConCarica=[]})}getPersoneGiuridicheConCarica(i,t){this.anagraficaFascicoloService.getPersoneGiuridicheConCarica(i,t).subscribe(i=>{this.personaGiuridicaConCarica=i,this.personaGiuridicaConCarica||(this.personaGiuridicaConCarica=[]),this.personaGiuridicaConCarica&&this.personaGiuridicaConCarica.length>0&&this.personaGiuridicaConCarica.sort((i,t)=>i.denominazione>t.denominazione?1:i.denominazione<t.denominazione?-1:0),this.ordinaPersoneGiuridicheDataCariche()},i=>{this.personaGiuridicaConCarica=[]})}ordinaPersoneFisicheDataCariche(){this.personaFisicaConCarica.forEach(i=>{i.cariche&&i.cariche.length>0&&i.cariche.sort((i,t)=>i.dataInizio>t.dataInizio?1:i.dataInizio<t.dataInizio?-1:0)})}ordinaPersoneGiuridicheDataCariche(){this.personaGiuridicaConCarica.forEach(i=>{i.cariche&&i.cariche.length>0&&i.cariche.sort((i,t)=>i.dataInizio>t.dataInizio?1:i.dataInizio<t.dataInizio?-1:0)})}costruisciIndirizzo(i){let t="";const e=i&&i.frazione||null,o=i&&i.toponimo||null,a=i&&i.via||null,c=i&&i.civico||null;return e&&(t=t+e+" "),o&&(t=t+o+" "),a&&(t=t+a+", "),c&&(t+=c),t}filter(i){this.tableFisiche.value.forEach(i=>{i.descrizione=i.cariche[0].descrizione,i.dataInizio=i.cariche[0].dataInizio}),this.tableFisiche.filterGlobal(i.target.value,"contains"),this.tableGiuridiche.value.forEach(i=>{i.descrizione=i.cariche[0].descrizione,i.dataInizio=i.cariche[0].dataInizio}),this.tableGiuridiche.filterGlobal(i.target.value,"contains")}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ti.a),n.Nb(x.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-persone-con-carica"]],viewQuery:function(i,t){var e;1&i&&(n.Jc(Di,!0),n.Jc(Bi,!0)),2&i&&(n.Ac(e=n.cc())&&(t.tableFisiche=e.first),n.Ac(e=n.cc())&&(t.tableGiuridiche=e.first))},decls:25,vars:24,consts:[["key","tst"],[1,"funzioni-grid","boxgrey"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],[1,"ui-g"],[1,"ui-g-12"],[1,"globalfilter"],[1,"material-icons"],["type","text","pInputText","","size","50","placeholder","Ricerca...",1,"filter",2,"width","auto",3,"input"],["header","PERSONE FISICHE",3,"selected"],["expandableRows","true","dataKey","codiceFiscale",3,"columns","value","autoLayout","paginator","responsive","globalFilterFields"],["tableFisiche",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["header","PERSONE GIURIDICHE",3,"selected"],["tableGiuridiche",""],[4,"ngFor","ngForOf"],["href","#",3,"pRowToggler"],[3,"ngClass"],[3,"ngIf"],[3,"pSelectableRow"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"i",6),n.Oc(7,"search"),n.Sb(),n.Tb(8,"input",7),n.bc("input",(function(i){return t.filter(i)})),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(9,"p-accordion"),n.Tb(10,"p-accordionTab",8),n.Tb(11,"p-table",9,10),n.Mc(13,yi,2,1,"ng-template",11),n.Mc(14,Li,15,9,"ng-template",12),n.Mc(15,Ri,1,1,"ng-template",13),n.Mc(16,xi,3,1,"ng-template",14),n.Sb(),n.Sb(),n.Sb(),n.Tb(17,"p-accordion"),n.Tb(18,"p-accordionTab",15),n.Tb(19,"p-table",9,16),n.Mc(21,Gi,2,1,"ng-template",11),n.Mc(22,Vi,10,6,"ng-template",12),n.Mc(23,qi,1,1,"ng-template",13),n.Mc(24,Qi,3,1,"ng-template",14),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(16,Zi)),n.Bb(10),n.mc("selected",!0),n.Bb(1),n.mc("columns",t.cols)("value",t.personaFisicaConCarica)("autoLayout",!0)("paginator",!1)("responsive",!0)("globalFilterFields",n.uc(17,$i,t.cols[1].field,t.cols[2].field,t.cols[3].field)),n.Bb(7),n.mc("selected",!0),n.Bb(1),n.mc("columns",t.cols2)("value",t.personaGiuridicaConCarica)("autoLayout",!0)("paginator",!1)("responsive",!0)("globalFilterFields",n.tc(21,ji,t.cols2[1].field,t.cols2[2].field)))},directives:[g.a,ri.a,f.a,f.c,j.q,p.e,r.s,j.k,r.q,r.t,j.m],pipes:[m.d,r.f],styles:[""]}),i})();var Hi=e("OSEj");function Ki(i,t){if(1&i&&(n.Tb(0,"th",12),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Ob(3,"p-sortIcon",13),n.Sb()),2&i){const i=t.$implicit;n.mc("pSortableColumn",i.field)("pSortableColumnDisabled",null==i.field),n.Bb(2),n.Pc(i.header),n.Bb(1),n.mc("field",i.field)}}function Wi(i,t){if(1&i&&(n.Tb(0,"tr"),n.Ob(1,"th",10),n.Mc(2,Ki,4,4,"th",11),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.mc("ngForOf",i)}}function Xi(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"a",14),n.Ob(3,"i",15),n.Sb(),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.Sb(),n.Tb(6,"td"),n.Oc(7),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=t.expanded,o=n.fc();n.Bb(2),n.mc("pRowToggler",i),n.Bb(1),n.mc("ngClass",e?"pi pi-chevron-down":"pi pi-chevron-right"),n.Bb(2),n.Pc(i.identificativoUte),n.Bb(2),n.Pc(i.attivita),n.Bb(2),n.Pc(o.getIndirizzo(i))}}function Ji(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.Sb(),n.Ob(3,"th"),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.Pc(i.descrizione)}}function it(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2),n.Sb(),n.Tb(3,"td"),n.Oc(4),n.Sb(),n.Ob(5,"br"),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.Pc(i.codice),n.Bb(2),n.Pc(i.descrizione)}}function tt(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"tbody"),n.Ob(3,"tr"),n.Tb(4,"tr"),n.Tb(5,"td"),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.gc(10,"date"),n.Sb(),n.Sb(),n.Ob(11,"br"),n.Tb(12,"tr"),n.Tb(13,"th"),n.Oc(14),n.gc(15,"translate"),n.Sb(),n.Ob(16,"th"),n.Sb(),n.Tb(17,"tr"),n.Tb(18,"td"),n.Oc(19),n.gc(20,"translate"),n.Sb(),n.Tb(21,"td"),n.Oc(22),n.gc(23,"date"),n.Sb(),n.Sb(),n.Tb(24,"tr"),n.Tb(25,"td"),n.Oc(26),n.gc(27,"translate"),n.Sb(),n.Tb(28,"td"),n.Oc(29),n.gc(30,"date"),n.Sb(),n.Sb(),n.Tb(31,"tr"),n.Tb(32,"td"),n.Oc(33),n.gc(34,"translate"),n.Sb(),n.Tb(35,"td"),n.Oc(36),n.Sb(),n.Sb(),n.Ob(37,"br"),n.Tb(38,"tr"),n.Tb(39,"th"),n.Oc(40),n.gc(41,"translate"),n.Sb(),n.Ob(42,"th"),n.Sb(),n.Tb(43,"tr"),n.Tb(44,"td"),n.Oc(45),n.gc(46,"translate"),n.Sb(),n.Tb(47,"td"),n.Oc(48),n.gc(49,"date"),n.Sb(),n.Sb(),n.Tb(50,"tr"),n.Tb(51,"td"),n.Oc(52),n.gc(53,"translate"),n.Sb(),n.Tb(54,"td"),n.Oc(55),n.Sb(),n.Sb(),n.Ob(56,"br"),n.Tb(57,"tr"),n.Tb(58,"td"),n.Oc(59),n.gc(60,"translate"),n.Sb(),n.Tb(61,"td"),n.Oc(62),n.Sb(),n.Sb(),n.Tb(63,"tr"),n.Tb(64,"td"),n.Oc(65),n.gc(66,"translate"),n.Sb(),n.Tb(67,"td"),n.Oc(68),n.Sb(),n.Sb(),n.Ob(69,"br"),n.Tb(70,"tr"),n.Tb(71,"th"),n.Oc(72),n.gc(73,"translate"),n.Sb(),n.Ob(74,"th"),n.Sb(),n.Tb(75,"tr"),n.Tb(76,"td"),n.Oc(77),n.gc(78,"translate"),n.Sb(),n.Tb(79,"td"),n.Oc(80),n.Sb(),n.Sb(),n.Tb(81,"tr"),n.Tb(82,"td"),n.Oc(83),n.gc(84,"translate"),n.Sb(),n.Tb(85,"td"),n.Oc(86),n.Sb(),n.Sb(),n.Tb(87,"tr"),n.Tb(88,"td"),n.Oc(89),n.gc(90,"translate"),n.Sb(),n.Tb(91,"td"),n.Oc(92),n.Sb(),n.Sb(),n.Tb(93,"tr"),n.Tb(94,"td"),n.Oc(95),n.gc(96,"translate"),n.Sb(),n.Tb(97,"td"),n.Oc(98),n.Sb(),n.Sb(),n.Tb(99,"tr"),n.Tb(100,"td"),n.Oc(101),n.gc(102,"translate"),n.Sb(),n.Tb(103,"td"),n.Oc(104),n.Sb(),n.Sb(),n.Tb(105,"tr"),n.Tb(106,"td"),n.Oc(107),n.gc(108,"translate"),n.Sb(),n.Tb(109,"td"),n.Oc(110),n.Sb(),n.Sb(),n.Tb(111,"tr"),n.Tb(112,"td"),n.Oc(113),n.gc(114,"translate"),n.Sb(),n.Tb(115,"td"),n.Oc(116),n.Sb(),n.Sb(),n.Tb(117,"tr"),n.Tb(118,"td"),n.Oc(119),n.gc(120,"translate"),n.Sb(),n.Tb(121,"td"),n.Oc(122),n.Sb(),n.Sb(),n.Ob(123,"br"),n.Tb(124,"tr"),n.Tb(125,"th"),n.Oc(126),n.gc(127,"translate"),n.Sb(),n.Ob(128,"th"),n.Sb(),n.Mc(129,Ji,4,1,"tr",16),n.Ob(130,"br"),n.Tb(131,"tr"),n.Tb(132,"th"),n.Oc(133),n.gc(134,"translate"),n.Sb(),n.Ob(135,"th"),n.Sb(),n.Mc(136,it,6,2,"tr",16),n.Sb(),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=t.columns;n.Bb(1),n.Cb("colspan",e.length+1),n.Bb(5),n.Qc(" ",n.hc(7,40,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.DT_APERTURA"),": "),n.Bb(3),n.Qc(" ",n.ic(10,42,i.dataApertura,"dd/MM/yyyy")," "),n.Bb(5),n.Qc(" ",n.hc(15,45,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.DATI_CESSAZIONE")," "),n.Bb(5),n.Qc(" ",n.hc(20,47,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.DT_CESSAZIONE"),": "),n.Bb(3),n.Qc(" ",n.ic(23,49,i.dataCessazione,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(27,52,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.DT_DENUNCIA_CESSAZIONE"),": "),n.Bb(3),n.Qc(" ",n.ic(30,54,i.dataDenunciaCessazione,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(34,57,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.MOTIVO_CESSAZIONE"),": "),n.Bb(3),n.Pc(i.causaleCessazione),n.Bb(4),n.Qc(" ",n.hc(41,59,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.COMMERCIO_DETTAGLIO")," "),n.Bb(5),n.Qc(" ",n.hc(46,61,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.DT_INIZIO_ATT_COMM_DETT"),": "),n.Bb(3),n.Qc(" ",n.ic(49,63,i.dataDenunciaInizioAttivita,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(53,66,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.SETTORE_MERCEOLOGICO"),": "),n.Bb(3),n.Pc(i.settoreMerceologico),n.Bb(4),n.Qc(" ",n.hc(60,68,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.RECAPITO_TEL"),": "),n.Bb(3),n.Pc(i.telefono),n.Bb(3),n.Qc(" ",n.hc(66,70,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.PEC"),": "),n.Bb(3),n.Pc(i.indirizzoPec),n.Bb(4),n.Qc(" ",n.hc(73,72,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.INDIRIZZO")," "),n.Bb(5),n.Qc(" ",n.hc(78,74,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.TOPONIMO"),": "),n.Bb(3),n.Pc(i.toponimo),n.Bb(3),n.Qc(" ",n.hc(84,76,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.VIA"),": "),n.Bb(3),n.Pc(i.via),n.Bb(3),n.Qc(" ",n.hc(90,78,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.CIVICO"),": "),n.Bb(3),n.Pc(i.numeroCivico),n.Bb(3),n.Qc(" ",n.hc(96,80,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.COMUNE"),": "),n.Bb(3),n.Pc(i.comune),n.Bb(3),n.Qc(" ",n.hc(102,82,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.CAP"),": "),n.Bb(3),n.Pc(i.cap),n.Bb(3),n.Qc(" ",n.hc(108,84,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.CODICE_ISTAT"),": "),n.Bb(3),n.Pc(i.codiceIstatComune),n.Bb(3),n.Qc(" ",n.hc(114,86,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.FRAZIONE"),": "),n.Bb(3),n.Pc(i.frazione),n.Bb(3),n.Qc(" ",n.hc(120,88,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.PROVINCIA"),": "),n.Bb(3),n.Pc(i.provincia),n.Bb(4),n.Qc(" ",n.hc(127,90,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.LISTA_DEST_USO")," "),n.Bb(3),n.mc("ngForOf",i.destinazioniUso),n.Bb(4),n.Qc(" ",n.hc(134,92,"FascicoloAziendale.UNITA_TECNICO_ECONOMICHE.LISTA_ATTIVITA_ATECO")," "),n.Bb(3),n.mc("ngForOf",i.attivitaAteco)}}function et(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length+1)}}const ot=function(){return{marginTop:"70px"}};let at=(()=>{class i{constructor(i,t,e){this.route=i,this.anagraficaFascicoloService=t,this.messageService=e,this.componentDestroyed$=new U.a,this.idValidazione=void 0}ngOnInit(){this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.setCols(),this.route.queryParams.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{const t=i["id-validazione"];this.idValidazione=t?Number.parseInt(t):0,this.getUnitaTecnicoEconomiche(this.cuaa)})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}setCols(){this.cols=[{field:"identificativoUte",header:"Identificativo UTE"},{field:"attivita",header:"Attivit\xe0"},{field:"indirizzo",header:"Indirizzo"}]}getUnitaTecnicoEconomiche(i){this.anagraficaFascicoloService.getUnitaTecnicoEconomiche(i,this.idValidazione).pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{i&&(this.unitaTecnicoEconomiche=i.sort((i,t)=>i.identificativoUte>t.identificativoUte?1:t.identificativoUte>i.identificativoUte?-1:0))},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,u.a.errorGetUnitaTecnicoEconomiche))})}getIndirizzo(i){const t=Hi.a.isNullOrEmpty(i.toponimo),e=Hi.a.isNullOrEmpty(i.via),o=Hi.a.isNullOrEmpty(i.numeroCivico);let a="";return e||(a=t?o?i.via+" - "+i.comune:i.via+" "+i.numeroCivico+" - "+i.comune:o?i.toponimo+" "+i.via+" - "+i.comune:i.toponimo+" "+i.via+" "+i.numeroCivico+" - "+i.comune),a}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(x.a),n.Nb(Ti.a),n.Nb(p.d))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-unita-tecnico-economiche"]],decls:11,vars:9,consts:[["key","tst"],[1,"funzioni-grid","boxgrey"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["header","UNIT\xc0 LOCALI",3,"selected"],["dataKey","identificativoUte",3,"columns","value","autoLayout","paginator","responsive"],["tableUnita",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[2,"width","3em"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field"],["href","#",3,"pRowToggler"],[3,"ngClass"],[4,"ngFor","ngForOf"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"p-accordion"),n.Tb(4,"p-accordionTab",3),n.Tb(5,"p-table",4,5),n.Mc(7,Wi,3,1,"ng-template",6),n.Mc(8,Xi,10,5,"ng-template",7),n.Mc(9,tt,137,94,"ng-template",8),n.Mc(10,et,3,1,"ng-template",9),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(8,ot)),n.Bb(4),n.mc("selected",!0),n.Bb(1),n.mc("columns",t.cols)("value",t.unitaTecnicoEconomiche)("autoLayout",!0)("paginator",!1)("responsive",!0))},directives:[g.a,f.a,f.c,j.q,p.e,r.s,j.p,j.o,j.k,r.q],pipes:[m.d,r.f],styles:[""]}),i})();function ct(i,t){if(1&i&&(n.Tb(0,"div",11),n.Tb(1,"p-accordion",12),n.Ob(2,"app-a4g-accordion-tab",13),n.Sb(),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.mc("multiple",!0),n.Bb(1),n.mc("accordionModels",i.templates)}}function rt(i,t){1&i&&(n.Tb(0,"div",11),n.Ob(1,"app-persone-con-carica"),n.Sb())}function nt(i,t){1&i&&(n.Tb(0,"div",11),n.Ob(1,"app-unita-tecnico-economiche"),n.Sb())}const st=function(){return{marginTop:"70px"}};let lt=(()=>{class i{constructor(i,t,e,o,a,c,r){this.anagraficaFascicoloService=i,this.route=t,this.router=e,this.fascicoloDettaglioService=o,this.translateService=a,this.messageService=c,this.mediatorService=r,this.tabPersoneConCarica=!1,this.tabRegistroImpresa=!1,this.tabUnitaTecnicoEconomiche=!1,this.tabs=[],this.componentDestroyed$=new U.a,this.idValidazione=void 0}subscribeStatoFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{i&&(this.fascicoloCorrente=i)})}ngOnInit(){let i=void 0;this.subscribeStatoFascicolo(),this.route.params.pipe(Object(Q.a)(this.componentDestroyed$),Object(Ai.a)(t=>(i=t.cuaa,this.route.queryParams)),Object(Ai.a)(t=>{const e=t["id-validazione"];return this.idValidazione=e?Number.parseInt(e):0,16===i.length?this.getPersonaFisica(i):11===i.length?this.getPersonaGiuridica(i):q.a})).subscribe()}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}getPersonaGiuridica(i){return this.anagraficaFascicoloService.getPersonaGiuridica(i,this.idValidazione).pipe(Object(Q.a)(this.componentDestroyed$),Object(Fi.a)(i=>{this.personaGiuridica=i,this.arrangeTabAndAccordionsPersonaGiuridica()}))}getPersonaFisica(i){return this.anagraficaFascicoloService.getPersonaFisica(i,this.idValidazione).pipe(Object(Q.a)(this.componentDestroyed$),Object(Fi.a)(i=>{this.personaFisica=i,this.arrangeTabAndAccordionsPersonaFisica()}))}anagrafeTributariaSelected(){this.prepareTemplatesPersonaFisicaAnagrificaDomicilioFiscaleAT(),this.prepareTemplatesPersonaFisicaDittaIndividualeAT()}cameraCommercioSelected(){this.prepareTemplatesPersonaFisicaDatiCameraCommercio(),this.prepareTemplatesPersonaFisicaSedeLegaleCameraDiCommercio()}fascicoloEditable(){return this.fascicoloCorrente&&0===this.idValidazione&&(this.fascicoloCorrente.stato===R.c.IN_AGGIORNAMENTO||this.fascicoloCorrente.stato===R.c.VALIDATO||this.fascicoloCorrente.stato===R.c.CONTROLLATO_OK||this.fascicoloCorrente.stato===R.c.IN_CHIUSURA)}arrangeTabAndAccordionsPersonaFisica(){let i=this.personaFisica.impresaIndividuale;i?(this.prepareAtecoVariables(i.sedeLegale),i.sedeLegale&&i.sedeLegale.iscrizioneRegistroImprese&&!i.sedeLegale.iscrizioneRegistroImprese.cessata?(this.anagrafeTributariaSelected(),this.tabs=new Array({label:"Dati Anagrafe Tributaria",command:i=>{this.anagrafeTributariaSelected()}},{label:"Dati Camera Di Commercio",command:i=>{this.cameraCommercioSelected()}},{label:"Persone con cariche",command:i=>{this.setTabDefault(),this.tabPersoneConCarica=!0}})):i.sedeLegale&&(null==i.sedeLegale.iscrizioneRegistroImprese||i.sedeLegale.iscrizioneRegistroImprese.cessata)&&(this.prepareTemplatesPersonaFisicaAnagrificaDomicilioFiscaleAT(),this.prepareTemplatesPersonaFisicaDittaIndividualeAT(),this.tabs=new Array({label:"Dati Anagrafe Tributaria",command:i=>{this.prepareTemplatesPersonaFisicaAnagrificaDomicilioFiscaleAT(),this.prepareTemplatesPersonaFisicaDittaIndividualeAT()}}))):(this.prepareTemplatesPersonaFisicaAnagrificaDomicilioFiscaleAT(),this.tabs=new Array({label:"Dati Anagrafe Tributaria",command:i=>{this.prepareTemplatesPersonaFisicaAnagrificaDomicilioFiscaleAT()}}))}getSezioni(i){this.anagraficaFascicoloService.getSezioniImpresa(i).subscribe(i=>{this.sezioniImpresa=i},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,u.a.errorGetUnitaTecnicoEconomiche))})}arrangeTabAndAccordionsPersonaGiuridica(){let i=this.personaGiuridica;if(i){let t=this.route.snapshot.paramMap.get("cuaa");this.getSezioni(t),this.prepareAtecoVariables(i.sedeLegale),i.sedeLegale&&i.sedeLegale.iscrizioneRegistroImprese&&!i.sedeLegale.iscrizioneRegistroImprese.cessata?(this.prepareTemplatesPersonaGiuridicaAnagrificaRappresentanteLegaleAT(),this.prepareTemplatesPersonaGiuridicaSedeLegaleAT(),this.tabs=new Array({label:"Dati Anagrafe Tributaria",command:i=>{this.setTabDefault(),this.prepareTemplatesPersonaGiuridicaAnagrificaRappresentanteLegaleAT(),this.prepareTemplatesPersonaGiuridicaSedeLegaleAT()}},{label:"Dati Camera Di Commercio",command:i=>{this.setTabDefault(),this.prepareTemplatesPersonaGiuridicaDatiCameraDiCommercio(),this.prepareTemplatesPersonaGiuridicaDatiSedeLegaleCameraDiCommercio()}},{label:"Persone con cariche",command:i=>{this.setTabDefault(),this.tabPersoneConCarica=!0}},{label:"Unit\xe0 locale",command:i=>{this.setTabDefault(),this.tabUnitaTecnicoEconomiche=!0}})):i.sedeLegale&&(null==i.sedeLegale.iscrizioneRegistroImprese||i.sedeLegale.iscrizioneRegistroImprese.cessata)&&(this.prepareTemplatesPersonaGiuridicaAnagrificaRappresentanteLegaleAT(),this.prepareTemplatesPersonaGiuridicaSedeLegaleAT(),this.tabs=new Array({label:"Dati Anagrafe Tributaria",command:i=>{this.prepareTemplatesPersonaGiuridicaAnagrificaRappresentanteLegaleAT(),this.prepareTemplatesPersonaGiuridicaSedeLegaleAT()}}))}}prepareTemplatesPersonaFisicaAnagrificaDomicilioFiscaleAT(){this.templates=[];let i={headerTitle:"DATI PERSONA FISICA"},t=new Array;t.push(this.buildKeyValue("Nome:",this.personaFisica.anagrafica&&this.personaFisica.anagrafica.nome||null)),t.push(this.buildKeyValue("Cognome:",this.personaFisica.anagrafica&&this.personaFisica.anagrafica.cognome||null)),t.push(this.buildKeyValue("Codice Fiscale:",this.personaFisica.codiceFiscale||null)),t.push(this.buildKeyValue("Sesso:",this.personaFisica.anagrafica&&this.personaFisica.anagrafica.sesso||null)),t.push(this.buildKeyValue("Nato a:",this.personaFisica.anagrafica&&this.personaFisica.anagrafica.comuneNascita||null));let e=this.personaFisica.anagrafica&&this.personaFisica.anagrafica.dataNascita||null;if(e&&(e=Object(r.I)(e,"dd/MM/yyyy","it-IT")||null),t.push(this.buildKeyValue("Nato il:",e)),this.personaFisica.anagrafica&&this.personaFisica.anagrafica.deceduto){let i=this.personaFisica.anagrafica&&this.personaFisica.anagrafica.dataMorte||null;i&&(i=Object(r.I)(i,"dd/MM/yyyy","it-IT")||null),t.push(this.buildKeyValue("Morto il:",i))}i.fields=t,this.templates.push(i),i={},i.headerTitle="DOMICILIO FISCALE",t=new Array,this.prepareKeyValueArrayIndirizzoAT(t,this.personaFisica.domicilioFiscale),i.fields=t,this.templates.push(i)}prepareTemplatesPersonaFisicaDittaIndividualeAT(){const i={headerTitle:"DATI DITTA INDIVIDUALE"},t=new Array;t.push(this.buildKeyValue("Denominazione:",this.personaFisica.impresaIndividuale&&this.personaFisica.impresaIndividuale.denominazione||null)),t.push(this.buildKeyValue("Partita IVA:",this.personaFisica.impresaIndividuale&&this.personaFisica.impresaIndividuale.partitaIva||null)),this.prepareKeyValueArrayIndirizzoAT(t,this.personaFisica.impresaIndividuale&&this.personaFisica.impresaIndividuale.sedeLegale?this.personaFisica.impresaIndividuale.sedeLegale.indirizzo:null,!0),i.fields=t,this.templates.push(i),this.ateco[0].fonteDato===vi.ANAGRAFE_TRIBUTARIA&&this.prepareTemplatesCodiciAteco(this.ateco)}prepareTemplatesPersonaFisicaDatiCameraCommercio(){this.templates=[];let i={headerTitle:"DATI DITTA INDIVIDUALE"},t=new Array;t.push(this.buildKeyValue("Forma giuridica:",this.personaFisica.impresaIndividuale.formaGiuridica)),i.fields=t,this.templates.push(i),i={},i.headerTitle="ISCRIZIONE CAMERA DI COMMERCIO",t=new Array,this.prepareKeyValueIRE(t,this.personaFisica.impresaIndividuale&&this.personaFisica.impresaIndividuale.sedeLegale?this.personaFisica.impresaIndividuale.sedeLegale.iscrizioneRegistroImprese:null),i.fields=t,this.templates.push(i),this.personaFisica.iscrizioniSezione.length>0&&this.prepareKeyValueRegistroImp(this.personaFisica?this.personaFisica:null)}prepareTemplatesPersonaFisicaSedeLegaleCameraDiCommercio(){let i={headerTitle:"SEDE LEGALE"},t=new Array;this.prepareKeyValueArrayIndirizzoCameraDiCommercio(t,this.personaFisica.impresaIndividuale&&this.personaFisica.impresaIndividuale.sedeLegale?this.personaFisica.impresaIndividuale.sedeLegale:null),i.fields=t,this.templates.push(i),this.ateco[0].fonteDato===vi.CAMERA_COMMERCIO&&this.prepareTemplatesCodiciAteco(this.ateco)}prepareTemplatesPersonaGiuridicaAnagrificaRappresentanteLegaleAT(){this.templates=[];let i={headerTitle:"DATI PERSONA GIURIDICA"},t=new Array;t.push(this.buildKeyValue("Denominazione:",this.personaGiuridica.denominazione||null)),t.push(this.buildKeyValue("Forma giuridica:",this.personaGiuridica.formaGiuridica||null)),t.push(this.buildKeyValue("Codice Fiscale:",this.personaGiuridica.codiceFiscale||null)),t.push(this.buildKeyValue("Partita IVA:",this.personaGiuridica.partitaIva||null)),i.fields=t,this.templates.push(i),i={},i.headerTitle="RAPPRESENTANTE LEGALE",t=new Array,t.push(this.buildKeyValue("Nome e Cognome:",this.personaGiuridica.rappresentanteLegale&&this.personaGiuridica.rappresentanteLegale.nominativo||null)),t.push(this.buildKeyValue("Codice Fiscale:",this.personaGiuridica.rappresentanteLegale&&this.personaGiuridica.rappresentanteLegale.codiceFiscale||null)),i.fields=t,this.templates.push(i)}prepareTemplatesPersonaGiuridicaSedeLegaleAT(){let i={headerTitle:"SEDE LEGALE"},t=new Array;this.prepareKeyValueArrayIndirizzoAT(t,this.personaGiuridica.sedeLegale?this.personaGiuridica.sedeLegale.indirizzo:null),i.fields=t,this.templates.push(i),null!=this.ateco&&this.ateco[0].fonteDato===vi.ANAGRAFE_TRIBUTARIA&&this.prepareTemplatesCodiciAteco(this.ateco)}prepareTemplatesPersonaGiuridicaDatiCameraDiCommercio(){this.templates=[];let i={headerTitle:"DATI PERSONA GIURIDICA"},t=new Array;t.push(this.buildA4gAccordionItem(this.buildKeyValue("Oggetto sociale:",this.personaGiuridica.oggettoSociale||null),!0));let e=this.personaGiuridica.dataCostituzione||null,o=null;e&&(o=Object(r.I)(e,"dd/MM/yyyy","it-IT")),t.push(this.buildKeyValue("Data costituzione:",o));let a=this.personaGiuridica.dataTermine||null,c=null;a&&(c=Object(r.I)(a,"dd/MM/yyyy","it-IT")),t.push(this.buildKeyValue("Data termine:",c));let n=this.personaGiuridica.capitaleSocialeDeliberato||null,s=null;n&&(s=n.toLocaleString()+" euro"),t.push(this.buildKeyValue("Capitale soc. deliberato:",s)),i.fields=t,this.templates.push(i),i={},i.headerTitle="REPERTORIO ECONOMICO AMMINISTRATIVO (REA)",t=new Array,this.prepareKeyValueIRE(t,this.personaGiuridica.sedeLegale?this.personaGiuridica.sedeLegale.iscrizioneRegistroImprese:null),i.fields=t,this.templates.push(i),this.sezioniImpresa.iscrizioniSezione.length>0&&this.prepareKeyValueRegistroImp(this.sezioniImpresa?this.sezioniImpresa:null)}prepareTemplatesPersonaGiuridicaDatiSedeLegaleCameraDiCommercio(){let i={headerTitle:"SEDE LEGALE"},t=new Array;this.prepareKeyValueArrayIndirizzoCameraDiCommercio(t,this.personaGiuridica.sedeLegale?this.personaGiuridica.sedeLegale:null),i.fields=t,this.templates.push(i),null!=this.ateco&&this.ateco[0].fonteDato===vi.CAMERA_COMMERCIO&&this.prepareTemplatesCodiciAteco(this.ateco)}prepareKeyValueArrayIndirizzoCameraDiCommercio(i,t){let e=this.costruisciIndirizzoSedeLegale(t),o=Object.assign({},t.indirizzoCameraCommercio);o.toponimo=e,this.prepareKeyValueArrayIndirizzoAT(i,o,!0),i.push(this.buildKeyValue("Cod. ISTAT comune:",o?o.codiceIstat:null)),i.push(this.buildKeyValue("Telefono:",t?t.telefono:null)),i.push(this.buildKeyValue("PEC:",t&&t.indirizzoPec||null))}prepareKeyValueArrayIndirizzoAT(i,t,e){i.push(this.buildKeyValue(e?"Indirizzo sede legale:":"Indirizzo:",t&&t.toponimo||null)),i.push(this.buildKeyValue("Comune:",t?t.comune:null)),i.push(this.buildKeyValue("CAP:",t?t.cap:null)),i.push(this.buildKeyValue("Provincia:",t?t.provincia:null))}prepareKeyValueIRE(i,t){let e=t&&t.dataIscrizione||null,o=null;e&&(o=Object(r.I)(e,"dd/MM/yyyy","it-IT")),i.push(this.buildKeyValue("Data Iscrizione:",o)),i.push(this.buildKeyValue("Codice REA:",t&&t.codiceRea||null)),i.push(this.buildKeyValue("Provincia REA:",t&&t.provinciaRea||null))}prepareKeyValueRegistroImp(i){this.setTabDefault();const t={headerTitle:"REGISTRO IMPRESA"},e=new Array;let o,a=new fi;i.iscrizioniSezione.forEach(i=>{a.mkey=this.translateService.instant(i.sezione),o=Object(r.I)(i.dataIscrizione,"dd/MM/yyyy","it-IT"),i.qualifica&&(o=o+", "+i.qualifica),i.coltivatoreDiretto&&(o+=", Coltivatore Diretto"),a.mvalue=o||null,e.push(a),a=new fi}),t.fields=e,this.templates.push(t)}prepareAtecoVariables(i){null!=i&&null!=i.attivitaAteco&&i.attivitaAteco.length>0&&(this.ateco=[],i.attivitaAteco.forEach(i=>{i.peso=this.setPeso(i),this.ateco.push(i)}),this.ateco=Ci.orderBy(this.ateco,["peso","codice"],["asc","asc"]))}setPeso(i){return i.importanza===Si[Si.PRIMARIO_IMPRESA]?0:i.importanza===Si[Si.PRIMARIO]?1:i.importanza===Si[Si.SECONDARIO]?2:3}prepareTemplatesCodiciAteco(i){const t={headerTitle:"CODICI ATECO"},e=new Array;let o=new fi;i.forEach(i=>{o.mkey=i.codice||null,o.mvalue=i.descrizione||null,o.showButton=i.importanza,o.showButton=i.importanza===Si[Si.PRIMARIO_IMPRESA]?"PRIMARIO D'IMPRESA":i.importanza,o.colorButton=i.importanza===Si[Si.SECONDARIO]?"grey":"green",e.push(o),o=new fi}),t.fields=e,this.templates.push(t)}costruisciIndirizzoSedeLegale(i){let t="",e=i&&i.indirizzoCameraCommercio&&i.indirizzoCameraCommercio.frazione||null,o=i&&i.indirizzoCameraCommercio&&i.indirizzoCameraCommercio.toponimo||null,a=i&&i.indirizzoCameraCommercio&&i.indirizzoCameraCommercio.via||null,c=i&&i.indirizzoCameraCommercio&&i.indirizzoCameraCommercio.civico||null;return e&&(t=t+e+" "),o&&(t=t+o+" "),a&&(t=t+a+", "),c&&(t+=c),t}buildKeyValue(i,t){const e=new hi.a;return e.mkey=i,e.mvalue=t,e}buildA4gAccordionItem(i,t){return Object.assign(Object.assign({},i),{longText:t})}setTabDefault(){this.tabPersoneConCarica=!1,this.tabRegistroImpresa=!1,this.tabUnitaTecnicoEconomiche=!1}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}update(){const i=this.route.snapshot.paramMap.get("cuaa");i&&this.anagraficaFascicoloService.aggiorna(i).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.messageService.add(u.a.getToast("tst",u.b.error,this.translateService.instant("FAS_ANA."+i.error.message))),q.a)),Object(Ai.a)(t=>{const e=t.fascicoloDto,o=t.anomalies;if(this.fascicoloDettaglioService.fascicoloCorrente.next(e),Array.isArray(o)&&o.length)for(const a of o){let t=u.b.warn;"CUAA_MISMATCH_ANAGRAFE_TRIBUTARIA_CAA"===a&&(t=u.b.info,this.router.navigate([this.router.url.replace(i,e.cuaa)])),this.messageService.add(u.a.getToast("tst",t,this.translateService.instant("FAS_ANA.CONTROLLI_COMPLETEZZA_ANOMALIE."+a)))}return this.anagraficaFascicoloService.getFirmatario(i)}),Object(Z.a)(i=>(u.a.handleError(this.messageService,i,u.a.ERRORE_GENERICO),q.a)),Object(Ai.a)(t=>(t&&this.fascicoloDettaglioService.firmatario.next(t),Object(Ii.a)(i))),Object(Ai.a)(i=>this.mediatorService.deleteEsitiControlloCompletezza(i)),Object(Z.a)(i=>(u.a.handleError(this.messageService,i,u.a.ERRORE_GENERICO),q.a))).subscribe(i=>{this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK))})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ti.a),n.Nb(x.a),n.Nb(x.e),n.Nb(L.a),n.Nb(m.e),n.Nb(p.d),n.Nb(Mi.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-dati-azienda"]],decls:18,vars:15,consts:[[1,"ui-grid-fixed","boxwhite"],["key","tst"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-anagraf.jpg"],[1,"ml-2"],[1,"mb-3"],["pButton","","icon","ui-icon-update","label","AGGIORNA","pButton","",1,"pull-right",2,"background-color","green",3,"disabled","click"],[1,"d-block","mb-4",3,"model","activeItem"],[1,"funzioni-grid","boxgrey"],["class","accordion p-4",4,"ngIf"],[1,"accordion","p-4"],[3,"multiple"],[3,"accordionModels"]],template:function(i,t){1&i&&(n.Tb(0,"div",0),n.Ob(1,"p-toast",1),n.Tb(2,"a",2),n.bc("click",(function(){return t.handleClick()})),n.Ob(3,"em",3),n.Ob(4,"img",4),n.Tb(5,"span",5),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Sb(),n.Ob(8,"br"),n.Tb(9,"h3",6),n.Oc(10),n.gc(11,"translate"),n.Sb(),n.Tb(12,"button",7),n.bc("click",(function(){return t.update()})),n.Sb(),n.Ob(13,"p-tabMenu",8),n.Tb(14,"div",9),n.Mc(15,ct,3,2,"div",10),n.Mc(16,rt,2,0,"div",10),n.Mc(17,nt,2,0,"div",10),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.Kc(n.rc(14,st)),n.Bb(5),n.Qc(" ",n.hc(7,10,"FascicoloAziendale.DATI_ANAGRAFICI_E_FISCALI")," "),n.Bb(4),n.Pc(n.hc(11,12,"FascicoloAziendale.DATI_AZIENDA")),n.Bb(2),n.mc("disabled",!t.fascicoloEditable()),n.Bb(1),n.mc("model",t.tabs)("activeItem",t.tabs[0]),n.Bb(2),n.mc("ngIf",!t.tabPersoneConCarica&&!t.tabUnitaTecnicoEconomiche),n.Bb(1),n.mc("ngIf",t.tabPersoneConCarica),n.Bb(1),n.mc("ngIf",t.tabUnitaTecnicoEconomiche))},directives:[g.a,x.h,T.b,zi.a,r.t,f.a,Ei.a,Yi,at],pipes:[m.d],styles:["[_nghost-%COMP%] .ui-accordion .ui-accordion-header{border-top:3px solid green}[_nghost-%COMP%] .ui-accordion .ui-accordion-header>a{text-decoration:none;vertical-align:center;color:#000;background-color:#fff;border:1}.ui-accordion[_ngcontent-%COMP%]   .ui-icon[_ngcontent-%COMP%]{color:#000}[_nghost-%COMP%] .ui-chkbox .ui-chkbox-box{padding:2px;border-radius:15px;width:1.75em;height:1.75em;overflow:hidden;transition:background-color .3s;border:1px solid grey}[_nghost-%COMP%] .ui-accordion .ui-accordion-content{width:100%;color:#000;background-color:hsla(0,0%,100%,.144);border-block-color:#000}[_nghost-%COMP%] .ui-accordion-header.ui-icon>a{color:#000;background-color:#fff}[_nghost-%COMP%] .ui-accordion .ui-accordion-content{border:1}.boxwhite[_ngcontent-%COMP%]{background-color:#fff;padding:25px;width:100%;margin-bottom:30px}.mb-3[_ngcontent-%COMP%]{color:#0d5f3f;font-weight:700;font-size:20px;text-transform:uppercase;padding-bottom:10px;margin-bottom:15px}"]}),i})();var bt=e("2c1J");function dt(i,t){if(1&i&&n.Ob(0,"p-sortIcon",20),2&i){const i=n.fc().$implicit;n.mc("field",i.field)}}function ut(i,t){if(1&i&&(n.Tb(0,"th",18),n.Oc(1),n.Mc(2,dt,1,1,"p-sortIcon",19),n.Sb()),2&i){const i=t.$implicit;n.mc("pSortableColumn",i.field),n.Bb(1),n.Qc(" ",i.header," "),n.Bb(1),n.mc("ngIf",i.field)}}function pt(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"th",16),n.Oc(2,"ID"),n.Sb(),n.Mc(3,ut,3,3,"th",17),n.Tb(4,"th"),n.Oc(5,"Azioni"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(3),n.mc("ngForOf",i)}}function mt(i,t){if(1&i&&(n.Tb(0,"td"),n.Oc(1),n.Sb()),2&i){const i=t.$implicit,e=n.fc().$implicit;n.Bb(1),n.Pc(e[i.field])}}function gt(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr",21),n.Tb(1,"td",16),n.Oc(2),n.Sb(),n.Mc(3,mt,2,1,"td",22),n.Tb(4,"td"),n.Tb(5,"button",23),n.bc("click",(function(){n.Ec(i);const e=t.$implicit;return n.fc().cancellaIBAN(e.id,e.iban)})),n.gc(6,"translate"),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=t.columns,o=n.fc();n.mc("pSelectableRow",i),n.Bb(2),n.Pc(i.id),n.Bb(1),n.mc("ngForOf",e),n.Bb(2),n.nc("label",n.hc(6,5,"ELIMINA")),n.mc("disabled",!o.fascicoloEditable())}}function ht(i,t){if(1&i&&(n.Tb(0,"div",24),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Pc(i.footerTabella())}}function ft(i,t){1&i&&(n.Ob(0,"p-message",39),n.gc(1,"translate")),2&i&&n.nc("text",n.hc(1,1,"MODALITA_PAGAMENTO.IBAN_OBBLIGATORIO"))}function Tt(i,t){1&i&&(n.Ob(0,"p-message",39),n.gc(1,"translate")),2&i&&n.nc("text",n.hc(1,1,"MODALITA_PAGAMENTO.IBAN_NOT_VALID"))}function St(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,ft,2,3,"p-message",38),n.Mc(2,Tt,2,3,"p-message",38),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.modalitaPagamentoFormGroup.get("iban").errors?null:i.modalitaPagamentoFormGroup.get("iban").errors.required),n.Bb(1),n.mc("ngIf",null==i.modalitaPagamentoFormGroup.get("iban").errors?null:i.modalitaPagamentoFormGroup.get("iban").errors.iban)}}const vt=function(i){return{inputRef:i}};function Ot(i,t){if(1&i&&(n.Tb(0,"form",30),n.Tb(1,"div",31),n.Tb(2,"div",32),n.Tb(3,"label",33),n.Oc(4),n.gc(5,"translate"),n.Sb(),n.Sb(),n.Tb(6,"div",34),n.Tb(7,"div"),n.Ob(8,"input",35,36),n.Sb(),n.Mc(10,St,3,2,"div",37),n.Sb(),n.Sb(),n.Sb()),2&i){const i=n.Bc(9),t=n.fc(2);n.mc("formGroup",t.modalitaPagamentoFormGroup),n.Bb(4),n.Qc(" ",n.hc(5,4,"MODALITA_PAGAMENTO.IBAN")," * "),n.Bb(4),n.mc("a4gIban",n.sc(6,vt,i)),n.Bb(2),n.mc("ngIf",t.modalitaPagamentoFormGroup.get("iban").invalid&&(t.modalitaPagamentoFormGroup.get("iban").dirty||t.modalitaPagamentoFormGroup.get("iban").touched))}}const Ct=function(){return{marginTop:"70px"}};function It(i,t){if(1&i){const i=n.Ub();n.Tb(0,"p-dialog",25),n.bc("visibleChange",(function(t){return n.Ec(i),n.fc().displayDialog=t})),n.Tb(1,"p-header"),n.Oc(2),n.gc(3,"translate"),n.Sb(),n.Ob(4,"p-toast",26),n.Mc(5,Ot,11,8,"form",27),n.Tb(6,"p-footer"),n.Tb(7,"div",28),n.Tb(8,"button",29),n.bc("click",(function(){return n.Ec(i),n.fc().save()})),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.mc("visible",i.displayDialog)("responsive",!0)("modal",!0),n.Bb(2),n.Qc(" ",n.hc(3,8,"MODALITA_PAGAMENTO.INSERISCI_MODALITA_PAGAMENTO")," "),n.Bb(2),n.Kc(n.rc(10,Ct)),n.Bb(1),n.mc("ngIf",i.modalitaPagamentoFormGroup),n.Bb(3),n.mc("disabled",!i.modalitaPagamentoEditable())}}function At(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",40),n.Ob(1,"i",41),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",42),n.Tb(7,"div",43),n.Tb(8,"button",44),n.bc("click",(function(){return n.Ec(i),n.fc().deleteRow()})),n.Sb(),n.Sb(),n.Tb(9,"div",43),n.Tb(10,"button",45),n.bc("click",(function(){return n.Ec(i),n.fc().annulla()})),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=n.fc();n.Bb(3),n.Pc(i.summary),n.Bb(2),n.Pc(i.detail),n.Bb(3),n.mc("disabled",!e.fascicoloEditable())}}let Ft=(()=>{class i{constructor(i,t,e,o,a){this.anagraficaFascicoloService=i,this.route=t,this.messageService=e,this.fascicoloDettaglioService=o,this.translateService=a,this.cuaa="",this.idDaCancellare=0,this.newModalitaPagamento=!1,this.componentDestroyed$=new U.a,this.idValidazione=void 0,this.eredi=[],this.handleErrorOnPutModalitaPagamento=i=>{let t;return 400===i.error.status?t=this.translateService.instant("MODALITA_PAGAMENTO.IBAN_NON_VALIDO"):510===i.error.status?t=this.translateService.instant("MODALITA_PAGAMENTO.TITOLARE_CONTO_MISMATCH_INTESTATARIO_FASCICOLO"):(t=this.translateService.instant("MODALITA_PAGAMENTO.SALVATAGGIO_KO"),i.error.message.startsWith("Deve essere specificato uno ed un solo erede firmatario")&&(t=this.translateService.instant("MODALITA_PAGAMENTO.EREDE_FIRMATARIO_ASSENTE"))),this.messageService.add(u.a.getToast("tst-dialog",u.b.error,t)),q.a}}ngOnInit(){this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.route.queryParams.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{const t=i["id-validazione"];this.idValidazione=t?Number.parseInt(t):0,this.getModalitaDiPagamento(this.cuaa,this.idValidazione)}),this.subscribeStatoFascicolo(),this.setCols(),this.subscribeEredi()}setCols(){this.cols=[{field:"iban",header:"IBAN"},{field:"bic",header:"BIC"},{field:"denominazioneIstituto",header:"Denominazione Istituto Bancario"},{field:"denominazioneFiliale",header:"Denominazione Filiale"},{field:"cittaFiliale",header:"Citt\xe0 Filiale"}]}getModalitaDiPagamento(i,t){this.anagraficaFascicoloService.getModalitaPagamento(i,t).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.listaModalitaPagamento=[],this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreRecuperoDati)),q.a))).subscribe(i=>{this.listaModalitaPagamento=i,this.listaModalitaPagamento||(this.listaModalitaPagamento=[])})}showDialogToAdd(){this.displayDialog=!0,this.newModalitaPagamento=!0,this.modalitaPagamentoFormGroup=new b.j({iban:new b.g("",[b.G.required])})}annulla(){console.log("annulla cancellazione"),this.messageService.clear("cancellaModalitaPagamento")}cancellaIBAN(i,t){this.idDaCancellare=i,this.messageService.add(u.a.getToast("cancellaModalitaPagamento",u.b.warn,u.a.checkACancellaModalitaDiPagamento+t+"?"))}deleteRow(){this.messageService.clear("cancellaModalitaPagamento"),this.idDaCancellare||(this.idDaCancellare=0),console.log("Cancella record id: "+this.idDaCancellare),this.anagraficaFascicoloService.cancellaModalitaPagamento(this.cuaa,this.idDaCancellare).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.messageService.add(u.a.getToast("tst",u.b.error,u.a.salvataggioDatiKo)),q.a)),Object(Ai.a)(i=>{const t=this.listaModalitaPagamento.findIndex(i=>i.id===this.idDaCancellare);return this.listaModalitaPagamento.splice(t,1),this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK)),this.idDaCancellare=0,this.anagraficaFascicoloService.getFascicolo(this.cuaa,this.idValidazione)})).subscribe(i=>{this.fascicoloDettaglioService.fascicoloCorrente.next(i)})}subscribeStatoFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{i&&(this.fascicoloCorrente=i)})}modalitaPagamentoEditable(){return!this.modalitaPagamentoFormGroup.invalid&&0===this.idValidazione}fascicoloEditable(){return this.fascicoloCorrente&&0===this.idValidazione&&(this.fascicoloCorrente.stato===R.c.IN_AGGIORNAMENTO||this.fascicoloCorrente.stato===R.c.VALIDATO||this.fascicoloCorrente.stato===R.c.CONTROLLATO_OK||this.fascicoloCorrente.stato===R.c.IN_CHIUSURA&&this.eredi.length>0)}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}save(){this.anagraficaFascicoloService.putModalitaPagamento(this.cuaa,{iban:this.modalitaPagamentoFormGroup.controls.iban.value}).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(this.handleErrorOnPutModalitaPagamento),Object(Ai.a)(i=>{this.modalitaPagamento=i;const t=[...this.listaModalitaPagamento];return this.newModalitaPagamento?t.push(this.modalitaPagamento):t[this.listaModalitaPagamento.indexOf(this.selectedModalitaPagamento)]=this.modalitaPagamento,this.listaModalitaPagamento=t,this.modalitaPagamento=null,this.displayDialog=!1,this.messageService.add(u.a.getToast("tst",u.b.success,this.translateService.instant("MODALITA_PAGAMENTO.INSERT_OK"))),this.anagraficaFascicoloService.getFascicolo(this.cuaa,this.idValidazione)})).subscribe(i=>{this.fascicoloDettaglioService.fascicoloCorrente.next(i),this.getModalitaDiPagamento(this.cuaa,this.idValidazione)})}footerTabella(){let i="";return this.listaModalitaPagamento&&0===this.listaModalitaPagamento.length?i="Non sono presenti modalit\xe0 di pagamento":this.listaModalitaPagamento&&1===this.listaModalitaPagamento.length?i="\xc8 presente 1 modalit\xe0 di pagamento":this.listaModalitaPagamento&&(i="Sono presenti "+this.listaModalitaPagamento.length+" modalit\xe0 di pagamento."),i}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}subscribeEredi(){this.fascicoloDettaglioService.eredi.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{this.eredi=i})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ti.a),n.Nb(x.a),n.Nb(p.d),n.Nb(L.a),n.Nb(m.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-modalita-pagamento"]],decls:20,vars:15,consts:[["key","tst"],[1,"ui-grid-fixed","boxgrey"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-anagraf.jpg"],[1,"ml-2"],[1,"mb-3"],[2,"text-align","left"],["type","button","pButton","","icon","pi pi-plus","label","Aggiungi",3,"disabled","click"],[3,"columns","value","autoLayout","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["class","dialog-modalita-pagamento","showEffect","fade",3,"visible","responsive","modal","visibleChange",4,"ngIf"],["position","center","key","cancellaModalitaPagamento",3,"modal","baseZIndex"],["pTemplate","message"],[2,"display","none"],[3,"pSortableColumn",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field",4,"ngIf"],[3,"field"],[3,"pSelectableRow"],[4,"ngFor","ngForOf"],["type","button","pButton","","title","Rimuovi modalit\xe0 di pagamento","icon","pi pi-trash",2,"background-color","red",3,"disabled","label","click"],[1,"p-d-flex","p-ai-center","p-jc-between"],["showEffect","fade",1,"dialog-modalita-pagamento",3,"visible","responsive","modal","visibleChange"],["key","tst-dialog"],["class","ui-fluid",3,"formGroup",4,"ngIf"],[1,"ui-dialog-buttonpane","ui-helper-clearfix"],["pButton","","icon","fa ui-icon-check","type","submit","label","Aggiungi",1,"button--success",3,"disabled","click"],[1,"ui-fluid",3,"formGroup"],[1,"p-grid"],[1,"p-col-4","text-uppercase"],["for","iban"],[1,"p-col-8"],["maxlength","40","pInputText","","id","iban","formControlName","iban",3,"a4gIban"],["inputRef",""],[4,"ngIf"],["class","font-12","severity","error",3,"text",4,"ngIf"],["severity","error",1,"font-12",3,"text"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid","p-formgrid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"disabled","click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"a",2),n.bc("click",(function(){return t.handleClick()})),n.Ob(3,"em",3),n.Ob(4,"img",4),n.Tb(5,"span",5),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Sb(),n.Ob(8,"br"),n.Tb(9,"h3",6),n.Oc(10),n.Sb(),n.Tb(11,"div",7),n.Tb(12,"button",8),n.bc("click",(function(){return t.showDialogToAdd()})),n.Sb(),n.Sb(),n.Tb(13,"p-table",9),n.bc("selectionChange",(function(i){return t.selectedModalitaPagamento=i})),n.Mc(14,pt,6,1,"ng-template",10),n.Mc(15,gt,7,7,"ng-template",11),n.Mc(16,ht,2,1,"ng-template",12),n.Sb(),n.Mc(17,It,9,11,"p-dialog",13),n.Sb(),n.Tb(18,"p-toast",14),n.Mc(19,At,11,3,"ng-template",15),n.Sb()),2&i&&(n.Kc(n.rc(14,Ct)),n.Bb(6),n.Qc(" ",n.hc(7,12,"FascicoloAziendale.DATI_ANAGRAFICI_E_FISCALI")," "),n.Bb(4),n.Pc("Modalit\xe0 di pagamento"),n.Bb(2),n.mc("disabled",!t.fascicoloEditable()),n.Bb(1),n.mc("columns",t.cols)("value",t.listaModalitaPagamento)("autoLayout",!0)("selection",t.selectedModalitaPagamento),n.Bb(4),n.mc("ngIf",t.displayDialog),n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3))},directives:[g.a,x.h,T.b,j.q,p.e,r.t,r.s,j.p,j.o,j.m,h.a,p.c,p.b,b.I,b.t,b.k,b.c,b.n,ri.a,b.s,b.i,bt.a,ni.b],pipes:[m.d],styles:[""]}),i})();e("9ErW");var Mt=e("+WeO");function zt(i,t){1&i&&(n.Tb(0,"small",16),n.Oc(1),n.gc(2,"translate"),n.Sb()),2&i&&(n.Bb(1),n.Qc(" ",n.hc(2,1,"EREDE.CF_MANDATORY")," "))}function Et(i,t){if(1&i){const i=n.Ub();n.Tb(0,"form",2,3),n.Tb(2,"div",4),n.Tb(3,"div",5),n.Tb(4,"label",6),n.Oc(5),n.gc(6,"translate"),n.Sb(),n.Sb(),n.Tb(7,"div",7),n.Tb(8,"div",4),n.Tb(9,"div",8),n.Ob(10,"input",9),n.Sb(),n.Sb(),n.Tb(11,"div",4),n.Tb(12,"div",8),n.Mc(13,zt,3,3,"small",10),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(14,"div",4),n.Tb(15,"div",11),n.Tb(16,"div",12),n.Tb(17,"button",13),n.bc("click",(function(){return n.Ec(i),n.fc().closePopup()})),n.gc(18,"translate"),n.Sb(),n.Sb(),n.Tb(19,"div",14),n.Tb(20,"button",15),n.bc("click",(function(){return n.Ec(i),n.fc().onSaveErede()})),n.gc(21,"translate"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.Bc(1),t=n.fc();n.mc("formGroup",t.eredeFormGroup),n.Bb(5),n.Pc(n.hc(6,10,"EREDE.CF")),n.Bb(8),n.mc("ngIf",t.eredeFormGroup.controls.cfErede.invalid),n.Bb(4),n.Db("button-custom-bar-dark"),n.nc("label",n.hc(18,12,"ANNULLA")),n.Bb(3),n.Db("button-custom-bar-dark"),n.nc("label",n.hc(21,14,"CONFERMA")),n.mc("disabled",i.invalid)}}const Dt=function(){return{overflow:"auto","max-height":"900px"}};let Bt=(()=>{class i{constructor(i){this.anagraficaFascicoloService=i,this.chiudiPopup=new n.n,this.saveErede=new n.n,this.componentDestroyed$=new U.a}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}ngOnInit(){this.setEredeFormGroup()}setEredeFormGroup(){this.eredeFormGroup=new b.j({cfErede:new b.g(this.erede?this.erede.cfErede:"",[b.G.required])})}closePopup(){this.chiudiPopup.emit(!1)}onSaveErede(){this.saveErede.emit(this.eredeFormGroup.value)}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ti.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-popup-erede"]],inputs:{popupEredeOpen:"popupEredeOpen",cuaa:"cuaa",idValidazione:"idValidazione",erede:"erede"},outputs:{chiudiPopup:"chiudiPopup",saveErede:"saveErede"},decls:3,vars:10,consts:[["width","auto","showEffect","fade",1,"dialog-rappr-legale",3,"header","visible","responsive","modal","closable","contentStyle","visibleChange","onHide"],["class","ui-fluid",3,"formGroup",4,"ngIf"],[1,"ui-fluid",3,"formGroup"],["f","ngForm"],[1,"p-grid"],[1,"p-col-4","text-uppercase"],["for","cfErede"],[1,"p-col-8"],[1,"p-col"],["size","40","pInputText","","id","cfErede","formControlName","cfErede","appValidaCf",""],["class","p-invalid",4,"ngIf"],[1,"p-col-12"],[1,"ui-g-6","text-left"],["pButton","","type","button",2,"min-height","42px","box-shadow","none",3,"label","click"],[1,"ui-g-6","text-right"],["pButton","","type","submit",2,"min-height","42px","box-shadow","none","margin-right","10px",3,"label","disabled","click"],[1,"p-invalid"]],template:function(i,t){1&i&&(n.Tb(0,"p-dialog",0),n.bc("visibleChange",(function(i){return t.popupEredeOpen=i}))("onHide",(function(){return t.closePopup()})),n.gc(1,"translate"),n.Mc(2,Et,22,16,"form",1),n.Sb()),2&i&&(n.nc("header",n.hc(1,7,"FAS_ANA.EREDI")),n.mc("visible",t.popupEredeOpen)("responsive",!0)("modal",!0)("closable",!0)("contentStyle",n.rc(9,Dt)),n.Bb(2),n.mc("ngIf",t.eredeFormGroup))},directives:[h.a,r.t,b.I,b.t,b.k,b.c,ri.a,b.s,b.i,Mt.a,T.b],pipes:[m.d],styles:[""]}),i})();function Nt(i,t){if(1&i){const i=n.Ub();n.Tb(0,"app-popup-erede",16),n.bc("chiudiPopup",(function(t){return n.Ec(i),n.fc().closePopupErede(t)}))("saveErede",(function(t){return n.Ec(i),n.fc().saveErede(t)})),n.Sb()}if(2&i){const i=n.fc();n.mc("popupEredeOpen",i.popupEredeOpen)("cuaa",i.cuaa)("erede",i.erede)("idValidazione",i.idValidazione)}}function yt(i,t){1&i&&(n.Tb(0,"tr",17),n.Tb(1,"th",18),n.Oc(2,"Codice fiscale"),n.Sb(),n.Tb(3,"th",18),n.Oc(4,"Cognome"),n.Sb(),n.Tb(5,"th",18),n.Oc(6,"Nome"),n.Sb(),n.Tb(7,"th",18),n.Oc(8,"Data di nascita"),n.Sb(),n.Tb(9,"th",18),n.Oc(10,"Comune di nascita"),n.Sb(),n.Tb(11,"th",18),n.Oc(12,"Provincia di nascita"),n.Sb(),n.Tb(13,"th",19),n.Oc(14,"Residenza"),n.Sb(),n.Tb(15,"th",20),n.Oc(16," Azioni "),n.Sb(),n.Sb(),n.Tb(17,"tr",17),n.Tb(18,"th"),n.Oc(19,"Via"),n.Sb(),n.Tb(20,"th"),n.Oc(21,"Comune"),n.Sb(),n.Tb(22,"th"),n.Oc(23,"Provincia"),n.Sb(),n.Tb(24,"th"),n.Oc(25,"Cap"),n.Sb(),n.Sb())}function Pt(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr",21),n.Tb(1,"td"),n.Oc(2),n.Sb(),n.Tb(3,"td"),n.Oc(4),n.Sb(),n.Tb(5,"td"),n.Oc(6),n.Sb(),n.Tb(7,"td"),n.Oc(8),n.gc(9,"date"),n.Sb(),n.Tb(10,"td"),n.Oc(11),n.Sb(),n.Tb(12,"td"),n.Oc(13),n.Sb(),n.Tb(14,"td"),n.Oc(15),n.Sb(),n.Tb(16,"td"),n.Oc(17),n.Sb(),n.Tb(18,"td"),n.Oc(19),n.Sb(),n.Tb(20,"td"),n.Oc(21),n.Sb(),n.Tb(22,"td"),n.Tb(23,"button",22),n.bc("click",(function(){n.Ec(i);const e=t.$implicit;return n.fc().cancellaErede(e.id,e.cfErede)})),n.gc(24,"translate"),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=n.fc();n.mc("pSelectableRow",i),n.Bb(2),n.Pc(i.cfErede),n.Bb(2),n.Pc(i.cognome),n.Bb(2),n.Pc(i.nome),n.Bb(2),n.Qc(" ",n.ic(9,13,i.dataNascita,"dd/MM/yyyy")," "),n.Bb(3),n.Pc(i.comuneNascita),n.Bb(2),n.Pc(i.provinciaNascita),n.Bb(2),n.Pc(i.indirizzo.descrizioneEstesa),n.Bb(2),n.Pc(i.indirizzo.comune),n.Bb(2),n.Pc(i.indirizzo.provincia),n.Bb(2),n.Pc(i.indirizzo.cap),n.Bb(2),n.nc("label",n.hc(24,16,"ELIMINA")),n.mc("disabled",!e.fascicoloEditable())}}function Lt(i,t){if(1&i&&(n.Tb(0,"div",23),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Pc(i.footerTabella())}}function _t(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",17),n.Ob(1,"i",24),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",25),n.Tb(7,"div",26),n.Tb(8,"button",27),n.bc("click",(function(){return n.Ec(i),n.fc().confermaCancellaErede()})),n.Sb(),n.Sb(),n.Tb(9,"div",26),n.Tb(10,"button",28),n.bc("click",(function(){return n.Ec(i),n.fc().AnnullaCancellaErede()})),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=n.fc();n.Bb(3),n.Pc(i.summary),n.Bb(2),n.Pc(i.detail),n.Bb(3),n.mc("disabled",!e.fascicoloEditable())}}const Rt=function(){return{marginTop:"70px"}};let xt=(()=>{class i{constructor(i,t,e,o,a){this.anagraficaFascicoloService=i,this.route=t,this.messageService=e,this.fascicoloDettaglioService=o,this.translateService=a,this.cuaa="",this.idDaCancellare=0,this.componentDestroyed$=new U.a,this.idValidazione=void 0,this.popupEredeOpen=!1}ngOnInit(){this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.route.queryParams.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{const t=i["id-validazione"];this.idValidazione=t?Number.parseInt(t):0,this.getEredi(this.cuaa,this.idValidazione)}),this.subscribeStatoFascicolo()}getEredi(i,t){this.anagraficaFascicoloService.getEredi(i,t).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.listaEredi=[],this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreRecuperoDati)),q.a))).subscribe(i=>{this.listaEredi=i,this.listaEredi||(this.listaEredi=[]),this.fascicoloDettaglioService.eredi.next(this.listaEredi)})}aggiungiErede(){this.erede=null,this.popupEredeOpen=!0}cancellaErede(i,t){this.idDaCancellare=i,this.messageService.add(u.a.getToast("cancellaErede",u.b.warn,u.a.checkACancellaErede+t+"?"))}AnnullaCancellaErede(){this.messageService.clear("cancellaErede")}confermaCancellaErede(){this.messageService.clear("cancellaErede"),this.idDaCancellare||(this.idDaCancellare=0),console.log("Cancella record id: "+this.idDaCancellare),this.anagraficaFascicoloService.cancellaErede(this.cuaa,this.idDaCancellare).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.messageService.add(u.a.getToast("tst",u.b.error,u.a.salvataggioDatiKo)),q.a)),Object(Ai.a)(i=>{const t=this.listaEredi.findIndex(i=>i.id===this.idDaCancellare);return this.listaEredi.splice(t,1),this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK)),this.idDaCancellare=0,this.anagraficaFascicoloService.getFascicolo(this.cuaa,this.idValidazione)})).subscribe(i=>{this.fascicoloDettaglioService.fascicoloCorrente.next(i)})}subscribeStatoFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{i&&(this.fascicoloCorrente=i)})}eredeEditable(){return!this.eredeFormGroup.invalid&&0===this.idValidazione}fascicoloEditable(){return this.fascicoloCorrente&&0===this.idValidazione&&this.fascicoloCorrente.stato===R.c.IN_CHIUSURA}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}footerTabella(){let i="";return this.listaEredi&&0===this.listaEredi.length?i="Non sono presenti eredi":this.listaEredi&&1===this.listaEredi.length?i="\xc8 presente 1 erede":this.listaEredi&&(i="Sono presenti "+this.listaEredi.length+" eredi."),i}saveErede(i){this.anagraficaFascicoloService.salvaErede(i,this.cuaa).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.messageService.add(u.a.getToast("tst",u.b.error,i.error.message)),q.a))).subscribe(()=>{this.closePopupErede(),this.messageService.add(u.a.getToast("tst",u.b.success,this.translateService.instant("EREDE.SALVATAGGIO_OK"))),this.getEredi(this.cuaa,this.idValidazione)})}closePopupErede(){this.popupEredeOpen=!1}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ti.a),n.Nb(x.a),n.Nb(p.d),n.Nb(L.a),n.Nb(m.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-eredi"]],decls:20,vars:14,consts:[["key","tst"],[3,"popupEredeOpen","cuaa","erede","idValidazione","chiudiPopup","saveErede",4,"ngIf"],[1,"ui-grid-fixed","boxgrey"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-anagraf.jpg"],[1,"ml-2"],[1,"mb-3"],[2,"text-align","left"],["type","button","pButton","","icon","pi pi-plus","label","Aggiungi",3,"disabled","click"],[3,"value","autoLayout","selection","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["position","center","key","cancellaErede",3,"modal","baseZIndex"],["pTemplate","message"],[3,"popupEredeOpen","cuaa","erede","idValidazione","chiudiPopup","saveErede"],[2,"text-align","center"],["rowspan","2"],["colspan","4"],["rowspan","2",2,"width","110px"],[3,"pSelectableRow"],["type","button","pButton","","title","Rimuovi erede","icon","pi pi-trash",2,"background-color","red",3,"disabled","label","click"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid","p-formgrid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"disabled","click"],["type","button","pButton","","label","Annulla",1,"ui-button-secondary",3,"click"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Mc(1,Nt,1,4,"app-popup-erede",1),n.Tb(2,"div",2),n.Tb(3,"a",3),n.bc("click",(function(){return t.handleClick()})),n.Ob(4,"em",4),n.Ob(5,"img",5),n.Tb(6,"span",6),n.Oc(7),n.gc(8,"translate"),n.Sb(),n.Sb(),n.Ob(9,"br"),n.Tb(10,"h3",7),n.Oc(11),n.Sb(),n.Tb(12,"div",8),n.Tb(13,"button",9),n.bc("click",(function(){return t.aggiungiErede()})),n.Sb(),n.Sb(),n.Tb(14,"p-table",10),n.bc("selectionChange",(function(i){return t.selectedErede=i})),n.Mc(15,yt,26,0,"ng-template",11),n.Mc(16,Pt,25,18,"ng-template",12),n.Mc(17,Lt,2,1,"ng-template",13),n.Sb(),n.Sb(),n.Tb(18,"p-toast",14),n.Mc(19,_t,11,3,"ng-template",15),n.Sb()),2&i&&(n.Kc(n.rc(13,Rt)),n.Bb(1),n.mc("ngIf",t.popupEredeOpen),n.Bb(6),n.Qc(" ",n.hc(8,11,"FascicoloAziendale.DATI_ANAGRAFICI_E_FISCALI")," "),n.Bb(4),n.Pc("Eredi"),n.Bb(2),n.mc("disabled",!t.fascicoloEditable()),n.Bb(1),n.mc("value",t.listaEredi)("autoLayout",!0)("selection",t.selectedErede),n.Bb(4),n.mc("modal",!0)("baseZIndex",5e3))},directives:[g.a,r.t,x.h,T.b,j.q,p.e,Bt,j.m],pipes:[m.d,r.f],styles:[""]}),i})();var wt=e("6pRi"),Gt=e("G6y3"),kt=e("cp0P"),Vt=e("xiDf"),Ut=e("qXBG"),qt=e("DYNa"),Qt=e("OlUD"),Zt=e("sFKl"),$t=e("ucsd"),jt=e("AytR"),Yt=e("0Dnl"),Ht=e("N00r"),Kt=e("yuh5"),Wt=e("4jpa"),Xt=e("Caez"),Jt=e("8X0W"),ie=e("s0xf"),te=e("RFNi"),ee=e("Q1Ke"),oe=e("4IZF"),ae=e("Upfa"),ce=e("wH++"),re=e("8PIW");function ne(i,t){1&i&&n.Ob(0,"div",20)}function se(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr"),n.Tb(1,"td",11),n.Tb(2,"a",12),n.bc("click",(function(){return n.Ec(i),n.fc().handleClick("eredi")})),n.Oc(3),n.gc(4,"translate"),n.Ob(5,"i",13),n.Sb(),n.Sb(),n.Ob(6,"td",14),n.Sb()}2&i&&(n.Bb(3),n.Qc(" ",n.hc(4,1,"FascicoloAziendale.EREDI")," "))}const le=function(){return{marginTop:"70px"}};let be=(()=>{class i{constructor(i,t,e,o,a,c,r,n,s,l,b,d,u,p,m,g,h){this.router=i,this.route=t,this.messageService=e,this.fascicoloCorrenteUMA=o,this.errorService=a,this.mandatoService=c,this.httpClientDomandaUmaService=r,this.httpClientDichiarazioneConsumiUma=n,this.authService=s,this.dtoBuilderService=l,this.anagraficaFascicoloService=b,this.fascicoloDettaglioService=d,this.fascicoloService=u,this.myappagService=p,this.dateUtilService=m,this.formatConverterService=g,this.antimafiaService=h,this.popupSchedaValidazioneOpen=!1,this.isPopupPassaAStatoOpen=!1,this.isPopupControlloCompletezzaOpen=!1,this.popupSchedaValidazioneFirmaCaaAziendaOpen=!1,this.isMyappagEnabled=!1,this.statoFascicoloEnum=R.c,this.componentDestroyed$=new U.a,this.idValidazione=void 0,this.UMA_01_01_BR1_ERR_MSG="Solamente il titolare o il rappresentante legale di un'azienda agricola \xe8 autorizzato alla presentazione della Richiesta di carburante on line",this.UMA_FASCICOLO_NON_VALIDO="Non \xe8 possibile reperire il fascicolo selezionato",this.UMA_PERSONA_FISICA_DECEDUTA="Il campo data decesso risulta valorizzato. Il sistema non permette l'inserimento di una richiesta di carburante"}ngOnInit(){this.isMyappagEnabled=this.myappagService.isMyappagEnabled,this.subscribeStatoFascicolo(),this.route.queryParams.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{const t=i["id-validazione"];this.idValidazione=t?Number.parseInt(t):0})}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete(),this.richiestaCarburanteSubscription&&this.richiestaCarburanteSubscription.unsubscribe(),this.dichiarazioneConsumiSubscription&&this.dichiarazioneConsumiSubscription.unsubscribe(),this.getFascicoloAgsByCuaaSub&&this.getFascicoloAgsByCuaaSub.unsubscribe(),this.prelieviAndRichiesteSubscription&&this.prelieviAndRichiesteSubscription.unsubscribe(),this.getDichiarazioniAntimafiaSub&&this.getDichiarazioniAntimafiaSub.unsubscribe()}subscribeStatoFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{console.log("subscribeStatoFascicolo()"),this.fascicoloCorrente=i,null!==this.fascicoloCorrente&&(this.idFascicolo=this.fascicoloCorrente.id,this.idMandato=this.fascicoloCorrente.mandatoDto.id,this.caricaIdFascicoloUMA())})}goToFascicoliValidati(){this.router.navigate(["./fascicoli-validati"],{relativeTo:this.route})}getMandato(){this.mandatoService.getMandatoFile(this.idFascicolo,this.idMandato,this.idValidazione).subscribe(i=>{let t=new Blob([i],{type:"application/pdf"});if(null!=t){const i=URL.createObjectURL(t);window.open(i)}else this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreVisualizzazioneMandato))},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,u.a.erroreVisualizzazioneMandato))})}handleClick(i){const t=this.fascicoloCorrente.cuaa;16===t.length||11===t.length?(console.log("Redirect to dati azienda... link: "+i),this.router.navigate([i],{relativeTo:this.route,queryParams:this.idValidazione?{"id-validazione":this.idValidazione}:{},queryParamsHandling:"merge"})):this.messageService.add(u.a.getToast("tst",u.b.error,"WIP"))}changeStatusInAggiornamentoFascicolo(){this.fascicoloCorrente.stato!==R.c.ALLA_FIRMA_CAA&&this.fascicoloCorrente.stato!==R.c.FIRMATO_CAA||this.messageService.add(u.a.getToast("checkChangeStatus",u.b.warn,u.a.CONFERMA_FASCICOLO_IN_AGGIORNAMENTO))}reloadDataFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.next(this.fascicoloCorrente)}setAllaFirmaAzienda(i){this.anagraficaFascicoloService.putStatoAllaFirmaAziendaFascicolo(i).subscribe(()=>{this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK)),this.fascicoloCorrente.stato=R.c.ALLA_FIRMA_AZIENDA,this.reloadDataFascicolo()},i=>{let t;t=i.error.message?i.error.message:u.a.salvataggioDatiKo,this.messageService.add(u.a.getToast("tst",u.b.error,t))})}setInAggiornamento(i){this.anagraficaFascicoloService.putSetStatusFascicoloInAggiornamento(i).subscribe(()=>{this.messageService.add(u.a.getToast("tst",u.b.success,u.a.changeStatusInAggiornamentoOk)),this.fascicoloCorrente.stato=R.c.IN_AGGIORNAMENTO,this.reloadDataFascicolo()},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,u.a.changeStatusInAggiornamentoKo))})}sincronizzazione(){console.log("Visualizzazione sincronizzazione")}anomalie(){console.log("Visualizzazione anomalie")}linkPagina(){return this.router.navigate(["./"],{relativeTo:this.route})}onClickGestioneCarburanteInEsubero(){if(!this.isFascicoloSelezionato())return;const i=this.dateUtilService.getCurrentYear().toString(),t=this.fascicoloCorrente.cuaa,e={cuaa:t,campagna:[i],stati:[Xt.a.AUTORIZZATA],numeroElementiPagina:1,pagina:0},o={cuaa:t,campagna:[i],numeroElementiPagina:1,pagina:0};this.prelieviAndRichiesteSubscription=Object(kt.a)([this.httpClientDomandaUmaService.getDomande(e),this.httpClientDichiarazioneConsumiUma.getDichiarazioniConsumi(o),this.httpClientDichiarazioneConsumiUma.getResiduoAnnoPrecedente(t,this.dateUtilService.getCurrentYear()-1,[$t.a.PROTOCOLLATA]),this.httpClientDomandaUmaService.getPrelieviByCuaaAndCampagna(t,i)]).subscribe(([i,t,e,o])=>{if(!i||!i.length)return void this.errorService.showErrorWithMessage(ie.a.richiesteNotPresent,"tst");const a=i[0].id;if(t&&t.length){const i=t.pop();if($t.a.PROTOCOLLATA===i.stato)return void this.errorService.showErrorWithMessage(ie.a.esisteDichiarazioneConsumiAutorizzata,"tst")}let c=new te.a;if(c.benzina=0,c.gasolio=0,c.gasolioSerre=0,e&&e.length){const i=e.pop(),t=i&&i.rimanenza?i.rimanenza:null;null==t?console.log(ie.a.residuoDichiarazioneAnnoPrecedenteNotDisponibile):c=t}else console.log(ie.a.dichiarazioneAnnoPrecedenteNotDisponibile);o&&o.totale?(c.benzina+=this.formatConverterService.toNumber(o.totale.benzina),c.gasolio+=this.formatConverterService.toNumber(o.totale.gasolio),c.gasolioSerre+=this.formatConverterService.toNumber(o.totale.gasolioSerre)):console.log(ie.a.prelieviNotDisponibile),console.log("Carburante in esubero ",c),c&&(c.benzina>0||c.gasolio>0||c.gasolioSerre>0)?this.router.navigate([`uma/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/esubero-carburante/${a}`]):this.errorService.showErrorWithMessage(ie.a.erroreCarburanteInEsubero,"tst")},i=>{this.messageService.clear(),this.errorService.showErrorWithMessage(ie.a.erroreModificaCarburanteInEsubero,"tst")})}onClickRichiestaRettificaUma(){if(!this.isFascicoloSelezionato())return;const i=this.fascicoloCorrente.cuaa,t=this.anagraficaFascicoloService.getTitolariRappresentantiLegali(i),e=this.authService.getUserNew(!1),o=this.httpClientDomandaUmaService.getDomande(this.dtoBuilderService.buildDomandaUmaFilterWithAllStates(i));this.richiestaCarburanteSubscription=this.anagraficaFascicoloService.getDatiSportelloCAA().pipe(Object(Z.a)(i=>(this.errorService.showError(i),q.a)),Object(Ai.a)(i=>{const a=null!=i;return console.log("Ruolo selezionato in Home: ",localStorage.getItem("selectedRole")),localStorage.getItem("selectedRole")==Ut.a.roleCaa&&a?Object(kt.a)([t,Object(Ii.a)("ENTE"),o]):localStorage.getItem("selectedRole")==Ut.a.rolePrivate?Object(kt.a)([e,Object(Ii.a)("UTENTE"),o]):(this.messageService.add(u.a.getToast("tst",u.b.warn,u.a.UTENTE_NON_ABILITATO)),q.a)}),Object(Z.a)(i=>(this.errorService.showError(i),q.a)),Object(Ai.a)(([t,e,o])=>{var a;return"UTENTE"===e?o&&o.length?Object(Ii.a)(o):this.httpClientDomandaUmaService.presentaDomanda(i,t.codiceFiscale):o&&o.length?Object(Ii.a)(o):this.fascicoloCorrenteUMA.isPersonaFisica(i)&&null!=(null===(a=this.fascicoloCorrenteUMA.fascicoloLegacy)||void 0===a?void 0:a.dataMorteTitolare)?(this.errorService.showErrorWithMessage(this.UMA_PERSONA_FISICA_DECEDUTA),q.a):null!=t&&t.length?(this.router.navigate([`uma/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/richiedente/${Qt.a.richiesta}`]),q.a):(this.errorService.showErrorWithMessage(this.UMA_01_01_BR1_ERR_MSG),q.a)})).subscribe(i=>{"number"==typeof i?this.router.navigate([`uma/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/richiesta`,i]):this.router.navigate([`./fascicolo/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/rettifiche/${this.fascicoloCorrenteUMA.fascicoloLegacy.cuaa}`],{relativeTo:this.route.parent.parent.parent})},i=>this.errorService.showError(i))}onClickDichiarazioneConsumi(){if(!this.isFascicoloSelezionato())return;const i=this.fascicoloCorrente.cuaa,t=this.anagraficaFascicoloService.getTitolariRappresentantiLegali(i),e=this.authService.getUserNew(!1);let o=new Array;o.push($t.a.IN_COMPILAZIONE),o.push($t.a.PROTOCOLLATA);const a=new wt.a;a.stati=o,a.cuaa=i;const c=this.httpClientDichiarazioneConsumiUma.getDichiarazioniConsumi(a);let r=new Wt.a;r.campagna=[this.dateUtilService.getCurrentYear().toString()],r.cuaa=i;let n=new Array;n.push(Xt.a.AUTORIZZATA),r.stati=n;const s=this.httpClientDomandaUmaService.getDomande(r);this.dichiarazioneConsumiSubscription=this.anagraficaFascicoloService.getDatiSportelloCAA().pipe(Object(Z.a)(i=>(this.errorService.showError(i),q.a)),Object(Ai.a)(i=>{const o=null!=i;return console.log("Ruolo selezionato in Home: ",localStorage.getItem("selectedRole")),localStorage.getItem("selectedRole")==Ut.a.roleCaa&&o?Object(kt.a)([t,Object(Ii.a)("ENTE"),c,s]):localStorage.getItem("selectedRole")==Ut.a.rolePrivate?Object(kt.a)([e,Object(Ii.a)("UTENTE"),c,s]):(this.messageService.add(u.a.getToast("tst",u.b.warn,u.a.UTENTE_NON_ABILITATO)),q.a)}),Object(Z.a)(i=>(this.errorService.showError(i),q.a)),Object(Ai.a)(([t,e,o,a])=>{let c=[];o&&o.length&&(c=o.filter(i=>i.campagnaRichiesta==this.dateUtilService.getCurrentYear()||i.campagnaRichiesta==this.dateUtilService.getCurrentYear()-1));let r=null;if(a&&a.length)r=a[0];else if(this.dateUtilService.getCurrentYear()==jt.a.annoInizioCampagnaUma)return this.errorService.showErrorWithMessage("Non esiste una richiesta di carburante autorizzata"),q.a;return"UTENTE"===e?null==c||!c.length||null!=r&&!c.find(i=>i.campagnaRichiesta==this.dateUtilService.getCurrentYear())?this.httpClientDichiarazioneConsumiUma.presentaDichiarazioneConsumi(i,t.codiceFiscale):Object(Ii.a)(c):null==c||!c.length||null!=r&&!c.find(i=>i.campagnaRichiesta==this.dateUtilService.getCurrentYear())?null!=t&&t.length?(this.router.navigate([`uma/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/richiedente/${Qt.a["dichiarazione-consumi"]}`]),q.a):(this.errorService.showErrorWithMessage(this.UMA_01_01_BR1_ERR_MSG),q.a):Object(Ii.a)(c)})).subscribe(i=>{if("number"==typeof i)this.router.navigate([`uma/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/dichiarazione-consumi`,i]);else{const t=Ci.orderBy(i,["campagnaRichiesta"],["desc"]);this.router.navigate([`uma/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/dichiarazione-consumi`,(i=t)[0].id])}},i=>this.errorService.showError(i))}onClickDomandaAntimafia(){this.controlloStatoFascicolo()&&this.controlloStatoDichiarazioneAntimafia()}controlloStatoFascicolo(){return!!this.fascicoloCorrenteUMA.fascicoloLegacy.stato.match("VALIDO|IN_LAVORAZIONE|IN_ANOMALIA")||(this.errorService.showErrorWithMessage(u.a.CUAA_NON_ATTIVO(this.fascicoloCorrente.cuaa)),!1)}controlloStatoDichiarazioneAntimafia(){if(null==this.fascicoloCorrenteUMA||null==this.fascicoloCorrenteUMA.fascicoloLegacy||null==this.fascicoloCorrenteUMA.fascicoloLegacy.cuaa)return;const i=new oe.a;i.azienda=new ae.a,i.azienda.cuaa=this.fascicoloCorrente.cuaa,this.getDichiarazioniAntimafiaSub=this.antimafiaService.getDichiarazioniAntimafia(i).subscribe(i=>{this.dichiarazioniAntimafia=i||[],this.dichiarazioniAntimafia.length&&this.dichiarazioniAntimafia.filter(i=>i.stato.identificativo===re.a.POSITIVO).length?this.messageService.add(u.a.getToast("tst",u.b.warn,u.a.BRDAMNVL005)):this.router.navigate([`./fascicolo/${this.fascicoloCorrenteUMA.fascicoloLegacy.idAgs}/antimafia`],{relativeTo:this.route.parent.parent.parent})},i=>this.errorService.showError(i))}isFascicoloSelezionato(){return!!(this.fascicoloCorrente&&this.fascicoloCorrente.cuaa&&this.fascicoloCorrenteUMA&&this.fascicoloCorrenteUMA.fascicoloLegacy)||(this.errorService.showErrorWithMessage(this.UMA_FASCICOLO_NON_VALIDO),!1)}caricaIdFascicoloUMA(){this.getFascicoloAgsByCuaaSub=this.fascicoloService.getUrlGetLegacyByCuaa(this.fascicoloCorrente.cuaa).subscribe(i=>{this.fascicoloCorrenteUMA.fascicoloLegacy=i},i=>this.errorService.showError(i))}goMyappag(){this.myappagService.navigateForCuaa(this.fascicoloCorrente.cuaa)}isFascicoloAttuale(){return 0===this.idValidazione}showSectionEredi(){return this.subscribeEredi(),!!this.fascicoloCorrente&&this.fascicoloCorrenteUMA.isPersonaFisica(this.fascicoloCorrente.cuaa)&&(this.fascicoloCorrente.stato===R.c.IN_CHIUSURA||this.fascicoloCorrente.stato===R.c.CHIUSO&&this.eredi&&this.eredi.length>0)}subscribeEredi(){this.fascicoloDettaglioService.eredi.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{this.eredi=i})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(x.e),n.Nb(x.a),n.Nb(p.d),n.Nb(Yt.a),n.Nb(Ht.a),n.Nb(Gt.a),n.Nb(Vt.a),n.Nb(Zt.a),n.Nb(Ut.a),n.Nb(qt.a),n.Nb(Ti.a),n.Nb(L.a),n.Nb($.a),n.Nb(Kt.a),n.Nb(Jt.a),n.Nb(ee.a),n.Nb(ce.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-fascicolo-dettaglio"]],decls:148,vars:81,consts:[["key","tst",3,"baseZIndex"],["key","tst-controllo-completezza-piano-colturale"],[1,"ui-grid-fixed","mt-70"],[1,"boxgrey"],["class","p-grid p-justify-end",4,"ngIf"],[1,"ui-g"],[1,"accordion-custom",3,"multiple"],[3,"selected"],[2,"color","black"],["src","assets/img/ico-anagraf.jpg",1,"d-inline-block","mr-3"],[1,"ui-table-tbody","display-table"],[1,"cell-link"],[3,"routerLink","click"],[1,"pi","pi-arrow-right"],[1,"p-col-6"],[4,"ngIf"],["src","assets/img/ico-zootecnia.jpg",1,"d-inline-block","mr-3"],["src","assets/img/ico-dotazione.jpg",1,"d-inline-block","mr-3"],["src","assets/img/ico-territorio.jpg",1,"d-inline-block","mr-3"],["src","assets/img/ico-domande.jpg",1,"d-inline-block","mr-3"],[1,"p-grid","p-justify-end"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Ob(1,"p-toast",1),n.Tb(2,"div",2),n.Tb(3,"div",3),n.Mc(4,ne,1,0,"div",4),n.Tb(5,"div",5),n.Tb(6,"p-accordion",6),n.Tb(7,"p-accordionTab",7),n.Tb(8,"p-header",8),n.Ob(9,"img",9),n.Tb(10,"strong"),n.Oc(11),n.gc(12,"translate"),n.Sb(),n.Sb(),n.Tb(13,"table"),n.Tb(14,"tbody",10),n.Tb(15,"tr"),n.Tb(16,"td",11),n.Tb(17,"a",12),n.bc("click",(function(){return t.handleClick("dati-azienda")})),n.Oc(18),n.gc(19,"translate"),n.Ob(20,"i",13),n.Sb(),n.Sb(),n.Tb(21,"td",14),n.Tb(22,"a",12),n.bc("click",(function(){return t.handleClick("modalita-pagamento")})),n.Oc(23),n.gc(24,"translate"),n.Ob(25,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Mc(26,se,7,3,"tr",15),n.Sb(),n.Sb(),n.Sb(),n.Ob(27,"br"),n.Tb(28,"p-accordionTab",7),n.Tb(29,"p-header",8),n.Ob(30,"img",16),n.Tb(31,"strong"),n.Oc(32),n.gc(33,"translate"),n.Sb(),n.Sb(),n.Tb(34,"table"),n.Tb(35,"tbody",10),n.Tb(36,"tr"),n.Tb(37,"td",14),n.Tb(38,"a",12),n.bc("click",(function(){return t.handleClick("allevamenti")})),n.Oc(39),n.gc(40,"translate"),n.Ob(41,"i",13),n.Sb(),n.Sb(),n.Tb(42,"td",14),n.Tb(43,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(44),n.gc(45,"translate"),n.Ob(46,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Tb(47,"tr"),n.Tb(48,"td",14),n.Tb(49,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(50),n.gc(51,"translate"),n.Ob(52,"i",13),n.Sb(),n.Sb(),n.Ob(53,"td",14),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(54,"br"),n.Tb(55,"p-accordionTab",7),n.Tb(56,"p-header",8),n.Ob(57,"img",17),n.Tb(58,"strong"),n.Oc(59),n.gc(60,"translate"),n.Sb(),n.Sb(),n.Tb(61,"table"),n.Tb(62,"tbody",10),n.Tb(63,"tr"),n.Tb(64,"td",14),n.Tb(65,"a",12),n.bc("click",(function(){return t.handleClick("fabbricati")})),n.Oc(66),n.gc(67,"translate"),n.Ob(68,"i",13),n.Sb(),n.Sb(),n.Tb(69,"td",14),n.Tb(70,"a",12),n.bc("click",(function(){return t.handleClick("macchine")})),n.Oc(71),n.gc(72,"translate"),n.Ob(73,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(74,"br"),n.Tb(75,"p-accordionTab",7),n.Tb(76,"p-header",8),n.Ob(77,"img",18),n.Tb(78,"strong"),n.Oc(79),n.gc(80,"translate"),n.Sb(),n.Sb(),n.Tb(81,"table"),n.Tb(82,"tbody",10),n.Tb(83,"tr"),n.Tb(84,"td",14),n.Tb(85,"a",12),n.bc("click",(function(){return t.handleClick("titoli-conduzione")})),n.Oc(86),n.gc(87,"translate"),n.Ob(88,"i",13),n.Sb(),n.Sb(),n.Tb(89,"td",14),n.Tb(90,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(91),n.gc(92,"translate"),n.Ob(93,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Tb(94,"tr"),n.Tb(95,"td",14),n.Tb(96,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(97),n.gc(98,"translate"),n.Ob(99,"i",13),n.Sb(),n.Sb(),n.Tb(100,"td",14),n.Tb(101,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(102),n.gc(103,"translate"),n.Ob(104,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Tb(105,"tr"),n.Tb(106,"td",14),n.Tb(107,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(108),n.gc(109,"translate"),n.Ob(110,"i",13),n.Sb(),n.Sb(),n.Tb(111,"td",14),n.Tb(112,"a",12),n.bc("click",(function(){return t.linkPagina()})),n.Oc(113),n.gc(114,"translate"),n.Ob(115,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(116,"br"),n.Tb(117,"p-accordionTab",7),n.Tb(118,"p-header",8),n.Ob(119,"img",19),n.Tb(120,"strong"),n.Oc(121),n.gc(122,"translate"),n.Sb(),n.Sb(),n.Tb(123,"table"),n.Tb(124,"tbody"),n.Tb(125,"tr"),n.Tb(126,"td"),n.Tb(127,"a",12),n.bc("click",(function(){return t.onClickDomandaAntimafia()})),n.Oc(128),n.gc(129,"translate"),n.Ob(130,"i",13),n.Sb(),n.Sb(),n.Tb(131,"td"),n.Tb(132,"a",12),n.bc("click",(function(){return t.onClickRichiestaRettificaUma()})),n.Oc(133),n.gc(134,"translate"),n.Ob(135,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Tb(136,"tr"),n.Tb(137,"td"),n.Tb(138,"a",12),n.bc("click",(function(){return t.onClickDichiarazioneConsumi()})),n.Oc(139),n.gc(140,"translate"),n.Ob(141,"i",13),n.Sb(),n.Sb(),n.Tb(142,"td"),n.Tb(143,"a",12),n.bc("click",(function(){return t.onClickGestioneCarburanteInEsubero()})),n.Oc(144),n.gc(145,"translate"),n.Ob(146,"i",13),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Ob(147,"br"),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(79,le)),n.mc("baseZIndex",5e4),n.Bb(1),n.Kc(n.rc(80,le)),n.Bb(3),n.mc("ngIf",!1),n.Bb(2),n.mc("multiple",!0),n.Bb(1),n.mc("selected",!0),n.Bb(4),n.Pc(n.hc(12,35,"FascicoloAziendale.DATI_ANAGRAFICI_E_FISCALI")),n.Bb(7),n.Qc(" ",n.hc(19,37,"FascicoloAziendale.DATI_AZIENDA")," "),n.Bb(5),n.Qc(" ",n.hc(24,39,"FascicoloAziendale.MODALITA_PAGAMENTO")," "),n.Bb(3),n.mc("ngIf",t.showSectionEredi()),n.Bb(2),n.mc("selected",!0),n.Bb(4),n.Pc(n.hc(33,41,"FascicoloAziendale.ZOOTECNIA")),n.Bb(7),n.Qc(" ",n.hc(40,43,"FascicoloAziendale.ALLEVAMENTI")," "),n.Bb(5),n.Qc(" ",n.hc(45,45,"FascicoloAziendale.CAPI")," "),n.Bb(6),n.Qc(" ",n.hc(51,47,"FascicoloAziendale.CONSISTENZA_ZOOTENICA")," "),n.Bb(5),n.mc("selected",!0),n.Bb(4),n.Pc(n.hc(60,49,"FascicoloAziendale.DOTAZIONE_TECNICA")),n.Bb(7),n.Qc(" ",n.hc(67,51,"FascicoloAziendale.FABBRICATI")," "),n.Bb(5),n.Qc(" ",n.hc(72,53,"FascicoloAziendale.MACCHINE")," "),n.Bb(4),n.mc("selected",!0),n.Bb(4),n.Pc(n.hc(80,55,"FascicoloAziendale.TERRITORIO")),n.Bb(7),n.Qc(" ",n.hc(87,57,"FascicoloAziendale.TITOLI_CONDUZIONE")," "),n.Bb(5),n.Qc(" ",n.hc(92,59,"FascicoloAziendale.PIANI_CULTURALI")," "),n.Bb(6),n.Qc(" ",n.hc(98,61,"FascicoloAziendale.PORTAFOGLIO_TITOLI")," "),n.Bb(5),n.Qc(" ",n.hc(103,63,"FascicoloAziendale.SCHEDARIO_VITICOLO")," "),n.Bb(6),n.Qc(" ",n.hc(109,65,"FascicoloAziendale.SCHEDARIO_ORTOFRUTTICOLO")," "),n.Bb(5),n.Qc(" ",n.hc(114,67,"FascicoloAziendale.SCHEDARIO_OLIVICOLO")," "),n.Bb(4),n.mc("selected",!0),n.Bb(4),n.Pc(n.hc(122,69,"FascicoloAziendale.DOMANDE")),n.Bb(7),n.Qc(" ",n.hc(129,71,"FascicoloAziendale.DOMANDA_ANTIMAFIA")," "),n.Bb(5),n.Qc(" ",n.hc(134,73,"FascicoloAziendale.RICHIESTA_CARBURANTE")," "),n.Bb(6),n.Qc(" ",n.hc(140,75,"FascicoloAziendale.DICHIARAZIONE_CONSUMI")," "),n.Bb(5),n.Qc(" ",n.hc(145,77,"FascicoloAziendale.GESTIONE_CARBURANTE_ESUBERO")," "))},directives:[g.a,r.t,f.a,f.c,p.c,x.h],pipes:[m.d],styles:["[_nghost-%COMP%] .ui-accordion .ui-accordion-header>a{text-decoration:none;vertical-align:center;color:#000;background-color:#fff;border:1}.ui-accordion[_ngcontent-%COMP%]   .ui-icon[_ngcontent-%COMP%]{color:#000}[_nghost-%COMP%] .ui-chkbox .ui-chkbox-box{padding:2px;border-radius:15px;width:1.75em;height:1.75em;overflow:hidden;transition:background-color .3s;border:1px solid grey}[_nghost-%COMP%] .ui-accordion .ui-accordion-content{color:#000;background-color:hsla(0,0%,100%,.144);border-block-color:#000}[_nghost-%COMP%] .ui-accordion-header.ui-icon>a{color:#000;background-color:#fff}[_nghost-%COMP%] .display-table{display:table;width:100%}[_nghost-%COMP%] .accordion-custom{width:100%;display:block}[_nghost-%COMP%] .accordion-custom .ui-accordion-toggle-icon.ui-accordion-toggle-icon{margin-right:10px;color:#000;font-size:36px}[_nghost-%COMP%] .accordion-custom .ui-accordion-content.ui-accordion-content{padding:0;border:0}[_nghost-%COMP%] .accordion-custom .ui-accordion .ui-accordion-header>a{border-top:3px solid green;height:auto;border-left:1px solid #cacaca;border-right:1px solid #cacaca}[_nghost-%COMP%] .accordion-custom table{width:100%;border-collapse:collapse}[_nghost-%COMP%] .accordion-custom table td{border:1px solid #cacaca;padding:0;width:50%}[_nghost-%COMP%] .accordion-custom td a{display:flex;align-items:center;justify-content:space-between;width:100%;height:100%;padding:16px 10px 16px 62px;color:#16314e}[_nghost-%COMP%] .accordion-custom td a:hover{background-color:#daeddb;text-decoration:none}[_nghost-%COMP%] .accordion-custom td a:hover .pi{color:#01985a}[_nghost-%COMP%] .accordion-custom td .pi{font-size:24px;color:inherit}[_nghost-%COMP%] .section-question__header{padding:16px;background-color:#01985a}"]}),i})();class de{static toDto(i){if(!i)return null;const t=new de;return t.identificativoFiscale=i.identificativoFiscale,t.identificativo=i.identificativo,t.specie=i.specie,t.denominazione=i.denominazione,t.tipoProduzione=i.tipoProduzione,t.orientamentoProduttivo=i.orientamentoProduttivo,t.autorizzazioneSanitariaLatte=i.autorizzazioneSanitariaLatte,t.dtAperturaAllevamento=i.dtAperturaAllevamento,t.dtChiusuraAllevamento=i.dtChiusuraAllevamento,t.cfProprietario=i.cfProprietario,t.denominazioneProprietario=i.denominazioneProprietario,t.cfDetentore=i.cfDetentore,t.denominazioneDetentore=i.denominazioneDetentore,t.dtInizioDetenzione=i.dtInizioDetenzione,t.dtFineDetenzione=i.dtFineDetenzione,t.soccida=i.soccida,t.capiTotali=i.capiTotali,t.dataCalcoloCapi=i.dataCalcoloCapi,t.tipologiaAllevamento=i.tipologiaAllevamento,t.strutturaAllevamentoDto=ue.toDto(i.struttura),t}}class ue{static toDto(i){if(!i)return null;const t=new ue;return t.identificativo=i.identificativo,t.indirizzo=i.indirizzo,t.cap=i.cap,t.localita=i.localita,t.comune=i.comune,t.latitudine=i.latitudine,t.longitudine=i.longitudine,t.foglioCatastale=i.foglioCatastale,t.sezione=i.sezione,t.particella=i.particella,t.subalterno=i.subalterno,t}}let pe=(()=>{class i{constructor(i,t){this.httpClient=i,this.configuration=t,this.urlZootecnia=this.configuration.zootecnia_server+"/zootecnia"}getUrlAllevamenti(i){return`${this.urlZootecnia}/${i}/anagrafica-allevamenti`}putUrlUpdateAllevamenti(i){return this.getUrlAllevamenti(i)+"/aggiorna"}getAllevamenti(i){return this.httpClient.get(this.getUrlAllevamenti(i)).pipe(Object(Fi.a)(i=>de.toDto(i)))}putUpdateAllevamenti(i,t){const e=new FormData;return e.append("dataRichiesta",t),this.httpClient.put(this.putUrlUpdateAllevamenti(i),e)}getUrlControlloCompletezza(i){return`${this.urlZootecnia}/${i}/controllo-completezza`}getControlloCompletezza(i){return console.log("sending request to: "+this.getUrlControlloCompletezza(i)),this.httpClient.get(this.getUrlControlloCompletezza(i))}}return i.\u0275fac=function(t){return new(t||i)(n.Xb(a.b),n.Xb(c.a))},i.\u0275prov=n.Jb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var me=e("2Vo4");function ge(i,t){if(1&i&&(n.Tb(0,"th",19),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Ob(3,"p-sortIcon",20),n.Sb()),2&i){const i=t.$implicit;n.mc("pSortableColumn",i.field)("pSortableColumnDisabled",null==i.field),n.Bb(2),n.Pc(i.header),n.Bb(1),n.mc("field",i.field)}}function he(i,t){if(1&i&&(n.Tb(0,"tr"),n.Ob(1,"th",17),n.Mc(2,ge,4,4,"th",18),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.mc("ngForOf",i)}}function fe(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"a",21),n.Ob(3,"i",22),n.Sb(),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.gc(6,"translate"),n.gc(7,"translate"),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.Sb(),n.Tb(10,"td"),n.Oc(11),n.Sb(),n.Tb(12,"td"),n.Oc(13),n.Sb(),n.Tb(14,"td"),n.Oc(15),n.Sb(),n.Tb(16,"td"),n.Oc(17),n.Sb(),n.Tb(18,"td"),n.Oc(19),n.gc(20,"translate"),n.gc(21,"translate"),n.Sb(),n.Tb(22,"td"),n.Oc(23),n.gc(24,"translate"),n.gc(25,"translate"),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=t.expanded;n.Bb(2),n.mc("pRowToggler",i),n.Bb(1),n.mc("ngClass",e?"pi pi-chevron-down":"pi pi-chevron-right"),n.Bb(2),n.Qc("",i.specie?n.hc(6,10,"FascicoloAziendale.SPE_CODICE."+i.specie.trim())!=="FascicoloAziendale.SPE_CODICE."+i.specie.trim()?n.hc(7,12,"FascicoloAziendale.SPE_CODICE."+i.specie.trim()):"("+i.specie.trim()+")":"-"," "),n.Bb(4),n.Qc(" ",i.strutturaAllevamentoDto.identificativo," "),n.Bb(2),n.Qc(" ",i.strutturaAllevamentoDto.comune," "),n.Bb(2),n.Pc(i.cfProprietario),n.Bb(2),n.Pc(i.cfDetentore),n.Bb(2),n.Pc(i.tipologiaAllevamento?"("+i.tipologiaAllevamento+")":"-"),n.Bb(2),n.Qc("",i.tipoProduzione?n.hc(20,14,"FascicoloAziendale.TIPO_PRODUZIONE."+i.tipoProduzione.trim())!=="FascicoloAziendale.TIPO_PRODUZIONE."+i.tipoProduzione.trim()?n.hc(21,16,"FascicoloAziendale.TIPO_PRODUZIONE."+i.tipoProduzione.trim()):"("+i.tipoProduzione.trim()+")":"-"," "),n.Bb(4),n.Qc("",i.orientamentoProduttivo?n.hc(24,18,"FascicoloAziendale.ORIENTAMENTO_PRODUTTIVO."+i.orientamentoProduttivo.trim())!=="FascicoloAziendale.ORIENTAMENTO_PRODUTTIVO."+i.orientamentoProduttivo.trim()?n.hc(25,20,"FascicoloAziendale.ORIENTAMENTO_PRODUTTIVO."+i.orientamentoProduttivo.trim()):"("+i.orientamentoProduttivo.trim()+")":"-"," ")}}function Te(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"tbody"),n.Ob(3,"tr"),n.Tb(4,"tr"),n.Tb(5,"td"),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.Sb(),n.Sb(),n.Tb(10,"tr"),n.Tb(11,"td"),n.Oc(12),n.gc(13,"translate"),n.Sb(),n.Tb(14,"td"),n.Oc(15),n.Sb(),n.Sb(),n.Tb(16,"tr"),n.Tb(17,"td"),n.Oc(18),n.gc(19,"translate"),n.Sb(),n.Tb(20,"td"),n.Oc(21),n.Sb(),n.Sb(),n.Tb(22,"tr"),n.Tb(23,"td"),n.Oc(24),n.gc(25,"translate"),n.Sb(),n.Tb(26,"td"),n.Oc(27),n.Sb(),n.Sb(),n.Tb(28,"tr"),n.Tb(29,"td"),n.Oc(30),n.gc(31,"translate"),n.Sb(),n.Tb(32,"td"),n.Oc(33),n.Sb(),n.Sb(),n.Tb(34,"tr"),n.Tb(35,"td"),n.Oc(36),n.gc(37,"translate"),n.Sb(),n.Tb(38,"td"),n.Oc(39),n.Sb(),n.Sb(),n.Tb(40,"tr"),n.Tb(41,"td"),n.Oc(42),n.gc(43,"translate"),n.Sb(),n.Tb(44,"td"),n.Oc(45),n.gc(46,"date"),n.Sb(),n.Sb(),n.Tb(47,"tr"),n.Tb(48,"td"),n.Oc(49),n.gc(50,"translate"),n.Sb(),n.Tb(51,"td"),n.Oc(52),n.gc(53,"date"),n.Sb(),n.Sb(),n.Tb(54,"tr"),n.Tb(55,"td"),n.Oc(56),n.gc(57,"translate"),n.Sb(),n.Tb(58,"td"),n.Oc(59),n.Sb(),n.Sb(),n.Tb(60,"tr"),n.Tb(61,"td"),n.Oc(62),n.gc(63,"translate"),n.Sb(),n.Tb(64,"td"),n.Oc(65),n.gc(66,"translate"),n.gc(67,"translate"),n.Sb(),n.Sb(),n.Tb(68,"tr"),n.Tb(69,"td"),n.Oc(70),n.gc(71,"translate"),n.Sb(),n.Tb(72,"td"),n.Oc(73),n.gc(74,"translate"),n.gc(75,"translate"),n.Sb(),n.Sb(),n.Tb(76,"tr"),n.Tb(77,"td"),n.Oc(78),n.gc(79,"translate"),n.Sb(),n.Tb(80,"td"),n.Oc(81),n.gc(82,"translate"),n.gc(83,"translate"),n.Sb(),n.Sb(),n.Tb(84,"tr"),n.Tb(85,"td"),n.Oc(86),n.gc(87,"translate"),n.Sb(),n.Tb(88,"td"),n.Oc(89),n.gc(90,"date"),n.Sb(),n.Sb(),n.Tb(91,"tr"),n.Tb(92,"td"),n.Oc(93),n.gc(94,"translate"),n.Sb(),n.Tb(95,"td"),n.Oc(96),n.gc(97,"date"),n.Sb(),n.Sb(),n.Tb(98,"tr"),n.Tb(99,"td"),n.Oc(100),n.gc(101,"translate"),n.Sb(),n.Tb(102,"td"),n.Oc(103),n.Sb(),n.Sb(),n.Ob(104,"br"),n.Tb(105,"tr"),n.Tb(106,"th"),n.Oc(107),n.gc(108,"translate"),n.Sb(),n.Ob(109,"th"),n.Sb(),n.Tb(110,"tr"),n.Tb(111,"td"),n.Oc(112),n.gc(113,"translate"),n.Sb(),n.Tb(114,"td"),n.Oc(115),n.Sb(),n.Sb(),n.Tb(116,"tr"),n.Tb(117,"td"),n.Oc(118),n.gc(119,"translate"),n.Sb(),n.Tb(120,"td"),n.Oc(121),n.Sb(),n.Sb(),n.Tb(122,"tr"),n.Tb(123,"td"),n.Oc(124),n.gc(125,"translate"),n.Sb(),n.Tb(126,"td"),n.Oc(127),n.Sb(),n.Sb(),n.Tb(128,"tr"),n.Tb(129,"td"),n.Oc(130),n.gc(131,"translate"),n.Sb(),n.Tb(132,"td"),n.Oc(133),n.Sb(),n.Sb(),n.Tb(134,"tr"),n.Tb(135,"td"),n.Oc(136),n.gc(137,"translate"),n.Sb(),n.Tb(138,"td"),n.Oc(139),n.Sb(),n.Sb(),n.Tb(140,"tr"),n.Tb(141,"td"),n.Oc(142),n.gc(143,"translate"),n.Sb(),n.Tb(144,"td"),n.Oc(145),n.Sb(),n.Sb(),n.Tb(146,"tr"),n.Tb(147,"td"),n.Oc(148),n.gc(149,"translate"),n.Sb(),n.Tb(150,"td"),n.Oc(151),n.Sb(),n.Sb(),n.Tb(152,"tr"),n.Tb(153,"td"),n.Oc(154),n.gc(155,"translate"),n.Sb(),n.Tb(156,"td"),n.Oc(157),n.Sb(),n.Sb(),n.Tb(158,"tr"),n.Tb(159,"td"),n.Oc(160),n.gc(161,"translate"),n.Sb(),n.Tb(162,"td"),n.Oc(163),n.Sb(),n.Sb(),n.Tb(164,"tr"),n.Tb(165,"td"),n.Oc(166),n.gc(167,"translate"),n.Sb(),n.Tb(168,"td"),n.Oc(169),n.Sb(),n.Sb(),n.Tb(170,"tr"),n.Tb(171,"td"),n.Oc(172),n.gc(173,"translate"),n.Sb(),n.Tb(174,"td"),n.Oc(175),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=t.columns;n.Bb(1),n.Cb("colspan",e.length+1),n.Bb(5),n.Qc(" ",n.hc(7,54,"FascicoloAziendale.ALLEVAMENTO.IDENTIFICATIVO_FISCALE"),": "),n.Bb(3),n.Pc(i.identificativoFiscale),n.Bb(3),n.Qc(" ",n.hc(13,56,"FascicoloAziendale.ALLEVAMENTO.TIPOLOGIA_ALLEVAMENTO"),": "),n.Bb(3),n.Pc(i.tipologiaAllevamento?"("+i.tipologiaAllevamento+")":"-"),n.Bb(3),n.Qc(" ",n.hc(19,58,"FascicoloAziendale.ALLEVAMENTO.CF_PROPRIETARIO"),": "),n.Bb(3),n.Pc(i.cfProprietario),n.Bb(3),n.Qc(" ",n.hc(25,60,"FascicoloAziendale.ALLEVAMENTO.DENOMINAZIONE_PROPRIETARIO"),": "),n.Bb(3),n.Qc(" ",i.denominazioneProprietario," "),n.Bb(3),n.Qc(" ",n.hc(31,62,"FascicoloAziendale.ALLEVAMENTO.CF_DETENTORE"),": "),n.Bb(3),n.Pc(i.cfDetentore),n.Bb(3),n.Qc(" ",n.hc(37,64,"FascicoloAziendale.ALLEVAMENTO.DENOMINAZIONE_DETENTORE"),": "),n.Bb(3),n.Pc(i.denominazioneDetentore),n.Bb(3),n.Qc(" ",n.hc(43,66,"FascicoloAziendale.ALLEVAMENTO.DT_INIZIO_DETENZIONE"),": "),n.Bb(3),n.Qc(" ",n.ic(46,68,i.dtInizioDetenzione,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(50,71,"FascicoloAziendale.ALLEVAMENTO.DT_FINE_DETENZIONE"),": "),n.Bb(3),n.Qc(" ",n.ic(53,73,i.dtFineDetenzione,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(57,76,"FascicoloAziendale.ALLEVAMENTO.SOCCIDA"),": "),n.Bb(3),n.Pc(i.soccida),n.Bb(3),n.Qc(" ",n.hc(63,78,"FascicoloAziendale.ALLEVAMENTO.SPECIE"),": "),n.Bb(3),n.Qc("",i.specie?n.hc(66,80,"FascicoloAziendale.SPE_CODICE."+i.specie.trim())!=="FascicoloAziendale.SPE_CODICE."+i.specie.trim()?n.hc(67,82,"FascicoloAziendale.SPE_CODICE."+i.specie.trim()):"("+i.specie.trim()+")":"-"," "),n.Bb(5),n.Qc(" ",n.hc(71,84,"FascicoloAziendale.ALLEVAMENTO.TIPOLOGIA_PRODUZIONE"),": "),n.Bb(3),n.Qc("",i.tipoProduzione?n.hc(74,86,"FascicoloAziendale.TIPO_PRODUZIONE."+i.tipoProduzione.trim())!=="FascicoloAziendale.TIPO_PRODUZIONE."+i.tipoProduzione.trim()?n.hc(75,88,"FascicoloAziendale.TIPO_PRODUZIONE."+i.tipoProduzione.trim()):"("+i.tipoProduzione.trim()+")":"-"," "),n.Bb(5),n.Qc(" ",n.hc(79,90,"FascicoloAziendale.ALLEVAMENTO.ORIENTAMENTO_PRODUTTIVO"),": "),n.Bb(3),n.Qc("",i.orientamentoProduttivo?n.hc(82,92,"FascicoloAziendale.ORIENTAMENTO_PRODUTTIVO."+i.orientamentoProduttivo.trim())!=="FascicoloAziendale.ORIENTAMENTO_PRODUTTIVO."+i.orientamentoProduttivo.trim()?n.hc(83,94,"FascicoloAziendale.ORIENTAMENTO_PRODUTTIVO."+i.orientamentoProduttivo.trim()):"("+i.orientamentoProduttivo.trim()+")":"-"," "),n.Bb(5),n.Qc(" ",n.hc(87,96,"FascicoloAziendale.ALLEVAMENTO.DT_APERTURA_ALLEVAMENTO"),": "),n.Bb(3),n.Qc(" ",n.ic(90,98,i.dtAperturaAllevamento,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(94,101,"FascicoloAziendale.ALLEVAMENTO.DT_CHIUSURA_ALLEVAMENTO"),": "),n.Bb(3),n.Qc(" ",n.ic(97,103,i.dtChiusuraAllevamento,"dd/MM/yyyy")," "),n.Bb(4),n.Qc(" ",n.hc(101,106,"FascicoloAziendale.ALLEVAMENTO.AUTORIZZAZIONE_SANITARIA"),": "),n.Bb(3),n.Qc(" ",i.autorizzazioneSanitariaLatte," "),n.Bb(4),n.Qc(" ",n.hc(108,108,"FascicoloAziendale.ALLEVAMENTO.DATI_STRUTTURA")," "),n.Bb(5),n.Qc(" ",n.hc(113,110,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.IDENTIFICATIVO"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.identificativo," "),n.Bb(3),n.Qc(" ",n.hc(119,112,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.INDIRIZZO"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.indirizzo," "),n.Bb(3),n.Qc(" ",n.hc(125,114,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.CAP"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.cap," "),n.Bb(3),n.Qc(" ",n.hc(131,116,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.LOCALITA"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.localita," "),n.Bb(3),n.Qc(" ",n.hc(137,118,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.COMUNE"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.comune," "),n.Bb(3),n.Qc(" ",n.hc(143,120,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.LATITUDINE"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.latitudine," "),n.Bb(3),n.Qc(" ",n.hc(149,122,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.LONGITUDINE"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.longitudine," "),n.Bb(3),n.Qc(" ",n.hc(155,124,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.FOGLIO"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.foglioCatastale," "),n.Bb(3),n.Qc(" ",n.hc(161,126,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.SEZIONE"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.sezione," "),n.Bb(3),n.Qc(" ",n.hc(167,128,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.PARTICELLA"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.particella," "),n.Bb(3),n.Qc(" ",n.hc(173,130,"FascicoloAziendale.ALLEVAMENTO.STRUTTURA.SUB"),": "),n.Bb(3),n.Qc(" ",i.strutturaAllevamentoDto.subalterno," ")}}function Se(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length+1)}}const ve=function(){return{marginTop:"70px"}};let Oe=(()=>{class i{constructor(i,t,e,o,a,c,r){this.route=i,this.fascicoloDettaglioService=t,this.anagraficaFascicoloService=e,this.zootecniaService=o,this.messageService=a,this.datepipe=c,this.mediatorService=r,this.cuaa="",this.componentDestroyed$=new U.a,this._allevamentoCorrente$=new me.a(null),this.idValidazione=void 0}subscribeStatoFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.pipe(Object(Q.a)(this.componentDestroyed$)).subscribe(i=>{i&&(this.fascicoloCorrente=i)})}ngOnInit(){this.setCols(),this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.subscribeStatoFascicolo();const i=this.route.snapshot.queryParams["id-validazione"];this.idValidazione=i?Number.parseInt(i):0,this.getAllevamentiObservable(this.cuaa).subscribe()}ngOnDestroy(){this.componentDestroyed$.next(!0),this.componentDestroyed$.complete()}setCols(){this.cols=[{field:"specie",header:"Specie"},{field:"struttura.identificativo",header:"Identificativo della struttura"},{field:"struttura.comune",header:"Comune della struttura"},{field:"cfProprietario",header:"Codice fiscale proprietario"},{field:"cfDetentore",header:"Codice fiscale detentore"},{field:"tipologiaAllevamento",header:"Tipologia di allevamento"},{field:"tipoProduzione",header:"Tipo produzione"},{field:"orientamentoProduttivo",header:"Orientamento produttivo"}]}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}getAllevamentiObservable(i){return this.zootecniaService.getAllevamenti(i).pipe(Object(Q.a)(this.componentDestroyed$),Object(Z.a)(i=>(this.messageService.add(u.a.getToast("tst",u.b.error,u.a.errorGetAllevamenti)),q.a)),Object(Fi.a)(i=>this.allevamenti=i))}fascicoloEditable(){return this.fascicoloCorrente&&0===this.idValidazione&&(this.fascicoloCorrente.stato===R.c.IN_AGGIORNAMENTO||this.fascicoloCorrente.stato===R.c.VALIDATO||this.fascicoloCorrente.stato===R.c.CONTROLLATO_OK||this.fascicoloCorrente.stato===R.c.IN_CHIUSURA)}updateAllevamenti(){const i=this.datepipe.transform(new Date,"yyyy-MM-dd");this.zootecniaService.putUpdateAllevamenti(this.cuaa,i).pipe(Object(Q.a)(this.componentDestroyed$),Object(Ai.a)(()=>this.anagraficaFascicoloService.getFascicolo(this.cuaa,0)),Object(Ai.a)(i=>(this.fascicoloDettaglioService.fascicoloCorrente.next(i),this.getAllevamentiObservable(this.cuaa))),Object(Ai.a)(i=>(i&&this.setInAggiornamento(this.fascicoloCorrente.cuaa),Object(Ii.a)(this.cuaa))),Object(Z.a)(i=>(u.a.handleError(this.messageService,i,u.a.ERRORE_GENERICO),q.a)),Object(Ai.a)(i=>this.mediatorService.deleteEsitiControlloCompletezza(i)),Object(Z.a)(i=>(u.a.handleError(this.messageService,i,u.a.ERRORE_GENERICO),q.a))).subscribe(i=>{this.messageService.add(u.a.getToast("tst",u.b.success,u.a.OPERAZIONE_OK))})}setInAggiornamento(i){this.anagraficaFascicoloService.putSetStatusFascicoloInAggiornamento(i).subscribe(()=>{this.messageService.add(u.a.getToast("tst",u.b.success,u.a.changeStatusInAggiornamentoOk)),this.fascicoloCorrente.stato=R.c.IN_AGGIORNAMENTO,this.reloadDataFascicolo()},i=>{this.messageService.add(u.a.getToast("tst",u.b.error,u.a.changeStatusInAggiornamentoKo))})}reloadDataFascicolo(){this.fascicoloDettaglioService.fascicoloCorrente.next(this.fascicoloCorrente)}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(x.a),n.Nb(L.a),n.Nb(Ti.a),n.Nb(pe),n.Nb(p.d),n.Nb(r.f),n.Nb(Mi.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-allevamenti"]],decls:23,vars:16,consts:[["key","tst"],[1,"ui-grid-fixed","boxgrey"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-zootecnia.jpg"],[1,"ml-2"],[1,"mb-3"],[1,"funzioni-grid","boxgrey"],["pButton","","icon","ui-icon-update","label","AGGIORNA","pButton","",1,"pull-right",2,"background-color","green",3,"disabled","click"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["header","ALLEVAMENTI",3,"selected"],["dataKey","identificativo",3,"columns","value","autoLayout","paginator","responsive"],["tableUnita",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[2,"width","3em"],[3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[3,"pSortableColumn","pSortableColumnDisabled"],[3,"field"],["href","#",3,"pRowToggler"],[3,"ngClass"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"a",2),n.bc("click",(function(){return t.handleClick()})),n.Ob(3,"i",3),n.Ob(4,"img",4),n.Tb(5,"span",5),n.Oc(6),n.gc(7,"translate"),n.Sb(),n.Sb(),n.Ob(8,"br"),n.Tb(9,"h3",6),n.Oc(10),n.gc(11,"translate"),n.Sb(),n.Tb(12,"div",7),n.Tb(13,"button",8),n.bc("click",(function(){return t.updateAllevamenti()})),n.Sb(),n.Tb(14,"div",9),n.Tb(15,"p-accordion"),n.Tb(16,"p-accordionTab",10),n.Tb(17,"p-table",11,12),n.Mc(19,he,3,1,"ng-template",13),n.Mc(20,fe,26,22,"ng-template",14),n.Mc(21,Te,176,132,"ng-template",15),n.Mc(22,Se,3,1,"ng-template",16),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(15,ve)),n.Bb(6),n.Qc(" ",n.hc(7,11,"FascicoloAziendale.ZOOTECNIA")," "),n.Bb(4),n.Pc(n.hc(11,13,"FascicoloAziendale.ALLEVAMENTI")),n.Bb(3),n.mc("disabled",!t.fascicoloEditable()),n.Bb(3),n.mc("selected",!0),n.Bb(1),n.mc("columns",t.cols)("value",t.allevamenti)("autoLayout",!0)("paginator",!1)("responsive",!0))},directives:[g.a,x.h,T.b,f.a,f.c,j.q,p.e,r.s,j.p,j.o,j.k,r.q],pipes:[m.d,r.f],styles:[""]}),i})();var Ce=e("sazn"),Ie=e("JEAp"),Ae=e("7QKl"),Fe=e("2yZY"),Me=e("EetQ"),ze=e("XSqH"),Ee=e("IEkE"),De=function(i){return i.MACCHINE="MACCHINE",i.FABBRICATI="FABBRICATI",i.ZOOTECNIA="ZOOTECNIA",i}({}),Be=function(i){return i.FABBRICATI_STRUMENTALI="FABBRICATI_STRUMENTALI",i.STRUTTURE_ZOOTECNICHE="STRUTTURE_ZOOTECNICHE",i.SERRE_E_PROTEZIONI="SERRE_E_PROTEZIONI",i}({}),Ne=function(i){return i.STOCCAGGIO_LIQUAMI="STOCCAGGIO_LIQUAMI",i.STOCCAGGIO_LETAMI="STOCCAGGIO_LETAMI",i.AREE_SCOPERTE="AREE_SCOPERTE",i.STALLE="STALLE",i}({}),ye=e("cIsh"),Pe=e("KwdP");const Le=["dialogNuovaMacchina"],_e=["fileCaricato"],Re=["accordion"];function xe(i,t){1&i&&n.Ob(0,"p-message",39)}function we(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,xe,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("tipologiaMacchinario").errors?null:i.macchinaForm.get("tipologiaMacchinario").errors.required)}}function Ge(i,t){1&i&&n.Ob(0,"p-message",39)}function ke(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ge,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("classeFunzionaleMacchinario").errors?null:i.macchinaForm.get("classeFunzionaleMacchinario").errors.required)}}function Ve(i,t){1&i&&n.Ob(0,"p-message",39)}function Ue(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ve,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("sottoTipologiaMacchinario").errors?null:i.macchinaForm.get("sottoTipologiaMacchinario").errors.required)}}function qe(i,t){1&i&&n.Ob(0,"p-message",39)}function Qe(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,qe,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("marcaMacchinario").errors?null:i.macchinaForm.get("marcaMacchinario").errors.required)}}function Ze(i,t){1&i&&n.Ob(0,"p-message",39)}function $e(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ze,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("modello").errors?null:i.macchinaForm.get("modello").errors.required)}}function je(i,t){1&i&&n.Ob(0,"p-message",39)}function Ye(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,je,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("targa").errors?null:i.macchinaForm.get("targa").errors.required)}}function He(i,t){if(1&i&&(n.Tb(0,"div",18),n.Tb(1,"label",40),n.Oc(2,"Targa"),n.Sb(),n.Ob(3,"input",41),n.Mc(4,Ye,2,1,"div",21),n.Sb()),2&i){const i=n.fc(2);n.Bb(3),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("targa").invalid&&(i.macchinaForm.get("targa").dirty||i.macchinaForm.get("targa").touched))}}function Ke(i,t){1&i&&n.Ob(0,"p-message",39)}function We(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ke,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("annoCostruzione").errors?null:i.macchinaForm.get("annoCostruzione").errors.required)}}function Xe(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",42),n.Tb(1,"label",43),n.Oc(2,"Motore"),n.Sb(),n.Tb(3,"p-inputSwitch",44),n.bc("onChange",(function(t){return n.Ec(i),n.fc(2).enableMotore(t)})),n.Sb(),n.Sb()}}function Je(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",17),n.Tb(1,"div",18),n.Tb(2,"label",19),n.Oc(3,"Tipologia"),n.Sb(),n.Tb(4,"p-dropdown",20),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectTipologia(t)})),n.Sb(),n.Mc(5,we,2,1,"div",21),n.Sb(),n.Tb(6,"div",18),n.Tb(7,"label",22),n.Oc(8,"Classe funzionale"),n.Sb(),n.Tb(9,"p-dropdown",23),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectClasseFunzionale(t)})),n.Sb(),n.Mc(10,ke,2,1,"div",21),n.Sb(),n.Tb(11,"div",18),n.Tb(12,"label",24),n.Oc(13,"Sotto Tipologia"),n.Sb(),n.Tb(14,"p-dropdown",25),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectSottoTipologia(t)})),n.Sb(),n.Mc(15,Ue,2,1,"div",21),n.Sb(),n.Tb(16,"div",18),n.Tb(17,"label",26),n.Oc(18,"Marca"),n.Sb(),n.Ob(19,"input",27),n.Mc(20,Qe,2,1,"div",21),n.Sb(),n.Tb(21,"div",18),n.Tb(22,"label",28),n.Oc(23,"Modello"),n.Sb(),n.Ob(24,"input",29),n.Mc(25,$e,2,1,"div",21),n.Sb(),n.Mc(26,He,5,2,"div",30),n.Tb(27,"div",18),n.Tb(28,"label",31),n.Oc(29,"Numero Matricola*"),n.Sb(),n.Ob(30,"input",32),n.Sb(),n.Tb(31,"div",18),n.Tb(32,"label",33),n.Oc(33,"Numero Telaio*"),n.Sb(),n.Ob(34,"input",34),n.Sb(),n.Tb(35,"div",18),n.Tb(36,"label",33),n.Oc(37,"Anno di immatricolazione"),n.Sb(),n.Ob(38,"p-spinner",35),n.Mc(39,We,2,1,"div",21),n.Sb(),n.Mc(40,Xe,4,0,"div",36),n.Tb(41,"p-footer",37),n.Tb(42,"i"),n.Oc(43," *Nota: \xe8 necessario compilare almeno uno dei campi Numero matricola o Numero telaio"),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.Bb(4),n.mc("options",i.tipologicheService.tipologiaMacchinario),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("tipologiaMacchinario").invalid&&(i.macchinaForm.get("tipologiaMacchinario").dirty||i.macchinaForm.get("tipologiaMacchinario").touched)),n.Bb(4),n.mc("options",i.tipologicheService.classeFunzionaleMacchinario),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("classeFunzionaleMacchinario").invalid&&(i.macchinaForm.get("classeFunzionaleMacchinario").dirty||i.macchinaForm.get("classeFunzionaleMacchinario").touched)),n.Bb(4),n.mc("options",i.tipologicheService.sottoTipologiaMacchinario),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("sottoTipologiaMacchinario").invalid&&(i.macchinaForm.get("sottoTipologiaMacchinario").dirty||i.macchinaForm.get("sottoTipologiaMacchinario").touched)),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("marcaMacchinario").invalid&&(i.macchinaForm.get("marcaMacchinario").dirty||i.macchinaForm.get("marcaMacchinario").touched)),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("modello").invalid&&(i.macchinaForm.get("modello").dirty||i.macchinaForm.get("modello").touched)),n.Bb(1),n.mc("ngIf",i.showTarga),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("min",1900)("max",i.currentYear),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("annoCostruzione").invalid&&(i.macchinaForm.get("annoCostruzione").dirty||i.macchinaForm.get("annoCostruzione").touched)),n.Bb(1),n.mc("ngIf",i.showSwitchMotore)}}function io(i,t){1&i&&n.Ob(0,"p-message",39)}function to(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,io,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("alimentazione").errors?null:i.macchinaForm.get("alimentazione").errors.required)}}function eo(i,t){1&i&&n.Ob(0,"p-message",39)}function oo(i,t){1&i&&n.Ob(0,"p-message",56)}function ao(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,eo,1,0,"p-message",38),n.Mc(2,oo,1,0,"p-message",55),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("potenza").errors?null:i.macchinaForm.get("potenza").errors.required),n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("potenza").errors?null:i.macchinaForm.get("potenza").errors.pattern)}}function co(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",17),n.Tb(1,"div",45),n.Tb(2,"label",46),n.Oc(3,"Marca"),n.Sb(),n.Ob(4,"input",47),n.Sb(),n.Tb(5,"div",45),n.Tb(6,"label",48),n.Oc(7,"Tipo"),n.Sb(),n.Ob(8,"input",49),n.Sb(),n.Tb(9,"div",18),n.Tb(10,"label",50),n.Oc(11,"Alimentazione"),n.Sb(),n.Tb(12,"p-dropdown",51),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectAlimentazione(t)})),n.Sb(),n.Mc(13,to,2,1,"div",21),n.Sb(),n.Tb(14,"div",18),n.Tb(15,"label",52),n.Oc(16,"Potenza in Kw"),n.Sb(),n.Ob(17,"input",53),n.Mc(18,ao,3,2,"div",21),n.Sb(),n.Tb(19,"div",18),n.Tb(20,"label",33),n.Oc(21,"Matricola"),n.Sb(),n.Ob(22,"input",54),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("options",i.tipologicheService.alimentazioneMotore),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("alimentazione").invalid&&(i.macchinaForm.get("alimentazione").dirty||i.macchinaForm.get("alimentazione").touched)),n.Bb(4),n.mc("maxlength",20),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("potenza").invalid&&(i.macchinaForm.get("potenza").dirty||i.macchinaForm.get("potenza").touched)),n.Bb(4),n.mc("maxlength",50)}}function ro(i,t){1&i&&n.Ob(0,"p-message",39)}function no(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,ro,1,0,"p-message",38),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.macchinaForm.get("tipologiaPossesso").errors?null:i.macchinaForm.get("tipologiaPossesso").errors.required)}}function so(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",63),n.Tb(1,"button",64),n.bc("click",(function(){return n.Ec(i),n.fc(2).caricaAllegato()})),n.Sb(),n.Tb(2,"input",65,66),n.bc("change",(function(t){return n.Ec(i),n.fc(2).onFileChange(t)})),n.Sb(),n.Sb()}if(2&i){const i=n.fc(2);n.Bb(2),n.nc("accept",i.fileConfig.fileExt)}}function lo(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",71),n.Tb(1,"img",72),n.bc("click",(function(t){return n.Ec(i),n.fc(3).eliminaAllegato(t)})),n.Sb(),n.Sb()}}function bo(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",67),n.Tb(1,"div",68),n.Tb(2,"div",37),n.Tb(3,"a",69),n.bc("click",(function(){return n.Ec(i),n.fc(2).visualizzaAllegato()})),n.Oc(4),n.Sb(),n.Sb(),n.Mc(5,lo,2,0,"div",70),n.Sb(),n.Sb()}if(2&i){const i=n.fc(2);n.Bb(4),n.Qc(" ",null==i.allegato?null:i.allegato.name," "),n.Bb(1),n.mc("ngIf",!i.READONLY_MODE)}}function uo(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",5),n.Tb(1,"div",37),n.Tb(2,"div",57),n.Tb(3,"div",58),n.Tb(4,"label",59),n.Oc(5," Tipologia di possesso "),n.Sb(),n.Tb(6,"p-dropdown",60),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectTipologiaPossesso(t)})),n.Sb(),n.Mc(7,no,2,1,"div",21),n.Sb(),n.Mc(8,so,4,1,"div",61),n.Mc(9,bo,6,2,"div",62),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.Bb(6),n.mc("options",i.tipologicheService.tipologiaDiPossesso),n.Bb(1),n.mc("ngIf",i.macchinaForm.get("tipologiaPossesso").invalid&&(i.macchinaForm.get("tipologiaPossesso").dirty||i.macchinaForm.get("tipologiaPossesso").touched)),n.Bb(1),n.mc("ngIf",!i.fileCaricato),n.Bb(1),n.mc("ngIf",i.fileCaricato)}}const po=function(){return{width:"80vw",height:"90vh"}},mo=function(){return{"overflow-y":"auto","overflow-x":"hidden"}},go=function(){return{marginTop:"70px"}};let ho=(()=>{class i{constructor(i,t,e,o,a,c,r,s,l,b,d){this.tipologicheService=i,this.fileService=t,this.messageService=e,this.dateUtilService=o,this.formService=a,this.errorService=c,this.dotazioneTecnicaBuilderService=r,this.httpClientTipologieService=s,this.fascicoloDettaglioService=l,this.httpClientMacchineService=b,this.httpClientMediatorService=d,this.onHideDialog=new n.n}ngOnInit(){this.getTipologieSubscription=this.httpClientTipologieService.getTipologia(De.MACCHINE).subscribe(i=>{(null==i?void 0:i.length)?this.tipologicheService.setTipologiaMacchinario(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(i)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le tipologie di macchinario","tst-macchinario")},i=>this.errorService.showError(i,"tst-macchinario")),this.tipologicheService.setAlimentazione(),this.tipologicheService.setTipologiaDiPossesso(),this.fileConfig=this.fileService.loadConfigPdf(),this.currentYear=this.dateUtilService.getCurrentYear(),this.initForm()}ngOnDestroy(){this.getTipologieSubscription&&this.getTipologieSubscription.unsubscribe(),this.getSottoTipologieSubscription&&this.getSottoTipologieSubscription.unsubscribe(),this.getAllegatoSubscription&&this.getAllegatoSubscription.unsubscribe(),this.postMacchinaSubscription&&this.postMacchinaSubscription.unsubscribe()}open(i=!1,t,e,o){this.display=!0,this.cuaa=t,this.dettaglioMacchina=e,null==this.dettaglioMacchina?(this.READONLY_MODE=!1,this.EDIT_MODE=!1,this.allegato={file:null,name:""},this.fileCaricato=!1,this.motoreDisabled=!0,this.showSwitchMotore=!1,this.showTarga=!1,this.idMacchina=null,this.macchinaForm.get("tipologiaMacchinario").enable(),this.macchinaForm.get("classeFunzionaleMacchinario").enable(),this.macchinaForm.get("sottoTipologiaMacchinario").enable(),this.enableForm(),this.initForm()):(this.READONLY_MODE=i,this.EDIT_MODE=!0,this.idMacchina=e.id,this.idValidazione=o||null,this.motoreDisabled=!e.alimentazione,this.showSwitchMotore="ALTRE ATTREZZATURE"===e.tipologiaMacchinario.label,this.showTarga=this.isTipologiaFromPra(e.tipologiaMacchinario.label),this.initForm(e,this.showTarga),this.getAllegatoSubscription=this.httpClientMacchineService.getAllegato(this.cuaa,this.idMacchina.toString(),this.idValidazione).pipe(Object(Z.a)(i=>(this.errorService.showError(i,"tst-macchine"),q.a)),Object(Ai.a)(i=>{if(null!=i){const t=new d.a(this.fileConfig.fileExt,this.fileConfig.maxSize).blobToFile(new Blob([i]),this.idMacchina.toString()+"_documento_possesso.pdf");this.allegato={file:t,name:"documento_possesso.pdf"},this.fileCaricato=!0}return this.httpClientTipologieService.getSottoTipologieByIdClasseFunzionale(e.tipologiaMacchinario.value)})).subscribe(i=>{var t;(null===(t=null==i?void 0:i.tipologie)||void 0===t?void 0:t.length)?this.tipologicheService.setSottoTipologiaMacchinario(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(i.tipologie)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le sottotipologie di macchinario relative a "+e.tipologiaMacchinario.label,"tst-macchinario"),this.EDIT_MODE&&(this.classificazioneMacchinarioVM={},this.classificazioneMacchinarioVM.tipologiaMacchinario=this.macchinaForm.get("tipologiaMacchinario").value,this.classificazioneMacchinarioVM.sottoTipologiaMacchinario=this.macchinaForm.get("sottoTipologiaMacchinario").value,this.macchinaForm.get("tipologiaMacchinario").disable(),this.macchinaForm.get("sottoTipologiaMacchinario").disable()),1==this.READONLY_MODE?this.disableForm():this.enableForm(e)},i=>this.errorService.showError(i,"tst-macchine")))}onSelectAccordion(i){}onSelectTipologia(i){const t=this.tipologicheService.tipologiaMacchinario.filter(t=>t.value==i.value)[0];"MACCHINE E ATTREZZATURE ESCLUSE DA CARBURANTE AGEVOLATO PER USO AGRICOLO"===(null==t?void 0:t.label)||"MACCHINE AGRICOLE OPERATRICI TRAINATE"===(null==t?void 0:t.label)||"ATTREZZATURE PORTATE O SEMIPORTATE"===(null==t?void 0:t.label)||"RIMORCHI AGRICOLI CON MASSA COMPLESSIVA A PIENO CARICO FINO A 1,5T"===(null==t?void 0:t.label)||"RIMORCHI AGRICOLI CON MASSA COMPLESSIVA A PIENO CARICO SUPERIORE A 1,5T"===(null==t?void 0:t.label)?(this.motoreDisabled=!0,this.disableMotoreForm(),this.closeAccordionByIndex(1)):(this.motoreDisabled=!1,this.enableMotoreForm()),"IMPIANTI ED ATTREZZATURE DESTINATI AD ESSERE IMPIEGATI NELLE ATTIVITA' AGRICOLE E FORESTALI"===(null==t?void 0:t.label)||"MACCHINE PER LA PRIMA TRASFORMAZIONE DEI PRODOTTI AGRICOLI"===(null==t?void 0:t.label)?(this.showSwitchMotore=!0,this.macchinaForm.get("switchMotore").setValue(!1)):this.showSwitchMotore=!1,this.showTarga=this.isTipologiaFromPra(null==t?void 0:t.label),this.macchinaForm.get("classeFunzionaleMacchinario").reset(),this.tipologicheService.classeFunzionaleMacchinario=[],this.macchinaForm.get("sottoTipologiaMacchinario").reset(),this.tipologicheService.sottoTipologiaMacchinario=[],null!=i.value&&(this.getClasseFunzionaleSubscription=this.httpClientTipologieService.getClassiFunzionaliByIdTipologia(i.value).subscribe(t=>{var e;(null===(e=null==t?void 0:t.tipologie)||void 0===e?void 0:e.length)?(this.tipologicheService.setClasseFunzionaleMacchinario(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(t.tipologie)),1==this.tipologicheService.classeFunzionaleMacchinario.length&&(this.macchinaForm.get("classeFunzionaleMacchinario").setValue({label:this.tipologicheService.classeFunzionaleMacchinario[0].label,value:this.tipologicheService.classeFunzionaleMacchinario[0].value}),this.getSottoTipologieSubscription=this.httpClientTipologieService.getSottoTipologieByIdClasseFunzionale(this.tipologicheService.classeFunzionaleMacchinario[0].value).subscribe(t=>{var e;(null===(e=null==t?void 0:t.tipologie)||void 0===e?void 0:e.length)?(this.tipologicheService.setSottoTipologiaMacchinario(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(t.tipologie)),1==this.tipologicheService.sottoTipologiaMacchinario.length&&this.macchinaForm.get("sottoTipologiaMacchinario").setValue({label:this.tipologicheService.sottoTipologiaMacchinario[0].label,value:this.tipologicheService.sottoTipologiaMacchinario[0].value})):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le sottotipologie di macchinario relative a "+i.label,"tst-macchinario")},i=>this.errorService.showError(i,"tst-macchinario")))):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le classi funzionali di macchinario relative a "+i.label,"tst-macchinario")},i=>this.errorService.showError(i,"tst-macchinario")))}onSelectClasseFunzionale(i){const t=this.tipologicheService.classeFunzionaleMacchinario.filter(t=>t.value==i.value)[0];"RIMORCHI FINO A 15 QLI"===(null==t?void 0:t.label)||"ATTREZZATURE PORTATE"===(null==t?void 0:t.label)||"ALTRE ATTREZZATURE"===(null==t?void 0:t.label)||"RIMORCHI SUP. A 15 QLI"===(null==t?void 0:t.label)?(this.motoreDisabled=!0,this.disableMotoreForm(),this.closeAccordionByIndex(1)):(this.motoreDisabled=!1,this.enableMotoreForm()),"ALTRE ATTREZZATURE"===(null==t?void 0:t.label)?(this.showSwitchMotore=!0,this.macchinaForm.get("switchMotore").setValue(!1)):this.showSwitchMotore=!1,this.showTarga=this.isTipologiaFromPra(null==t?void 0:t.label),this.macchinaForm.get("sottoTipologiaMacchinario").reset(),this.tipologicheService.sottoTipologiaMacchinario=[],null!=i.value&&(this.getSottoTipologieSubscription=this.httpClientTipologieService.getSottoTipologieByIdClasseFunzionale(i.value).subscribe(t=>{var e;(null===(e=null==t?void 0:t.tipologie)||void 0===e?void 0:e.length)?(this.tipologicheService.setSottoTipologiaMacchinario(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(t.tipologie)),1==this.tipologicheService.sottoTipologiaMacchinario.length&&(console.log(this.tipologicheService.sottoTipologiaMacchinario[0].label+" "+this.tipologicheService.sottoTipologiaMacchinario[0].value),this.macchinaForm.get("sottoTipologiaMacchinario").setValue({label:this.tipologicheService.sottoTipologiaMacchinario[0].label,value:this.tipologicheService.sottoTipologiaMacchinario[0].value}))):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le sottotipologie di macchinario relative a "+i.label,"tst-macchinario")},i=>this.errorService.showError(i,"tst-macchinario")))}onSelectSottoTipologia(i){}onSelectAlimentazione(i){}onSelectTipologiaPossesso(i){}onSubmit(){this.salvaMacchina()}closeDialog(i){this.closeAllAccordion(),this.READONLY_MODE=!1,this.allegato={file:null,name:""},this.fileCaricato=!1,this.motoreDisabled=!0,this.showTarga=!1,this.onHideDialog.emit(i),this.display=!1}annulla(){this.closeDialog(!1)}salvaMacchina(){console.log("Save Form: ",this.macchinaForm.value),console.log("Fascicolo Id: ",this.fascicoloDettaglioService.fascicoloCorrente.value.id),console.log("Cuaa: ",this.fascicoloDettaglioService.fascicoloCorrente.value.cuaa),this.formService.validateForm(this.macchinaForm);const i=this.formService.getInvalids(this.macchinaForm);if(console.log("INVALID FIELDS....",i),Ci.isEmpty(this.macchinaForm.get("numeroMatricola").value)&&Ci.isEmpty(this.macchinaForm.get("numeroTelaio").value))return this.closeAllAccordion(),this.openAccordionByIndex(0),void this.errorService.showErrorWithMessage(u.a.MACCHINARI.telaioOrMatricolaObbligatorio,"tst-macchinario");if(!this.macchinaForm.valid)return this.closeAllAccordion(),this.openPanelsByField(i),void this.errorService.showErrorWithMessage(u.a.MACCHINARI.datiNonValidi,"tst-macchinario");if(!this.fileCaricato)return this.closeAllAccordion(),this.openAccordionByIndex(2),void this.errorService.showErrorWithMessage(u.a.MACCHINARI.documentoNonPresente,"tst-macchinario");if(!this.macchinaForm.valid)return void this.errorService.showErrorWithMessage(u.a.MACCHINARI.datiNonValidi,"tst-macchine");const t=this.macchinaForm.value;this.EDIT_MODE&&(t.sottoTipologiaMacchinario=this.classificazioneMacchinarioVM.sottoTipologiaMacchinario);const e=this.dotazioneTecnicaBuilderService.toDettaglioMacchinaDto(t,this.idMacchina);this.postMacchinaSubscription=this.httpClientMediatorService.postMacchina(this.cuaa,e,this.allegato.file).subscribe(i=>{const t=this.fascicoloDettaglioService.fascicoloCorrente.value;t.stato!=R.c.IN_AGGIORNAMENTO&&(t.stato=R.c.IN_AGGIORNAMENTO,this.fascicoloDettaglioService.fascicoloCorrente.next(t)),this.messageService.add(u.a.getToast("tst-macchine",u.b.success,u.a.MACCHINARI.salvataggioOK)),this.macchinaForm.reset(),this.closeDialog(!0)},i=>this.errorService.showError(i,"tst-macchine"))}caricaAllegato(){document.getElementById("fileCaricato").click()}onFileChange(i){if(this.fileCaricato=!1,i.target.files&&i.target.files.length){const t=i.target.files[0],e=new d.a(this.fileConfig.fileExt,this.fileConfig.maxSize);e.isValidFileExtension(t,ie.a.FILE_ERRORS.EXT_PDF)&&e.isValidFileSize(t,ie.a.FILE_ERRORS.SIZE)&&(this.fileCaricato=!0,this.allegato.file=t,this.allegato.name=t.name),this.showErrors(e.getErrors())}}eliminaAllegato(i){this.fileCaricato=!1,this.allegato.file=null,this.allegato.name=null}visualizzaAllegato(){this.fileCaricato&&this.allegato&&null!=this.allegato.file?(URL.createObjectURL(this.allegato.file),Ie.saveAs(this.allegato.file,this.allegato.name)):this.getAllegatoSubscription=this.httpClientMacchineService.getAllegato(this.cuaa,this.idMacchina.toString(),this.idValidazione).subscribe(i=>{const t=URL.createObjectURL(i);window.open(t)},i=>this.errorService.showError(i,"tst-macchinario"))}enableMotore(i){i&&i.checked?(this.motoreDisabled=!1,this.enableMotoreForm(),this.closeAccordionByIndex(1)):(this.motoreDisabled=!0,this.disableMotoreForm())}isTipologiaFromPra(i){return"MOTOAGRICOLE"===i||"TRATTRICI"===i||"RIMORCHI SUP. A 15 QLI"===i?(this.macchinaForm.get("targa").enable(),this.macchinaForm.get("targa").setValidators([b.G.required]),!0):(this.macchinaForm.get("targa").clearValidators(),this.macchinaForm.get("targa").disable(),!1)}openPanelsByField(i){i.forEach(t=>{const e=["tipologiaMacchinario","sottoTipologiaMacchinario","marcaMacchinario","modello","targa","numeroMatricola","numeroTelaio","annoCostruzione"];if(i.filter(i=>e.indexOf(i.name)>-1).length)return void this.openAccordionByIndex(0);const o=["marcaMotore","tipo","alimentazione","potenza","matricolaMotore"];if(i.filter(i=>o.indexOf(i.name)>-1).length)return void this.openAccordionByIndex(1);const a=["tipologiaPossesso"];i.filter(i=>a.indexOf(i.name)>-1).length&&this.openAccordionByIndex(2)})}showErrors(i){i&&i.length&&i.forEach(i=>{this.messageService.add(u.a.getToast("tst-macchinario",u.b.error,i))})}initForm(i=null,t=!1){this.macchinaForm=new b.j({tipologiaMacchinario:new b.g({value:(null==i?void 0:i.tipologiaMacchinario)?i.tipologiaMacchinario.value:null,disabled:this.READONLY_MODE},[b.G.required]),sottoTipologiaMacchinario:new b.g({value:(null==i?void 0:i.sottoTipologiaMacchinario)?i.sottoTipologiaMacchinario.value:null,disabled:this.READONLY_MODE},[b.G.required]),classeFunzionaleMacchinario:new b.g({value:(null==i?void 0:i.classeFunzionaleMacchinario)?i.classeFunzionaleMacchinario.value:null,disabled:this.READONLY_MODE},[b.G.required]),marcaMacchinario:new b.g({value:i?i.marcaMacchinario:null,disabled:this.READONLY_MODE},[b.G.required]),targa:new b.g({value:i?i.targa:null,disabled:this.READONLY_MODE||!t},[b.G.required]),modello:new b.g({value:i?i.modello:null,disabled:this.READONLY_MODE},[b.G.required]),numeroMatricola:new b.g({value:i?i.numeroMatricola:null,disabled:this.READONLY_MODE}),numeroTelaio:new b.g({value:i?i.numeroTelaio:null,disabled:this.READONLY_MODE}),annoCostruzione:new b.g({value:i?i.annoCostruzione:this.currentYear,disabled:this.READONLY_MODE},[b.G.required]),switchMotore:new b.g({value:i?i.switchMotore:null,disabled:this.READONLY_MODE}),marcaMotore:new b.g({value:i&&i.marcaMotore?i.marcaMotore:null,disabled:this.READONLY_MODE}),tipo:new b.g({value:i&&i.tipo?i.tipo:null,disabled:this.READONLY_MODE}),alimentazione:new b.g({value:(null==i?void 0:i.alimentazione)?i.alimentazione.value:null,disabled:this.READONLY_MODE}),potenza:new b.g({value:(null==i?void 0:i.potenza)?i.potenza:null,disabled:this.READONLY_MODE}),matricolaMotore:new b.g({value:(null==i?void 0:i.matricolaMotore)?i.matricolaMotore:null,disabled:this.READONLY_MODE}),tipologiaPossesso:new b.g({value:(null==i?void 0:i.tipologiaPossesso)?i.tipologiaPossesso.value:null,disabled:this.READONLY_MODE},[b.G.required])})}disableMotoreForm(){this.macchinaForm.get("marcaMotore").disable(),this.macchinaForm.get("tipo").disable(),this.macchinaForm.get("alimentazione").disable(),this.macchinaForm.get("potenza").disable(),this.macchinaForm.get("matricolaMotore").disable(),this.resetMotore(),this.disableValidatorsMotoreForm()}resetMotore(){this.macchinaForm.get("marcaMotore").reset(),this.macchinaForm.get("tipo").reset(),this.macchinaForm.get("alimentazione").reset(),this.macchinaForm.get("potenza").reset(),this.macchinaForm.get("matricolaMotore").reset()}disableValidatorsMotoreForm(){this.macchinaForm.get("marcaMotore").setValidators([]),this.macchinaForm.get("tipo").setValidators([]),this.macchinaForm.get("alimentazione").setValidators([]),this.macchinaForm.get("potenza").setValidators([]),this.macchinaForm.get("matricolaMotore").setValidators([])}enableMotoreForm(){this.macchinaForm.get("marcaMotore").enable(),this.macchinaForm.get("tipo").enable(),this.macchinaForm.get("alimentazione").enable(),this.macchinaForm.get("potenza").enable(),this.macchinaForm.get("matricolaMotore").enable(),this.enableValidatorsMotoreForm()}enableValidatorsMotoreForm(){this.macchinaForm.get("alimentazione").setValidators([b.G.required])}enableForm(i){this.macchinaForm.get("marcaMacchinario").enable(),this.macchinaForm.get("modello").enable(),this.macchinaForm.get("numeroMatricola").enable(),this.macchinaForm.get("numeroTelaio").enable(),this.macchinaForm.get("annoCostruzione").enable(),(null==i?void 0:i.alimentazione)&&this.enableMotoreForm(),this.macchinaForm.get("tipologiaPossesso").enable()}disableForm(){this.macchinaForm.get("marcaMacchinario").disable(),this.macchinaForm.get("modello").disable(),this.macchinaForm.get("numeroMatricola").disable(),this.macchinaForm.get("numeroTelaio").disable(),this.macchinaForm.get("annoCostruzione").disable(),this.disableMotoreForm(),this.macchinaForm.get("tipologiaPossesso").disable()}closeAllAccordion(){this.accordion.tabs.forEach((i,t)=>{i.selected=!1})}openAllAccordion(){this.accordion.tabs.forEach((i,t)=>{i.disabled||(i.selected=!0)})}openAccordionByIndex(i){this.accordion.tabs.forEach((t,e)=>{t.disabled||e!=i||(t.selected=!0)})}closeAccordionByIndex(i){this.accordion.tabs.forEach((t,e)=>{e==i&&(t.selected=!1)})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ae.a),n.Nb(Fe.a),n.Nb(p.d),n.Nb(Jt.a),n.Nb(Ce.a),n.Nb(Ht.a),n.Nb(Me.a),n.Nb(ze.a),n.Nb(L.a),n.Nb(Ee.a),n.Nb(Mi.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-popup-nuova-macchina"]],viewQuery:function(i,t){var e;1&i&&(n.Uc(Le,!0),n.Uc(_e,!0),n.Uc(Re,!0)),2&i&&(n.Ac(e=n.cc())&&(t.dialog=e.first),n.Ac(e=n.cc())&&(t.file=e.first),n.Ac(e=n.cc())&&(t.accordion=e.first))},outputs:{onHideDialog:"onHideDialog"},decls:25,vars:24,consts:[["id","popup-nuova-macchina","header","Macchina","position","center","styleClass","large-dialog",3,"visible","focusOnShow","modal","closable","closeOnEscape","blockScroll","contentStyle","dismissableMask","visibleChange"],["dialogNuovaMacchina",""],["key","tst-macchinario"],["novalidate","",1,"p-grid","h-100",3,"formGroup","ngSubmit"],[1,"p-col-12","p-col-align-start","ui-fluid"],[1,"p-grid"],[1,"w-100",3,"onOpen"],["accordion",""],[1,"accordion-wrapper","dettaglioaccordionmultiple","px-2","boxgrey"],["cache","false","header","MEZZO AGRICOLO"],["pTemplate","content"],["cache","false","header","MOTORE",3,"disabled"],["cache","false","header","POSSESSO"],[1,"p-col-12","p-col-align-end","ui-fluid"],[1,"p-grid","mt-2","p-justify-between"],["pButton","","type","button","label","Annulla",1,"ui-button-secondary","ui-button-text-only","p-1","text-lowercase","font-weight-normal","shadow-none","w-5m",3,"click"],["pButton","","type","submit","label","Salva Macchina",1,"ui-button-text-only","p-1","text-uppercase","font-weight-normal","shadow-none","w-10m",3,"disabled"],[1,"p-grid","align-self-center"],[1,"p-col-4"],["for","tipologia-macchinario"],["id","tipologia-macchinario","formControlName","tipologiaMacchinario",3,"options","onChange"],[4,"ngIf"],["for","classe-funzionale-macchinario"],["id","classe-funzionale-macchinario","formControlName","classeFunzionaleMacchinario",3,"options","onChange"],["for","sotto-tipologia-macchinario"],["id","sotto-tipologia-macchinario","formControlName","sottoTipologiaMacchinario",3,"options","onChange"],["for","marca-input"],["id","marca-input","type","text","pInputText","","formControlName","marcaMacchinario",3,"maxlength"],["for","modello-input"],["id","modello-input","type","text","pInputText","","formControlName","modello",3,"maxlength"],["class","p-col-4",4,"ngIf"],["for","numero-matricola-input"],["id","numero-matricola-input","type","text","pInputText","","formControlName","numeroMatricola",1,"text-right",3,"maxlength"],["for","numero-telaio-input"],["id","numero-telaio-input","type","text","pInputText","","formControlName","numeroTelaio",1,"text-right",3,"maxlength"],["formControlName","annoCostruzione",3,"min","max"],["class","p-col-12",4,"ngIf"],[1,"p-col"],["class","font-12","severity","error","text","Campo Obbligatorio",4,"ngIf"],["severity","error","text","Campo Obbligatorio",1,"font-12"],["for","targa-input"],["id","targa-input","type","text","pInputText","","formControlName","targa",1,"text-right",3,"maxlength"],[1,"p-col-12"],["for","switch-motore"],["id","switch-motore","formControlName","switchMotore",1,"px-4",3,"onChange"],[1,"p-col-6"],["for","marca-motre-input"],["id","marca-motore-input","type","text","pInputText","","formControlName","marcaMotore",3,"maxlength"],["for","tipo-input"],["id","tipo-input","type","text","pInputText","","formControlName","tipo",3,"maxlength"],["for","alimentazione"],["id","alimentazione","formControlName","alimentazione",3,"options","onChange"],["for","potenza-input"],["id","potenza-input","pattern","^([0-9]+\\.?[0-9]*)$","type","text","pInputText","","formControlName","potenza",1,"text-right",3,"maxlength"],["id","numero-telaio-input","type","text","pInputText","","formControlName","matricolaMotore",1,"text-right",3,"maxlength"],["class","font-12","severity","error","text","Formato non valido",4,"ngIf"],["severity","error","text","Formato non valido",1,"font-12"],[1,"p-grid","m-0","p-justify-between","p-align-end"],[1,"p-col-6","p-0"],["for","tipo-possesso-input",1,"pr-0_5m"],["id","tipo-possesso-input","formControlName","tipologiaPossesso",3,"options","onChange"],["class","p-col-3 p-0",4,"ngIf"],["class","p-col p-0 pl-4",4,"ngIf"],[1,"p-col-3","p-0"],["pButton","","type","button","icon","pi pi-attachment","iconPos","right","label","CARICA DOCUMENTO",1,"w-10m","ui-button-secondary","ui-button-text","button-accent-alt",3,"click"],["type","file","id","fileCaricato","name","fileCaricato","onclick","this.value = null",1,"inputUploadFile",2,"display","none",3,"accept","change"],["fileCaricato",""],[1,"p-col","p-0","pl-4"],[1,"p-grid","m-0","p-align-center","p-justify-between","border-bottom","border-top"],["target","_blank",1,"cursor-pointer","p-col",3,"click"],["class","p-col-fixed",4,"ngIf"],[1,"p-col-fixed"],["src","assets/img/ico-x.jpg",1,"cursor-pointer",3,"click"]],template:function(i,t){1&i&&(n.Tb(0,"p-dialog",0,1),n.bc("visibleChange",(function(i){return t.display=i})),n.Ob(2,"p-toast",2),n.Tb(3,"form",3),n.bc("ngSubmit",(function(){return t.onSubmit()})),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"p-accordion",6,7),n.bc("onOpen",(function(i){return t.onSelectAccordion(i)})),n.Tb(8,"div",8),n.Tb(9,"p-accordionTab",9),n.Mc(10,Je,44,17,"ng-template",10),n.Sb(),n.Sb(),n.Tb(11,"div",8),n.Tb(12,"p-accordionTab",11),n.Mc(13,co,23,7,"ng-template",10),n.Sb(),n.Sb(),n.Tb(14,"div",8),n.Tb(15,"p-accordionTab",12),n.Mc(16,uo,10,4,"ng-template",10),n.Sb(),n.Sb(),n.Sb(),n.Ob(17,"br"),n.Sb(),n.Sb(),n.Tb(18,"div",13),n.Tb(19,"p-footer"),n.Tb(20,"div",14),n.Tb(21,"div"),n.Tb(22,"button",15),n.bc("click",(function(){return t.annulla()})),n.Sb(),n.Sb(),n.Tb(23,"div"),n.Ob(24,"button",16),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(21,po)),n.Db(t.idValidazione?"title-grey":""),n.mc("visible",t.display)("focusOnShow",!1)("modal",!0)("closable",!1)("closeOnEscape",!0)("blockScroll",!0)("contentStyle",n.rc(22,mo))("dismissableMask",!0),n.Bb(2),n.Kc(n.rc(23,go)),n.Bb(1),n.mc("formGroup",t.macchinaForm),n.Bb(3),n.Db(t.idValidazione?"accordion-grey":""),n.Bb(6),n.mc("disabled",t.motoreDisabled),n.Bb(12),n.Db(t.idValidazione?"button-custom-grey":""),n.mc("disabled",t.READONLY_MODE))},directives:[h.a,g.a,b.I,b.t,b.k,f.a,f.c,p.e,p.b,T.b,S.a,b.s,b.i,r.t,b.c,ri.a,b.n,ye.a,ni.b,Pe.a,b.z],styles:["[_nghost-%COMP%]     .ui-dialog{max-height:100%}[_nghost-%COMP%]     .ui-dialog .ui-dialog-content{height:100%}[_nghost-%COMP%]   p-dropdown[_ngcontent-%COMP%] >   .ui-dropdown label.ui-dropdown-label{height:100%;font-weight:400!important}[_nghost-%COMP%]     input.ui-inputtext.ui-spinner-input:disabled, [_nghost-%COMP%]   input.ui-inputtext[_ngcontent-%COMP%]:disabled{border-bottom:1px dotted;opacity:.9;background:#e8f5e9}[_nghost-%COMP%]     .ui-dropdown.ui-state-disabled .ui-dropdown-label-container>.ui-dropdown-label.ui-inputtext{border-bottom:1px dotted;opacity:.9;background:#b1ddb5}[_nghost-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .button-accent-alt[_ngcontent-%COMP%]{border:2px solid #01985a;color:#01985a!important;font-weight:700}[_nghost-%COMP%]   .button-accent-alt[_ngcontent-%COMP%] >   span.ui-button-icon-right.pi{color:#01985a!important;font-size:x-large!important}[_nghost-%COMP%]   .no-wrap[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]   .pr-0_5m[_ngcontent-%COMP%]{padding-right:.5em}[_nghost-%COMP%]   .h-90[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .button-custom-grey[_ngcontent-%COMP%]{background-color:#9b9b9b!important}[_nghost-%COMP%]   .title-grey[_ngcontent-%COMP%]     .ui-dialog .ui-dialog-titlebar .ui-dialog-title{color:#9b9b9b!important}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header{border-top:3px solid green}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header>a{text-decoration:none;vertical-align:center;color:#000;background-color:#fff;border:1}[_nghost-%COMP%]     .ui-accordion .ui-icon{color:#000}[_nghost-%COMP%]     .ui-accordion .ui-accordion-content{width:100%;color:#000;background-color:hsla(0,0%,100%,.144);border-block-color:#000}[_nghost-%COMP%]     .ui-accordion-header.ui-icon>a{color:#000;background-color:#fff}[_nghost-%COMP%]     .ui-accordion .ui-accordion-content{border:1}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header>a .ui-accordion-toggle-icon{color:#0d5f3f;float:right}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header>a .ui-accordion-header-text{color:#0d5f3f;border-bottom:solid;font-size:24px;font-weight:700;display:inline-block;padding-bottom:5px}"]}),i})();var fo=e("Pgx+");const To=["popupNuovaMacchina"];function So(i,t){1&i&&n.Ob(0,"th",25)}function vo(i,t){if(1&i&&(n.Tb(0,"th",26),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Ob(3,"p-sortIcon",27),n.Sb()),2&i){const i=t.$implicit;n.mc("pSortableColumn",i.field)("pSortableColumnDisabled",null==i.field),n.Bb(2),n.Pc(i.header),n.Bb(1),n.mc("field",i.field)}}function Oo(i,t){if(1&i&&(n.Tb(0,"tr"),n.Mc(1,So,1,0,"th",22),n.Mc(2,vo,4,4,"th",23),n.Tb(3,"th",24),n.Tb(4,"strong"),n.Oc(5,"Azioni"),n.Sb(),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=n.fc();n.Bb(1),n.mc("ngIf",!e.readonly),n.Bb(1),n.mc("ngForOf",i)}}function Co(i,t){if(1&i){const i=n.Ub();n.Tb(0,"td",24),n.Tb(1,"button",30),n.bc("click",(function(){n.Ec(i);const t=n.fc().$implicit;return n.fc().deleteMacchina(t.id)})),n.Sb(),n.Sb()}if(2&i){const i=n.fc(2);n.Bb(1),n.Db(i.isFascicoloAttuale()?"":"button-custom-grey")}}function Io(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr"),n.Mc(1,Co,2,2,"td",28),n.Tb(2,"td"),n.Oc(3),n.gc(4,"replaceWithSpaceBy"),n.Sb(),n.Tb(5,"td"),n.Oc(6),n.Sb(),n.Tb(7,"td"),n.Oc(8),n.Sb(),n.Tb(9,"td"),n.Oc(10),n.Sb(),n.Tb(11,"td",24),n.Tb(12,"button",29),n.bc("click",(function(){n.Ec(i);const e=t.$implicit;return n.fc().dettaglioMacchina(e.id)})),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=n.fc();n.Bb(1),n.mc("ngIf",!e.readonly),n.Bb(2),n.Pc(n.ic(4,7,i.tipologia,"_")),n.Bb(3),n.Pc(i.modello),n.Bb(2),n.Pc(i.targa),n.Bb(2),n.Pc(i.alimentazione),n.Bb(2),n.Db(e.isFascicoloAttuale()?"":"button-custom-grey")}}function Ao(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length+2)}}const Fo=function(){return{marginTop:"70px"}};let Mo=(()=>{class i{constructor(i,t,e,o,a,c,r){this.fascicoloDettaglioService=i,this.errorService=t,this.httpClientMacchineService=e,this.dotazioneTecnicaBuilderService=o,this.httpClientMediatorService=a,this.messageService=c,this.route=r}ngOnInit(){this.idValidazione=this.route.snapshot.queryParams["id-validazione"];const i=this.fascicoloDettaglioService.fascicoloCorrente.value.stato;this.readonly=i!=R.c.VALIDATO&&i!=R.c.IN_AGGIORNAMENTO||null!=this.idValidazione,this.listaMacchine=[],this.setCols(),this.getMacchine(this.idValidazione?this.idValidazione:null)}ngOnDestroy(){this.macchineSubscription&&this.macchineSubscription.unsubscribe(),this.deleteMacchinaByIdSubscription&&this.deleteMacchinaByIdSubscription.unsubscribe(),this.getMacchineSubscription&&this.getMacchineSubscription.unsubscribe(),this.getMacchinaByIdSubscription&&this.getMacchinaByIdSubscription.unsubscribe()}aggiungiMacchina(){this.popupNuovaMacchina.open(!1,this.getCuaa())}goBack(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}deleteMacchina(i){console.log("Cancello macchina id: "+i.toString()),this.deleteMacchinaByIdSubscription=this.httpClientMediatorService.deleteMacchinaById(this.getCuaa(),i.toString()).pipe(Object(Ai.a)(i=>{const t=this.fascicoloDettaglioService.fascicoloCorrente.value;return t.stato!=R.c.IN_AGGIORNAMENTO&&(t.stato=R.c.IN_AGGIORNAMENTO,this.fascicoloDettaglioService.fascicoloCorrente.next(t)),this.messageService.add(u.a.getToast("tst-macchine",u.b.success,"La macchina \xe8 stata eliminata dal sistema!")),this.httpClientMacchineService.getMacchine(this.getCuaa())}),Object(Z.a)(i=>(this.errorService.showError(i,"tst-macchine"),q.a))).subscribe(i=>{this.listaMacchine=i&&i.length?i:[]},i=>this.errorService.showError(i,"tst-macchine"))}onCloseDialog(i){i&&this.getMacchine()}isFascicoloAttuale(){return this.fascicoloDettaglioService.fascicoloCorrente&&null==this.idValidazione}dettaglioMacchina(i){this.getMacchinaByIdSubscription=this.httpClientMacchineService.getMacchinaById(this.getCuaa(),i.toString(),this.idValidazione?this.idValidazione:null).subscribe(i=>{const t=this.dotazioneTecnicaBuilderService.toDettaglioMacchinaVM(i);this.popupNuovaMacchina.open(this.readonly,this.getCuaa(),t,this.idValidazione?this.idValidazione:null)},i=>this.errorService.showError(i,"tst-macchine"))}setCols(){this.cols=[{field:"tipologia",header:"Tipologia mezzo"},{field:"modello",header:"Modello"},{field:"targa",header:"Targa"},{field:"alimentazione",header:"Alimentazione"}]}getMacchine(i){this.getMacchineSubscription=this.httpClientMacchineService.getMacchine(this.getCuaa(),i).subscribe(i=>{i&&i.length?(this.listaMacchine=[],i.forEach(i=>{i.tipologia=i.tipologia,this.listaMacchine.push(i)})):this.listaMacchine=[]},i=>this.errorService.showError(i,"tst-macchine"))}getCuaa(){var i,t;return null===(t=null===(i=this.fascicoloDettaglioService.fascicoloCorrente)||void 0===i?void 0:i.value)||void 0===t?void 0:t.cuaa}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(L.a),n.Nb(Ht.a),n.Nb(Ee.a),n.Nb(Me.a),n.Nb(Mi.a),n.Nb(p.d),n.Nb(x.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-macchine"]],viewQuery:function(i,t){var e;1&i&&n.Uc(To,!0),2&i&&n.Ac(e=n.cc())&&(t.popupNuovaMacchina=e.first)},decls:25,vars:18,consts:[[3,"onHideDialog"],["popupNuovaMacchina",""],["key","tst-macchine"],[1,"ui-grid-fixed","boxgrey"],[1,"funzioni-grid","boxgrey"],[1,"p-grid","m-0"],[1,"p-col","p-0"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-dotazione.jpg"],[1,"ml-2"],[1,"p-col","w-100","p-0"],[1,"p-col-fixed","p-0"],["pButton","","icon","pi pi-plus-circle","iconPos","right","type","button","label","AGGIUNGI",1,"w-10m","button-large-icon",3,"disabled","click"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["expandIcon","","collapseIcon",""],["header","MACCHINE",3,"selected"],["dataKey","identificativo",3,"columns","value","autoLayout","paginator"],["tableUnita",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","text-center","style","width: 3em",4,"ngIf"],["class","text-center",3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[1,"text-center"],[1,"text-center",2,"width","3em"],[1,"text-center",3,"pSortableColumn","pSortableColumnDisabled"],[3,"field"],["class","text-center",4,"ngIf"],["pButton","","type","button","icon","pi pi-arrow-right",1,"icon-button-rect",3,"click"],["pButton","","type","button","icon","pi pi-times-circle",1,"icon-button-circle",3,"click"]],template:function(i,t){1&i&&(n.Tb(0,"app-popup-nuova-macchina",0,1),n.bc("onHideDialog",(function(i){return t.onCloseDialog(i)})),n.Sb(),n.Ob(2,"p-toast",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"div",6),n.Tb(7,"a",7),n.bc("click",(function(){return t.goBack()})),n.Ob(8,"i",8),n.Ob(9,"img",9),n.Tb(10,"span",10),n.Oc(11),n.gc(12,"translate"),n.Sb(),n.Sb(),n.Sb(),n.Ob(13,"div",11),n.Tb(14,"div",12),n.Tb(15,"button",13),n.bc("click",(function(){return t.aggiungiMacchina()})),n.Sb(),n.Sb(),n.Sb(),n.Ob(16,"br"),n.Tb(17,"div",14),n.Tb(18,"p-accordion",15),n.Tb(19,"p-accordionTab",16),n.Tb(20,"p-table",17,18),n.Mc(22,Oo,6,2,"ng-template",19),n.Mc(23,Io,13,10,"ng-template",20),n.Mc(24,Ao,3,1,"ng-template",21),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Bb(2),n.Kc(n.rc(17,Fo)),n.Bb(8),n.Db(t.isFascicoloAttuale()?"":"back-grey"),n.Bb(1),n.Qc(" ",n.hc(12,15,"FascicoloAziendale.DOTAZIONE_TECNICA")," "),n.Bb(4),n.Db(t.isFascicoloAttuale()?"":"button-custom-grey"),n.mc("disabled",t.readonly),n.Bb(4),n.Db(t.isFascicoloAttuale()?"":"title-grey"),n.mc("selected",!0),n.Bb(1),n.mc("columns",t.cols)("value",t.listaMacchine)("autoLayout",!0)("paginator",!1))},directives:[ho,g.a,x.h,T.b,f.a,f.c,j.q,p.e,r.t,r.s,j.p,j.o],pipes:[m.d,fo.a],styles:["[_nghost-%COMP%]   .w-10m[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]   .button-large-icon[_ngcontent-%COMP%] >   span.pi{font-size:x-large}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]{background-color:#4caf50!important;border-radius:unset;height:5em!important;width:13em!important;opacity:1}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%] >   span.ui-button-icon-left{font-size:2.5em}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%]{background-color:transparent!important;opacity:1;width:3em!important;height:3em!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%] >   span.ui-button-icon-left{background:#a9a9a9!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%] >   span.ui-button-icon-left:hover{background-color:#d3d3d3!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%] >   span.pi{font-size:x-large!important;background:#9ccc65}[_nghost-%COMP%]   .button-custom-grey[_ngcontent-%COMP%]{background-color:#9b9b9b!important}[_nghost-%COMP%]   .back-grey[_ngcontent-%COMP%], [_nghost-%COMP%]   .title-grey[_ngcontent-%COMP%]     .ui-accordion-header>a .ui-accordion-header-text{color:#9b9b9b!important}"]}),i})();class zo{}function Eo(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.classe&&i.macchinario.classe.tipologia?i.macchinario.classe.tipologia:"ND"," ")}}function Do(i,t){if(1&i&&(n.Tb(0,"div"),n.Ob(1,"p-dropdown",17),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.mc("options",i.tipologiaOptions)}}function Bo(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.descrizione?i.macchinario.descrizione:"ND"," ")}}function No(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function yo(i,t){if(1&i&&(n.Tb(0,"div",21),n.Mc(1,No,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.modelloMacchina.errors.required)}}function Po(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",18),n.Ob(2,"input",19),n.Sb(),n.Mc(3,yo,2,1,"div",20),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaMacchina.controls.modelloMacchina),n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.modelloMacchina.invalid&&(i.modificaMacchina.controls.modelloMacchina.dirty||i.modificaMacchina.controls.modelloMacchina.touched))}}function Lo(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.targa?i.macchinario.targa:"ND"," ")}}function _o(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function Ro(i,t){if(1&i&&(n.Tb(0,"div",21),n.Mc(1,_o,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.targaMacchina.errors.required)}}function xo(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",18),n.Ob(2,"input",22),n.Sb(),n.Mc(3,Ro,2,1,"div",20),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaMacchina.controls.targaMacchina),n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.targaMacchina.invalid&&(i.modificaMacchina.controls.targaMacchina.dirty||i.modificaMacchina.controls.targaMacchina.touched))}}function wo(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.alimentazione&&i.macchinario.alimentazione.alimentazione?i.macchinario.alimentazione.alimentazione:"ND"," ")}}function Go(i,t){if(1&i&&(n.Tb(0,"div"),n.Ob(1,"p-dropdown",23),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.mc("options",i.alimentazioneOptions)}}function ko(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.possesso?i.macchinario.possesso:"ND"," ")}}function Vo(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function Uo(i,t){if(1&i&&(n.Tb(0,"div",21),n.Mc(1,Vo,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.possessoMacchina.errors.required)}}function qo(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",18),n.Ob(2,"input",24),n.Sb(),n.Mc(3,Uo,2,1,"div",20),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaMacchina.controls.possessoMacchina),n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.possessoMacchina.invalid&&(i.modificaMacchina.controls.possessoMacchina.dirty||i.modificaMacchina.controls.possessoMacchina.touched))}}function Qo(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.marca?i.macchinario.marca:"ND"," ")}}function Zo(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function $o(i,t){if(1&i&&(n.Tb(0,"div",21),n.Mc(1,Zo,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.marcaMacchina.errors.required)}}function jo(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",18),n.Ob(2,"input",25),n.Sb(),n.Mc(3,$o,2,1,"div",20),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaMacchina.controls.marcaMacchina),n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.marcaMacchina.invalid&&(i.modificaMacchina.controls.marcaMacchina.dirty||i.modificaMacchina.controls.marcaMacchina.touched))}}function Yo(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.gc(2,"date"),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.macchinario.dataIscrizione?n.ic(2,1,i.macchinario.dataIscrizione,"dd/MM/yyyy"):"ND"," ")}}function Ho(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.gc(2,"translate"),n.Sb()),2&i&&(n.Bb(1),n.Qc(" ",n.hc(2,1,"ANTIMAFIA.CAMPO_OBBLIGATORIO")," "))}function Ko(i,t){if(1&i&&(n.Tb(0,"div",21),n.Mc(1,Ho,3,3,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.dataIscrizione.errors.required)}}function Wo(i,t){if(1&i&&(n.Tb(0,"div"),n.Ob(1,"p-calendar",26),n.Mc(2,Ko,2,1,"div",20),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.mc("locale",i.language)("formControl",i.modificaMacchina.controls.dataIscrizione),n.Bb(1),n.mc("ngIf",i.modificaMacchina.controls.dataIscrizione.invalid&&(i.modificaMacchina.controls.dataIscrizione.dirty||i.modificaMacchina.controls.dataIscrizione.touched))}}function Xo(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div"),n.Ob(1,"br"),n.Tb(2,"div",27),n.Ob(3,"div",28),n.Tb(4,"div",29),n.Tb(5,"p",11),n.Tb(6,"button",30),n.bc("click",(function(){return n.Ec(i),n.fc().annullaModifica()})),n.Sb(),n.Sb(),n.Sb(),n.Tb(7,"div",29),n.Tb(8,"p",11),n.Ob(9,"button",31),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.Bb(6),n.mc("disabled",!i.modificaAttiva),n.Bb(3),n.mc("disabled",!i.modificaAttiva)}}const Jo=function(){return{marginTop:"70px"}};let ia=(()=>{class i{constructor(i,t,e,o,a){this.fb=i,this.route=t,this.fascicoloDettaglioService=e,this.messageService=o,this.router=a,this.cuaa="",this.idMacchina="",this.modificaAttiva=!1,this.language=ci.a.itCalendar()}ngOnInit(){this.modificaAttiva=!1,this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.idMacchina=this.route.snapshot.paramMap.get("idMacchina"),this.getMacchina(this.idMacchina),this.initValue(),this.initForm()}ngOnDestroy(){this.macchineSubscription&&this.macchineSubscription.unsubscribe()}initValue(){this.alimentazioneOptions=[{id:"BENZ",alimentazione:"BENZINA"},{id:"GASOL",alimentazione:"GASOLIO"},{id:"ELETTR",alimentazione:"ELETTRICO"},{id:"GPL",alimentazione:"GPL"},{id:"METANO",alimentazione:"METANO"},{id:"IBRIDO",alimentazione:"IBRIDO"},{id:"B/ETA",alimentazione:"BENZINA / ETANOLO"},{id:"B/GPL",alimentazione:"BENZINA / GPL"},{id:"B/MET",alimentazione:"BENZINA / METANO"},{id:"B/OLIO",alimentazione:"BENZINA / OLIO"},{id:"B/WANK",alimentazione:"BENZINA / WANKEL"},{id:"G - GPL",alimentazione:"GPL G"},{id:"G - MET",alimentazione:"METANO G"},{id:"GNL",alimentazione:"GAS NATURALE LIQUEFATTO"},{id:"MISCELA",alimentazione:"MISCELA"},{id:"PETROLIO",alimentazione:"PETROLIO"}],this.tipologiaOptions=[{id:"1",tipologia:"TRATTRICI"},{id:"2",tipologia:"RIMORCHI SUP. A 15 QLI"},{id:"3",tipologia:"MOTOFALCIATRICI"},{id:"4",tipologia:"TIPOLOGIA 4"},{id:"5",tipologia:"TIPOLOGIA 5"},{id:"6",tipologia:"TIPOLOGIA 6"},{id:"7",tipologia:"TIPOLOGIA 7"},{id:"99",tipologia:"ALTRE MACCHINE"}]}initForm(){this.modificaMacchina=this.fb.group({alimentazioneMacchina:[this.macchinario.alimentazione,b.G.required],modelloMacchina:[this.macchinario.descrizione,b.G.required],tipologiaMacchina:[this.macchinario.classe,b.G.required],targaMacchina:[this.macchinario.targa,b.G.required],possessoMacchina:[this.macchinario.possesso,b.G.required],marcaMacchina:[this.macchinario.marca,b.G.required],dataIscrizione:[this.macchinario.dataIscrizione,b.G.required]})}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.LISTA_MACCHINARI)}getMacchina(i){this.initDati()}initDati(){this.macchinario=new zo,this.macchinario.idAgs=Number(this.idMacchina),this.macchinario.descrizione="FiatAgri G210",this.macchinario.targa="XX00000",this.macchinario.classe={id:"1",tipologia:"TRATTRICI"},this.macchinario.marca="Fiat",this.macchinario.alimentazione={id:"GASOL",alimentazione:"GASOLIO"},this.macchinario.possesso="Possesso",this.macchinario.motore="Motore",this.macchinario.rimorchio="Si",this.macchinario.immatricolazione=null,this.macchinario.documentoPossesso="Documento Possesso",this.macchinario.dataIscrizione="01/01/2021",this.macchinario.dataChiusura=null}deleteMacchina(i){console.log("Cancello macchina id: "+i.toString())}dettaglioMacchina(i){console.log("Dettaglio macchina id: "+i.toString()),this.router.navigate([i.toString()+"/dettaglio-macchina"])}modificaDettaglio(){this.initForm(),this.modificaAttiva=!0}annullaModifica(){this.modificaAttiva=!1}onSubmit(){console.log("submit "+this.idMacchina),this.modificaMacchina.invalid?this.messageService.add(u.a.getToast("tst-macchine",u.b.error,"Dati non validi")):this.salva()}salva(){this.macchinario.idAgs=Number(this.idMacchina),this.macchinario.classe=this.modificaMacchina.value.tipologiaMacchina,this.macchinario.descrizione=this.modificaMacchina.value.modelloMacchina,this.macchinario.targa=this.modificaMacchina.value.targaMacchina,this.macchinario.alimentazione=this.modificaMacchina.value.alimentazioneMacchina,this.macchinario.possesso=this.modificaMacchina.value.possessoMacchina,this.macchinario.marca=this.modificaMacchina.value.marcaMacchina,this.macchinario.dataIscrizione=this.modificaMacchina.value.dataIscrizione,this.messageService.add(u.a.getToast("tst-macchine",u.b.success,"Dati salvati")),this.modificaAttiva=!1}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(b.f),n.Nb(x.a),n.Nb(L.a),n.Nb(p.d),n.Nb(x.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-dettaglio-macchina"]],decls:106,vars:37,consts:[["key","tst-macchine"],[1,"ui-grid-fixed","boxgrey"],[1,"funzioni-grid","boxgrey"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-dotazione.jpg"],[1,"text-uppercase","ml-2"],[3,"formGroup","ngSubmit"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["expandIcon","","collapseIcon",""],["header","DETTAGLIO MACCHINA",3,"selected"],["align","right"],["pButton","","label","MODIFICA","pButton","",1,"pull-right",2,"background-color","green",3,"disabled","click"],[1,"table","table-hoover"],["width","25%"],[4,"ngIf"],["width","15%"],["placeholder","Seleziona tipologia macchina","optionLabel","tipologia","optionValue","id","formControlName","tipologiaMacchina",3,"options"],[1,"md-inputfield"],["size","80","pInputText","","id","modelloMacchina",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],["size","20","pInputText","","id","targaMacchina",2,"border","1px solid rgb(180, 178, 178)",3,"formControl"],["placeholder","Seleziona alimentazione macchina","optionLabel","alimentazione","optionValue","id","formControlName","alimentazioneMacchina",3,"options"],["size","80","pInputText","","id","possessoMacchina",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["size","80","pInputText","","id","marcaMacchina",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["formControlName","dataIscrizione","dateFormat","dd/mm/yy","required","",1,"form-control",3,"locale","formControl"],[1,"p-grid"],[1,"p-col-10"],[1,"p-col-1"],["pButton","","label","ANNULLA","pButton","",1,"pull-right",2,"background-color","green",3,"disabled","click"],["pButton","","label","SALVA","type","submit","pButton","",1,"pull-right",2,"background-color","green",3,"disabled"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"a",3),n.bc("click",(function(){return t.handleClick()})),n.Ob(4,"i",4),n.Ob(5,"img",5),n.Tb(6,"span",6),n.Oc(7),n.gc(8,"translate"),n.gc(9,"translate"),n.Sb(),n.Sb(),n.Ob(10,"br"),n.Tb(11,"form",7),n.bc("ngSubmit",(function(){return t.onSubmit()})),n.Tb(12,"div",8),n.Tb(13,"p-accordion",9),n.Tb(14,"p-accordionTab",10),n.Tb(15,"p",11),n.Tb(16,"button",12),n.bc("click",(function(){return t.modificaDettaglio()})),n.Sb(),n.Sb(),n.Tb(17,"table",13),n.Tb(18,"tbody"),n.Tb(19,"tr"),n.Tb(20,"td",14),n.Tb(21,"strong"),n.Oc(22,"Tipologia:"),n.Sb(),n.Sb(),n.Tb(23,"td"),n.Mc(24,Eo,2,1,"div",15),n.Mc(25,Do,2,1,"div",15),n.Sb(),n.Ob(26,"td",16),n.Sb(),n.Tb(27,"tr"),n.Tb(28,"td"),n.Tb(29,"strong"),n.Oc(30,"Modello:"),n.Sb(),n.Sb(),n.Tb(31,"td"),n.Mc(32,Bo,2,1,"div",15),n.Mc(33,Po,4,2,"div",15),n.Sb(),n.Ob(34,"td"),n.Sb(),n.Tb(35,"tr"),n.Tb(36,"td"),n.Tb(37,"strong"),n.Oc(38,"Targa:"),n.Sb(),n.Sb(),n.Tb(39,"td"),n.Mc(40,Lo,2,1,"div",15),n.Mc(41,xo,4,2,"div",15),n.Sb(),n.Ob(42,"td"),n.Sb(),n.Tb(43,"tr"),n.Tb(44,"td"),n.Tb(45,"strong"),n.Oc(46,"Carburante:"),n.Sb(),n.Sb(),n.Tb(47,"td"),n.Mc(48,wo,2,1,"div",15),n.Mc(49,Go,2,1,"div",15),n.Sb(),n.Ob(50,"td"),n.Sb(),n.Tb(51,"tr"),n.Tb(52,"td"),n.Tb(53,"strong"),n.Oc(54,"Possesso:"),n.Sb(),n.Sb(),n.Tb(55,"td"),n.Mc(56,ko,2,1,"div",15),n.Mc(57,qo,4,2,"div",15),n.Sb(),n.Ob(58,"td"),n.Sb(),n.Tb(59,"tr"),n.Tb(60,"td"),n.Tb(61,"strong"),n.Oc(62,"Motore:"),n.Sb(),n.Sb(),n.Tb(63,"td"),n.Mc(64,Qo,2,1,"div",15),n.Mc(65,jo,4,2,"div",15),n.Sb(),n.Ob(66,"td"),n.Sb(),n.Tb(67,"tr"),n.Tb(68,"td"),n.Tb(69,"strong"),n.Oc(70,"Rimorchio:"),n.Sb(),n.Sb(),n.Tb(71,"td"),n.Oc(72),n.Sb(),n.Ob(73,"td"),n.Sb(),n.Tb(74,"tr"),n.Tb(75,"td"),n.Tb(76,"strong"),n.Oc(77,"Immatricolazione:"),n.Sb(),n.Sb(),n.Tb(78,"td"),n.Oc(79),n.gc(80,"date"),n.Sb(),n.Ob(81,"td"),n.Sb(),n.Tb(82,"tr"),n.Tb(83,"td"),n.Tb(84,"strong"),n.Oc(85,"Documento Possesso:"),n.Sb(),n.Sb(),n.Tb(86,"td"),n.Oc(87),n.Sb(),n.Ob(88,"td"),n.Sb(),n.Tb(89,"tr"),n.Tb(90,"td"),n.Tb(91,"strong"),n.Oc(92,"Data Iscrizione:"),n.Sb(),n.Sb(),n.Tb(93,"td"),n.Mc(94,Yo,3,4,"div",15),n.Mc(95,Wo,3,3,"div",15),n.Sb(),n.Ob(96,"td"),n.Sb(),n.Tb(97,"tr"),n.Tb(98,"td"),n.Tb(99,"strong"),n.Oc(100,"Data Chiusura:"),n.Sb(),n.Sb(),n.Tb(101,"td"),n.Oc(102),n.gc(103,"date"),n.Sb(),n.Ob(104,"td"),n.Sb(),n.Sb(),n.Sb(),n.Mc(105,Xo,10,2,"div",15),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(36,Jo)),n.Bb(7),n.Rc(" ",n.hc(8,26,"FascicoloAziendale.DOTAZIONE_TECNICA")," / ",n.hc(9,28,"FascicoloAziendale.MACCHINE")," "),n.Bb(4),n.mc("formGroup",t.modificaMacchina),n.Bb(3),n.mc("selected",!0),n.Bb(2),n.mc("disabled",t.modificaAttiva),n.Bb(8),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.Qc(" ",t.macchinario.rimorchio?t.macchinario.rimorchio:"ND"," "),n.Bb(7),n.Qc(" ",t.macchinario.immatricolazione?n.ic(80,30,t.macchinario.immatricolazione,"dd/MM/yyyy"):"ND"," "),n.Bb(8),n.Qc(" ",t.macchinario.documentoPossesso?t.macchinario.documentoPossesso:"ND"," "),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.Qc(" ",t.macchinario.dataChiusura?n.ic(103,33,t.macchinario.dataChiusura,"dd/MM/yyyy"):"ND"," "),n.Bb(3),n.mc("ngIf",t.modificaAttiva))},directives:[g.a,x.h,b.I,b.t,b.k,f.a,f.c,T.b,r.t,S.a,b.s,b.i,b.c,ri.a,b.h,v.a,b.D],pipes:[m.d,r.f],styles:["[_nghost-%COMP%]   .w-10m[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]{background-color:#4caf50!important;border-radius:unset;height:5em!important;width:13em!important;opacity:1}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%] >   span.ui-button-icon-left{font-size:2.5em}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]{background-color:#4caf50!important;border:1px solid #81c784;border-radius:unset;height:5em!important;width:5em!important;opacity:1}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}"]}),i})(),ta=(()=>{class i{constructor(i,t){this.http=i,this.configuration=t,this.urlDotazioneTecnica=""+this.configuration.dotazione_tecnica_server}getMacchineByCuaa(i){return this.http.get(this.urlMacchina(i))}getFabbricatiByCuaaAndIdValidazione(i,t){let e=new a.g;return t&&(e=e.set("idValidazione",String(t))),this.http.get(this.urlFabbricato(i),{params:e,responseType:"json"})}getFabbricatoByIdAndIdValidazione(i,t,e){let o=new a.g;return e&&(o=o.set("idValidazione",String(e))),this.http.get(this.urlFabbricato(i)+"/"+t,{params:o})}urlMacchina(i){return`${this.urlDotazioneTecnica}/macchina?cuaa=${i.cuaa}&data=${i.data}&tipiCarburante=${i.tipiCarburante}`}urlFabbricati(){return this.urlDotazioneTecnica+"/fabbricati"}urlFabbricato(i){return`${this.urlDotazioneTecnica}/fascicolo/${i}/fabbricati`}urlGetVerificaParticellaCatasto(){return this.urlDotazioneTecnica+"/fascicolo/fabbricati/catasto"}urlGetElencoSubalterniParticellaCatasto(){return this.urlDotazioneTecnica+"/fascicolo/fabbricati/catasto/elenco-subalterni-particella"}postFabbricato(i,t){return this.http.post(this.urlFabbricato(i),t)}deleteFabbricato(i,t){return this.http.delete(this.urlFabbricato(i)+"/"+t)}verificaParticellaCatasto(i,t,e,o,c){let r=new a.g;return r=r.set("numeroParticella",i),null!=t&&(r=r.set("denominatore",t)),r=r.set("tipologia",e),r=r.set("codiceComuneCatastale",String(o)),null!=c&&(r=r.set("subalterno",c)),this.http.get(this.urlGetVerificaParticellaCatasto(),{params:r})}getElencoSubalterniParticellaCatasto(i,t){let e=new a.g;return e=e.set("numeroParticella",i),e=e.set("codiceComuneCatastale",String(t)),this.http.get(this.urlGetElencoSubalterniParticellaCatasto(),{params:e})}}return i.\u0275fac=function(t){return new(t||i)(n.Xb(a.b),n.Xb(c.a))},i.\u0275prov=n.Jb({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ea=e("vizZ"),oa=e("KDHY"),aa=e("x3AQ"),ca=e("R5y+"),ra=e("rgW5");const na=["accordion"];function sa(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",27),n.Ob(1,"i",28),n.Tb(2,"h3"),n.Oc(3),n.Sb(),n.Tb(4,"p"),n.Oc(5),n.Sb(),n.Sb(),n.Tb(6,"div",29),n.Tb(7,"div",30),n.Tb(8,"button",31),n.bc("click",(function(){return n.Ec(i),n.fc().onConfirmAggiornaDichiarazione()})),n.Sb(),n.Sb(),n.Tb(9,"div",30),n.Tb(10,"button",32),n.bc("click",(function(){return n.Ec(i),n.fc().onRejectAggiornaDichiarazione()})),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit;n.Bb(3),n.Pc(i.summary),n.Bb(2),n.Pc(i.detail)}}function la(i,t){1&i&&n.Ob(0,"p-message",34)}function ba(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,la,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("tipologiaFabbricato").errors?null:i.fabbricatoForm.get("tipologiaFabbricato").errors.required)}}function da(i,t){1&i&&n.Ob(0,"p-message",34)}function ua(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,da,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("sottoTipologiaFabbricato").errors?null:i.fabbricatoForm.get("sottoTipologiaFabbricato").errors.required)}}function pa(i,t){1&i&&n.Ob(0,"p-message",34)}function ma(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,pa,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("sottoTipo").errors?null:i.fabbricatoForm.get("sottoTipo").errors.required)}}function ga(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",14),n.Tb(1,"label",35),n.Oc(2,"Sotto Tipologia*"),n.Sb(),n.Tb(3,"p-dropdown",36),n.bc("onChange",(function(t){return n.Ec(i),n.fc().onSelectSottoTipo(t)})),n.Sb(),n.Mc(4,ma,2,1,"div",17),n.Sb()}if(2&i){const i=n.fc();n.Bb(3),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.sottoTipoFabbricato),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("sottoTipo").invalid&&(i.fabbricatoForm.get("sottoTipo").dirty||i.fabbricatoForm.get("sottoTipo").touched))}}function ha(i,t){1&i&&n.Ob(0,"p-message",34)}function fa(i,t){1&i&&n.Ob(0,"p-message",62)}function Ta(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,ha,1,0,"p-message",33),n.Mc(2,fa,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.comune").errors?null:i.fabbricatoForm.get("datiCatastali.comune").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.comune").errors?null:i.fabbricatoForm.get("datiCatastali.comune").errors.pattern)}}function Sa(i,t){1&i&&n.Ob(0,"p-message",34)}function va(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Sa,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.particella").errors?null:i.fabbricatoForm.get("datiCatastali.particella").errors.required)}}function Oa(i,t){1&i&&n.Ob(0,"p-message",34)}function Ca(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Oa,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.denominatore").errors?null:i.fabbricatoForm.get("datiCatastali.denominatore").errors.required)}}function Ia(i,t){1&i&&n.Ob(0,"p-message",34)}function Aa(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ia,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.tipologia").errors?null:i.fabbricatoForm.get("datiCatastali.tipologia").errors.required)}}function Fa(i,t){1&i&&n.Ob(0,"p-message",34)}function Ma(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Fa,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(5);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.subalterno").errors?null:i.fabbricatoForm.get("datiCatastali.subalterno").errors.required)}}function za(i,t){if(1&i&&(n.Tb(0,"div",55),n.Tb(1,"label",63),n.Oc(2,"Subalterno"),n.Sb(),n.Ob(3,"p-dropdown",64),n.Mc(4,Ma,2,1,"div",17),n.Sb()),2&i){const i=n.fc(4);n.Bb(3),n.mc("options",i.subalternoList),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.subalterno").invalid&&(i.fabbricatoForm.get("datiCatastali.subalterno").dirty||i.fabbricatoForm.get("datiCatastali.subalterno").touched))}}function Ea(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",65),n.Tb(1,"button",66),n.bc("click",(function(t){return n.Ec(i),n.fc(4).aggiungiParticellaInTrentino(t)})),n.Sb(),n.Sb()}}function Da(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",23),n.Tb(1,"div",48),n.Tb(2,"div",13),n.Tb(3,"div",14),n.Tb(4,"label",49),n.Oc(5,"Comune catastale*"),n.Sb(),n.Tb(6,"input",50),n.bc("change",(function(){return n.Ec(i),n.fc(3).getElencoSubalterniParticellaCatasto()})),n.Sb(),n.Mc(7,Ta,3,2,"div",17),n.Sb(),n.Tb(8,"div",14),n.Tb(9,"label",51),n.Oc(10,"Numero particella*"),n.Sb(),n.Tb(11,"input",52),n.bc("change",(function(){return n.Ec(i),n.fc(3).getElencoSubalterniParticellaCatasto()})),n.Sb(),n.Mc(12,va,2,1,"div",17),n.Sb(),n.Tb(13,"div",14),n.Tb(14,"label",53),n.Oc(15,"Denominatore"),n.Sb(),n.Ob(16,"input",54),n.Mc(17,Ca,2,1,"div",17),n.Sb(),n.Sb(),n.Tb(18,"div",13),n.Tb(19,"div",55),n.Tb(20,"label",56),n.Oc(21,"Tipologia*"),n.Sb(),n.Tb(22,"p-dropdown",57),n.bc("onChange",(function(t){return n.Ec(i),n.fc(3).onSelectTipologiaCatasto(t)})),n.Sb(),n.Mc(23,Aa,2,1,"div",17),n.Sb(),n.Mc(24,za,5,2,"div",58),n.Sb(),n.Tb(25,"div",59),n.Mc(26,Ea,2,0,"div",60),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc(3);n.Bb(6),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.comune").invalid&&(i.fabbricatoForm.get("datiCatastali.comune").dirty||i.fabbricatoForm.get("datiCatastali.comune").touched)),n.Bb(4),n.mc("maxlength",25),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.particella").invalid&&(i.fabbricatoForm.get("datiCatastali.particella").dirty||i.fabbricatoForm.get("datiCatastali.particella").touched)),n.Bb(4),n.mc("maxlength",25),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.denominatore").invalid&&(i.fabbricatoForm.get("datiCatastali.denominatore").dirty||i.fabbricatoForm.get("datiCatastali.denominatore").touched)),n.Bb(5),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipologiaCatasto),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.tipologia").invalid&&(i.fabbricatoForm.get("datiCatastali.tipologia").dirty||i.fabbricatoForm.get("datiCatastali.tipologia").touched)),n.Bb(1),n.mc("ngIf","EDIFICIALE"===i.fabbricatoForm.get("datiCatastali.tipologia").value),n.Bb(2),n.mc("ngIf",!i.READONLY_MODE)}}function Ba(i,t){1&i&&n.Ob(0,"p-message",34)}function Na(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ba,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.sezione").errors?null:i.fabbricatoForm.get("datiCatastali.sezione").errors.required)}}function ya(i,t){1&i&&n.Ob(0,"p-message",34)}function Pa(i,t){1&i&&n.Ob(0,"p-message",62)}function La(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,ya,1,0,"p-message",33),n.Mc(2,Pa,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.foglio").errors?null:i.fabbricatoForm.get("datiCatastali.foglio").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.foglio").errors?null:i.fabbricatoForm.get("datiCatastali.foglio").errors.pattern)}}function _a(i,t){1&i&&n.Ob(0,"p-message",34)}function Ra(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,_a,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.particella").errors?null:i.fabbricatoForm.get("datiCatastali.particella").errors.required)}}function xa(i,t){1&i&&n.Ob(0,"p-message",34)}function wa(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,xa,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.denominatore").errors?null:i.fabbricatoForm.get("datiCatastali.denominatore").errors.required)}}function Ga(i,t){1&i&&n.Ob(0,"p-message",34)}function ka(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ga,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("datiCatastali.tipologia").errors?null:i.fabbricatoForm.get("datiCatastali.tipologia").errors.required)}}function Va(i,t){if(1&i){const i=n.Ub();n.Tb(0,"button",73),n.bc("click",(function(t){return n.Ec(i),n.fc(5).annullaModifica(t)})),n.Sb()}}function Ua(i,t){if(1&i&&(n.Tb(0,"div",65),n.Mc(1,Va,1,0,"button",72),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null!=i.particellaModificaInCorso)}}function qa(i,t){if(1&i){const i=n.Ub();n.Tb(0,"button",66),n.bc("click",(function(t){return n.Ec(i),n.fc(5).aggiungiParticellaFuoriTrentino(t)})),n.Sb()}}function Qa(i,t){if(1&i){const i=n.Ub();n.Tb(0,"button",76),n.bc("click",(function(t){return n.Ec(i),n.fc(5).aggiornaParticellaFuoriTrentino(t)})),n.Sb()}}function Za(i,t){if(1&i&&(n.Tb(0,"div",65),n.Mc(1,qa,1,0,"button",74),n.Mc(2,Qa,1,0,"button",75),n.Sb()),2&i){const i=n.fc(4);n.Bb(1),n.mc("ngIf",null===i.particellaModificaInCorso),n.Bb(1),n.mc("ngIf",null!=i.particellaModificaInCorso)}}function $a(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",23),n.Tb(1,"div",48),n.Tb(2,"div",13),n.Tb(3,"div",55),n.Tb(4,"label",67),n.Oc(5,"Sezione (codice nazionale)*"),n.Sb(),n.Ob(6,"input",68),n.Mc(7,Na,2,1,"div",17),n.Sb(),n.Tb(8,"div",55),n.Tb(9,"label",69),n.Oc(10,"Foglio*"),n.Sb(),n.Ob(11,"input",70),n.Mc(12,La,3,2,"div",17),n.Sb(),n.Sb(),n.Tb(13,"div",13),n.Tb(14,"div",14),n.Tb(15,"label",51),n.Oc(16,"Numero particella*"),n.Sb(),n.Ob(17,"input",71),n.Mc(18,Ra,2,1,"div",17),n.Sb(),n.Tb(19,"div",14),n.Tb(20,"label",53),n.Oc(21,"Denominatore"),n.Sb(),n.Ob(22,"input",54),n.Mc(23,wa,2,1,"div",17),n.Sb(),n.Tb(24,"div",14),n.Tb(25,"label",56),n.Oc(26,"Tipologia*"),n.Sb(),n.Tb(27,"p-dropdown",57),n.bc("onChange",(function(t){return n.Ec(i),n.fc(3).onSelectTipologiaCatasto(t)})),n.Sb(),n.Mc(28,ka,2,1,"div",17),n.Sb(),n.Sb(),n.Tb(29,"div",59),n.Mc(30,Ua,2,1,"div",60),n.Mc(31,Za,3,2,"div",60),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc(3);n.Bb(6),n.mc("maxlength",25),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.sezione").invalid&&(i.fabbricatoForm.get("datiCatastali.sezione").dirty||i.fabbricatoForm.get("datiCatastali.sezione").touched)),n.Bb(4),n.mc("maxlength",25),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.foglio").invalid&&(i.fabbricatoForm.get("datiCatastali.foglio").dirty||i.fabbricatoForm.get("datiCatastali.foglio").touched)),n.Bb(5),n.mc("maxlength",25),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.particella").invalid&&(i.fabbricatoForm.get("datiCatastali.particella").dirty||i.fabbricatoForm.get("datiCatastali.particella").touched)),n.Bb(4),n.mc("maxlength",25),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.denominatore").invalid&&(i.fabbricatoForm.get("datiCatastali.denominatore").dirty||i.fabbricatoForm.get("datiCatastali.denominatore").touched)),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipologiaCatasto),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("datiCatastali.tipologia").invalid&&(i.fabbricatoForm.get("datiCatastali.tipologia").dirty||i.fabbricatoForm.get("datiCatastali.tipologia").touched)),n.Bb(2),n.mc("ngIf",!i.READONLY_MODE),n.Bb(1),n.mc("ngIf",!i.READONLY_MODE)}}function ja(i,t){if(1&i&&(n.Tb(0,"th"),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(2),n.Pc(i.header)}}function Ya(i,t){if(1&i&&(n.Tb(0,"tr"),n.Mc(1,ja,3,1,"th",84),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.mc("ngForOf",i)}}function Ha(i,t){if(1&i){const i=n.Ub();n.Tb(0,"button",90),n.bc("click",(function(){n.Ec(i);const t=n.fc(),e=t.$implicit,o=t.rowIndex;return n.fc(4).modificaParticella(e,o)})),n.Sb()}}function Ka(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr"),n.Tb(1,"td"),n.Tb(2,"a",85),n.Ob(3,"i",86),n.Sb(),n.Sb(),n.Tb(4,"td",87),n.Oc(5),n.Sb(),n.Tb(6,"td",87),n.Oc(7),n.Sb(),n.Tb(8,"td",87),n.Oc(9),n.Sb(),n.Tb(10,"td",87),n.Oc(11),n.Sb(),n.Tb(12,"td",87),n.Oc(13),n.Sb(),n.Tb(14,"td",87),n.Mc(15,Ha,1,0,"button",88),n.Tb(16,"button",89),n.bc("click",(function(){n.Ec(i);const e=t.$implicit;return n.fc(4).eliminaParticella(e)})),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=t.expanded,o=n.fc(4);n.Bb(2),n.mc("pRowToggler",i),n.Bb(1),n.mc("ngClass",e?"pi pi-chevron-down":"pi pi-chevron-right"),n.Bb(2),n.Pc(i.particella),n.Bb(2),n.Pc(i.denominatore),n.Bb(2),n.Pc(i.tipologia),n.Bb(2),n.Pc(i.inTrentino?"S\xec":"No"),n.Bb(2),n.Pc(i.esito),n.Bb(2),n.mc("ngIf",!i.inTrentino),n.Bb(1),n.mc("disabled",o.READONLY_MODE)}}function Wa(i,t){if(1&i&&(n.Tb(0,"tbody"),n.Tb(1,"tr"),n.Tb(2,"th"),n.Oc(3,"Dati particella In Trentino"),n.Sb(),n.Ob(4,"th"),n.Sb(),n.Tb(5,"tr"),n.Tb(6,"td"),n.Oc(7,"Numero Particella:"),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.Sb(),n.Sb(),n.Tb(10,"tr"),n.Tb(11,"td"),n.Oc(12,"Denominatore:"),n.Sb(),n.Tb(13,"td"),n.Oc(14),n.Sb(),n.Sb(),n.Tb(15,"tr"),n.Tb(16,"td"),n.Oc(17,"Tipologia:"),n.Sb(),n.Tb(18,"td"),n.Oc(19),n.Sb(),n.Sb(),n.Tb(20,"tr"),n.Tb(21,"td"),n.Oc(22,"Comune catastale:"),n.Sb(),n.Tb(23,"td"),n.Oc(24),n.Sb(),n.Sb(),n.Tb(25,"tr"),n.Tb(26,"td"),n.Oc(27,"Subalterno:"),n.Sb(),n.Tb(28,"td"),n.Oc(29),n.Sb(),n.Sb(),n.Tb(30,"tr"),n.Tb(31,"td"),n.Oc(32,"Indirizzo:"),n.Sb(),n.Tb(33,"td"),n.Oc(34),n.Sb(),n.Sb(),n.Tb(35,"tr"),n.Tb(36,"td"),n.Oc(37,"Superficie:"),n.Sb(),n.Tb(38,"td"),n.Oc(39),n.Sb(),n.Sb(),n.Tb(40,"tr"),n.Tb(41,"td"),n.Oc(42,"Consistenza:"),n.Sb(),n.Tb(43,"td"),n.Oc(44),n.Sb(),n.Sb(),n.Tb(45,"tr"),n.Tb(46,"td"),n.Oc(47,"Categoria:"),n.Sb(),n.Tb(48,"td"),n.Oc(49),n.Sb(),n.Sb(),n.Tb(50,"tr"),n.Tb(51,"td"),n.Oc(52,"Note:"),n.Sb(),n.Tb(53,"td"),n.Oc(54),n.Sb(),n.Sb(),n.Sb()),2&i){const i=n.fc(2).$implicit;n.Bb(9),n.Pc(i.particella),n.Bb(5),n.Pc(i.denominatore),n.Bb(5),n.Pc(i.tipologia),n.Bb(5),n.Pc(i.comune),n.Bb(5),n.Pc(i.subalterno||"ND"),n.Bb(5),n.Pc(i.indirizzo||"ND"),n.Bb(5),n.Pc(i.superficie||"ND"),n.Bb(5),n.Pc(i.consistenza||"ND"),n.Bb(5),n.Pc(i.categoria||"ND"),n.Bb(5),n.Pc(i.note||"ND")}}function Xa(i,t){if(1&i&&(n.Tb(0,"tbody"),n.Tb(1,"tr"),n.Tb(2,"th"),n.Oc(3,"Dati particella Fuori Trentino"),n.Sb(),n.Ob(4,"th"),n.Sb(),n.Tb(5,"tr"),n.Tb(6,"td"),n.Oc(7,"Numero Particella:"),n.Sb(),n.Tb(8,"td"),n.Oc(9),n.Sb(),n.Sb(),n.Tb(10,"tr"),n.Tb(11,"td"),n.Oc(12,"Denominatore:"),n.Sb(),n.Tb(13,"td"),n.Oc(14),n.Sb(),n.Sb(),n.Tb(15,"tr"),n.Tb(16,"td"),n.Oc(17,"Tipologia:"),n.Sb(),n.Tb(18,"td"),n.Oc(19),n.Sb(),n.Sb(),n.Tb(20,"tr"),n.Tb(21,"td"),n.Oc(22,"Sezione:"),n.Sb(),n.Tb(23,"td"),n.Oc(24),n.Sb(),n.Sb(),n.Tb(25,"tr"),n.Tb(26,"td"),n.Oc(27,"Foglio:"),n.Sb(),n.Tb(28,"td"),n.Oc(29),n.Sb(),n.Sb(),n.Sb()),2&i){const i=n.fc(2).$implicit;n.Bb(9),n.Pc(i.particella),n.Bb(5),n.Pc(i.denominatore),n.Bb(5),n.Pc(i.tipologia),n.Bb(5),n.Pc(i.sezione),n.Bb(5),n.Pc(i.foglio)}}function Ja(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Mc(2,Wa,55,10,"tbody",17),n.Mc(3,Xa,30,5,"tbody",17),n.Sb(),n.Sb()),2&i){const i=n.fc(),t=i.columns,e=i.$implicit;n.Bb(1),n.Cb("colspan",t.length),n.Bb(1),n.mc("ngIf",e.inTrentino),n.Bb(1),n.mc("ngIf",!e.inTrentino)}}function ic(i,t){1&i&&n.Mc(0,Ja,4,3,"ng-template",91),2&i&&n.mc("ngIf",t.$implicit)}function tc(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length)}}function ec(i,t){if(1&i&&(n.Tb(0,"div",77),n.Tb(1,"p-table",78,79),n.Mc(3,Ya,2,1,"ng-template",80),n.Mc(4,Ka,17,9,"ng-template",81),n.Mc(5,ic,1,1,"ng-template",82),n.Mc(6,tc,3,1,"ng-template",83),n.Sb(),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("columns",i.cols)("value",i.particelleList)("autoLayout",!0)("paginator",!1)("responsive",!0)}}function oc(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",40),n.Tb(1,"div",13),n.Tb(2,"p-fieldset",41),n.Tb(3,"p-header",42),n.Oc(4,"Particella"),n.Sb(),n.Tb(5,"div",13),n.Tb(6,"div",43),n.Tb(7,"label",44),n.Oc(8," In Trentino "),n.Sb(),n.Tb(9,"p-inputSwitch",45),n.bc("onChange",(function(t){return n.Ec(i),n.fc(2).onSelectTrentinoInOut(t)})),n.Sb(),n.Tb(10,"label",44),n.Oc(11," Fuori Trentino "),n.Sb(),n.Sb(),n.Mc(12,Da,27,11,"div",46),n.Mc(13,$a,32,13,"div",46),n.Sb(),n.Mc(14,ec,7,5,"div",47),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc(2);n.Bb(9),n.mc("disabled",null!=i.particellaModificaInCorso),n.Bb(3),n.mc("ngIf",!i.fabbricatoForm.get("fuoriTrentino").value),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("fuoriTrentino").value),n.Bb(1),n.mc("ngIf",null==i.particelleList?null:i.particelleList.length)}}function ac(i,t){1&i&&(n.Tb(0,"div",37),n.Tb(1,"p-accordionTab",38),n.Mc(2,oc,15,4,"ng-template",39),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.mc("selected",!0))}function cc(i,t){1&i&&n.Ob(0,"p-message",34)}function rc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,cc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.comune").errors?null:i.fabbricatoForm.get("fabbricati.comune").errors.required)}}function nc(i,t){1&i&&n.Ob(0,"p-message",62)}function sc(i,t){1&i&&n.Ob(0,"p-message",34)}function lc(i,t){1&i&&n.Ob(0,"p-message",62)}function bc(i,t){1&i&&n.Ob(0,"p-message",115)}function dc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,sc,1,0,"p-message",33),n.Mc(2,lc,1,0,"p-message",61),n.Mc(3,bc,1,0,"p-message",114),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficie").errors?null:i.fabbricatoForm.get("fabbricati.superficie").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficie").errors?null:i.fabbricatoForm.get("fabbricati.superficie").errors.pattern),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficie").errors?null:i.fabbricatoForm.get("fabbricati.superficie").errors.maxArray)}}function uc(i,t){1&i&&n.Ob(0,"p-message",62)}function pc(i,t){if(1&i&&n.Ob(0,"p-message",116),2&i){const i=n.fc(3);n.nc("text","Attenzione! Le superfici digitate eccedono la superficie totale: "+(i.fabbricatoForm.get("fabbricati.superficie").value?i.fabbricatoForm.get("fabbricati.superficie").value:0))}}function mc(i,t){1&i&&n.Ob(0,"p-message",62)}function gc(i,t){if(1&i&&n.Ob(0,"p-message",116),2&i){const i=n.fc(3);n.nc("text","Attenzione! Le superfici digitate eccedono la superficie totale: "+(i.fabbricatoForm.get("fabbricati.superficie").value?i.fabbricatoForm.get("fabbricati.superficie").value:0))}}function hc(i,t){1&i&&n.Ob(0,"p-message",34)}function fc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,hc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.tipoConduzione").errors?null:i.fabbricatoForm.get("fabbricati.tipoConduzione").errors.required)}}const Tc=function(){return["superficieCoperta","superficieScoperta"]},Sc=function(i){return{toSum:i,limit:"superficie"}};function vc(i,t){if(1&i&&(n.Tb(0,"div",40),n.Tb(1,"div",93),n.Tb(2,"div",55),n.Tb(3,"label",94),n.Oc(4,"Denominazione"),n.Sb(),n.Ob(5,"input",95),n.Sb(),n.Tb(6,"div",55),n.Tb(7,"label",96),n.Oc(8,"Indirizzo"),n.Sb(),n.Ob(9,"input",97),n.Sb(),n.Tb(10,"div",55),n.Tb(11,"label",98),n.Oc(12,"Comune Amministrativo*"),n.Sb(),n.Ob(13,"input",99),n.Mc(14,rc,2,1,"div",17),n.Sb(),n.Tb(15,"div",55),n.Tb(16,"label",100),n.Oc(17,"Volume (mc.)"),n.Sb(),n.Ob(18,"input",101),n.Mc(19,nc,1,0,"p-message",61),n.Sb(),n.Tb(20,"div",55),n.Tb(21,"label",102),n.Oc(22,"Superficie totale (mq.)*"),n.Sb(),n.Ob(23,"input",103),n.Mc(24,dc,4,3,"div",17),n.Sb(),n.Tb(25,"div",55),n.Tb(26,"label",104),n.Oc(27,"Superficie coperta (mq.)"),n.Sb(),n.Ob(28,"input",105),n.Mc(29,uc,1,0,"p-message",61),n.Mc(30,pc,1,1,"p-message",106),n.Sb(),n.Tb(31,"div",55),n.Tb(32,"label",107),n.Oc(33,"Superficie scoperta (mq.)"),n.Sb(),n.Ob(34,"input",108),n.Mc(35,mc,1,0,"p-message",61),n.Mc(36,gc,1,1,"p-message",106),n.Sb(),n.Tb(37,"div",55),n.Tb(38,"label",109),n.Oc(39,"Tipo conduzione*"),n.Sb(),n.Ob(40,"p-dropdown",110),n.Mc(41,fc,2,1,"div",17),n.Sb(),n.Tb(42,"div",23),n.Tb(43,"label",111),n.Oc(44,"Descrizione sintetica del fabbricato"),n.Sb(),n.Ob(45,"input",112),n.Sb(),n.Sb(),n.Tb(46,"div",113),n.Tb(47,"div",12),n.Tb(48,"p-footer",41),n.Tb(49,"i"),n.Oc(50," * Campo obbligatorio"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i){const i=n.fc(2);n.Bb(5),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("fabbricati.comune").invalid&&(i.fabbricatoForm.get("fabbricati.comune").dirty||i.fabbricatoForm.get("fabbricati.comune").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.volume").errors?null:i.fabbricatoForm.get("fabbricati.volume").errors.pattern),n.Bb(4),n.mc("maxlength",20)("a4gLimitSumNoInput",n.sc(22,Sc,n.rc(21,Tc))),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("fabbricati.superficie").invalid&&(i.fabbricatoForm.get("fabbricati.superficie").dirty||i.fabbricatoForm.get("fabbricati.superficie").touched)),n.Bb(4),n.mc("maxlength",10)("a4gLimitSumNoInput",n.sc(25,Sc,n.rc(24,Tc))),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficieCoperta").errors?null:i.fabbricatoForm.get("fabbricati.superficieCoperta").errors.pattern),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficieCoperta").errors?null:i.fabbricatoForm.get("fabbricati.superficieCoperta").errors.maxArray),n.Bb(4),n.mc("maxlength",10)("a4gLimitSumNoInput",n.sc(28,Sc,n.rc(27,Tc))),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficieScoperta").errors?null:i.fabbricatoForm.get("fabbricati.superficieScoperta").errors.pattern),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("fabbricati.superficieScoperta").errors?null:i.fabbricatoForm.get("fabbricati.superficieScoperta").errors.maxArray),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipoConduzione),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("fabbricati.tipoConduzione").invalid&&(i.fabbricatoForm.get("fabbricati.tipoConduzione").dirty||i.fabbricatoForm.get("fabbricati.tipoConduzione").touched)),n.Bb(4),n.mc("maxlength",200)}}function Oc(i,t){1&i&&(n.Tb(0,"div",37),n.Tb(1,"p-accordionTab",92),n.Mc(2,vc,51,30,"ng-template",39),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.mc("selected",!0))}function Cc(i,t){1&i&&n.Ob(0,"p-message",34)}function Ic(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Cc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.comune").errors?null:i.fabbricatoForm.get("serre.comune").errors.required)}}function Ac(i,t){1&i&&n.Ob(0,"p-message",34)}function Fc(i,t){1&i&&n.Ob(0,"p-message",62)}function Mc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Ac,1,0,"p-message",33),n.Mc(2,Fc,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.volume").errors?null:i.fabbricatoForm.get("serre.volume").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.volume").errors?null:i.fabbricatoForm.get("serre.volume").errors.pattern)}}function zc(i,t){1&i&&n.Ob(0,"p-message",62)}function Ec(i,t){1&i&&n.Ob(0,"p-message",62)}function Dc(i,t){1&i&&n.Ob(0,"p-message",34)}function Bc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Dc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.tipoConduzione").errors?null:i.fabbricatoForm.get("serre.tipoConduzione").errors.required)}}function Nc(i,t){1&i&&n.Ob(0,"p-message",62)}function yc(i,t){if(1&i&&(n.Tb(0,"div",40),n.Tb(1,"div",118),n.Tb(2,"div",55),n.Tb(3,"label",94),n.Oc(4,"Denominazione"),n.Sb(),n.Ob(5,"input",95),n.Sb(),n.Tb(6,"div",55),n.Tb(7,"label",96),n.Oc(8,"Indirizzo"),n.Sb(),n.Ob(9,"input",97),n.Sb(),n.Tb(10,"div",55),n.Tb(11,"label",98),n.Oc(12,"Comune Amministrativo*"),n.Sb(),n.Ob(13,"input",99),n.Mc(14,Ic,2,1,"div",17),n.Sb(),n.Tb(15,"div",55),n.Tb(16,"label",100),n.Oc(17,"Volume (mc.)*"),n.Sb(),n.Ob(18,"input",101),n.Mc(19,Mc,3,2,"div",17),n.Sb(),n.Tb(20,"div",55),n.Tb(21,"label",119),n.Oc(22,"Superficie occupata (mq.)"),n.Sb(),n.Ob(23,"input",120),n.Mc(24,zc,1,0,"p-message",61),n.Sb(),n.Tb(25,"div",55),n.Tb(26,"label",121),n.Oc(27,"Anno di costruzione"),n.Sb(),n.Ob(28,"input",122),n.Mc(29,Ec,1,0,"p-message",61),n.Sb(),n.Tb(30,"div",55),n.Tb(31,"label",123),n.Oc(32,"Titolo di conformit\xe0 urbanistica"),n.Sb(),n.Ob(33,"input",124),n.Sb(),n.Tb(34,"div",125),n.Tb(35,"div",41),n.Tb(36,"label",126),n.Oc(37,"Presenza impianto di riscaldamento"),n.Sb(),n.Ob(38,"p-checkbox",127),n.Sb(),n.Sb(),n.Tb(39,"div",55),n.Tb(40,"label",128),n.Oc(41,"Tipo conduzione*"),n.Sb(),n.Ob(42,"p-dropdown",129),n.Mc(43,Bc,2,1,"div",17),n.Sb(),n.Tb(44,"div",23),n.Tb(45,"label",130),n.Oc(46,"Descrizione sintetica della serra"),n.Sb(),n.Ob(47,"input",131),n.Sb(),n.Tb(48,"div",23),n.Tb(49,"p-fieldset",41),n.Tb(50,"p-header",42),n.Oc(51,"Materiale di copertura"),n.Sb(),n.Tb(52,"div",13),n.Tb(53,"div",41),n.Tb(54,"label",132),n.Oc(55,"Tipologia materiale"),n.Sb(),n.Ob(56,"input",133),n.Sb(),n.Tb(57,"div",41),n.Tb(58,"label",134),n.Oc(59,"Anno di acquisto"),n.Sb(),n.Ob(60,"input",135),n.Mc(61,Nc,1,0,"p-message",61),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(62,"div",113),n.Tb(63,"div",12),n.Tb(64,"p-footer",41),n.Tb(65,"i"),n.Oc(66," * Campo obbligatorio"),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i){const i=n.fc(2);n.Bb(5),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("serre.comune").invalid&&(i.fabbricatoForm.get("serre.comune").dirty||i.fabbricatoForm.get("serre.comune").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("serre.volume").invalid&&(i.fabbricatoForm.get("serre.volume").dirty||i.fabbricatoForm.get("serre.volume").touched)),n.Bb(4),n.mc("maxlength",20),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.superficie").errors?null:i.fabbricatoForm.get("serre.superficie").errors.pattern),n.Bb(4),n.mc("maxlength",4),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.annoCostruzione").errors?null:i.fabbricatoForm.get("serre.annoCostruzione").errors.pattern),n.Bb(4),n.mc("maxlength",50),n.Bb(5),n.mc("formControl",i.fabbricatoForm.get("serre.impiantoRiscaldamento")),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipoConduzione),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("serre.tipoConduzione").invalid&&(i.fabbricatoForm.get("serre.tipoConduzione").dirty||i.fabbricatoForm.get("serre.tipoConduzione").touched)),n.Bb(4),n.mc("maxlength",200),n.Bb(9),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",4),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("serre.annoAcquisto").errors?null:i.fabbricatoForm.get("serre.annoAcquisto").errors.pattern)}}function Pc(i,t){1&i&&(n.Tb(0,"div",37),n.Tb(1,"p-accordionTab",117),n.Mc(2,yc,67,19,"ng-template",39),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.mc("selected",!0))}function Lc(i,t){1&i&&n.Ob(0,"p-message",34)}function _c(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Lc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.comune").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.comune").errors.required)}}function Rc(i,t){1&i&&n.Ob(0,"p-message",34)}function xc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Rc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.copertura").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.copertura").errors.required)}}function wc(i,t){1&i&&n.Ob(0,"p-message",34)}function Gc(i,t){1&i&&n.Ob(0,"p-message",62)}function kc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,wc,1,0,"p-message",33),n.Mc(2,Gc,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").errors.pattern)}}function Vc(i,t){1&i&&n.Ob(0,"p-message",34)}function Uc(i,t){1&i&&n.Ob(0,"p-message",62)}function qc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Vc,1,0,"p-message",33),n.Mc(2,Uc,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").errors.pattern)}}function Qc(i,t){1&i&&n.Ob(0,"p-message",34)}function Zc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Qc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLetami.tipoConduzione").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLetami.tipoConduzione").errors.required)}}function $c(i,t){1&i&&n.Ob(0,"p-message",34)}function jc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,$c,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.comune").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.comune").errors.required)}}function Yc(i,t){1&i&&n.Ob(0,"p-message",34)}function Hc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Yc,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.copertura").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.copertura").errors.required)}}function Kc(i,t){1&i&&n.Ob(0,"p-message",34)}function Wc(i,t){1&i&&n.Ob(0,"p-message",62)}function Xc(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Kc,1,0,"p-message",33),n.Mc(2,Wc,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").errors.pattern)}}function Jc(i,t){1&i&&n.Ob(0,"p-message",34)}function ir(i,t){1&i&&n.Ob(0,"p-message",62)}function tr(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Jc,1,0,"p-message",33),n.Mc(2,ir,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").errors.pattern)}}function er(i,t){1&i&&n.Ob(0,"p-message",34)}function or(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,er,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stoccaggioLiquami.tipoConduzione").errors?null:i.fabbricatoForm.get("strutture.stoccaggioLiquami.tipoConduzione").errors.required)}}function ar(i,t){1&i&&n.Ob(0,"p-message",34)}function cr(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,ar,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.areeScoperte.comune").errors?null:i.fabbricatoForm.get("strutture.areeScoperte.comune").errors.required)}}function rr(i,t){1&i&&n.Ob(0,"p-message",34)}function nr(i,t){1&i&&n.Ob(0,"p-message",62)}function sr(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,rr,1,0,"p-message",33),n.Mc(2,nr,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.areeScoperte.superficie").errors?null:i.fabbricatoForm.get("strutture.areeScoperte.superficie").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.areeScoperte.superficie").errors?null:i.fabbricatoForm.get("strutture.areeScoperte.superficie").errors.pattern)}}function lr(i,t){1&i&&n.Ob(0,"p-message",34)}function br(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,lr,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.areeScoperte.tipoConduzione").errors?null:i.fabbricatoForm.get("strutture.areeScoperte.tipoConduzione").errors.required)}}function dr(i,t){1&i&&n.Ob(0,"p-message",34)}function ur(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,dr,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stalle.comune").errors?null:i.fabbricatoForm.get("strutture.stalle.comune").errors.required)}}function pr(i,t){1&i&&n.Ob(0,"p-message",62)}function mr(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,pr,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stalle.volume").errors?null:i.fabbricatoForm.get("strutture.stalle.volume").errors.pattern)}}function gr(i,t){1&i&&n.Ob(0,"p-message",34)}function hr(i,t){1&i&&n.Ob(0,"p-message",62)}function fr(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,gr,1,0,"p-message",33),n.Mc(2,hr,1,0,"p-message",61),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stalle.superficie").errors?null:i.fabbricatoForm.get("strutture.stalle.superficie").errors.required),n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stalle.superficie").errors?null:i.fabbricatoForm.get("strutture.stalle.superficie").errors.pattern)}}function Tr(i,t){1&i&&n.Ob(0,"p-message",34)}function Sr(i,t){if(1&i&&(n.Tb(0,"div"),n.Mc(1,Tr,1,0,"p-message",33),n.Sb()),2&i){const i=n.fc(3);n.Bb(1),n.mc("ngIf",null==i.fabbricatoForm.get("strutture.stalle.tipoConduzione").errors?null:i.fabbricatoForm.get("strutture.stalle.tipoConduzione").errors.required)}}function vr(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div",137),n.Tb(1,"p-tabView",138),n.Tb(2,"p-tabPanel",139),n.Tb(3,"div",40),n.Tb(4,"div",140),n.Tb(5,"div",14),n.Tb(6,"label",94),n.Oc(7,"Denominazione"),n.Sb(),n.Ob(8,"input",95),n.Sb(),n.Tb(9,"div",14),n.Tb(10,"label",96),n.Oc(11,"Indirizzo"),n.Sb(),n.Ob(12,"input",97),n.Sb(),n.Tb(13,"div",14),n.Tb(14,"label",98),n.Oc(15,"Comune Amministrativo*"),n.Sb(),n.Ob(16,"input",99),n.Mc(17,_c,2,1,"div",17),n.Sb(),n.Tb(18,"div",55),n.Tb(19,"label",141),n.Oc(20,"Copertura*"),n.Sb(),n.Ob(21,"p-dropdown",142),n.Mc(22,xc,2,1,"div",17),n.Sb(),n.Ob(23,"div",55),n.Tb(24,"div",14),n.Tb(25,"label",143),n.Oc(26,"Superficie (mq.)*"),n.Sb(),n.Tb(27,"input",144),n.bc("blur",(function(){return n.Ec(i),n.fc(2).calcVolume("LETAMI")})),n.Sb(),n.Mc(28,kc,3,2,"div",17),n.Sb(),n.Tb(29,"div",14),n.Tb(30,"label",145),n.Oc(31,"Altezza (m)*"),n.Sb(),n.Tb(32,"input",146),n.bc("blur",(function(){return n.Ec(i),n.fc(2).calcVolume("LETAMI")})),n.Sb(),n.Mc(33,qc,3,2,"div",17),n.Sb(),n.Tb(34,"div",14),n.Tb(35,"label",100),n.Oc(36,"Volume (mc.)*"),n.Sb(),n.Ob(37,"input",147),n.Sb(),n.Tb(38,"div",55),n.Tb(39,"label",148),n.Oc(40,"Tipo conduzione*"),n.Sb(),n.Ob(41,"p-dropdown",149),n.Mc(42,Zc,2,1,"div",17),n.Sb(),n.Tb(43,"div",23),n.Tb(44,"label",150),n.Oc(45,"Descrizione sintetica della struttura"),n.Sb(),n.Ob(46,"input",151),n.Sb(),n.Sb(),n.Tb(47,"div",113),n.Tb(48,"div",12),n.Tb(49,"p-footer",41),n.Tb(50,"i"),n.Oc(51," * Campo obbligatorio"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(52,"p-tabPanel",152),n.Tb(53,"div",40),n.Tb(54,"div",153),n.Tb(55,"div",14),n.Tb(56,"label",94),n.Oc(57,"Denominazione"),n.Sb(),n.Ob(58,"input",95),n.Sb(),n.Tb(59,"div",14),n.Tb(60,"label",96),n.Oc(61,"Indirizzo"),n.Sb(),n.Ob(62,"input",97),n.Sb(),n.Tb(63,"div",14),n.Tb(64,"label",98),n.Oc(65,"Comune Amministrativo*"),n.Sb(),n.Ob(66,"input",99),n.Mc(67,jc,2,1,"div",17),n.Sb(),n.Tb(68,"div",55),n.Tb(69,"label",154),n.Oc(70,"Copertura*"),n.Sb(),n.Ob(71,"p-dropdown",155),n.Mc(72,Hc,2,1,"div",17),n.Sb(),n.Ob(73,"div",55),n.Tb(74,"div",14),n.Tb(75,"label",156),n.Oc(76,"Superficie (mq.)*"),n.Sb(),n.Tb(77,"input",157),n.bc("blur",(function(){return n.Ec(i),n.fc(2).calcVolume("LIQUAMI")})),n.Sb(),n.Mc(78,Xc,3,2,"div",17),n.Sb(),n.Tb(79,"div",14),n.Tb(80,"label",158),n.Oc(81,"Altezza (m)*"),n.Sb(),n.Tb(82,"input",159),n.bc("blur",(function(){return n.Ec(i),n.fc(2).calcVolume("LIQUAMI")})),n.Sb(),n.Mc(83,tr,3,2,"div",17),n.Sb(),n.Tb(84,"div",14),n.Tb(85,"label",100),n.Oc(86,"Volume (mc.)*"),n.Sb(),n.Ob(87,"input",147),n.Sb(),n.Tb(88,"div",55),n.Tb(89,"label",148),n.Oc(90,"Tipo conduzione*"),n.Sb(),n.Ob(91,"p-dropdown",149),n.Mc(92,or,2,1,"div",17),n.Sb(),n.Tb(93,"div",23),n.Tb(94,"label",150),n.Oc(95,"Descrizione sintetica della struttura"),n.Sb(),n.Ob(96,"input",151),n.Sb(),n.Sb(),n.Tb(97,"div",113),n.Tb(98,"div",12),n.Tb(99,"p-footer",41),n.Tb(100,"i"),n.Oc(101," * Campo obbligatorio"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(102,"p-tabPanel",160),n.Tb(103,"div",40),n.Tb(104,"div",161),n.Tb(105,"div",14),n.Tb(106,"label",162),n.Oc(107,"Denominazione"),n.Sb(),n.Ob(108,"input",163),n.Sb(),n.Tb(109,"div",14),n.Tb(110,"label",164),n.Oc(111,"Indirizzo"),n.Sb(),n.Ob(112,"input",165),n.Sb(),n.Tb(113,"div",14),n.Tb(114,"label",166),n.Oc(115,"Comune Amministrativo*"),n.Sb(),n.Ob(116,"input",167),n.Mc(117,cr,2,1,"div",17),n.Sb(),n.Tb(118,"div",55),n.Tb(119,"label",168),n.Oc(120,"Superficie scoperta (mq.)*"),n.Sb(),n.Ob(121,"input",169),n.Mc(122,sr,3,2,"div",17),n.Sb(),n.Ob(123,"div",55),n.Tb(124,"div",55),n.Tb(125,"label",170),n.Oc(126,"Tipo conduzione*"),n.Sb(),n.Ob(127,"p-dropdown",171),n.Mc(128,br,2,1,"div",17),n.Sb(),n.Tb(129,"div",23),n.Tb(130,"label",172),n.Oc(131,"Descrizione sintetica della struttura"),n.Sb(),n.Ob(132,"input",173),n.Sb(),n.Sb(),n.Tb(133,"div",113),n.Tb(134,"div",12),n.Tb(135,"p-footer",41),n.Tb(136,"i"),n.Oc(137," * Campo obbligatorio"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(138,"p-tabPanel",174),n.Tb(139,"div",40),n.Tb(140,"div",175),n.Tb(141,"div",14),n.Tb(142,"label",94),n.Oc(143,"Denominazione"),n.Sb(),n.Ob(144,"input",95),n.Sb(),n.Tb(145,"div",14),n.Tb(146,"label",96),n.Oc(147,"Indirizzo"),n.Sb(),n.Ob(148,"input",97),n.Sb(),n.Tb(149,"div",14),n.Tb(150,"label",98),n.Oc(151,"Comune Amministrativo*"),n.Sb(),n.Ob(152,"input",99),n.Mc(153,ur,2,1,"div",17),n.Sb(),n.Tb(154,"div",55),n.Tb(155,"label",100),n.Oc(156,"Volume (mc.)"),n.Sb(),n.Ob(157,"input",101),n.Mc(158,mr,2,1,"div",17),n.Sb(),n.Tb(159,"div",55),n.Tb(160,"label",143),n.Oc(161,"Superficie (mq.)*"),n.Sb(),n.Ob(162,"input",176),n.Mc(163,fr,3,2,"div",17),n.Sb(),n.Tb(164,"div",55),n.Tb(165,"label",148),n.Oc(166,"Tipo conduzione*"),n.Sb(),n.Ob(167,"p-dropdown",149),n.Mc(168,Sr,2,1,"div",17),n.Sb(),n.Tb(169,"div",23),n.Tb(170,"label",150),n.Oc(171,"Descrizione sintetica della struttura"),n.Sb(),n.Ob(172,"input",151),n.Sb(),n.Sb(),n.Tb(173,"div",113),n.Tb(174,"div",12),n.Tb(175,"p-footer",41),n.Tb(176,"i"),n.Oc(177," * Campo obbligatorio"),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc(2);n.Bb(1),n.mc("activeIndex",i.activeTab),n.Bb(1),n.mc("selected",i.sottoTipoLogiaSelected===i.sottoTipologiaZootecnia.STOCCAGGIO_LETAMI)("disabled",i.sottoTipoLogiaSelected!=i.sottoTipologiaZootecnia.STOCCAGGIO_LETAMI),n.Bb(6),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLetami.comune").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLetami.comune").dirty||i.fabbricatoForm.get("strutture.stoccaggioLetami.comune").touched)),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.copertura),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLetami.copertura").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLetami.copertura").dirty||i.fabbricatoForm.get("strutture.stoccaggioLetami.copertura").touched)),n.Bb(5),n.mc("maxlength",20),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").dirty||i.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").dirty||i.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipoConduzione),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLetami.tipoConduzione").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLetami.tipoConduzione").dirty||i.fabbricatoForm.get("strutture.stoccaggioLetami.tipoConduzione").touched)),n.Bb(4),n.mc("maxlength",200),n.Bb(6),n.mc("selected",i.sottoTipoLogiaSelected===i.sottoTipologiaZootecnia.STOCCAGGIO_LIQUAMI)("disabled",i.sottoTipoLogiaSelected!=i.sottoTipologiaZootecnia.STOCCAGGIO_LIQUAMI),n.Bb(6),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLiquami.comune").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLiquami.comune").dirty||i.fabbricatoForm.get("strutture.stoccaggioLiquami.comune").touched)),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.copertura),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLiquami.copertura").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLiquami.copertura").dirty||i.fabbricatoForm.get("strutture.stoccaggioLiquami.copertura").touched)),n.Bb(5),n.mc("maxlength",20),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").dirty||i.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").dirty||i.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipoConduzione),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stoccaggioLiquami.tipoConduzione").invalid&&(i.fabbricatoForm.get("strutture.stoccaggioLiquami.tipoConduzione").dirty||i.fabbricatoForm.get("strutture.stoccaggioLiquami.tipoConduzione").touched)),n.Bb(4),n.mc("maxlength",200),n.Bb(6),n.mc("selected",i.sottoTipoLogiaSelected===i.sottoTipologiaZootecnia.AREE_SCOPERTE)("disabled",i.sottoTipoLogiaSelected!=i.sottoTipologiaZootecnia.AREE_SCOPERTE),n.Bb(6),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.areeScoperte.comune").invalid&&(i.fabbricatoForm.get("strutture.areeScoperte.comune").dirty||i.fabbricatoForm.get("strutture.areeScoperte.comune").touched)),n.Bb(4),n.mc("maxlength",20),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.areeScoperte.superficie").invalid&&(i.fabbricatoForm.get("strutture.areeScoperte.superficie").dirty||i.fabbricatoForm.get("strutture.areeScoperte.superficie").touched)),n.Bb(5),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipoConduzione),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.areeScoperte.tipoConduzione").invalid&&(i.fabbricatoForm.get("strutture.areeScoperte.tipoConduzione").dirty||i.fabbricatoForm.get("strutture.areeScoperte.tipoConduzione").touched)),n.Bb(4),n.mc("maxlength",200),n.Bb(6),n.mc("selected",i.sottoTipoLogiaSelected===i.sottoTipologiaZootecnia.STALLE)("disabled",i.sottoTipoLogiaSelected!=i.sottoTipologiaZootecnia.STALLE),n.Bb(6),n.mc("maxlength",100),n.Bb(4),n.mc("maxlength",50),n.Bb(4),n.mc("maxlength",50),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stalle.comune").invalid&&(i.fabbricatoForm.get("strutture.stalle.comune").dirty||i.fabbricatoForm.get("strutture.stalle.comune").touched)),n.Bb(4),n.mc("maxlength",10),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stalle.volume").invalid&&(i.fabbricatoForm.get("strutture.stalle.volume").dirty||i.fabbricatoForm.get("strutture.stalle.volume").touched)),n.Bb(4),n.mc("maxlength",20),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stalle.superficie").invalid&&(i.fabbricatoForm.get("strutture.stalle.superficie").dirty||i.fabbricatoForm.get("strutture.stalle.superficie").touched)),n.Bb(4),n.mc("disabled",i.READONLY_MODE)("options",i.tipologicheService.tipoConduzione),n.Bb(1),n.mc("ngIf",i.fabbricatoForm.get("strutture.stalle.tipoConduzione").invalid&&(i.fabbricatoForm.get("strutture.stalle.tipoConduzione").dirty||i.fabbricatoForm.get("strutture.stalle.tipoConduzione").touched)),n.Bb(4),n.mc("maxlength",200)}}function Or(i,t){1&i&&(n.Tb(0,"div",37),n.Tb(1,"p-accordionTab",136),n.Mc(2,vr,178,63,"ng-template",39),n.Sb(),n.Sb()),2&i&&(n.Bb(1),n.mc("selected",!0))}const Cr=function(){return{marginTop:"70px"}},Ir=function(){return{width:"80vw",height:"90vh"}},Ar=function(){return{"overflow-y":"auto","overflow-x":"hidden"}};let Fr=(()=>{class i{constructor(i,t,e,o,a,c,r,s,l){this.tipologicheService=i,this.httpClientTipologieService=t,this.dotazioneTecnicaBuilderService=e,this.dotazioneTecnicaService=o,this.formService=a,this.errorService=c,this.messageService=r,this.fascicoloDettaglioService=s,this.formatConverterService=l,this.onHideDialog=new n.n,this.tipologiaFabbricato=Be,this.sottoTipologiaZootecnia=Ne,this.infoCatasto={}}ngOnDestroy(){this.getTipologieSubscription&&this.getTipologieSubscription.unsubscribe(),this.getSottoTipologieSubscription&&this.getSottoTipologieSubscription.unsubscribe(),this.getSottoTipoSubscription&&this.getSottoTipoSubscription.unsubscribe(),this.postFabbricatoSubscription&&this.postFabbricatoSubscription.unsubscribe()}ngOnInit(){this.initForm(),this.initData(),this.getTipologia()}open(i,t,e,o,a){if(this.display=!0,this.cuaa=t,this.dettaglioFabbricato=e,this.particelleList=[],this.particellaModificaInCorso=null,null==this.dettaglioFabbricato)this.READONLY_MODE=!1,this.EDIT_MODE=!1,this.fabbricatoForm.get("tipologiaFabbricato").enable(),this.fabbricatoForm.get("sottoTipologiaFabbricato").enable(),this.fabbricatoForm.get("sottoTipo").enable(),this.initData(),this.initForm();else{if(this.READONLY_MODE=i,this.EDIT_MODE=!0,this.initData(),this.particelleList=this.dotazioneTecnicaBuilderService.toParticelleVm(o),e.type===ea.a.STRUMENTALE)this.setupFabbricatoStrumentale(),this.getSottoTipologieFabbricatiOSerre(this.dettaglioFabbricato.tipologiaFabbricato);else if(e.type===ea.a.SERRA)this.setupSerre(),this.getSottoTipologieFabbricatiOSerre(this.dettaglioFabbricato.tipologiaFabbricato);else{const i=this.tipologicheService.tipologiaFabbricato.filter(i=>i.label==Be.STRUTTURE_ZOOTECNICHE.split("_").join(" "))[0];this.dettaglioFabbricato.tipologiaFabbricato=i,this.checkOpenZootecniaTab(e),this.getSottoTipologieZootecnia(),this.getSottoTipoByValueSottoTipologia(this.dettaglioFabbricato.sottoTipologiaFabbricato)}this.initForm(this.dettaglioFabbricato)}}onSelectTrentinoInOut(i){console.log("Selezionato: ",i),this.fabbricatoForm.get("datiCatastali").reset(),setTimeout(()=>{this.fabbricatoForm.get("datiCatastali").get("tipologia").reset(),this.fabbricatoForm.get("datiCatastali").get("tipologia").setErrors({required:null}),this.fabbricatoForm.get("datiCatastali").get("tipologia").updateValueAndValidity()})}onSelectTipologiaCatasto(i){this.fabbricatoForm.get("fuoriTrentino").value?this.setCatastoFuoriTrentino():(this.setCatastoInTrentino(),this.getElencoSubalterniParticellaCatasto())}getElencoSubalterniParticellaCatasto(){const i=this.fabbricatoForm.get("datiCatastali").value.particella,t=this.fabbricatoForm.get("datiCatastali").value.comune,e=this.fabbricatoForm.get("datiCatastali.tipologia").value;i&&t&&"EDIFICIALE"===e&&(this.subalternoList=[],this.dotazioneTecnicaService.getElencoSubalterniParticellaCatasto(i,t).subscribe(i=>{i&&i.forEach(i=>{this.subalternoList.push({label:i,value:i})})}))}onSelectTipologia(i){if(this.closeAccordion(),this.fabbricatoForm.get("sottoTipologiaFabbricato").reset(),this.fabbricatoForm.get("sottoTipo").reset(),null==i.value)return this.tipologicheService.sottoTipologiaFabbricato=[],this.tipologicheService.sottoTipologiaFabbricato.unshift({label:"Seleziona una sotto tipologia",value:null}),this.tipologicheService.sottoTipoFabbricato=[],void this.tipologicheService.sottoTipoFabbricato.unshift({label:"Seleziona un sotto tipo",value:null});const t=this.tipologicheService.tipologiaFabbricato.filter(t=>t.value==i.value)[0];this.getSottoTipologie(t)}aggiungiParticellaFuoriTrentino(i){i.preventDefault(),this.formService.validateForm(this.fabbricatoForm.get("datiCatastali"));const t=this.formService.getInvalids(this.fabbricatoForm.get("datiCatastali"));if(console.log("ADDING PARTICELLA FUORI TRENTINO",this.fabbricatoForm.get("datiCatastali").value),console.log("INVALID FIELDS....",t),this.fabbricatoForm.get("datiCatastali").valid){const i=this.fabbricatoForm.get("datiCatastali").value,t=this.dotazioneTecnicaBuilderService.buildParticellaFuoriTrentino(i);return this.particelleList.push(t),this.fabbricatoForm.get("datiCatastali").reset(),!0}return this.validateAllFormFields(this.fabbricatoForm.get("datiCatastali")),this.errorService.showErrorWithMessage("E\u2019 necessario compilare i campi obbligatori!","tst-fabbricati"),!1}aggiornaParticellaFuoriTrentino(i){this.aggiungiParticellaFuoriTrentino(i)&&(this.eliminaParticella(this.particellaModificaInCorso),this.particellaModificaInCorso=null)}aggiungiParticellaInTrentino(i){i.preventDefault(),this.formService.validateForm(this.fabbricatoForm.get("datiCatastali"));const t=this.formService.getInvalids(this.fabbricatoForm.get("datiCatastali"));if(console.log("ADDING PARTICELLA IN TRENTINO",this.fabbricatoForm.get("datiCatastali").value),console.log("INVALID FIELDS....",t),!this.fabbricatoForm.get("datiCatastali").valid)return this.validateAllFormFields(this.fabbricatoForm.get("datiCatastali")),void this.errorService.showErrorWithMessage("E\u2019 necessario compilare i campi obbligatori!","tst-fabbricati");{const i=this.fabbricatoForm.get("datiCatastali").value.comune,t=this.fabbricatoForm.get("datiCatastali").value.particella,e=this.fabbricatoForm.get("datiCatastali").value.denominatore,o=this.fabbricatoForm.get("datiCatastali").value.tipologia,a=this.fabbricatoForm.get("datiCatastali").value.subalterno;this.dotazioneTecnicaService.verificaParticellaCatasto(t,e,o,i,a).subscribe(i=>{var t;i?(this.infoCatasto.categoria=i.categoria,this.infoCatasto.consistenza=i.consistenza,this.infoCatasto.indirizzo=i.indirizzo,this.infoCatasto.note=i.note,this.infoCatasto.superficie=null===(t=i.superficie)||void 0===t?void 0:t.toString(),this.messageService.add({key:"aggiungiParticellaInTrentino",sticky:!0,severity:"warn",summary:"Comune catastale "+i.comune+", Particella "+i.particella+", Denominatore "+i.denominatore+", Tipologia "+i.tipologia+", Sub "+i.sub,detail:"Si desidera procedere con l\u2019inserimento dei dati recuperati?"})):this.messageService.add(u.a.getToast("tst-fabbricati",u.b.warn,"Particella non trovata"))},i=>{this.messageService.add(u.a.getToast("tst-fabbricati",u.b.error,i.error.message))})}}onConfirmAggiornaDichiarazione(){const i=this.fabbricatoForm.get("datiCatastali").value;console.log("Particella da aggiungere: ",i);const t=this.dotazioneTecnicaBuilderService.buildParticellaInTrentino(i,this.infoCatasto);this.particelleList.push(t),this.onRejectAggiornaDichiarazione()}onRejectAggiornaDichiarazione(){this.fabbricatoForm.get("datiCatastali").reset(),this.messageService.clear("aggiungiParticellaInTrentino")}eliminaParticella(i){this.particelleList=this.particelleList.filter(t=>!this.equalsParticella(t,i))}modificaParticella(i){this.particellaModificaInCorso=null,i.inTrentino?this.fabbricatoForm.get("fuoriTrentino").setValue(!1):this.fabbricatoForm.get("fuoriTrentino").setValue(!0),this.fabbricatoForm.get("datiCatastali").get("sezione").setValue(i.sezione),this.fabbricatoForm.get("datiCatastali").get("foglio").setValue(i.foglio),this.fabbricatoForm.get("datiCatastali").get("subalterno").setValue(i.subalterno),this.fabbricatoForm.get("datiCatastali").get("particella").setValue(i.particella),this.fabbricatoForm.get("datiCatastali").get("tipologia").setValue(i.tipologia),this.fabbricatoForm.get("datiCatastali").get("comune").setValue(i.comuneCatastale),this.fabbricatoForm.get("datiCatastali").get("denominatore").setValue(i.denominatore),this.particelleList.forEach(t=>{this.equalsParticella(t,i)&&(this.particellaModificaInCorso=t)})}annullaModifica(i){i.preventDefault(),this.particellaModificaInCorso=null,this.fabbricatoForm.get("datiCatastali").get("sezione").setValue(null),this.fabbricatoForm.get("datiCatastali").get("foglio").setValue(null),this.fabbricatoForm.get("datiCatastali").get("subalterno").setValue(null),this.fabbricatoForm.get("datiCatastali").get("particella").setValue(null),this.fabbricatoForm.get("datiCatastali").get("tipologia").setValue(null),this.fabbricatoForm.get("datiCatastali").get("comune").setValue(null),this.fabbricatoForm.get("datiCatastali").get("denominatore").setValue(null),this.formService.resetForm(this.fabbricatoForm.get("datiCatastali"))}onSelectAccordion(i){}onSelectSottoTipologia(i){if(null==i.value)return this.tipologicheService.sottoTipoFabbricato=[],this.tipologicheService.sottoTipoFabbricato.unshift({label:"Seleziona un sotto tipo",value:null}),void(this.struttureEnabled=!1);const t=this.tipologicheService.sottoTipologiaFabbricato&&this.tipologicheService.sottoTipologiaFabbricato.filter(t=>t.value==i.value)[0];this.getSottoTipoByValueSottoTipologia(t),this.fabbricatoForm.get("sottoTipo").reset()}onSelectSottoTipo(i){null!=i.value&&(this.struttureEnabled=!0)}isSelctedStruttureZootecniche(){var i;const t=this.fabbricatoForm.get("tipologiaFabbricato").value;if(null==t)return!1;const e=null===(i=this.tipologicheService.tipologiaFabbricato)||void 0===i?void 0:i.filter(i=>i.value==t)[0];return(null==e?void 0:e.label.split(" ").join("_"))===Be.STRUTTURE_ZOOTECNICHE}calcVolume(i){if("LIQUAMI"===i){const i=this.formatConverterService.toNumber(this.fabbricatoForm.get("strutture.stoccaggioLiquami.superficie").value),t=this.formatConverterService.toNumber(this.fabbricatoForm.get("strutture.stoccaggioLiquami.altezza").value);this.fabbricatoForm.get("strutture.stoccaggioLiquami.volume").setValue(i*t)}else if("LETAMI"===i){const i=this.formatConverterService.toNumber(this.fabbricatoForm.get("strutture.stoccaggioLetami.superficie").value),t=this.formatConverterService.toNumber(this.fabbricatoForm.get("strutture.stoccaggioLetami.altezza").value);this.fabbricatoForm.get("strutture.stoccaggioLetami.volume").setValue(i*t)}}annulla(){this.closeDialog(!1)}onSubmit(i){i.preventDefault();const t=this.fabbricatoForm.get("tipologiaFabbricato").value,e=this.tipologicheService.tipologiaFabbricato.filter(i=>i.value==t)[0],o=this.disableValidatorsByTipologiaAndGetType(e.label.split(" ").join("_"));this.formService.validateFormWithSkip(this.fabbricatoForm,["datiCatastali"]);const a=this.formService.getInvalids(this.fabbricatoForm);if(console.log("INVALID FIELDS....",a),this.particelleList&&this.particelleList.length){if(!this.fabbricatoForm.valid&&a.length>1||!this.fabbricatoForm.valid&&1==a.length&&"datiCatastali"!=a[0].name)return this.validateAllFormFields(this.fabbricatoForm),void this.errorService.showErrorWithMessage("E\u2019 necessario compilare i campi obbligatori!","tst-fabbricati");{let i=this.fabbricatoForm.value;this.EDIT_MODE&&(i.id=this.dettaglioFabbricato.id,i.tipologiaFabbricato=this.classificazioneFabbricatoVM.tipologiaFabbricato,i.sottoTipologiaFabbricato=this.classificazioneFabbricatoVM.sottoTipologiaFabbricato,i.sottoTipo=this.classificazioneFabbricatoVM.sottoTipo);const t=this.dotazioneTecnicaBuilderService.toDettaglioFabbricatoDto(i,o,this.dotazioneTecnicaBuilderService.toParticelleDto(this.particelleList));console.log("SAVING FABBRICATO....",t),this.postFabbricatoSubscription=this.dotazioneTecnicaService.postFabbricato(this.cuaa,t).subscribe(i=>{const t=this.fascicoloDettaglioService.fascicoloCorrente.value;t.stato!==R.c.IN_AGGIORNAMENTO&&(t.stato=R.c.IN_AGGIORNAMENTO,this.fascicoloDettaglioService.fascicoloCorrente.next(t)),this.messageService.add(u.a.getToast("tst-fabbricati",u.b.success,"Il fabbricato \xe8 stato inserito con successo!")),this.closeDialog(!0)},i=>this.errorService.showError(i,"tst-fabbricati"))}}else this.errorService.showErrorWithMessage("Attenzione! Particella non presente o non valida: non \xe8 possibile procedere con l\u2019inserimento.","tst-fabbricati")}disabledAccordionParticelle(){return this.isSelctedStruttureZootecniche()?!this.fabbricatoForm.get("sottoTipo").value:this.fabbricatoForm.get("sottoTipologiaFabbricato").invalid}getSottoTipologie(i){i.label.split(" ").join("_")===Be.STRUTTURE_ZOOTECNICHE?this.getSottoTipologieZootecnia():i.label.split(" ").join("_")===Be.FABBRICATI_STRUMENTALI?(this.setupFabbricatoStrumentale(),this.getSottoTipologieFabbricatiOSerre(i)):i.label.split(" ").join("_")===Be.SERRE_E_PROTEZIONI?(this.setupSerre(),this.getSottoTipologieFabbricatiOSerre(i)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le tipologie di fabbricato relative a "+i.label,"tst-fabbricato")}getSottoTipologieZootecnia(){this.getTipologieSubscription=this.httpClientTipologieService.getTipologia(De.ZOOTECNIA).subscribe(i=>{(null==i?void 0:i.length)?this.tipologicheService.setSottoTipologiaFabbricato(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(i)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le tipologie di fabbricato","tst-fabbricato")},i=>this.errorService.showError(i,"tst-fabbricato"))}getSottoTipologieFabbricatiOSerre(i){this.getSottoTipologieSubscription=this.httpClientTipologieService.getSottoTipologieByIdTipologia(i.value).subscribe(t=>{var e;(null===(e=null==t?void 0:t.tipologie)||void 0===e?void 0:e.length)?this.tipologicheService.setSottoTipologiaFabbricato(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(t.tipologie)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le tipologie di fabbricato relative a "+i.label,"tst-fabbricato"),this.disableTipologie()},i=>this.errorService.showError(i,"tst-fabbricato"))}setupFabbricatoStrumentale(){this.fabbricatoEnabled=!0,this.READONLY_MODE||(this.enableFabbricato(),this.disableSerre(),this.disableZootecnia(),this.fabbricatoForm.get("sottoTipo").clearValidators())}setupSerre(){this.serreEnabled=!0,this.READONLY_MODE||(this.enableSerre(),this.disableFabbricato(),this.disableZootecnia(),this.fabbricatoForm.get("sottoTipo").clearValidators())}checkOpenZootecniaTab(i){this.READONLY_MODE||(this.disableFabbricato(),this.disableSerre(),this.enableZootecnia(),this.fabbricatoForm.get("sottoTipo").setValidators([b.G.required]),i.sottoTipologiaFabbricato.label.split(" ").join("_")===this.sottoTipologiaZootecnia.STOCCAGGIO_LETAMI?(this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.STOCCAGGIO_LETAMI,this.activeTab=0):i.sottoTipologiaFabbricato.label.split(" ").join("_")===this.sottoTipologiaZootecnia.STOCCAGGIO_LIQUAMI?(this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.STOCCAGGIO_LIQUAMI,this.activeTab=1):i.sottoTipologiaFabbricato.label.split(" ").join("_")===this.sottoTipologiaZootecnia.AREE_SCOPERTE?(this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.AREE_SCOPERTE,this.activeTab=2):i.sottoTipologiaFabbricato.label.split(" ").join("_")===this.sottoTipologiaZootecnia.STALLE&&(this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.STALLE,this.activeTab=3),this.enableTipoZootecniaByIndex(this.activeTab))}initData(){this.closeAccordion(),this.cols=[{field:"",header:""},{field:"particella",header:"Numero particella"},{field:"denominatore",header:"Denominatore"},{field:"tipologia",header:"Tipologia"},{field:"inTrentino",header:"In Trentino"},{field:"esito",header:"Esito"},{field:"",header:"Azioni"}],this.tipologicheService.setTipoConduzioneFabbricato(),this.tipologicheService.setCopertura(),this.tipologicheService.setTipologiaCatasto()}getTipologia(){this.getTipologieSubscription=this.httpClientTipologieService.getTipologia(De.FABBRICATI).subscribe(i=>{i&&i.length?this.tipologicheService.setTipologiaFabbricato(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(i)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare un ambito per il fabbricato","tst-fabbricato")},i=>this.errorService.showError(i,"tst-fabbricato"))}initForm(i){var t,e,o,a,c,r,n,s,l,d,u,p,m,g,h,f,T,S,v,O,C,I,A,F,M,z,E,D,B,N,y,P,L,_,R,x,w,G,k,V,U,q,Q,Z,$,j,Y,H,K,W,X,J,ii,ti,ei,oi,ai,ci,ri,ni,si,li,bi,di,ui,pi,mi,gi,hi,fi,Ti,Si,vi,Oi,Ci,Ii,Ai,Fi,Mi,zi,Ei,Di,Bi,Ni,yi,Pi,Li,_i,Ri,xi,wi,Gi,ki,Vi,Ui,qi,Qi,Zi,$i,ji;this.fabbricatoForm=new b.j({tipologiaFabbricato:new b.g({value:(null===(t=null==i?void 0:i.tipologiaFabbricato)||void 0===t?void 0:t.value)?i.tipologiaFabbricato.value:null,disabled:this.READONLY_MODE},[b.G.required]),sottoTipologiaFabbricato:new b.g({value:(null===(e=null==i?void 0:i.sottoTipologiaFabbricato)||void 0===e?void 0:e.value)?i.sottoTipologiaFabbricato.value:null,disabled:this.READONLY_MODE},[b.G.required]),sottoTipo:new b.g({value:(null===(o=null==i?void 0:i.sottoTipo)||void 0===o?void 0:o.value)?i.sottoTipo.value:null,disabled:this.READONLY_MODE}),fuoriTrentino:new b.g({value:!!i&&i.fuoriTrentino,disabled:this.READONLY_MODE}),datiCatastali:new b.j({sezione:new b.g({value:(null===(a=null==i?void 0:i.datiCatastali)||void 0===a?void 0:a.sezione)?i.datiCatastali.sezione:null,disabled:this.READONLY_MODE}),foglio:new b.g({value:(null===(c=null==i?void 0:i.datiCatastali)||void 0===c?void 0:c.foglio)?i.datiCatastali.foglio:null,disabled:this.READONLY_MODE}),subalterno:new b.g({value:(null===(r=null==i?void 0:i.datiCatastali)||void 0===r?void 0:r.subalterno)?i.datiCatastali.subalterno:null,disabled:this.READONLY_MODE}),particella:new b.g({value:(null===(n=null==i?void 0:i.datiCatastali)||void 0===n?void 0:n.particella)?i.datiCatastali.particella:null,disabled:this.READONLY_MODE},[b.G.required]),tipologia:new b.g({value:(null===(l=null===(s=null==i?void 0:i.datiCatastali)||void 0===s?void 0:s.tipologia)||void 0===l?void 0:l.value)?i.datiCatastali.tipologia.value:null,disabled:this.READONLY_MODE},[b.G.required]),comune:new b.g({value:(null===(d=null==i?void 0:i.datiCatastali)||void 0===d?void 0:d.comuneCatastale)?i.datiCatastali.comuneCatastale:null,disabled:this.READONLY_MODE}),denominatore:new b.g({value:(null===(u=null==i?void 0:i.datiCatastali)||void 0===u?void 0:u.denominatore)?i.datiCatastali.denominatore:null,disabled:this.READONLY_MODE})}),fabbricati:new b.j({denominazione:new b.g({value:(null===(p=null==i?void 0:i.fabbricati)||void 0===p?void 0:p.denominazione)?i.fabbricati.denominazione:null,disabled:this.READONLY_MODE}),indirizzo:new b.g({value:(null===(m=null==i?void 0:i.fabbricati)||void 0===m?void 0:m.indirizzo)?i.fabbricati.indirizzo:null,disabled:this.READONLY_MODE}),comune:new b.g({value:(null===(g=null==i?void 0:i.fabbricati)||void 0===g?void 0:g.comune)?i.fabbricati.comune:null,disabled:this.READONLY_MODE},[b.G.required]),volume:new b.g({value:(null===(h=null==i?void 0:i.fabbricati)||void 0===h?void 0:h.volume)?i.fabbricati.volume:null,disabled:this.READONLY_MODE}),superficie:new b.g({value:(null===(f=null==i?void 0:i.fabbricati)||void 0===f?void 0:f.superficie)?i.fabbricati.superficie:null,disabled:this.READONLY_MODE},[b.G.required]),superficieCoperta:new b.g({value:(null===(T=null==i?void 0:i.fabbricati)||void 0===T?void 0:T.superficieCoperta)?i.fabbricati.superficieCoperta:null,disabled:this.READONLY_MODE}),superficieScoperta:new b.g({value:(null===(S=null==i?void 0:i.fabbricati)||void 0===S?void 0:S.superficieScoperta)?i.fabbricati.superficieScoperta:null,disabled:this.READONLY_MODE}),tipoConduzione:new b.g({value:(null===(O=null===(v=null==i?void 0:i.fabbricati)||void 0===v?void 0:v.tipoConduzione)||void 0===O?void 0:O.value)?i.fabbricati.tipoConduzione.value:null,disabled:this.READONLY_MODE},[b.G.required]),descrizione:new b.g({value:(null===(C=null==i?void 0:i.fabbricati)||void 0===C?void 0:C.descrizione)?i.fabbricati.descrizione:null,disabled:this.READONLY_MODE})}),serre:new b.j({denominazione:new b.g({value:(null===(I=null==i?void 0:i.serre)||void 0===I?void 0:I.denominazione)?i.serre.denominazione:null,disabled:this.READONLY_MODE}),indirizzo:new b.g({value:(null===(A=null==i?void 0:i.serre)||void 0===A?void 0:A.indirizzo)?i.serre.indirizzo:null,disabled:this.READONLY_MODE}),comune:new b.g({value:(null===(F=null==i?void 0:i.serre)||void 0===F?void 0:F.comune)?i.serre.comune:null,disabled:this.READONLY_MODE},[b.G.required]),volume:new b.g({value:(null===(M=null==i?void 0:i.serre)||void 0===M?void 0:M.volume)?i.serre.volume:null,disabled:this.READONLY_MODE},[b.G.required]),superficie:new b.g({value:(null===(z=null==i?void 0:i.serre)||void 0===z?void 0:z.superficie)?i.serre.superficie:null,disabled:this.READONLY_MODE}),impiantoRiscaldamento:new b.g({value:(null===(E=null==i?void 0:i.serre)||void 0===E?void 0:E.impiantoRiscaldamento)?i.serre.impiantoRiscaldamento:null,disabled:this.READONLY_MODE}),annoCostruzione:new b.g({value:(null===(D=null==i?void 0:i.serre)||void 0===D?void 0:D.annoCostruzione)?i.serre.annoCostruzione:null,disabled:this.READONLY_MODE}),tipologiaMateriale:new b.g({value:(null===(B=null==i?void 0:i.serre)||void 0===B?void 0:B.tipologiaMateriale)?i.serre.tipologiaMateriale:null,disabled:this.READONLY_MODE}),annoAcquisto:new b.g({value:(null===(N=null==i?void 0:i.serre)||void 0===N?void 0:N.annoAcquisto)?i.serre.annoAcquisto:null,disabled:this.READONLY_MODE}),titoloConformitaUrbanistica:new b.g({value:(null===(y=null==i?void 0:i.serre)||void 0===y?void 0:y.titoloConformitaUrbanistica)?i.serre.titoloConformitaUrbanistica:null,disabled:this.READONLY_MODE}),tipoConduzione:new b.g({value:(null===(L=null===(P=null==i?void 0:i.serre)||void 0===P?void 0:P.tipoConduzione)||void 0===L?void 0:L.value)?i.serre.tipoConduzione.value:null,disabled:this.READONLY_MODE},[b.G.required]),descrizione:new b.g({value:(null===(_=null==i?void 0:i.serre)||void 0===_?void 0:_.descrizione)?i.serre.descrizione:null,disabled:this.READONLY_MODE})}),strutture:new b.j({stoccaggioLiquami:new b.j({denominazione:new b.g({value:(null===(x=null===(R=null==i?void 0:i.strutture)||void 0===R?void 0:R.stoccaggioLiquami)||void 0===x?void 0:x.denominazione)?i.strutture.stoccaggioLiquami.denominazione:null,disabled:this.READONLY_MODE}),indirizzo:new b.g({value:(null===(G=null===(w=null==i?void 0:i.strutture)||void 0===w?void 0:w.stoccaggioLiquami)||void 0===G?void 0:G.indirizzo)?i.strutture.stoccaggioLiquami.indirizzo:null,disabled:this.READONLY_MODE}),comune:new b.g({value:(null===(V=null===(k=null==i?void 0:i.strutture)||void 0===k?void 0:k.stoccaggioLiquami)||void 0===V?void 0:V.comune)?i.strutture.stoccaggioLiquami.comune:null,disabled:this.READONLY_MODE},[b.G.required]),copertura:new b.g({value:(null===(q=null===(U=null==i?void 0:i.strutture)||void 0===U?void 0:U.stoccaggioLiquami)||void 0===q?void 0:q.copertura)?i.strutture.stoccaggioLiquami.copertura.value:null,disabled:this.READONLY_MODE},[b.G.required]),superficie:new b.g({value:(null===(Z=null===(Q=null==i?void 0:i.strutture)||void 0===Q?void 0:Q.stoccaggioLiquami)||void 0===Z?void 0:Z.superficie)?i.strutture.stoccaggioLiquami.superficie:null,disabled:this.READONLY_MODE},[b.G.required]),altezza:new b.g({value:(null===(j=null===($=null==i?void 0:i.strutture)||void 0===$?void 0:$.stoccaggioLiquami)||void 0===j?void 0:j.altezza)?i.strutture.stoccaggioLiquami.altezza:null,disabled:this.READONLY_MODE},[b.G.required]),volume:new b.g({value:(null===(H=null===(Y=null==i?void 0:i.strutture)||void 0===Y?void 0:Y.stoccaggioLiquami)||void 0===H?void 0:H.volume)?i.strutture.stoccaggioLiquami.volume:null,disabled:this.READONLY_MODE}),tipoConduzione:new b.g({value:(null===(X=null===(W=null===(K=null==i?void 0:i.strutture)||void 0===K?void 0:K.stoccaggioLiquami)||void 0===W?void 0:W.tipoConduzione)||void 0===X?void 0:X.value)?i.strutture.stoccaggioLiquami.tipoConduzione.value:null,disabled:this.READONLY_MODE},[b.G.required]),descrizione:new b.g({value:(null===(ii=null===(J=null==i?void 0:i.strutture)||void 0===J?void 0:J.stoccaggioLiquami)||void 0===ii?void 0:ii.descrizione)?i.strutture.stoccaggioLiquami.descrizione:null,disabled:this.READONLY_MODE})}),stoccaggioLetami:new b.j({denominazione:new b.g({value:(null===(ei=null===(ti=null==i?void 0:i.strutture)||void 0===ti?void 0:ti.stoccaggioLetami)||void 0===ei?void 0:ei.denominazione)?i.strutture.stoccaggioLetami.denominazione:null,disabled:this.READONLY_MODE}),indirizzo:new b.g({value:(null===(ai=null===(oi=null==i?void 0:i.strutture)||void 0===oi?void 0:oi.stoccaggioLetami)||void 0===ai?void 0:ai.indirizzo)?i.strutture.stoccaggioLetami.indirizzo:null,disabled:this.READONLY_MODE}),comune:new b.g({value:(null===(ri=null===(ci=null==i?void 0:i.strutture)||void 0===ci?void 0:ci.stoccaggioLetami)||void 0===ri?void 0:ri.comune)?i.strutture.stoccaggioLetami.comune:null,disabled:this.READONLY_MODE},[b.G.required]),copertura:new b.g({value:(null===(si=null===(ni=null==i?void 0:i.strutture)||void 0===ni?void 0:ni.stoccaggioLetami)||void 0===si?void 0:si.copertura)?i.strutture.stoccaggioLetami.copertura.value:null,disabled:this.READONLY_MODE},[b.G.required]),altezza:new b.g({value:(null===(bi=null===(li=null==i?void 0:i.strutture)||void 0===li?void 0:li.stoccaggioLetami)||void 0===bi?void 0:bi.altezza)?i.strutture.stoccaggioLetami.altezza:null,disabled:this.READONLY_MODE},[b.G.required]),superficie:new b.g({value:(null===(ui=null===(di=null==i?void 0:i.strutture)||void 0===di?void 0:di.stoccaggioLetami)||void 0===ui?void 0:ui.superficie)?i.strutture.stoccaggioLetami.superficie:null,disabled:this.READONLY_MODE},[b.G.required]),volume:new b.g({value:(null===(mi=null===(pi=null==i?void 0:i.strutture)||void 0===pi?void 0:pi.stoccaggioLetami)||void 0===mi?void 0:mi.volume)?i.strutture.stoccaggioLetami.volume:null,disabled:this.READONLY_MODE}),tipoConduzione:new b.g({value:(null===(fi=null===(hi=null===(gi=null==i?void 0:i.strutture)||void 0===gi?void 0:gi.stoccaggioLetami)||void 0===hi?void 0:hi.tipoConduzione)||void 0===fi?void 0:fi.value)?i.strutture.stoccaggioLetami.tipoConduzione.value:null,disabled:this.READONLY_MODE},[b.G.required]),descrizione:new b.g({value:(null===(Si=null===(Ti=null==i?void 0:i.strutture)||void 0===Ti?void 0:Ti.stoccaggioLetami)||void 0===Si?void 0:Si.descrizione)?i.strutture.stoccaggioLetami.descrizione:null,disabled:this.READONLY_MODE})}),areeScoperte:new b.j({denominazione:new b.g({value:(null===(Oi=null===(vi=null==i?void 0:i.strutture)||void 0===vi?void 0:vi.areeScoperte)||void 0===Oi?void 0:Oi.denominazione)?i.strutture.areeScoperte.denominazione:null,disabled:this.READONLY_MODE}),indirizzo:new b.g({value:(null===(Ii=null===(Ci=null==i?void 0:i.strutture)||void 0===Ci?void 0:Ci.areeScoperte)||void 0===Ii?void 0:Ii.indirizzo)?i.strutture.areeScoperte.indirizzo:null,disabled:this.READONLY_MODE}),comune:new b.g({value:(null===(Fi=null===(Ai=null==i?void 0:i.strutture)||void 0===Ai?void 0:Ai.areeScoperte)||void 0===Fi?void 0:Fi.comune)?i.strutture.areeScoperte.comune:null,disabled:this.READONLY_MODE},[b.G.required]),superficie:new b.g({value:(null===(zi=null===(Mi=null==i?void 0:i.strutture)||void 0===Mi?void 0:Mi.areeScoperte)||void 0===zi?void 0:zi.superficie)?i.strutture.areeScoperte.superficie:null,disabled:this.READONLY_MODE},[b.G.required]),tipoConduzione:new b.g({value:(null===(Bi=null===(Di=null===(Ei=null==i?void 0:i.strutture)||void 0===Ei?void 0:Ei.areeScoperte)||void 0===Di?void 0:Di.tipoConduzione)||void 0===Bi?void 0:Bi.value)?i.strutture.areeScoperte.tipoConduzione.value:null,disabled:this.READONLY_MODE},[b.G.required]),descrizione:new b.g({value:(null===(yi=null===(Ni=null==i?void 0:i.strutture)||void 0===Ni?void 0:Ni.areeScoperte)||void 0===yi?void 0:yi.descrizione)?i.strutture.areeScoperte.descrizione:null,disabled:this.READONLY_MODE})}),stalle:new b.j({denominazione:new b.g({value:(null===(Li=null===(Pi=null==i?void 0:i.strutture)||void 0===Pi?void 0:Pi.stalle)||void 0===Li?void 0:Li.denominazione)?i.strutture.stalle.denominazione:null,disabled:this.READONLY_MODE}),indirizzo:new b.g({value:(null===(Ri=null===(_i=null==i?void 0:i.strutture)||void 0===_i?void 0:_i.stalle)||void 0===Ri?void 0:Ri.indirizzo)?i.strutture.stalle.indirizzo:null,disabled:this.READONLY_MODE}),comune:new b.g({value:(null===(wi=null===(xi=null==i?void 0:i.strutture)||void 0===xi?void 0:xi.stalle)||void 0===wi?void 0:wi.comune)?i.strutture.stalle.comune:null,disabled:this.READONLY_MODE},[b.G.required]),volume:new b.g({value:(null===(ki=null===(Gi=null==i?void 0:i.strutture)||void 0===Gi?void 0:Gi.stalle)||void 0===ki?void 0:ki.volume)?i.strutture.stalle.volume:null,disabled:this.READONLY_MODE}),superficie:new b.g({value:(null===(Ui=null===(Vi=null==i?void 0:i.strutture)||void 0===Vi?void 0:Vi.stalle)||void 0===Ui?void 0:Ui.superficie)?i.strutture.stalle.superficie:null,disabled:this.READONLY_MODE},[b.G.required]),tipoConduzione:new b.g({value:(null===(Zi=null===(Qi=null===(qi=null==i?void 0:i.strutture)||void 0===qi?void 0:qi.stalle)||void 0===Qi?void 0:Qi.tipoConduzione)||void 0===Zi?void 0:Zi.value)?i.strutture.stalle.tipoConduzione.value:null,disabled:this.READONLY_MODE},[b.G.required]),descrizione:new b.g({value:(null===(ji=null===($i=null==i?void 0:i.strutture)||void 0===$i?void 0:$i.stalle)||void 0===ji?void 0:ji.descrizione)?i.strutture.stalle.descrizione:null,disabled:this.READONLY_MODE})})})})}disableFabbricato(){this.fabbricatoForm.get("fabbricati").disable()}disableSerre(){this.fabbricatoForm.get("serre").disable()}disableZootecnia(){this.fabbricatoForm.get("strutture").disable()}setCatastoInTrentino(){this.fabbricatoForm.get("datiCatastali.comune").setValidators([b.G.required,b.G.pattern("^([0-9])+$")]),this.fabbricatoForm.get("datiCatastali.sezione").clearValidators(),this.fabbricatoForm.get("datiCatastali.foglio").clearValidators(),this.fabbricatoForm.updateValueAndValidity()}setCatastoFuoriTrentino(){this.fabbricatoForm.get("datiCatastali.sezione").setValidators([b.G.required]),this.fabbricatoForm.get("datiCatastali.foglio").setValidators([b.G.required,b.G.pattern("^([0-9])+$")]),this.fabbricatoForm.get("datiCatastali.comune").clearValidators(),this.fabbricatoForm.get("datiCatastali.subalterno").clearValidators(),this.fabbricatoForm.updateValueAndValidity()}disableTipoStrutturaByIndex(i){0===i?(this.fabbricatoForm.get("strutture.stoccaggioLiquami").disable(),this.fabbricatoForm.get("strutture.areeScoperte").disable(),this.fabbricatoForm.get("strutture.stalle").disable()):1===i?(this.fabbricatoForm.get("strutture.stoccaggioLetami").disable(),this.fabbricatoForm.get("strutture.areeScoperte").disable(),this.fabbricatoForm.get("strutture.stalle").disable()):2===i?(this.fabbricatoForm.get("strutture.stoccaggioLiquami").disable(),this.fabbricatoForm.get("strutture.stoccaggioLetami").disable(),this.fabbricatoForm.get("strutture.stalle").disable()):3===i&&(this.fabbricatoForm.get("strutture.stoccaggioLiquami").disable(),this.fabbricatoForm.get("strutture.stoccaggioLetami").disable(),this.fabbricatoForm.get("strutture.areeScoperte").disable())}enableFabbricato(){this.fabbricatoForm.get("fabbricati").enable()}enableSerre(){this.fabbricatoForm.get("serre").enable()}enableZootecnia(){this.fabbricatoForm.get("strutture").enable()}disableTipologie(){this.EDIT_MODE&&(this.classificazioneFabbricatoVM={},this.classificazioneFabbricatoVM.tipologiaFabbricato=this.fabbricatoForm.get("tipologiaFabbricato").value,this.classificazioneFabbricatoVM.sottoTipologiaFabbricato=this.fabbricatoForm.get("sottoTipologiaFabbricato").value,this.classificazioneFabbricatoVM.sottoTipo=this.fabbricatoForm.get("sottoTipo").value,this.fabbricatoForm.get("tipologiaFabbricato").disable(),this.fabbricatoForm.get("sottoTipologiaFabbricato").disable(),this.fabbricatoForm.get("sottoTipo").disable())}enableTipoZootecniaByIndex(i){0===i?(this.fabbricatoForm.get("strutture.stoccaggioLetami").enable(),this.fabbricatoForm.get("strutture.stoccaggioLiquami").disable(),this.fabbricatoForm.get("strutture.areeScoperte").disable(),this.fabbricatoForm.get("strutture.stalle").disable()):1===i?(this.fabbricatoForm.get("strutture.stoccaggioLetami").disable(),this.fabbricatoForm.get("strutture.stoccaggioLiquami").enable(),this.fabbricatoForm.get("strutture.areeScoperte").disable(),this.fabbricatoForm.get("strutture.stalle").disable()):2===i?(this.fabbricatoForm.get("strutture.areeScoperte").enable(),this.fabbricatoForm.get("strutture.stoccaggioLiquami").disable(),this.fabbricatoForm.get("strutture.stoccaggioLetami").disable(),this.fabbricatoForm.get("strutture.stalle").disable()):3===i&&(this.fabbricatoForm.get("strutture.stalle").enable(),this.fabbricatoForm.get("strutture.stoccaggioLiquami").disable(),this.fabbricatoForm.get("strutture.stoccaggioLetami").disable(),this.fabbricatoForm.get("strutture.areeScoperte").disable())}closeAccordion(){this.fabbricatoEnabled=!1,this.serreEnabled=!1,this.struttureEnabled=!1}getSottoTipoByValueSottoTipologia(i){return(null==i?void 0:i.label.split(" ").join("_"))===this.sottoTipologiaZootecnia.STOCCAGGIO_LETAMI?(this.struttureEnabled=!0,this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.STOCCAGGIO_LETAMI,this.activeTab=0,this.enableTipoZootecniaByIndex(this.activeTab),this.fabbricatoForm.get("sottoTipo").setValidators([b.G.required]),void this.getSottoTipiFabbricato(i)):(null==i?void 0:i.label.split(" ").join("_"))===this.sottoTipologiaZootecnia.STOCCAGGIO_LIQUAMI?(this.struttureEnabled=!0,this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.STOCCAGGIO_LIQUAMI,this.activeTab=1,this.enableTipoZootecniaByIndex(this.activeTab),this.fabbricatoForm.get("sottoTipo").setValidators([b.G.required]),void this.getSottoTipiFabbricato(i)):(null==i?void 0:i.label.split(" ").join("_"))===this.sottoTipologiaZootecnia.AREE_SCOPERTE?(this.struttureEnabled=!0,this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.AREE_SCOPERTE,this.activeTab=2,this.enableTipoZootecniaByIndex(this.activeTab),this.fabbricatoForm.get("sottoTipo").setValidators([b.G.required]),void this.getSottoTipiFabbricato(i)):(null==i?void 0:i.label.split(" ").join("_"))===this.sottoTipologiaZootecnia.STALLE?(this.struttureEnabled=!0,this.sottoTipoLogiaSelected=this.sottoTipologiaZootecnia.STALLE,this.activeTab=3,this.enableTipoZootecniaByIndex(this.activeTab),this.fabbricatoForm.get("sottoTipo").setValidators([b.G.required]),void this.getSottoTipiFabbricato(i)):void this.fabbricatoForm.get("sottoTipo").clearValidators()}getSottoTipiFabbricato(i){this.getSottoTipoSubscription=this.httpClientTipologieService.getSottoTipologieByIdTipologia(i.value).subscribe(t=>{var e;(null===(e=null==t?void 0:t.tipologie)||void 0===e?void 0:e.length)?this.tipologicheService.setSottoTipoFabbricato(this.dotazioneTecnicaBuilderService.tipologiaDtoToSelectItemArrayConverter(t.tipologie)):this.errorService.showErrorWithMessage("Non \xe8 possibile caricare le sotto tipologie di fabbricato relative a "+i.label,"tst-fabbricato"),this.disableTipologie()},i=>this.errorService.showError(i,"tst-fabbricato"))}validateAllFormFields(i){Object.keys(i.controls).forEach(t=>{const e=i.get(t);e instanceof b.g?e.markAsTouched({onlySelf:!0}):e instanceof b.j&&this.validateAllFormFields(e)})}equalsParticella(i,t){return i.particella===t.particella&&i.denominatore===t.denominatore&&i.foglio===t.foglio&&i.sezione===t.sezione&&i.tipologia===t.tipologia}disableValidatorsByTipologiaAndGetType(i){return i===Be.STRUTTURE_ZOOTECNICHE?(this.disableFabbricato(),this.disableSerre(),this.disableTipoStrutturaByIndex(this.activeTab),0===this.activeTab||1===this.activeTab?ea.a.STOCCAGGIO:ea.a.FABBRICATO):i===Be.SERRE_E_PROTEZIONI?(this.disableFabbricato(),this.disableZootecnia(),ea.a.SERRA):i===Be.FABBRICATI_STRUMENTALI?(this.disableSerre(),this.disableZootecnia(),ea.a.STRUMENTALE):void 0}closeDialog(i){this.fabbricatoForm.reset(),this.cuaa=null,this.dettaglioFabbricato=null,this.onHideDialog.emit(i),this.display=!1}openAccordionByIndex(i){this.accordion.tabs.forEach((t,e)=>{t.selected=e===i})}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(Ae.a),n.Nb(ze.a),n.Nb(Me.a),n.Nb(ta),n.Nb(Ce.a),n.Nb(Ht.a),n.Nb(p.d),n.Nb(L.a),n.Nb(ee.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-popup-nuovo-fabbricato"]],viewQuery:function(i,t){var e;1&i&&n.Uc(na,!0),2&i&&n.Ac(e=n.cc())&&(t.accordion=e.first)},outputs:{onHideDialog:"onHideDialog"},decls:35,vars:36,consts:[["key","tst-fabbricato"],["position","center","key","aggiungiParticellaInTrentino",3,"modal","baseZIndex","onClose"],["pTemplate","message"],["id","popup-nuovo-fabbricato","header","Fabbricato","position","center","styleClass","large-dialog",3,"visible","focusOnShow","modal","closable","closeOnEscape","blockScroll","contentStyle","dismissableMask","visibleChange","onHide"],["dialogNuovoFabbricato",""],["novalidate","",1,"p-grid","h-100",3,"formGroup","ngSubmit"],[1,"p-grid","w-100","m-0"],[1,"p-col-12","p-col-align-start","ui-fluid"],[1,"p-grid"],[1,"w-100",3,"onOpen"],["accordion",""],[1,"p-grid","p-4","boxgrey"],[1,"p-col","p-0"],[1,"p-grid","m-0"],[1,"p-col-4"],["for","tipologia-fabbricato"],["id","tipologia-fabbricato","formControlName","tipologiaFabbricato",3,"disabled","options","onChange"],[4,"ngIf"],["for","sotto-tipologia-fabbricato"],["id","sotto-tipologia-fabbricato","formControlName","sottoTipologiaFabbricato",3,"disabled","options","onChange"],["class","p-col-4",4,"ngIf"],["class","accordion-wrapper dettaglioaccordionmultiple px-2 boxgrey",4,"ngIf"],[1,"p-col-12","p-col-align-end","ui-fluid"],[1,"p-col-12"],[1,"ui-g-9","text-left"],[1,"ui-g-3","text-right"],["pButton","","type","submit","label","Salva Fabbricato",1,"ui-button-text-only","p-1","text-uppercase","font-weight-normal","shadow-none","w-10m",3,"disabled"],[2,"text-align","center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3em"],[1,"ui-g","ui-fluid"],[1,"ui-g-6"],["type","button","pButton","","label","Si",1,"ui-button-success",3,"click"],["type","button","pButton","","label","No",1,"ui-button-secondary",3,"click"],["class","font-12","severity","error","text","Campo Obbligatorio",4,"ngIf"],["severity","error","text","Campo Obbligatorio",1,"font-12"],["for","sotto-tipo-fabbricato"],["id","sotto-tipo-fabbricato","formControlName","sottoTipo",3,"disabled","options","onChange"],[1,"accordion-wrapper","dettaglioaccordionmultiple","px-2","boxgrey"],["header","DATI CATASTALI","cache","false",3,"selected"],["pTemplate","content"],[1,"p-grid","align-self-center"],[1,"p-col"],[1,"color-primary","font-weight-bold"],[1,"p-col-12","pl-3"],["for","scelta-in-out",1,"fs-18","align-text-top"],["id","scelta-in-out","formControlName","fuoriTrentino",1,"large-switch","p-4",3,"disabled","onChange"],["class","p-col-12",4,"ngIf"],["class","p-col-12 p-3",4,"ngIf"],["formGroupName","datiCatastali",1,"p-col","p-0"],["for","comune-catastale-input"],["id","comune-catastale-input","type","text","pInputText","","formControlName","comune","pattern","^([0-9])+$",3,"maxlength","change"],["for","numero-particella-input"],["id","numero-particella-input","type","text","pInputText","","formControlName","particella",3,"maxlength","change"],["for","denominatore-input"],["id","denominatore-input","type","text","pInputText","","formControlName","denominatore",3,"maxlength"],[1,"p-col-6"],["for","tipologia-catasto"],["id","tipologia-catasto","formControlName","tipologia",3,"disabled","options","onChange"],["class","p-col-6",4,"ngIf"],[1,"p-grid","m-0","p-justify-end","p-align-center"],["class","p-col-fixed",4,"ngIf"],["class","font-12","severity","error","text","Formato non valido",4,"ngIf"],["severity","error","text","Formato non valido",1,"font-12"],["for","subalterno-input"],["id","subalterno-input","formControlName","subalterno","editable","true","placeholder","Seleziona o digita un subalterno",3,"options"],[1,"p-col-fixed"],["pButton","","label","AGGIUNGI PARTICELLA","icon","pi pi-plus-circle","iconPos","right",1,"ui-button-secondary","ui-button-text","button-accent-alt",3,"click"],["for","sezione-input"],["id","sezione-input","type","text","pInputText","","formControlName","sezione",3,"maxlength"],["for","foglio"],["id","foglio-input","type","text","pInputText","","formControlName","foglio","pattern","^([0-9])+$",3,"maxlength"],["id","numero-particella-input","type","text","pInputText","","formControlName","particella",3,"maxlength"],["pButton","","class","ui-button-secondary ui-button-text button-accent-alt","label","ANNULLA MODIFICA","icon","pi pi-undo","iconPos","right",3,"click",4,"ngIf"],["pButton","","label","ANNULLA MODIFICA","icon","pi pi-undo","iconPos","right",1,"ui-button-secondary","ui-button-text","button-accent-alt",3,"click"],["pButton","","class","ui-button-secondary ui-button-text button-accent-alt","label","AGGIUNGI PARTICELLA","icon","pi pi-plus-circle","iconPos","right",3,"click",4,"ngIf"],["pButton","","class","ui-button-secondary ui-button-text button-accent-alt","label","AGGIORNA PARTICELLA","icon","pi pi-save","iconPos","right",3,"click",4,"ngIf"],["pButton","","label","AGGIORNA PARTICELLA","icon","pi pi-save","iconPos","right",1,"ui-button-secondary","ui-button-text","button-accent-alt",3,"click"],[1,"p-col-12","p-3"],["pandableRows","true","dataKey","particella",3,"columns","value","autoLayout","paginator","responsive"],["tableParticelle",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[4,"ngFor","ngForOf"],["href","#",3,"pRowToggler"],["title","Dettaglio particella",3,"ngClass"],[1,"text-center"],["pButton","","type","button","title","Modifica particella","class","icon-button-square","icon","pi pi-pencil",3,"click",4,"ngIf"],["pButton","","type","button","title","Elimina particella","icon","pi pi-times-circle",1,"icon-button-square","ml-2",3,"disabled","click"],["pButton","","type","button","title","Modifica particella","icon","pi pi-pencil",1,"icon-button-square",3,"click"],[3,"ngIf"],["header","FABBRICATI STRUMENTALI","cache","false",3,"selected"],["formGroupName","fabbricati",1,"p-grid","m-0","w-100"],["for","denominazione-input"],["id","denominazione-input","type","text","pInputText","","formControlName","denominazione",3,"maxlength"],["for","indirizzo-input"],["id","indirizzo-input","type","text","pInputText","","formControlName","indirizzo",3,"maxlength"],["for","comune-amministrativo-input"],["id","comune-amministrativo-input","type","text","pInputText","","formControlName","comune",3,"maxlength"],["for","volume-input"],["id","volume-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","volume",1,"text-right",3,"maxlength"],["for","superficie-totale-input"],["id","superficie-totale-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficie",1,"text-right",3,"maxlength","a4gLimitSumNoInput"],["for","superficie-coperta-input"],["id","superficie-coperta-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficieCoperta",1,"text-right",3,"maxlength","a4gLimitSumNoInput"],["class","font-12","severity","error",3,"text",4,"ngIf"],["for","superficie-scoperta-input"],["id","superficie-scoperta-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficieScoperta",1,"text-right",3,"maxlength","a4gLimitSumNoInput"],["for","tipo-conduzione-fabbricato"],["id","tipo-conduzione-fabbricato","formControlName","tipoConduzione",3,"disabled","options"],["for","descrizione-fabbricato-input"],["id","descrizione-fabbricato-input","type","text","pInputText","","formControlName","descrizione",3,"maxlength"],[1,"p-grid","m-0","w-100"],["class","font-12","severity","error","text","Attenzione! La somma di superficie scoperta e coperta non pu\xf2 eccedere la superficie totale!",4,"ngIf"],["severity","error","text","Attenzione! La somma di superficie scoperta e coperta non pu\xf2 eccedere la superficie totale!",1,"font-12"],["severity","error",1,"font-12",3,"text"],["header","SERRE E PROTEZIONI","cache","false",3,"selected"],["formGroupName","serre",1,"p-grid","m-0","w-100"],["for","superficie-occupata-input"],["id","superficie-occupata-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficie",1,"text-right",3,"maxlength"],["for","anno-costruzione-input"],["id","anno-costruzione-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","annoCostruzione",1,"text-right",3,"maxlength"],["for","conformita-urbanistica-input"],["id","conformita-urbanistica-input","type","text","pInputText","","formControlName","titoloConformitaUrbanistica",3,"maxlength"],[1,"p-col-6","p-grid","align-content-end"],["for","impianto-riscaldamento-input"],["id","impianto-riscaldamento-input","binary","true",1,"pl-4",3,"formControl"],["for","tipo-conduzione-serre"],["id","tipo-conduzione-serre","formControlName","tipoConduzione",3,"disabled","options"],["for","descrizione-serra-input"],["id","descrizione-serra-input","type","text","pInputText","","formControlName","descrizione",3,"maxlength"],["for","tipologia-materiale-input"],["id","tipologia-materiale-input","type","text","pInputText","","formControlName","tipologiaMateriale",3,"maxlength"],["for","anno-acquisto-input"],["id","anno-acquisto-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","annoAcquisto",1,"text-right",3,"maxlength"],["header","STRUTTURE ZOOTECNICHE","cache","false",3,"selected"],["formGroupName","strutture",1,"p-grid","m-0","p-0"],[3,"activeIndex"],["header","STOCCAGGIO LETAMI",3,"selected","disabled"],["formGroupName","stoccaggioLetami",1,"p-grid","m-0","w-100"],["for","copertura-letami"],["id","copertura-letami","formControlName","copertura",3,"disabled","options"],["for","superficie-input"],["id","superficie-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficie",1,"text-right",3,"maxlength","blur"],["for","altezza-letami"],["id","altezza-letami","pattern","^([0-9])+$","type","text","pInputText","","formControlName","altezza",1,"text-right",3,"maxlength","blur"],["id","volume-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","volume","readonly","",1,"text-right",3,"maxlength"],["for","tipo-conduzione-strutture"],["id","tipo-conduzione-strutture","formControlName","tipoConduzione",3,"disabled","options"],["for","descrizione-struttura-input"],["id","descrizione-struttura-input","type","text","pInputText","","formControlName","descrizione",3,"maxlength"],["header","STOCCAGGIO LIQUAMI",3,"selected","disabled"],["formGroupName","stoccaggioLiquami",1,"p-grid","m-0","w-100"],["for","copertura-liquami"],["id","copertura-liquami","formControlName","copertura",3,"disabled","options"],["for","superficie-liquami"],["id","superficie-liquami","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficie",1,"text-right",3,"maxlength","blur"],["for","altezza-liquami"],["id","altezza-liquami","pattern","^([0-9])+$","type","text","pInputText","","formControlName","altezza",1,"text-right",3,"maxlength","blur"],["header","AREE SCOPERTE",3,"selected","disabled"],["formGroupName","areeScoperte",1,"p-grid","m-0","w-100"],["for","denominazione-aree"],["id","denominazione-aree","type","text","pInputText","","formControlName","denominazione",3,"maxlength"],["for","indirizzo-aree"],["id","indirizzo-aree","type","text","pInputText","","formControlName","indirizzo",3,"maxlength"],["for","comune-amministrativo-aree"],["id","comune-amministrativo-aree","type","text","pInputText","","formControlName","comune",3,"maxlength"],["for","superficie-aree"],["id","superficie-aree","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficie",1,"text-right",3,"maxlength"],["for","tipo-conduzione-aree"],["id","tipo-conduzione-aree","formControlName","tipoConduzione",3,"disabled","options"],["for","descrizione-struttura-aree"],["id","descrizione-struttura-aree","type","text","pInputText","","formControlName","descrizione",3,"maxlength"],["header","STALLE",3,"selected","disabled"],["formGroupName","stalle",1,"p-grid","m-0","w-100"],["id","superficie-input","pattern","^([0-9])+$","type","text","pInputText","","formControlName","superficie",1,"text-right",3,"maxlength"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"p-toast",1),n.bc("onClose",(function(){return t.onRejectAggiornaDichiarazione()})),n.Mc(2,sa,11,2,"ng-template",2),n.Sb(),n.Tb(3,"p-dialog",3,4),n.bc("visibleChange",(function(i){return t.display=i}))("onHide",(function(){return t.annulla()})),n.Tb(5,"form",5),n.bc("ngSubmit",(function(i){return t.onSubmit(i)})),n.Tb(6,"div",6),n.Tb(7,"div",7),n.Tb(8,"div",8),n.Tb(9,"p-accordion",9,10),n.bc("onOpen",(function(i){return t.onSelectAccordion(i)})),n.Tb(11,"div",11),n.Tb(12,"div",12),n.Tb(13,"div",13),n.Tb(14,"div",14),n.Tb(15,"label",15),n.Oc(16,"Ambito*"),n.Sb(),n.Tb(17,"p-dropdown",16),n.bc("onChange",(function(i){return t.onSelectTipologia(i)})),n.Sb(),n.Mc(18,ba,2,1,"div",17),n.Sb(),n.Tb(19,"div",14),n.Tb(20,"label",18),n.Oc(21,"Tipologia*"),n.Sb(),n.Tb(22,"p-dropdown",19),n.bc("onChange",(function(i){return t.onSelectSottoTipologia(i)})),n.Sb(),n.Mc(23,ua,2,1,"div",17),n.Sb(),n.Mc(24,ga,5,3,"div",20),n.Sb(),n.Sb(),n.Sb(),n.Mc(25,ac,3,1,"div",21),n.Mc(26,Oc,3,1,"div",21),n.Mc(27,Pc,3,1,"div",21),n.Mc(28,Or,3,1,"div",21),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Tb(29,"div",22),n.Tb(30,"p-footer"),n.Tb(31,"div",23),n.Ob(32,"div",24),n.Tb(33,"div",25),n.Ob(34,"button",26),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(33,Cr)),n.Bb(1),n.mc("modal",!0)("baseZIndex",5e3),n.Bb(2),n.Kc(n.rc(34,Ir)),n.Db(t.idValidazione?"title-grey":""),n.mc("visible",t.display)("focusOnShow",!1)("modal",!0)("closable",!0)("closeOnEscape",!0)("blockScroll",!0)("contentStyle",n.rc(35,Ar))("dismissableMask",!1),n.Bb(2),n.mc("formGroup",t.fabbricatoForm),n.Bb(4),n.Db(t.idValidazione?"accordion-grey":""),n.Bb(8),n.mc("disabled",t.READONLY_MODE)("options",t.tipologicheService.tipologiaFabbricato),n.Bb(1),n.mc("ngIf",t.fabbricatoForm.get("tipologiaFabbricato").invalid&&(t.fabbricatoForm.get("tipologiaFabbricato").dirty||t.fabbricatoForm.get("tipologiaFabbricato").touched)),n.Bb(4),n.mc("disabled",t.READONLY_MODE)("options",t.tipologicheService.sottoTipologiaFabbricato),n.Bb(1),n.mc("ngIf",t.fabbricatoForm.get("sottoTipologiaFabbricato").invalid&&(t.fabbricatoForm.get("sottoTipologiaFabbricato").dirty||t.fabbricatoForm.get("sottoTipologiaFabbricato").touched)),n.Bb(1),n.mc("ngIf",t.isSelctedStruttureZootecniche()),n.Bb(1),n.mc("ngIf",!t.disabledAccordionParticelle()),n.Bb(1),n.mc("ngIf",t.fabbricatoEnabled),n.Bb(1),n.mc("ngIf",t.serreEnabled),n.Bb(1),n.mc("ngIf",t.struttureEnabled),n.Bb(6),n.Db(t.idValidazione?"button-custom-grey":""),n.mc("disabled",t.READONLY_MODE))},directives:[g.a,p.e,h.a,b.I,b.t,b.k,f.a,S.a,b.s,b.i,r.t,p.b,T.b,ni.b,f.c,oa.a,p.c,Pe.a,b.l,b.c,ri.a,b.z,b.n,j.q,r.s,j.k,r.q,aa.a,ca.a,b.h,ra.b,ra.a],styles:["[_nghost-%COMP%]     .ui-dialog{max-height:100%}[_nghost-%COMP%]     .ui-dialog .ui-dialog-content{height:100%}[_nghost-%COMP%]   p-dropdown[_ngcontent-%COMP%] >   .ui-dropdown label.ui-dropdown-label{height:100%;font-weight:400!important}[_nghost-%COMP%]     input.ui-inputtext.ui-spinner-input:disabled, [_nghost-%COMP%]   input.ui-inputtext[_ngcontent-%COMP%]:disabled{border-bottom:1px dotted;opacity:.9;background:#e8f5e9}[_nghost-%COMP%]     .ui-dropdown.ui-state-disabled .ui-dropdown-label-container>.ui-dropdown-label.ui-inputtext{border-bottom:1px dotted;opacity:.9;background:#b1ddb5}[_nghost-%COMP%]   .cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]     .large-switch>.ui-inputswitch{height:1.5em;width:4em!important}[_nghost-%COMP%]     .large-switch>.ui-inputswitch .ui-inputswitch-slider{font-size:1.5em}[_nghost-%COMP%]     .large-switch>.ui-accordion .ui-accordion-header{margin-top:.25em}[_nghost-%COMP%]   .button-accent-alt[_ngcontent-%COMP%]{border:2px solid #01985a;color:#01985a!important;font-weight:700}[_nghost-%COMP%]   .button-accent-alt[_ngcontent-%COMP%] >   span.ui-button-icon-right.pi{color:#01985a!important;font-size:x-large!important}[_nghost-%COMP%]   .no-wrap[_ngcontent-%COMP%]{white-space:nowrap}[_nghost-%COMP%]   .pr-0_5m[_ngcontent-%COMP%]{padding-right:.5em}[_nghost-%COMP%]   .h-90[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .button-custom-grey[_ngcontent-%COMP%]{background-color:#9b9b9b!important}[_nghost-%COMP%]   .title-grey[_ngcontent-%COMP%]     .ui-dialog .ui-dialog-titlebar .ui-dialog-title{color:#9b9b9b!important}[_nghost-%COMP%]     .ui-tabview .ui-tabview-nav>li.ui-state-active{background-color:#fff;border-color:#fff}[_nghost-%COMP%]     .ui-tabview .ui-tabview-nav>li.ui-state-active .ui-tabview-title, [_nghost-%COMP%]     .ui-tabview .ui-tabview-nav>li .ui-tabview-title{color:#fff}[_nghost-%COMP%]   .w-5m[_ngcontent-%COMP%]{width:5em}[_nghost-%COMP%]   .w-10m[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header{border-top:3px solid green}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header>a{text-decoration:none;vertical-align:center;color:#000;background-color:#fff;border:1}[_nghost-%COMP%]     .ui-accordion .ui-icon{color:#000}[_nghost-%COMP%]     .ui-accordion .ui-accordion-content{width:100%;color:#000;background-color:hsla(0,0%,100%,.144);border-block-color:#000}[_nghost-%COMP%]     .ui-accordion-header.ui-icon>a{color:#000;background-color:#fff}[_nghost-%COMP%]     .ui-accordion .ui-accordion-content{border:1}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header>a .ui-accordion-toggle-icon{color:#0d5f3f;float:right}[_nghost-%COMP%]     .ui-accordion .ui-accordion-header>a .ui-accordion-header-text{color:#0d5f3f;border-bottom:solid;font-size:24px;font-weight:700;display:inline-block;padding-bottom:5px}[_nghost-%COMP%]     .ui-dialog-content{padding:0!important}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]{background-color:#fff!important;border:1px solid #01985a;border-radius:unset;height:4em!important;width:4em!important;opacity:1}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]:hover{background-color:#e8e8e8!important}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%] >   span.pi{font-size:x-large!important;color:#01985a!important}"]}),i})();const Mr=["popupNuovoFabbricato"];function zr(i,t){1&i&&n.Ob(0,"th",25)}function Er(i,t){if(1&i&&(n.Tb(0,"th",26),n.Tb(1,"strong"),n.Oc(2),n.Sb(),n.Ob(3,"p-sortIcon",27),n.Sb()),2&i){const i=t.$implicit;n.mc("pSortableColumn",i.field)("pSortableColumnDisabled",null==i.field),n.Bb(2),n.Pc(i.header),n.Bb(1),n.mc("field",i.field)}}function Dr(i,t){if(1&i&&(n.Tb(0,"tr"),n.Mc(1,zr,1,0,"th",22),n.Mc(2,Er,4,4,"th",23),n.Tb(3,"th",24),n.Tb(4,"strong"),n.Oc(5,"Azioni"),n.Sb(),n.Sb(),n.Sb()),2&i){const i=t.$implicit,e=n.fc();n.Bb(1),n.mc("ngIf",!e.readonly),n.Bb(1),n.mc("ngForOf",i)}}function Br(i,t){if(1&i){const i=n.Ub();n.Tb(0,"td",24),n.Tb(1,"button",30),n.bc("click",(function(){n.Ec(i);const t=n.fc().$implicit;return n.fc().deleteFabbricato(t.id)})),n.Sb(),n.Sb()}}function Nr(i,t){if(1&i){const i=n.Ub();n.Tb(0,"tr"),n.Mc(1,Br,2,0,"td",28),n.Tb(2,"td"),n.Oc(3),n.Sb(),n.Tb(4,"td"),n.Oc(5),n.Sb(),n.Tb(6,"td",24),n.Oc(7),n.Sb(),n.Tb(8,"td",24),n.Oc(9),n.Sb(),n.Tb(10,"td",24),n.Tb(11,"button",29),n.bc("click",(function(){n.Ec(i);const e=t.$implicit;return n.fc().dettaglioFabbricato(e.id)})),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=t.$implicit,e=n.fc();n.Bb(1),n.mc("ngIf",!e.readonly),n.Bb(2),n.Pc(i.tipologia),n.Bb(2),n.Pc(i.comune),n.Bb(2),n.Pc(i.volume),n.Bb(2),n.Pc(i.superficie),n.Bb(2),n.Db(e.isFascicoloAttuale()?"":"button-custom-grey")}}function yr(i,t){if(1&i&&(n.Tb(0,"tr"),n.Tb(1,"td"),n.Oc(2,"Nessun contenuto disponibile"),n.Sb(),n.Sb()),2&i){const i=t.$implicit;n.Bb(1),n.Cb("colspan",i.length+2)}}const Pr=function(){return{marginTop:"70px"}};let Lr=(()=>{class i{constructor(i,t,e,o,a,c){this.fascicoloDettaglioService=i,this.route=t,this.dotazioneTecnicaService=e,this.dotazioneTecnicaBuiler=o,this.messageService=a,this.errorService=c}ngOnInit(){this.idValidazione=this.route.snapshot.queryParams["id-validazione"];const i=this.fascicoloDettaglioService.fascicoloCorrente.value.stato;this.readonly=i!==R.c.VALIDATO&&i!==R.c.IN_AGGIORNAMENTO||null!=this.idValidazione,this.listaFabbricati=[],this.setCols(),this.getFabbricati()}ngOnDestroy(){this.fabbricatiSubscription&&this.fabbricatiSubscription.unsubscribe(),this.deleteFabbricatoByIdSubscription&&this.deleteFabbricatoByIdSubscription.unsubscribe(),this.getFabbricatiSubscription&&this.getFabbricatiSubscription.unsubscribe(),this.getFabbricatoByIdSubscription&&this.getFabbricatoByIdSubscription.unsubscribe(),this.getFabbricatoByCuaaSubscription&&this.getFabbricatoByCuaaSubscription.unsubscribe()}aggiungiFabbricato(){this.popupNuovoFabbricato.open(!1,this.getCuaa())}goBack(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.DATI)}deleteFabbricato(i){this.deleteFabbricatoByIdSubscription=this.dotazioneTecnicaService.deleteFabbricato(this.getCuaa(),i.toString()).subscribe(i=>{this.messageService.add(u.a.getToast("tst-fabbricati",u.b.success,"Il fabbricato \xe8 stato eliminato dal sistema!")),this.getFabbricati()},i=>this.errorService.showError(i,"tst-fabbricati"))}dettaglioFabbricato(i){console.log("Dettaglio fabricato Id:"+i),this.getFabbricatoByIdSubscription=this.dotazioneTecnicaService.getFabbricatoByIdAndIdValidazione(this.getCuaa(),i.toString(),this.idValidazione).subscribe(i=>{this.popupNuovoFabbricato.open(this.readonly,this.getCuaa(),this.dotazioneTecnicaBuiler.toDettaglioFabbricatoVM(i,i.type),i.datiCatastali,null!=this.idValidazione?this.idValidazione:null)},i=>this.errorService.showError(i,"tst-fabbricati"))}onCloseDialog(i){i&&this.getFabbricati()}setCols(){this.cols=[{field:"tipologia",header:"Tipologia"},{field:"comune",header:"Comune"},{field:"volume",header:"Volume"},{field:"superficie",header:"Superficie"}]}getFabbricati(){this.getFabbricatoByCuaaSubscription=this.dotazioneTecnicaService.getFabbricatiByCuaaAndIdValidazione(this.getCuaa(),this.idValidazione).subscribe(i=>{this.listaFabbricati=[],i&&i.length&&(this.listaFabbricati=i,this.listaFabbricati.forEach(i=>i.tipologia=i.tipologia.replace(/[_]/g," ")))},i=>this.errorService.showError(i,"tst-fabbricati"))}getCuaa(){var i,t;return null===(t=null===(i=this.fascicoloDettaglioService.fascicoloCorrente)||void 0===i?void 0:i.value)||void 0===t?void 0:t.cuaa}isFascicoloAttuale(){return this.fascicoloDettaglioService.fascicoloCorrente&&null==this.idValidazione}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(L.a),n.Nb(x.a),n.Nb(ta),n.Nb(Me.a),n.Nb(p.d),n.Nb(Ht.a))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-fabbricati"]],viewQuery:function(i,t){var e;1&i&&n.Uc(Mr,!0),2&i&&n.Ac(e=n.cc())&&(t.popupNuovoFabbricato=e.first)},decls:25,vars:15,consts:[[3,"onHideDialog"],["popupNuovoFabbricato",""],["key","tst-fabbricati"],[1,"ui-grid-fixed","boxgrey"],[1,"funzioni-grid","boxgrey"],[1,"p-grid","m-0"],[1,"p-col","p-0"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-dotazione.jpg"],[1,"ml-2"],[1,"p-col","w-100","p-0"],[1,"p-col-fixed","p-0"],["pButton","","icon","pi pi-plus-circle","iconPos","right","type","button","label","AGGIUNGI",1,"w-10m","button-large-icon",3,"disabled","click"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["expandIcon","","collapseIcon",""],["header","FABBRICATI",3,"selected"],["dataKey","identificativo",3,"columns","value","autoLayout","paginator","responsive"],["tableUnita",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","text-center","style","width: 3em",4,"ngIf"],["class","text-center",3,"pSortableColumn","pSortableColumnDisabled",4,"ngFor","ngForOf"],[1,"text-center"],[1,"text-center",2,"width","3em"],[1,"text-center",3,"pSortableColumn","pSortableColumnDisabled"],[3,"field"],["class","text-center",4,"ngIf"],["pButton","","type","button","icon","pi pi-arrow-right",1,"icon-button-rect",3,"click"],["pButton","","type","button","icon","pi pi-times-circle",1,"icon-button-circle",3,"click"]],template:function(i,t){1&i&&(n.Tb(0,"app-popup-nuovo-fabbricato",0,1),n.bc("onHideDialog",(function(i){return t.onCloseDialog(i)})),n.Sb(),n.Ob(2,"p-toast",2),n.Tb(3,"div",3),n.Tb(4,"div",4),n.Tb(5,"div",5),n.Tb(6,"div",6),n.Tb(7,"a",7),n.bc("click",(function(){return t.goBack()})),n.Ob(8,"i",8),n.Ob(9,"img",9),n.Tb(10,"span",10),n.Oc(11),n.gc(12,"translate"),n.Sb(),n.Sb(),n.Sb(),n.Ob(13,"div",11),n.Tb(14,"div",12),n.Tb(15,"button",13),n.bc("click",(function(){return t.aggiungiFabbricato()})),n.Sb(),n.Sb(),n.Sb(),n.Ob(16,"br"),n.Tb(17,"div",14),n.Tb(18,"p-accordion",15),n.Tb(19,"p-accordionTab",16),n.Tb(20,"p-table",17,18),n.Mc(22,Dr,6,2,"ng-template",19),n.Mc(23,Nr,12,7,"ng-template",20),n.Mc(24,yr,3,1,"ng-template",21),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Bb(2),n.Kc(n.rc(14,Pr)),n.Bb(9),n.Qc(" ",n.hc(12,12,"FascicoloAziendale.DOTAZIONE_TECNICA")," "),n.Bb(4),n.Db(t.isFascicoloAttuale()?"":"button-custom-grey"),n.mc("disabled",t.readonly),n.Bb(4),n.mc("selected",!0),n.Bb(1),n.mc("columns",t.cols)("value",t.listaFabbricati)("autoLayout",!0)("paginator",!1)("responsive",!0))},directives:[Fr,g.a,x.h,T.b,f.a,f.c,j.q,p.e,r.t,r.s,j.p,j.o],pipes:[m.d],styles:["[_nghost-%COMP%]   .w-10m[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]   .button-large-icon[_ngcontent-%COMP%] >   span.pi{font-size:x-large}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]{background-color:#4caf50!important;border-radius:unset;height:5em!important;width:13em!important;opacity:1}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%] >   span.ui-button-icon-left{font-size:2.5em}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%]{background-color:transparent!important;opacity:1;width:3em!important;height:3em!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%] >   span.ui-button-icon-left{background:#a9a9a9!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%] >   span.ui-button-icon-left:hover{background-color:#d3d3d3!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-circle[_ngcontent-%COMP%] >   span.pi{font-size:x-large!important;background:#9ccc65}"]}),i})();class _r{}function Rr(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.ubicazione?i.fabbricato.ubicazione:"ND"," ")}}function xr(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function wr(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,xr,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.ubicazioneFabbricato.errors.required)}}function Gr(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",18),n.Sb(),n.Mc(3,wr,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.ubicazioneFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.ubicazioneFabbricato.invalid&&(i.modificaFabbricato.controls.ubicazioneFabbricato.dirty||i.modificaFabbricato.controls.ubicazioneFabbricato.touched))}}function kr(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.tipologia?i.fabbricato.tipologia:"ND"," ")}}function Vr(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function Ur(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,Vr,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.tipologiaFabbricato.errors.required)}}function qr(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",21),n.Sb(),n.Mc(3,Ur,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.tipologiaFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.tipologiaFabbricato.invalid&&(i.modificaFabbricato.controls.tipologiaFabbricato.dirty||i.modificaFabbricato.controls.tipologiaFabbricato.touched))}}function Qr(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.destinazione?i.fabbricato.destinazione:"ND"," ")}}function Zr(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function $r(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,Zr,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.destinazioneFabbricato.errors.required)}}function jr(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",22),n.Sb(),n.Mc(3,$r,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.destinazioneFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.destinazioneFabbricato.invalid&&(i.modificaFabbricato.controls.destinazioneFabbricato.dirty||i.modificaFabbricato.controls.destinazioneFabbricato.touched))}}function Yr(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.utilizzatori?i.fabbricato.utilizzatori:"ND"," ")}}function Hr(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function Kr(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,Hr,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.utilizzatoriFabbricato.errors.required)}}function Wr(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",23),n.Sb(),n.Mc(3,Kr,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.utilizzatoriFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.utilizzatoriFabbricato.invalid&&(i.modificaFabbricato.controls.utilizzatoriFabbricato.dirty||i.modificaFabbricato.controls.utilizzatoriFabbricato.touched))}}function Xr(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.superficieCoperta?i.fabbricato.superficieCoperta:"ND"," ")}}function Jr(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function tn(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,Jr,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.superficieCopertaFabbricato.errors.required)}}function en(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",24),n.Sb(),n.Mc(3,tn,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.superficieCopertaFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.superficieCopertaFabbricato.invalid&&(i.modificaFabbricato.controls.superficieCopertaFabbricato.dirty||i.modificaFabbricato.controls.superficieCopertaFabbricato.touched))}}function on(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.superficieScoperta?i.fabbricato.superficieScoperta:"ND"," ")}}function an(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function cn(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,an,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.superficieScopertaFabbricato.errors.required)}}function rn(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",25),n.Sb(),n.Mc(3,cn,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.superficieScopertaFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.superficieScopertaFabbricato.invalid&&(i.modificaFabbricato.controls.superficieScopertaFabbricato.dirty||i.modificaFabbricato.controls.superficieScopertaFabbricato.touched))}}function nn(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.volume?i.fabbricato.volume:"ND"," ")}}function sn(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function ln(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,sn,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.volumeFabbricato.errors.required)}}function bn(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",26),n.Sb(),n.Mc(3,ln,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.volumeFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.volumeFabbricato.invalid&&(i.modificaFabbricato.controls.volumeFabbricato.dirty||i.modificaFabbricato.controls.volumeFabbricato.touched))}}function dn(i,t){if(1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i){const i=n.fc();n.Bb(1),n.Qc(" ",i.fabbricato.nrPosti?i.fabbricato.nrPosti:"ND"," ")}}function un(i,t){1&i&&(n.Tb(0,"div"),n.Oc(1),n.Sb()),2&i&&(n.Bb(1),n.Pc("Campo Obbligatorio"))}function pn(i,t){if(1&i&&(n.Tb(0,"div",20),n.Mc(1,un,2,1,"div",15),n.Sb()),2&i){const i=n.fc(2);n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.nrPostiFabbricato.errors.required)}}function mn(i,t){if(1&i&&(n.Tb(0,"div"),n.Tb(1,"span",17),n.Ob(2,"input",27),n.Sb(),n.Mc(3,pn,2,1,"div",19),n.Sb()),2&i){const i=n.fc();n.Bb(2),n.mc("formControl",i.modificaFabbricato.controls.nrPostiFabbricato),n.Bb(1),n.mc("ngIf",i.modificaFabbricato.controls.nrPostiFabbricato.invalid&&(i.modificaFabbricato.controls.nrPostiFabbricato.dirty||i.modificaFabbricato.controls.nrPostiFabbricato.touched))}}function gn(i,t){if(1&i){const i=n.Ub();n.Tb(0,"div"),n.Ob(1,"br"),n.Tb(2,"div",28),n.Ob(3,"div",29),n.Tb(4,"div",30),n.Tb(5,"p",11),n.Tb(6,"button",31),n.bc("click",(function(){return n.Ec(i),n.fc().annullaModifica()})),n.Sb(),n.Sb(),n.Sb(),n.Tb(7,"div",30),n.Tb(8,"p",11),n.Ob(9,"button",32),n.Sb(),n.Sb(),n.Sb(),n.Sb()}if(2&i){const i=n.fc();n.Bb(6),n.mc("disabled",!i.modificaAttiva),n.Bb(3),n.mc("disabled",!i.modificaAttiva)}}const hn=function(){return{marginTop:"70px"}},fn=[{path:"",component:be,data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO}},{path:"dati-azienda",component:lt,data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO_DATI_AZIENDA}},{path:"modalita-pagamento",component:Ft,data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO_MODALITA_PAGAMENTO}},{path:"eredi",component:xt,data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO_EREDE}},{path:"allevamenti",component:Oe,data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO_ALLEVAMENTI}},{path:"macchine",component:Mo,data:{mybreadcrumb:ei.a.FASCICOLO_MACCHINARI}},{path:"macchine/:idMacchina/dettaglio-macchina",component:ia,data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO_MACCHINARI}},{path:"fascicoli-validati",component:gi,data:{mybreadcrumb:ei.a.FASCICOLI_VALIDATI}},{path:"fabbricati",component:Lr,data:{mybreadcrumb:ei.a.FASCICOLO_FABBRICATI}},{path:"fabbricati/:idFabbricato/dettaglio-fabbricato",component:(()=>{class i{constructor(i,t,e,o,a){this.fb=i,this.route=t,this.fascicoloDettaglioService=e,this.messageService=o,this.router=a,this.cuaa="",this.idFabbricato="",this.modificaAttiva=!1,this.language=ci.a.itCalendar()}ngOnInit(){this.modificaAttiva=!1,this.cuaa=this.route.snapshot.paramMap.get("cuaa"),this.idFabbricato=this.route.snapshot.paramMap.get("idFabbricato"),this.getFabbricato(this.idFabbricato),this.initForm()}ngOnDestroy(){this.fabbricatiSubscription&&this.fabbricatiSubscription.unsubscribe()}initForm(){this.modificaFabbricato=this.fb.group({destinazioneFabbricato:[this.fabbricato.destinazione,b.G.required],tipologiaFabbricato:[this.fabbricato.tipologia,b.G.required],ubicazioneFabbricato:[this.fabbricato.ubicazione,b.G.required],utilizzatoriFabbricato:[this.fabbricato.utilizzatori,b.G.required],nrPostiFabbricato:[this.fabbricato.nrPosti,b.G.required],superficieCopertaFabbricato:[this.fabbricato.superficieCoperta,b.G.required],superficieScopertaFabbricato:[this.fabbricato.superficieScoperta,b.G.required],volumeFabbricato:[this.fabbricato.volume,b.G.required]})}handleClick(){this.fascicoloDettaglioService.mostraDettaglioSezione.next(_.a.LISTA_FABBRICATI)}getFabbricato(i){this.initDati()}initDati(){this.fabbricato=new _r,this.fabbricato.id=Number(this.idFabbricato),this.fabbricato.destinazione="Agricola",this.fabbricato.tipologia="Propriet\xe0",this.fabbricato.ubicazione="Trento",this.fabbricato.utilizzatori="Utilizzatori",this.fabbricato.volume=777,this.fabbricato.nrPosti=5,this.fabbricato.superficieCoperta=333,this.fabbricato.superficieScoperta=444}deleteFabbricato(i){console.log("Cancello fabbricato id: "+i.toString())}dettaglioFabbricato(i){console.log("Dettaglio fabbricato id: "+i.toString()),this.router.navigate([i.toString()+"/dettaglio-fabbricato"])}modificaDettaglio(){this.initForm(),this.modificaAttiva=!0}annullaModifica(){this.modificaAttiva=!1}onSubmit(){console.log("submit "+this.idFabbricato),this.modificaFabbricato.invalid?this.messageService.add(u.a.getToast("tst-fabbricati",u.b.error,"Dati non validi")):this.salva()}salva(){this.fabbricato.id=Number(this.idFabbricato),this.fabbricato.destinazione=this.modificaFabbricato.value.destinazioneFabbricato,this.fabbricato.tipologia=this.modificaFabbricato.value.tipologiaFabbricato,this.fabbricato.ubicazione=this.modificaFabbricato.value.ubicazioneFabbricato,this.fabbricato.utilizzatori=this.modificaFabbricato.value.utilizzatoriFabbricato,this.fabbricato.volume=this.modificaFabbricato.value.volumeFabbricato,this.fabbricato.nrPosti=this.modificaFabbricato.value.nrPostiFabbricato,this.fabbricato.superficieCoperta=this.modificaFabbricato.value.superficieCopertaFabbricato,this.fabbricato.superficieScoperta=this.modificaFabbricato.value.superficieScopertaFabbricato,this.messageService.add(u.a.getToast("tst-fabbricati",u.b.success,"Dati salvati")),this.modificaAttiva=!1}}return i.\u0275fac=function(t){return new(t||i)(n.Nb(b.f),n.Nb(x.a),n.Nb(L.a),n.Nb(p.d),n.Nb(x.e))},i.\u0275cmp=n.Hb({type:i,selectors:[["app-dettaglio-fabbricato"]],decls:84,vars:29,consts:[["key","tst-fabbricati"],[1,"ui-grid-fixed","boxgrey"],[1,"funzioni-grid","boxgrey"],[1,"d-flex","align-items-center","text-decoration-none","color-primary",3,"routerLink","click"],[1,"pi","pi-chevron-left",2,"font-size","2rem","color","black"],["src","assets/img/ico-dotazione.jpg"],[1,"text-uppercase","ml-2"],[3,"formGroup","ngSubmit"],[1,"accordion-wrapper","dettaglioaccordionmultiple"],["expandIcon","","collapseIcon",""],["header","DETTAGLIO FABBRICATO",3,"selected"],["align","right"],["pButton","","label","MODIFICA","pButton","",1,"pull-right",2,"background-color","green",3,"disabled","click"],[1,"table","table-hoover"],["width","25%"],[4,"ngIf"],["width","15%"],[1,"md-inputfield"],["size","80","pInputText","","id","ubicazioneFabbricato",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["class","alert alert-danger",4,"ngIf"],[1,"alert","alert-danger"],["size","80","pInputText","","id","tipologiaFabbricato",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["size","20","pInputText","","id","destinazioneFabbricato",2,"border","1px solid rgb(180, 178, 178)",3,"formControl"],["size","20","pInputText","","id","utilizzatoriFabbricato",2,"border","1px solid rgb(180, 178, 178)",3,"formControl"],["size","80","pInputText","","id","superficieCopertaFabbricato",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["size","80","pInputText","","id","superficieScopertaFabbricato",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["size","80","pInputText","","id","volumeFabbricato",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],["size","80","pInputText","","id","nrPostiFabbricato",2,"border","1px solid rgb(180, 178, 178)","width","100%",3,"formControl"],[1,"p-grid"],[1,"p-col-10"],[1,"p-col-1"],["pButton","","label","ANNULLA","pButton","",1,"pull-right",2,"background-color","green",3,"disabled","click"],["pButton","","label","SALVA","type","submit","pButton","",1,"pull-right",2,"background-color","green",3,"disabled"]],template:function(i,t){1&i&&(n.Ob(0,"p-toast",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"a",3),n.bc("click",(function(){return t.handleClick()})),n.Ob(4,"i",4),n.Ob(5,"img",5),n.Tb(6,"span",6),n.Oc(7),n.gc(8,"translate"),n.gc(9,"translate"),n.Sb(),n.Sb(),n.Ob(10,"br"),n.Tb(11,"form",7),n.bc("ngSubmit",(function(){return t.onSubmit()})),n.Tb(12,"div",8),n.Tb(13,"p-accordion",9),n.Tb(14,"p-accordionTab",10),n.Tb(15,"p",11),n.Tb(16,"button",12),n.bc("click",(function(){return t.modificaDettaglio()})),n.Sb(),n.Sb(),n.Tb(17,"table",13),n.Tb(18,"tbody"),n.Tb(19,"tr"),n.Tb(20,"td",14),n.Tb(21,"strong"),n.Oc(22,"Ubicazione:"),n.Sb(),n.Sb(),n.Tb(23,"td"),n.Mc(24,Rr,2,1,"div",15),n.Mc(25,Gr,4,2,"div",15),n.Sb(),n.Ob(26,"td",16),n.Sb(),n.Tb(27,"tr"),n.Tb(28,"td"),n.Tb(29,"strong"),n.Oc(30,"Tipologia:"),n.Sb(),n.Sb(),n.Tb(31,"td"),n.Mc(32,kr,2,1,"div",15),n.Mc(33,qr,4,2,"div",15),n.Sb(),n.Ob(34,"td"),n.Sb(),n.Tb(35,"tr"),n.Tb(36,"td"),n.Tb(37,"strong"),n.Oc(38,"Destinazione:"),n.Sb(),n.Sb(),n.Tb(39,"td"),n.Mc(40,Qr,2,1,"div",15),n.Mc(41,jr,4,2,"div",15),n.Sb(),n.Ob(42,"td"),n.Sb(),n.Tb(43,"tr"),n.Tb(44,"td"),n.Tb(45,"strong"),n.Oc(46,"Utilizzatori:"),n.Sb(),n.Sb(),n.Tb(47,"td"),n.Mc(48,Yr,2,1,"div",15),n.Mc(49,Wr,4,2,"div",15),n.Sb(),n.Ob(50,"td"),n.Sb(),n.Tb(51,"tr"),n.Tb(52,"td"),n.Tb(53,"strong"),n.Oc(54,"Superficie coperta:"),n.Sb(),n.Sb(),n.Tb(55,"td"),n.Mc(56,Xr,2,1,"div",15),n.Mc(57,en,4,2,"div",15),n.Sb(),n.Ob(58,"td"),n.Sb(),n.Tb(59,"tr"),n.Tb(60,"td"),n.Tb(61,"strong"),n.Oc(62,"Superficie scoperta:"),n.Sb(),n.Sb(),n.Tb(63,"td"),n.Mc(64,on,2,1,"div",15),n.Mc(65,rn,4,2,"div",15),n.Sb(),n.Ob(66,"td"),n.Sb(),n.Tb(67,"tr"),n.Tb(68,"td"),n.Tb(69,"strong"),n.Oc(70,"Volume:"),n.Sb(),n.Sb(),n.Tb(71,"td"),n.Mc(72,nn,2,1,"div",15),n.Mc(73,bn,4,2,"div",15),n.Sb(),n.Ob(74,"td"),n.Sb(),n.Tb(75,"tr"),n.Tb(76,"td"),n.Tb(77,"strong"),n.Oc(78,"Nr. posti:"),n.Sb(),n.Sb(),n.Tb(79,"td"),n.Mc(80,dn,2,1,"div",15),n.Mc(81,mn,4,2,"div",15),n.Sb(),n.Ob(82,"td"),n.Sb(),n.Sb(),n.Sb(),n.Mc(83,gn,10,2,"div",15),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&i&&(n.Kc(n.rc(28,hn)),n.Bb(7),n.Rc(" ",n.hc(8,24,"FascicoloAziendale.DOTAZIONE_TECNICA")," / ",n.hc(9,26,"FascicoloAziendale.FABBRICATI")," "),n.Bb(4),n.mc("formGroup",t.modificaFabbricato),n.Bb(3),n.mc("selected",!0),n.Bb(2),n.mc("disabled",t.modificaAttiva),n.Bb(8),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(7),n.mc("ngIf",!t.modificaAttiva),n.Bb(1),n.mc("ngIf",t.modificaAttiva),n.Bb(2),n.mc("ngIf",t.modificaAttiva))},directives:[g.a,x.h,b.I,b.t,b.k,f.a,f.c,T.b,r.t,b.c,ri.a,b.s,b.h],pipes:[m.d],styles:["[_nghost-%COMP%]   .w-10m[_ngcontent-%COMP%]{width:10em}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]{background-color:#4caf50!important;border-radius:unset;height:5em!important;width:13em!important;opacity:1}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}[_nghost-%COMP%]   .icon-button-rect[_ngcontent-%COMP%] >   span.ui-button-icon-left{font-size:2.5em}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]{background-color:#4caf50!important;border:1px solid #81c784;border-radius:unset;height:5em!important;width:5em!important;opacity:1}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]:disabled{opacity:.35;background-image:none;cursor:auto!important}[_nghost-%COMP%]   .icon-button-square[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}"]}),i})(),data:{mybreadcrumb:ei.a.FASCICOLO_DETTAGLIO_FABBRICATI}},{path:"dati-sospensione",component:ii,data:{mybreadcrumb:ei.a.DATI_SOSPENSIONE}},{path:"titoli-conduzione",component:V,data:{mybreadcrumb:ei.a.TITOLI_CONDUZIONE}}];let Tn=(()=>{class i{}return i.\u0275mod=n.Lb({type:i}),i.\u0275inj=n.Kb({factory:function(t){return new(t||i)},providers:[],imports:[[ti.a,h.b,x.i.forChild(fn)]]}),i})()},"eM/+":function(i,t,e){"use strict";e.d(t,"a",(function(){return o}));class o{static itCalendar(){return{firstDayOfWeek:0,dayNames:["Domenica","Luned\xec","Marted\xec","Mercoled\xec","Gioved\xec","Venerd\xec","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],today:"Oggi",clear:"Cancella"}}}}}]);
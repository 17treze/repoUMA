<p-confirmDialog
  header="Attenzione"
  class="ui-dialog-visible"
  icon="pi pi-exclamation-triangle"
  acceptIcon
  rejectIcon
  key="macchine-dialog"
  acceptLabel="SI"
  rejectLabel="NO"
  acceptButtonStyleClass="m-1 w-25"
  rejectButtonStyleClass="m-1 w-25"></p-confirmDialog>
<p-toast
  key="tst-macchine"
  [style]="{ marginTop: '70px' }"></p-toast>
<div class="p-grid">

  <!-- Prima riga: Save & Back -->
  <div class="p-grid w-100">
    <div class="p-col"></div>
    <div class="p-col-fixed p-0">
      <div class="p-grid m-0">
        <div
          class="p-col"
          *ngIf="inCompilazione">
          <button
            pButton
            class="w-10m"
            type="button"
            label="SALVA"
            (click)="saveMacchine()"></button>
        </div>
        <div class="p-col">
          <button
            pButton
            class="w-10m"
            type="button"
            icon="pi pi-chevron-circle-right"
            iconPos="right"
            label="PROCEDI"
            (click)="goNextStep()"></button>
        </div>
      </div>
    </div>
  </div>

  <!-- Seconda riga - Lista Macchine -->
  <div class="p-grid w-100">
    <div class="p-col">
      <p-table
        [value]="macchine"
        [resizableColumns]="true">
        <ng-template
          *ngIf="cols?.length"
          pTemplate="header">
          <tr>
            <th
              *ngFor="let col of cols"
              [pSortableColumn]="col.field"
              [pSortableColumnDisabled]="col.field == null"
              [width]="col.width"
              pResizableColumn>
              {{ col.header }}
              <p-sortIcon
                *ngIf="col.field != null"
                [field]="col.field"></p-sortIcon>
            </th>
            <th>
              <p-inputSwitch
                [disabled]="!inCompilazione"
                (onChange)="onClickSelezionaTutto()"
                [(ngModel)]="isSelectedAll"></p-inputSwitch>
            </th>
          </tr>
        </ng-template>
        <ng-template
          pTemplate="body"
          let-macchina>
          <tr>
            <td class="ui-resizable-column">{{ macchina.descrizione }}</td>
            <td class="ui-resizable-column">{{ macchina.classe }}</td>
            <td class="ui-resizable-column">{{ macchina.marca }}</td>
            <td class="ui-resizable-column">{{ macchina.alimentazione }}</td>
            <td class="ui-resizable-column">{{ macchina.targa }}</td>
            <td class="ui-resizable-column">{{ macchina.possesso }}</td>
            <td>
              <p-inputSwitch
                [disabled]="!inCompilazione"
                (onChange)="setIsSelectedAll()"
                [(ngModel)]="macchina.isUtilizzata"></p-inputSwitch>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>

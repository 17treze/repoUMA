<app-popup-ricerca-clienti-contoterzi
  #popupRicercaClienti
  (chiudiPopup)="openAllegatiClienteCreaDialog($event)"></app-popup-ricerca-clienti-contoterzi>
<app-popup-allegati-clienti-contoterzi
  #popupAllegatiCliente
  (chiudiPopup)="caricaListaClienti()"
  [READONLY_MODE]="READONLY_MODE"></app-popup-allegati-clienti-contoterzi>
<app-popup-cancella-cliente-contoterzi
  #popupCancellaCliente
  (chiudiPopup)="cancellaCliente($event)"></app-popup-cancella-cliente-contoterzi>
<p-toast
  key="tst"
  [style]="{ marginTop: '70px' }"></p-toast>
<div class="ui-g ui-fluid mt-5">
  <div class="ui-grid-fixed mt-2">
    <div class="p-col">
      <div class="p-grid p-align-center">
        <div class="p-col py-3">
          <a
            [routerLink]
            (click)="goBack()"
            class="d-flex align-items-center text-decoration-none color-primary">
            <i
              class="pi pi-chevron-left"
              style="font-size: 2rem; color: black"></i>
            <img src="assets/img/icons/uma-icon/icon-contoterzi_black.svg">
            <span class="ml-2">
              <strong class="fs-20">{{ 'UMA.DICHIARAZIONE_CONSUMI.CLIENTI_CONTOTERZI' | translate | uppercase }}</strong>
            </span>
          </a>
        </div>
        <div
          class="p-col-fixed w-10m p-0 py-1"
          *ngIf="!READONLY_MODE">
          <button
            pButton
            type="button"
            label="NUOVO"
            (click)="openRicercaClienteDialog()"></button>
        </div>
        <div class="boxgrey">
          <div class="p-grid">
            <div class="p-col-12 align-self-center w-100">
              <p-table [value]="listaClientiContoterzi">
                <ng-template
                  pTemplate="header"
                  let-columns>
                  <tr>
                    <th *ngIf="!READONLY_MODE"[ngStyle]="{'width': '4%'}"></th>
                    <th [ngStyle]="{'width': '20%'}">CUAA</th>
                    <th
                      [ngStyle]="{'width': '55%'}"
                      pSortableColumn="denominazione">
                      Denominazione
                      <p-sortIcon field="denominazione"></p-sortIcon>
                    </th>
                    <th [ngStyle]="{'width': '10%', 'text-align': 'center'}">Lavorazioni</th>
                    <th [ngStyle]="{'width': '6%', 'text-align': 'center'}">Allegati</th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-listaClientiContoterzi>
                  <tr>
                    <td *ngIf="!READONLY_MODE" [ngStyle]="{'text-align': 'center'}">
                      <img
                        src="assets/img/icons/uma-icon/icon-delete.png"
                        (click)="deleteClientiContoterzi(listaClientiContoterzi)">
                    </td>
                    <td>{{listaClientiContoterzi.cuaa}}</td>
                    <td>
                      {{listaClientiContoterzi.denominazione}}
                    </td>
                    <td>
                      <div>
                        <button
                          pButton
                          type="button"
                          class="icon-button-rect"
                          icon="pi pi-arrow-right"
                          (click)="onClickButton('LAVORAZIONI', listaClientiContoterzi)"></button>
                      </div>
                    </td>
                    <td [ngStyle]="{'text-align': 'center'}">
                      <div>
                        <button
                          pButton
                          type="button"
                          class="icon-button-square"
                          icon="pi pi-attachment"
                          (click)="onClickButton('ALLEGATI', listaClientiContoterzi)"></button>
                      </div>
                    </td>
                  </tr>
                </ng-template>
                <!-- template no Results -->
                <ng-template
                  pTemplate="emptymessage"
                  let-listaClientiContoterzi>
                  <tr>
                    <td [attr.colspan]="5">Nessun cliente inserito</td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

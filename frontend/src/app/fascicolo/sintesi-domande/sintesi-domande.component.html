<div class="ui-grid-fixed">
  <p-toast position="top-center" key="generic" [baseZIndex]="50000"></p-toast>
  <br><br>
  <h2 class="richiesta-title">
    {{ labels.consultazioneCertificazioneAntimafia }}
  </h2>

  <div class="boxgrey layout-actionmenu">
    <p-table
      [value]="dichiarazioniAntimafiaTable"
      [autoLayout]="true"
      [paginator]="true"
      [rows]="5"
      [responsive]="true">
      <ng-template pTemplate="header">
        <tr>
          <th>{{ labels.domanda }}</th>
          <th>{{ labels.dataPresentazione }}</th>
          <th>{{ labels.stato }}</th>
          <th>{{ labels.nrProtocollo }}</th>
          <th>{{ labels.azioni }}</th>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="body"
        let-domanda
        let-i="rowIndex">
        <tr>
          <td>
            {{ domanda.id ? domanda.id : ("gestioneUtenze.IN_PROTOCOLLAZIONE" | translate) }}
          </td>
          <td>
            {{
            domanda.dtProtocollazione
            ? (domanda.dtProtocollazione | date: "dd/MM/yyyy")
            : labels.nd
            }}
          </td>
          <td>
            {{
            domanda.stato.identificativo
            ? domanda.stato.identificativo
            : labels.nd
            }}
          </td>
          <td>
            {{ domanda.idProtocollo ? domanda.idProtocollo : labels.STATO_IN_PROTOCOLLAZIONE }}
          </td>
          <!-- condizioni mutuamente esclusive -->
          <td *ngIf="domanda.stato.identificativo == 'RIFIUTATA'">
            <action-menu
              #actionMenu
              [item]="menuActionFull"
              (click)="onDropdownMenuOpen(i)"></action-menu>
          </td>
          <td *ngIf="domanda.stato.identificativo != 'RIFIUTATA' && domanda.stato.identificativo != 'CONTROLLATA'">
            <action-menu
              #actionMenu
              [item]="menuActionMin"
              (click)="onDropdownMenuOpen(i)"></action-menu>
          </td>
          <td *ngIf="domanda.stato.identificativo != 'RIFIUTATA' && domanda.stato.identificativo == 'CONTROLLATA'">
            <action-menu
              #actionMenu
              [item]="menuAction"
              (click)="onDropdownMenuOpen(i)"></action-menu>
          </td>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="emptymessage"
        let-columns>
        <tr>
          <td [attr.colspan]="5">{{ labels.noDichiarazioneAntimafia }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
